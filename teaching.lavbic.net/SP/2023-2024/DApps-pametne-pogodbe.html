<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Poglavje 11 P5.1 DApps, pametne pogodbe in Solidity | Spletno programiranje 2023/2024</title>
  <meta name="description" content="Skripta za pomoč pri predmetu Spletno programiranje 2022/2023" />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Poglavje 11 P5.1 DApps, pametne pogodbe in Solidity | Spletno programiranje 2023/2024" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Skripta za pomoč pri predmetu Spletno programiranje 2022/2023" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Poglavje 11 P5.1 DApps, pametne pogodbe in Solidity | Spletno programiranje 2023/2024" />
  
  <meta name="twitter:description" content="Skripta za pomoč pri predmetu Spletno programiranje 2022/2023" />
  

<meta name="author" content="izr. prof. dr. Dejan Lavbič" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="Avtentikacija.html"/>
<link rel="next" href="LP2.html"/>
<script src="assets/lib/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="assets/lib/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="assets/lib/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="assets/lib/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="assets/lib/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="assets/lib/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="assets/lib/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="assets/lib/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="assets/lib/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="assets/lib/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="assets/lib/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="assets/lib/kePrint-0.0.1/kePrint.js"></script>
<link href="assets/lib/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="assets/style/stil.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html#terminski-plan-izvajanja-predmeta">SP 2023/2024 terminski plan</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Uvod</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#splošne-informacije"><i class="fa fa-check"></i>Splošne informacije</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#predavatelj"><i class="fa fa-check"></i>Predavatelj</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#asistent"><i class="fa fa-check"></i>Asistent</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#terminski-plan-izvajanja-predmeta"><i class="fa fa-check"></i>Terminski plan izvajanja predmeta</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#pravila-igre"><i class="fa fa-check"></i>Pravila igre</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#predavanja"><i class="fa fa-check"></i>Predavanja</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#vaje"><i class="fa fa-check"></i>Vaje</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#ocenjevanje"><i class="fa fa-check"></i>Ocenjevanje</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#pisni-izpiti"><i class="fa fa-check"></i>Pisni izpiti</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#priporočena-literatura"><i class="fa fa-check"></i>Priporočena literatura</a></li>
</ul></li>
<li class="part"><span><b>I sklop: Uvod v spletno programiranje</b></span></li>
<li class="chapter" data-level="1" data-path="P11.html"><a href="P11.html"><i class="fa fa-check"></i><b>1</b> <span class="sklop1 oznaka">P1.1</span> Svetovni splet in celostni razvoj programske opreme</a>
<ul>
<li class="chapter" data-level="1.1" data-path="P11.html"><a href="P11.html#infrastrukturni-in-arhitekturni-pogled-na-svetovni-splet"><i class="fa fa-check"></i><b>1.1</b> Infrastrukturni in arhitekturni pogled na svetovni splet</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="P11.html"><a href="P11.html#moorov-zakon"><i class="fa fa-check"></i><b>1.1.1</b> Moorov zakon</a></li>
<li class="chapter" data-level="1.1.2" data-path="P11.html"><a href="P11.html#internet-vs.-svetovni-splet"><i class="fa fa-check"></i><b>1.1.2</b> Internet vs. (svetovni) splet</a></li>
<li class="chapter" data-level="1.1.3" data-path="P11.html"><a href="P11.html#razvoj-interneta"><i class="fa fa-check"></i><b>1.1.3</b> Razvoj interneta</a></li>
<li class="chapter" data-level="1.1.4" data-path="P11.html"><a href="P11.html#razvoj-WWW"><i class="fa fa-check"></i><b>1.1.4</b> Razvoj (svetovnega) spleta</a></li>
<li class="chapter" data-level="1.1.5" data-path="P11.html"><a href="P11.html#arhitektura-odjemalecstrežnik"><i class="fa fa-check"></i><b>1.1.5</b> Arhitektura odjemalec/strežnik</a></li>
<li class="chapter" data-level="1.1.6" data-path="P11.html"><a href="P11.html#večnivojska-arhitektura"><i class="fa fa-check"></i><b>1.1.6</b> Večnivojska arhitektura</a></li>
<li class="chapter" data-level="1.1.7" data-path="P11.html"><a href="P11.html#pomembni-mejniki-in-akterji"><i class="fa fa-check"></i><b>1.1.7</b> Pomembni mejniki in akterji</a></li>
<li class="chapter" data-level="1.1.8" data-path="P11.html"><a href="P11.html#trenutno-stanje-na-trgu"><i class="fa fa-check"></i><b>1.1.8</b> Trenutno stanje na trgu</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="P11.html"><a href="P11.html#uporabljen-pristop-pri-predmetu"><i class="fa fa-check"></i><b>1.2</b> Uporabljen pristop pri predmetu</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="P11.html"><a href="P11.html#tehnologije-ki-jih-bomo-uporabljali"><i class="fa fa-check"></i><b>1.2.1</b> Tehnologije, ki jih bomo uporabljali</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="P11.html"><a href="P11.html#celostni-razvoj-programske-opreme-z-mean-arhitekturo"><i class="fa fa-check"></i><b>1.3</b> Celostni razvoj programske opreme z MEAN arhitekturo</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="P11.html"><a href="P11.html#Node-js-niti"><i class="fa fa-check"></i><b>1.3.1</b> Node.js</a></li>
<li class="chapter" data-level="1.3.2" data-path="P11.html"><a href="P11.html#express"><i class="fa fa-check"></i><b>1.3.2</b> Express</a></li>
<li class="chapter" data-level="1.3.3" data-path="P11.html"><a href="P11.html#MongoDB-uvod"><i class="fa fa-check"></i><b>1.3.3</b> MongoDB</a></li>
<li class="chapter" data-level="1.3.4" data-path="P11.html"><a href="P11.html#angular"><i class="fa fa-check"></i><b>1.3.4</b> Angular</a></li>
<li class="chapter" data-level="1.3.5" data-path="P11.html"><a href="P11.html#podporna-orodja-ogrodja-in-knjižnice"><i class="fa fa-check"></i><b>1.3.5</b> Podporna orodja, ogrodja in knjižnice</a></li>
<li class="chapter" data-level="1.3.6" data-path="P11.html"><a href="P11.html#git"><i class="fa fa-check"></i><b>1.3.6</b> Git</a></li>
<li class="chapter" data-level="1.3.7" data-path="P11.html"><a href="P11.html#heroku"><i class="fa fa-check"></i><b>1.3.7</b> Heroku</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="P11.html"><a href="P11.html#razvoj-dejanske-aplikacije"><i class="fa fa-check"></i><b>1.4</b> Razvoj dejanske aplikacije</a></li>
<li class="chapter" data-level="1.5" data-path="P11.html"><a href="P11.html#nacrtovanje-aplikacije-po-mean-arhitekturi"><i class="fa fa-check"></i><b>1.5</b> Načrtovanje aplikacije po MEAN arhitekturi</a></li>
<li class="chapter" data-level="1.6" data-path="P11.html"><a href="P11.html#dobre-prakse-pri-načrtovanju-in-implementaciji-aplikacije"><i class="fa fa-check"></i><b>1.6</b> Dobre prakse pri načrtovanju in implementaciji aplikacije</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="P11.html"><a href="P11.html#uporaba-api-ja-za-dostop-do-podatkovne-ravni"><i class="fa fa-check"></i><b>1.6.1</b> Uporaba API-ja za dostop do podatkovne ravni</a></li>
<li class="chapter" data-level="1.6.2" data-path="P11.html"><a href="P11.html#koraki-pri-nacrtovanju-nove-spletne-aplikacije"><i class="fa fa-check"></i><b>1.6.2</b> Koraki pri načrtovanju nove spletne aplikacije</a></li>
<li class="chapter" data-level="1.6.3" data-path="P11.html"><a href="P11.html#koraki-pri-implementaciji-nove-spletne-aplikacije"><i class="fa fa-check"></i><b>1.6.3</b> Koraki pri implementaciji nove spletne aplikacije</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="P11.html"><a href="P11.html#okolje"><i class="fa fa-check"></i><b>1.7</b> Okolje</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="P11.html"><a href="P11.html#razvojno-okolje"><i class="fa fa-check"></i><b>1.7.1</b> Razvojno okolje</a></li>
<li class="chapter" data-level="1.7.2" data-path="P11.html"><a href="P11.html#produkcijsko-okolje"><i class="fa fa-check"></i><b>1.7.2</b> Produkcijsko okolje</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="P11.html"><a href="P11.html#git-1"><i class="fa fa-check"></i><b>1.8</b> Git</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="P11.html"><a href="P11.html#osnovne-operacije-vcs"><i class="fa fa-check"></i><b>1.8.1</b> Osnovne operacije VCS</a></li>
<li class="chapter" data-level="1.8.2" data-path="P11.html"><a href="P11.html#posebnosti-porazdeljenih-sistemov-za-obvladovanje-verzij-dvcs"><i class="fa fa-check"></i><b>1.8.2</b> Posebnosti porazdeljenih sistemov za obvladovanje verzij (DVCS)</a></li>
<li class="chapter" data-level="1.8.3" data-path="P11.html"><a href="P11.html#dobre-prakse-uporabe-git"><i class="fa fa-check"></i><b>1.8.3</b> Dobre prakse uporabe Git</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="LP1.html"><a href="LP1.html"><i class="fa fa-check"></i><b>2</b> <span class="sklop4 oznaka">1. LP</span> Dinamična spletna aplikacija na strani strežnika in odjemalca</a>
<ul>
<li class="chapter" data-level="2.1" data-path="LP1.html"><a href="LP1.html#pravila-zahteve-in-omejitve"><i class="fa fa-check"></i><b>2.1</b> Pravila, zahteve in omejitve</a></li>
<li class="chapter" data-level="2.2" data-path="LP1.html"><a href="LP1.html#LP11"><i class="fa fa-check"></i><b>2.2</b> <span class="sklop1 oznaka">1. del</span> Osnutek aplikacije in wireframe model</a></li>
<li class="chapter" data-level="2.3" data-path="LP1.html"><a href="LP1.html#LP12"><i class="fa fa-check"></i><b>2.3</b> <span class="sklop2 oznaka">2. del</span> Arhitektura aplikacije in različna razvojna okolja</a></li>
<li class="chapter" data-level="2.4" data-path="LP1.html"><a href="LP1.html#LP13"><i class="fa fa-check"></i><b>2.4</b> <span class="sklop3 oznaka">3. del</span> Zaledni del in dostop do podatkovne baze</a></li>
<li class="chapter" data-level="2.5" data-path="LP1.html"><a href="LP1.html#LP14"><i class="fa fa-check"></i><b>2.5</b> <span class="sklop4 oznaka">4. del</span> Uporabniški vmesnik, SPA in avtentikacija</a></li>
<li class="chapter" data-level="2.6" data-path="LP1.html"><a href="LP1.html#kriteriji-vrednotenja"><i class="fa fa-check"></i><b>2.6</b> Kriteriji vrednotenja</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="HTML-CSS.html"><a href="HTML-CSS.html"><i class="fa fa-check"></i><b>3</b> <span class="sklop1 oznaka">P1.2</span> Osnovna spletna standarda HTML in CSS</a>
<ul>
<li class="chapter" data-level="3.1" data-path="HTML-CSS.html"><a href="HTML-CSS.html#html-tehnologija"><i class="fa fa-check"></i><b>3.1</b> HTML</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="HTML-CSS.html"><a href="HTML-CSS.html#enostaven-primer-html5-dokumenta"><i class="fa fa-check"></i><b>3.1.1</b> Enostaven primer HTML5 dokumenta</a></li>
<li class="chapter" data-level="3.1.2" data-path="HTML-CSS.html"><a href="HTML-CSS.html#ustreznost-html5-dokumenta"><i class="fa fa-check"></i><b>3.1.2</b> Ustreznost HTML5 dokumenta</a></li>
<li class="chapter" data-level="3.1.3" data-path="HTML-CSS.html"><a href="HTML-CSS.html#naslovi"><i class="fa fa-check"></i><b>3.1.3</b> Naslovi</a></li>
<li class="chapter" data-level="3.1.4" data-path="HTML-CSS.html"><a href="HTML-CSS.html#povezave"><i class="fa fa-check"></i><b>3.1.4</b> Povezave</a></li>
<li class="chapter" data-level="3.1.5" data-path="HTML-CSS.html"><a href="HTML-CSS.html#slike"><i class="fa fa-check"></i><b>3.1.5</b> Slike</a></li>
<li class="chapter" data-level="3.1.6" data-path="HTML-CSS.html"><a href="HTML-CSS.html#posebni-znaki-in-vodoravne-črte"><i class="fa fa-check"></i><b>3.1.6</b> Posebni znaki in vodoravne črte</a></li>
<li class="chapter" data-level="3.1.7" data-path="HTML-CSS.html"><a href="HTML-CSS.html#seznami"><i class="fa fa-check"></i><b>3.1.7</b> Seznami</a></li>
<li class="chapter" data-level="3.1.8" data-path="HTML-CSS.html"><a href="HTML-CSS.html#tabele"><i class="fa fa-check"></i><b>3.1.8</b> Tabele</a></li>
<li class="chapter" data-level="3.1.9" data-path="HTML-CSS.html"><a href="HTML-CSS.html#Spletni-obrazci-HTML"><i class="fa fa-check"></i><b>3.1.9</b> Spletni obrazci</a></li>
<li class="chapter" data-level="3.1.10" data-path="HTML-CSS.html"><a href="HTML-CSS.html#interne-povezave"><i class="fa fa-check"></i><b>3.1.10</b> Interne povezave</a></li>
<li class="chapter" data-level="3.1.11" data-path="HTML-CSS.html"><a href="HTML-CSS.html#meta-elementi"><i class="fa fa-check"></i><b>3.1.11</b> Meta elementi</a></li>
<li class="chapter" data-level="3.1.12" data-path="HTML-CSS.html"><a href="HTML-CSS.html#napredni-gradniki-spletnih-obrazcev"><i class="fa fa-check"></i><b>3.1.12</b> Napredni gradniki spletnih obrazcev</a></li>
<li class="chapter" data-level="3.1.13" data-path="HTML-CSS.html"><a href="HTML-CSS.html#samodejno-dopolnjevanje-vrednosti-pri-vnosnih-poljih"><i class="fa fa-check"></i><b>3.1.13</b> Samodejno dopolnjevanje vrednosti pri vnosnih poljih</a></li>
<li class="chapter" data-level="3.1.14" data-path="HTML-CSS.html"><a href="HTML-CSS.html#elementi-za-opredelitev-strukture-strani"><i class="fa fa-check"></i><b>3.1.14</b> Elementi za opredelitev strukture strani</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="HTML-CSS.html"><a href="HTML-CSS.html#prekrivni-slogi-css"><i class="fa fa-check"></i><b>3.2</b> Prekrivni slogi (CSS)</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="HTML-CSS.html"><a href="HTML-CSS.html#uvod-1"><i class="fa fa-check"></i><b>3.2.1</b> Uvod</a></li>
<li class="chapter" data-level="3.2.2" data-path="HTML-CSS.html"><a href="HTML-CSS.html#neposredno-opredeljeni-slogi"><i class="fa fa-check"></i><b>3.2.2</b> Neposredno opredeljeni slogi</a></li>
<li class="chapter" data-level="3.2.3" data-path="HTML-CSS.html"><a href="HTML-CSS.html#vgrajeni-slogi"><i class="fa fa-check"></i><b>3.2.3</b> Vgrajeni slogi</a></li>
<li class="chapter" data-level="3.2.4" data-path="HTML-CSS.html"><a href="HTML-CSS.html#konfliktni-slogi"><i class="fa fa-check"></i><b>3.2.4</b> Konfliktni slogi</a></li>
<li class="chapter" data-level="3.2.5" data-path="HTML-CSS.html"><a href="HTML-CSS.html#zunanji-slogi"><i class="fa fa-check"></i><b>3.2.5</b> Zunanji slogi</a></li>
<li class="chapter" data-level="3.2.6" data-path="HTML-CSS.html"><a href="HTML-CSS.html#pozicioniranje-elementov"><i class="fa fa-check"></i><b>3.2.6</b> Pozicioniranje elementov</a></li>
<li class="chapter" data-level="3.2.7" data-path="HTML-CSS.html"><a href="HTML-CSS.html#ozadje"><i class="fa fa-check"></i><b>3.2.7</b> Ozadje</a></li>
<li class="chapter" data-level="3.2.8" data-path="HTML-CSS.html"><a href="HTML-CSS.html#dimenzije-elementa"><i class="fa fa-check"></i><b>3.2.8</b> Dimenzije elementa</a></li>
<li class="chapter" data-level="3.2.9" data-path="HTML-CSS.html"><a href="HTML-CSS.html#model-škatle"><i class="fa fa-check"></i><b>3.2.9</b> Model škatle</a></li>
<li class="chapter" data-level="3.2.10" data-path="HTML-CSS.html"><a href="HTML-CSS.html#plavajoči-elementi"><i class="fa fa-check"></i><b>3.2.10</b> Plavajoči elementi</a></li>
<li class="chapter" data-level="3.2.11" data-path="HTML-CSS.html"><a href="HTML-CSS.html#vrste-medijev"><i class="fa fa-check"></i><b>3.2.11</b> Vrste medijev</a></li>
<li class="chapter" data-level="3.2.12" data-path="HTML-CSS.html"><a href="HTML-CSS.html#spustni-meniji"><i class="fa fa-check"></i><b>3.2.12</b> Spustni meniji</a></li>
<li class="chapter" data-level="3.2.13" data-path="HTML-CSS.html"><a href="HTML-CSS.html#senca-na-besedilu"><i class="fa fa-check"></i><b>3.2.13</b> Senca na besedilu</a></li>
<li class="chapter" data-level="3.2.14" data-path="HTML-CSS.html"><a href="HTML-CSS.html#zaobljeni-robovi"><i class="fa fa-check"></i><b>3.2.14</b> Zaobljeni robovi</a></li>
<li class="chapter" data-level="3.2.15" data-path="HTML-CSS.html"><a href="HTML-CSS.html#barva"><i class="fa fa-check"></i><b>3.2.15</b> Barva</a></li>
<li class="chapter" data-level="3.2.16" data-path="HTML-CSS.html"><a href="HTML-CSS.html#senca-na-modelu-škatle"><i class="fa fa-check"></i><b>3.2.16</b> Senca na modelu škatle</a></li>
<li class="chapter" data-level="3.2.17" data-path="HTML-CSS.html"><a href="HTML-CSS.html#uporaba-pisav-s-spleta"><i class="fa fa-check"></i><b>3.2.17</b> Uporaba pisav s spleta</a></li>
<li class="chapter" data-level="3.2.18" data-path="HTML-CSS.html"><a href="HTML-CSS.html#prilagodljiv-model-škatle-in-izbira-poljubnega-ugnezdenega-elementa"><i class="fa fa-check"></i><b>3.2.18</b> Prilagodljiv model škatle in izbira poljubnega ugnezdenega elementa</a></li>
<li class="chapter" data-level="3.2.19" data-path="HTML-CSS.html"><a href="HTML-CSS.html#postavitev-v-več-stolpcev"><i class="fa fa-check"></i><b>3.2.19</b> Postavitev v več stolpcev</a></li>
<li class="chapter" data-level="3.2.20" data-path="HTML-CSS.html"><a href="HTML-CSS.html#poizvedovanje-po-medijih"><i class="fa fa-check"></i><b>3.2.20</b> Poizvedovanje po medijih</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="HTML-CSS.html"><a href="HTML-CSS.html#bootstrap-1"><i class="fa fa-check"></i><b>3.3</b> Bootstrap</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="HTML-CSS.html"><a href="HTML-CSS.html#uvod-in-način-uporabe"><i class="fa fa-check"></i><b>3.3.1</b> Uvod in način uporabe</a></li>
<li class="chapter" data-level="3.3.2" data-path="HTML-CSS.html"><a href="HTML-CSS.html#enostavni-primer"><i class="fa fa-check"></i><b>3.3.2</b> Enostavni primer</a></li>
<li class="chapter" data-level="3.3.3" data-path="HTML-CSS.html"><a href="HTML-CSS.html#prilagajanje-vsebine-z-mrežnim-sistemom"><i class="fa fa-check"></i><b>3.3.3</b> Prilagajanje vsebine z mrežnim sistemom</a></li>
<li class="chapter" data-level="3.3.4" data-path="HTML-CSS.html"><a href="HTML-CSS.html#tipografija"><i class="fa fa-check"></i><b>3.3.4</b> Tipografija</a></li>
<li class="chapter" data-level="3.3.5" data-path="HTML-CSS.html"><a href="HTML-CSS.html#tabele-1"><i class="fa fa-check"></i><b>3.3.5</b> Tabele</a></li>
<li class="chapter" data-level="3.3.6" data-path="HTML-CSS.html"><a href="HTML-CSS.html#slike-1"><i class="fa fa-check"></i><b>3.3.6</b> Slike</a></li>
<li class="chapter" data-level="3.3.7" data-path="HTML-CSS.html"><a href="HTML-CSS.html#opozorila"><i class="fa fa-check"></i><b>3.3.7</b> Opozorila</a></li>
<li class="chapter" data-level="3.3.8" data-path="HTML-CSS.html"><a href="HTML-CSS.html#gumbi"><i class="fa fa-check"></i><b>3.3.8</b> Gumbi</a></li>
<li class="chapter" data-level="3.3.9" data-path="HTML-CSS.html"><a href="HTML-CSS.html#ikone"><i class="fa fa-check"></i><b>3.3.9</b> Ikone</a></li>
<li class="chapter" data-level="3.3.10" data-path="HTML-CSS.html"><a href="HTML-CSS.html#oznake"><i class="fa fa-check"></i><b>3.3.10</b> Oznake</a></li>
<li class="chapter" data-level="3.3.11" data-path="HTML-CSS.html"><a href="HTML-CSS.html#kazalnik-poteka"><i class="fa fa-check"></i><b>3.3.11</b> Kazalnik poteka</a></li>
<li class="chapter" data-level="3.3.12" data-path="HTML-CSS.html"><a href="HTML-CSS.html#prehodi-po-straneh"><i class="fa fa-check"></i><b>3.3.12</b> Prehodi po straneh</a></li>
<li class="chapter" data-level="3.3.13" data-path="HTML-CSS.html"><a href="HTML-CSS.html#plošča"><i class="fa fa-check"></i><b>3.3.13</b> Plošča</a></li>
<li class="chapter" data-level="3.3.14" data-path="HTML-CSS.html"><a href="HTML-CSS.html#spustni-meni"><i class="fa fa-check"></i><b>3.3.14</b> Spustni meni</a></li>
<li class="chapter" data-level="3.3.15" data-path="HTML-CSS.html"><a href="HTML-CSS.html#spletni-obrazci"><i class="fa fa-check"></i><b>3.3.15</b> Spletni obrazci</a></li>
<li class="chapter" data-level="3.3.16" data-path="HTML-CSS.html"><a href="HTML-CSS.html#modalno-okno"><i class="fa fa-check"></i><b>3.3.16</b> Modalno okno</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="HTML-CSS.html"><a href="HTML-CSS.html#praktični-prikaz-uporabe-css"><i class="fa fa-check"></i><b>3.4</b> Praktični prikaz uporabe CSS</a></li>
</ul></li>
<li class="part"><span><b>II sklop: JavaScript - programski jezik na strani odjemalca in strežnika</b></span></li>
<li class="chapter" data-level="4" data-path="JavaScript.html"><a href="JavaScript.html"><i class="fa fa-check"></i><b>4</b> <span class="sklop2 oznaka">P2.1</span> JavaScript, jezik svetovnega spleta</a>
<ul>
<li class="chapter" data-level="4.1" data-path="JavaScript.html"><a href="JavaScript.html#razvoj-jezika"><i class="fa fa-check"></i><b>4.1</b> Razvoj jezika</a></li>
<li class="chapter" data-level="4.2" data-path="JavaScript.html"><a href="JavaScript.html#vrednosti-podatkovni-tipi-in-operatorji"><i class="fa fa-check"></i><b>4.2</b> Vrednosti, podatkovni tipi in operatorji</a></li>
<li class="chapter" data-level="4.3" data-path="JavaScript.html"><a href="JavaScript.html#struktura-programa"><i class="fa fa-check"></i><b>4.3</b> Struktura programa</a></li>
<li class="chapter" data-level="4.4" data-path="JavaScript.html"><a href="JavaScript.html#kontrolni-stavki"><i class="fa fa-check"></i><b>4.4</b> Kontrolni stavki</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="JavaScript.html"><a href="JavaScript.html#if-stavek"><i class="fa fa-check"></i><b>4.4.1</b> <code>if</code> stavek</a></li>
<li class="chapter" data-level="4.4.2" data-path="JavaScript.html"><a href="JavaScript.html#if...else-stavek"><i class="fa fa-check"></i><b>4.4.2</b> <code>if...else</code> stavek</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="JavaScript.html"><a href="JavaScript.html#operatorji"><i class="fa fa-check"></i><b>4.5</b> Operatorji</a></li>
<li class="chapter" data-level="4.6" data-path="JavaScript.html"><a href="JavaScript.html#struktura-ponavljanja"><i class="fa fa-check"></i><b>4.6</b> Struktura ponavljanja</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="JavaScript.html"><a href="JavaScript.html#while-stavek"><i class="fa fa-check"></i><b>4.6.1</b> <code>while</code> stavek</a></li>
<li class="chapter" data-level="4.6.2" data-path="JavaScript.html"><a href="JavaScript.html#for-stavek"><i class="fa fa-check"></i><b>4.6.2</b> <code>for</code> stavek</a></li>
<li class="chapter" data-level="4.6.3" data-path="JavaScript.html"><a href="JavaScript.html#do...while-stavek"><i class="fa fa-check"></i><b>4.6.3</b> <code>do...while</code> stavek</a></li>
<li class="chapter" data-level="4.6.4" data-path="JavaScript.html"><a href="JavaScript.html#break-in-continue"><i class="fa fa-check"></i><b>4.6.4</b> <code>break</code> in <code>continue</code></a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="JavaScript.html"><a href="JavaScript.html#funkcije"><i class="fa fa-check"></i><b>4.7</b> Funkcije</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="JavaScript.html"><a href="JavaScript.html#opredelitev-funkcije"><i class="fa fa-check"></i><b>4.7.1</b> Opredelitev funkcije</a></li>
<li class="chapter" data-level="4.7.2" data-path="JavaScript.html"><a href="JavaScript.html#parametri-in-kontekst"><i class="fa fa-check"></i><b>4.7.2</b> Parametri in kontekst</a></li>
<li class="chapter" data-level="4.7.3" data-path="JavaScript.html"><a href="JavaScript.html#zaprtje"><i class="fa fa-check"></i><b>4.7.3</b> Zaprtje</a></li>
<li class="chapter" data-level="4.7.4" data-path="JavaScript.html"><a href="JavaScript.html#rekurzija"><i class="fa fa-check"></i><b>4.7.4</b> Rekurzija</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="JavaScript.html"><a href="JavaScript.html#podatkovne-strukture"><i class="fa fa-check"></i><b>4.8</b> Podatkovne strukture</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="JavaScript.html"><a href="JavaScript.html#nizi-in-njihove-lastnosti"><i class="fa fa-check"></i><b>4.8.1</b> Nizi in njihove lastnosti</a></li>
<li class="chapter" data-level="4.8.2" data-path="JavaScript.html"><a href="JavaScript.html#objekt-argumentov-funkcije"><i class="fa fa-check"></i><b>4.8.2</b> Objekt argumentov funkcije</a></li>
<li class="chapter" data-level="4.8.3" data-path="JavaScript.html"><a href="JavaScript.html#json"><i class="fa fa-check"></i><b>4.8.3</b> JSON</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="JavaScript.html"><a href="JavaScript.html#funkcije-višjega-reda"><i class="fa fa-check"></i><b>4.9</b> Funkcije višjega reda</a>
<ul>
<li class="chapter" data-level="4.9.1" data-path="JavaScript.html"><a href="JavaScript.html#abstrakcija"><i class="fa fa-check"></i><b>4.9.1</b> Abstrakcija</a></li>
<li class="chapter" data-level="4.9.2" data-path="JavaScript.html"><a href="JavaScript.html#funkcije-višjega-reda-1"><i class="fa fa-check"></i><b>4.9.2</b> Funkcije višjega reda</a></li>
<li class="chapter" data-level="4.9.3" data-path="JavaScript.html"><a href="JavaScript.html#posredovanje-argumentov"><i class="fa fa-check"></i><b>4.9.3</b> Posredovanje argumentov</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="JavaScript.html"><a href="JavaScript.html#objekti"><i class="fa fa-check"></i><b>4.10</b> Objekti</a>
<ul>
<li class="chapter" data-level="4.10.1" data-path="JavaScript.html"><a href="JavaScript.html#metode"><i class="fa fa-check"></i><b>4.10.1</b> Metode</a></li>
<li class="chapter" data-level="4.10.2" data-path="JavaScript.html"><a href="JavaScript.html#prototipi"><i class="fa fa-check"></i><b>4.10.2</b> Prototipi</a></li>
<li class="chapter" data-level="4.10.3" data-path="JavaScript.html"><a href="JavaScript.html#konstruktorji"><i class="fa fa-check"></i><b>4.10.3</b> Konstruktorji</a></li>
<li class="chapter" data-level="4.10.4" data-path="JavaScript.html"><a href="JavaScript.html#razredna-notacija"><i class="fa fa-check"></i><b>4.10.4</b> Razredna notacija</a></li>
<li class="chapter" data-level="4.10.5" data-path="JavaScript.html"><a href="JavaScript.html#prekrivanje-lastnosti"><i class="fa fa-check"></i><b>4.10.5</b> Prekrivanje lastnosti</a></li>
<li class="chapter" data-level="4.10.6" data-path="JavaScript.html"><a href="JavaScript.html#get-in-set-metode"><i class="fa fa-check"></i><b>4.10.6</b> <code>Get</code> in <code>set</code> metode</a></li>
<li class="chapter" data-level="4.10.7" data-path="JavaScript.html"><a href="JavaScript.html#primerek"><i class="fa fa-check"></i><b>4.10.7</b> Primerek</a></li>
</ul></li>
<li class="chapter" data-level="4.11" data-path="JavaScript.html"><a href="JavaScript.html#hrošči-in-obvladovanje-napak"><i class="fa fa-check"></i><b>4.11</b> Hrošči in obvladovanje napak</a>
<ul>
<li class="chapter" data-level="4.11.1" data-path="JavaScript.html"><a href="JavaScript.html#strog-način-delovanja"><i class="fa fa-check"></i><b>4.11.1</b> Strog način delovanja</a></li>
<li class="chapter" data-level="4.11.2" data-path="JavaScript.html"><a href="JavaScript.html#testiranje"><i class="fa fa-check"></i><b>4.11.2</b> Testiranje</a></li>
<li class="chapter" data-level="4.11.3" data-path="JavaScript.html"><a href="JavaScript.html#obvladovanje-izjem"><i class="fa fa-check"></i><b>4.11.3</b> Obvladovanje izjem</a></li>
</ul></li>
<li class="chapter" data-level="4.12" data-path="JavaScript.html"><a href="JavaScript.html#regularni-izrazi"><i class="fa fa-check"></i><b>4.12</b> Regularni izrazi</a>
<ul>
<li class="chapter" data-level="4.12.1" data-path="JavaScript.html"><a href="JavaScript.html#kreiranje-regularnega-izraza"><i class="fa fa-check"></i><b>4.12.1</b> Kreiranje regularnega izraza</a></li>
<li class="chapter" data-level="4.12.2" data-path="JavaScript.html"><a href="JavaScript.html#testiranje-ujemanja"><i class="fa fa-check"></i><b>4.12.2</b> Testiranje ujemanja</a></li>
<li class="chapter" data-level="4.12.3" data-path="JavaScript.html"><a href="JavaScript.html#testiranje-ujemanja-množice-znakov"><i class="fa fa-check"></i><b>4.12.3</b> Testiranje ujemanja množice znakov</a></li>
<li class="chapter" data-level="4.12.4" data-path="JavaScript.html"><a href="JavaScript.html#ponavljanje-delov-vzorca"><i class="fa fa-check"></i><b>4.12.4</b> Ponavljanje delov vzorca</a></li>
<li class="chapter" data-level="4.12.5" data-path="JavaScript.html"><a href="JavaScript.html#združevanje-delov-vzorca"><i class="fa fa-check"></i><b>4.12.5</b> Združevanje delov vzorca</a></li>
<li class="chapter" data-level="4.12.6" data-path="JavaScript.html"><a href="JavaScript.html#ujemanje-in-grupiranje"><i class="fa fa-check"></i><b>4.12.6</b> Ujemanje in grupiranje</a></li>
<li class="chapter" data-level="4.12.7" data-path="JavaScript.html"><a href="JavaScript.html#omejevanje-besed"><i class="fa fa-check"></i><b>4.12.7</b> Omejevanje besed</a></li>
<li class="chapter" data-level="4.12.8" data-path="JavaScript.html"><a href="JavaScript.html#vzorci-z-več-možnostmi"><i class="fa fa-check"></i><b>4.12.8</b> Vzorci z več možnostmi</a></li>
<li class="chapter" data-level="4.12.9" data-path="JavaScript.html"><a href="JavaScript.html#zamenjava-podnizov"><i class="fa fa-check"></i><b>4.12.9</b> Zamenjava podnizov</a></li>
<li class="chapter" data-level="4.12.10" data-path="JavaScript.html"><a href="JavaScript.html#požrešna-metoda-ujemanja"><i class="fa fa-check"></i><b>4.12.10</b> Požrešna metoda ujemanja</a></li>
<li class="chapter" data-level="4.12.11" data-path="JavaScript.html"><a href="JavaScript.html#dinamično-kreiranje-regexp-objektov"><i class="fa fa-check"></i><b>4.12.11</b> Dinamično kreiranje <code>RegExp</code> objektov</a></li>
<li class="chapter" data-level="4.12.12" data-path="JavaScript.html"><a href="JavaScript.html#sprehod-po-zadetkih-ujemanja"><i class="fa fa-check"></i><b>4.12.12</b> Sprehod po zadetkih ujemanja</a></li>
</ul></li>
<li class="chapter" data-level="4.13" data-path="JavaScript.html"><a href="JavaScript.html#moduli"><i class="fa fa-check"></i><b>4.13</b> Moduli</a>
<ul>
<li class="chapter" data-level="4.13.1" data-path="JavaScript.html"><a href="JavaScript.html#uporaba-funkcij-v-vlogi-imenskega-prostora"><i class="fa fa-check"></i><b>4.13.1</b> Uporaba funkcij v vlogi imenskega prostora</a></li>
<li class="chapter" data-level="4.13.2" data-path="JavaScript.html"><a href="JavaScript.html#objekti-kot-vmesniki"><i class="fa fa-check"></i><b>4.13.2</b> Objekti kot vmesniki</a></li>
<li class="chapter" data-level="4.13.3" data-path="JavaScript.html"><a href="JavaScript.html#izvajanje-podatkov-v-obliki-kode"><i class="fa fa-check"></i><b>4.13.3</b> Izvajanje podatkov v obliki kode</a></li>
</ul></li>
<li class="chapter" data-level="4.14" data-path="JavaScript.html"><a href="JavaScript.html#javascript-in-spletni-brskalnik"><i class="fa fa-check"></i><b>4.14</b> JavaScript in spletni brskalnik</a>
<ul>
<li class="chapter" data-level="4.14.1" data-path="JavaScript.html"><a href="JavaScript.html#html-in-javascript"><i class="fa fa-check"></i><b>4.14.1</b> HTML in JavaScript</a></li>
<li class="chapter" data-level="4.14.2" data-path="JavaScript.html"><a href="JavaScript.html#zaščiteno-okolje"><i class="fa fa-check"></i><b>4.14.2</b> Zaščiteno okolje</a></li>
</ul></li>
<li class="chapter" data-level="4.15" data-path="JavaScript.html"><a href="JavaScript.html#objektni-model-dokumenta"><i class="fa fa-check"></i><b>4.15</b> Objektni model dokumenta</a>
<ul>
<li class="chapter" data-level="4.15.1" data-path="JavaScript.html"><a href="JavaScript.html#struktura-dokumenta-in-predstavitev-v-obliki-drevesa"><i class="fa fa-check"></i><b>4.15.1</b> Struktura dokumenta in predstavitev v obliki drevesa</a></li>
<li class="chapter" data-level="4.15.2" data-path="JavaScript.html"><a href="JavaScript.html#iskanje-elementov"><i class="fa fa-check"></i><b>4.15.2</b> Iskanje elementov</a></li>
<li class="chapter" data-level="4.15.3" data-path="JavaScript.html"><a href="JavaScript.html#spreminjanje-dokumenta"><i class="fa fa-check"></i><b>4.15.3</b> Spreminjanje dokumenta</a></li>
<li class="chapter" data-level="4.15.4" data-path="JavaScript.html"><a href="JavaScript.html#dodajanje-elementov"><i class="fa fa-check"></i><b>4.15.4</b> Dodajanje elementov</a></li>
<li class="chapter" data-level="4.15.5" data-path="JavaScript.html"><a href="JavaScript.html#uporaba-lastnih-atributov"><i class="fa fa-check"></i><b>4.15.5</b> Uporaba lastnih atributov</a></li>
<li class="chapter" data-level="4.15.6" data-path="JavaScript.html"><a href="JavaScript.html#postavitev-na-strani"><i class="fa fa-check"></i><b>4.15.6</b> Postavitev na strani</a></li>
<li class="chapter" data-level="4.15.7" data-path="JavaScript.html"><a href="JavaScript.html#oblikovanje-in-prekrivni-slogi"><i class="fa fa-check"></i><b>4.15.7</b> Oblikovanje in prekrivni slogi</a></li>
</ul></li>
<li class="chapter" data-level="4.16" data-path="JavaScript.html"><a href="JavaScript.html#obvladovanje-dogodkov"><i class="fa fa-check"></i><b>4.16</b> Obvladovanje dogodkov</a>
<ul>
<li class="chapter" data-level="4.16.1" data-path="JavaScript.html"><a href="JavaScript.html#dogodki-na-html-gradnikih"><i class="fa fa-check"></i><b>4.16.1</b> Dogodki na HTML gradnikih</a></li>
<li class="chapter" data-level="4.16.2" data-path="JavaScript.html"><a href="JavaScript.html#objekt-dogodka"><i class="fa fa-check"></i><b>4.16.2</b> Objekt dogodka</a></li>
<li class="chapter" data-level="4.16.3" data-path="JavaScript.html"><a href="JavaScript.html#širjenje-obvladovanja-dogodkov"><i class="fa fa-check"></i><b>4.16.3</b> Širjenje obvladovanja dogodkov</a></li>
<li class="chapter" data-level="4.16.4" data-path="JavaScript.html"><a href="JavaScript.html#privzete-akcije"><i class="fa fa-check"></i><b>4.16.4</b> Privzete akcije</a></li>
<li class="chapter" data-level="4.16.5" data-path="JavaScript.html"><a href="JavaScript.html#pritisk-tipke-na-tipkovnici"><i class="fa fa-check"></i><b>4.16.5</b> Pritisk tipke na tipkovnici</a></li>
<li class="chapter" data-level="4.16.6" data-path="JavaScript.html"><a href="JavaScript.html#dogodki-z-miško"><i class="fa fa-check"></i><b>4.16.6</b> Dogodki z miško</a></li>
<li class="chapter" data-level="4.16.7" data-path="JavaScript.html"><a href="JavaScript.html#fokusiranje"><i class="fa fa-check"></i><b>4.16.7</b> Fokusiranje</a></li>
<li class="chapter" data-level="4.16.8" data-path="JavaScript.html"><a href="JavaScript.html#dogodek-nalaganja"><i class="fa fa-check"></i><b>4.16.8</b> Dogodek nalaganja</a></li>
<li class="chapter" data-level="4.16.9" data-path="JavaScript.html"><a href="JavaScript.html#časovniki"><i class="fa fa-check"></i><b>4.16.9</b> Časovniki</a></li>
<li class="chapter" data-level="4.16.10" data-path="JavaScript.html"><a href="JavaScript.html#čas-poteka"><i class="fa fa-check"></i><b>4.16.10</b> Čas poteka</a></li>
</ul></li>
<li class="chapter" data-level="4.17" data-path="JavaScript.html"><a href="JavaScript.html#http"><i class="fa fa-check"></i><b>4.17</b> HTTP</a>
<ul>
<li class="chapter" data-level="4.17.1" data-path="JavaScript.html"><a href="JavaScript.html#spletni-brskalniki-in-http"><i class="fa fa-check"></i><b>4.17.1</b> Spletni brskalniki in HTTP</a></li>
<li class="chapter" data-level="4.17.2" data-path="JavaScript.html"><a href="JavaScript.html#posredovanje-zahteve"><i class="fa fa-check"></i><b>4.17.2</b> Posredovanje zahteve</a></li>
<li class="chapter" data-level="4.17.3" data-path="JavaScript.html"><a href="JavaScript.html#http-peskovnik"><i class="fa fa-check"></i><b>4.17.3</b> HTTP peskovnik</a></li>
<li class="chapter" data-level="4.17.4" data-path="JavaScript.html"><a href="JavaScript.html#abstrakcija-zahtev"><i class="fa fa-check"></i><b>4.17.4</b> Abstrakcija zahtev</a></li>
<li class="chapter" data-level="4.17.5" data-path="JavaScript.html"><a href="JavaScript.html#promises"><i class="fa fa-check"></i><b>4.17.5</b> Promises</a></li>
</ul></li>
<li class="chapter" data-level="4.18" data-path="JavaScript.html"><a href="JavaScript.html#spletni-obrazci-in-vnosna-polja"><i class="fa fa-check"></i><b>4.18</b> Spletni obrazci in vnosna polja</a>
<ul>
<li class="chapter" data-level="4.18.1" data-path="JavaScript.html"><a href="JavaScript.html#vnosna-polja"><i class="fa fa-check"></i><b>4.18.1</b> Vnosna polja</a></li>
<li class="chapter" data-level="4.18.2" data-path="JavaScript.html"><a href="JavaScript.html#fokus-vnosa-s-tipkovnico"><i class="fa fa-check"></i><b>4.18.2</b> Fokus vnosa s tipkovnico</a></li>
<li class="chapter" data-level="4.18.3" data-path="JavaScript.html"><a href="JavaScript.html#onemogočeni-elementi-spletnega-obrazca"><i class="fa fa-check"></i><b>4.18.3</b> Onemogočeni elementi spletnega obrazca</a></li>
<li class="chapter" data-level="4.18.4" data-path="JavaScript.html"><a href="JavaScript.html#spletni-obrazec-kot-celota"><i class="fa fa-check"></i><b>4.18.4</b> Spletni obrazec kot celota</a></li>
<li class="chapter" data-level="4.18.5" data-path="JavaScript.html"><a href="JavaScript.html#besedilna-vnosna-polja"><i class="fa fa-check"></i><b>4.18.5</b> Besedilna vnosna polja</a></li>
<li class="chapter" data-level="4.18.6" data-path="JavaScript.html"><a href="JavaScript.html#gradniki-večkratne-izbire"><i class="fa fa-check"></i><b>4.18.6</b> Gradniki (večkratne) izbire</a></li>
<li class="chapter" data-level="4.18.7" data-path="JavaScript.html"><a href="JavaScript.html#izbirna-polja"><i class="fa fa-check"></i><b>4.18.7</b> Izbirna polja</a></li>
<li class="chapter" data-level="4.18.8" data-path="JavaScript.html"><a href="JavaScript.html#vnosno-polje-datoteke"><i class="fa fa-check"></i><b>4.18.8</b> Vnosno polje datoteke</a></li>
<li class="chapter" data-level="4.18.9" data-path="JavaScript.html"><a href="JavaScript.html#shranjevanje-podatkov-na-odjemalcu"><i class="fa fa-check"></i><b>4.18.9</b> Shranjevanje podatkov na odjemalcu</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="Node-js.html"><a href="Node-js.html"><i class="fa fa-check"></i><b>5</b> <span class="sklop2 oznaka">P2.2</span> Node.js, MVC in različna okolja</a>
<ul>
<li class="chapter" data-level="5.1" data-path="Node-js.html"><a href="Node-js.html#node.js"><i class="fa fa-check"></i><b>5.1</b> Node.js</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="Node-js.html"><a href="Node-js.html#ozadje-1"><i class="fa fa-check"></i><b>5.1.1</b> Ozadje</a></li>
<li class="chapter" data-level="5.1.2" data-path="Node-js.html"><a href="Node-js.html#asinhronost"><i class="fa fa-check"></i><b>5.1.2</b> Asinhronost</a></li>
<li class="chapter" data-level="5.1.3" data-path="Node-js.html"><a href="Node-js.html#ukaz-node"><i class="fa fa-check"></i><b>5.1.3</b> Ukaz <code>node</code></a></li>
<li class="chapter" data-level="5.1.4" data-path="Node-js.html"><a href="Node-js.html#moduli-1"><i class="fa fa-check"></i><b>5.1.4</b> Moduli</a></li>
<li class="chapter" data-level="5.1.5" data-path="Node-js.html"><a href="Node-js.html#nameščanje-z-npm"><i class="fa fa-check"></i><b>5.1.5</b> Nameščanje z <code>npm</code></a></li>
<li class="chapter" data-level="5.1.6" data-path="Node-js.html"><a href="Node-js.html#modul-za-dostop-do-datotečnega-sistema"><i class="fa fa-check"></i><b>5.1.6</b> Modul za dostop do datotečnega sistema</a></li>
<li class="chapter" data-level="5.1.7" data-path="Node-js.html"><a href="Node-js.html#modul-http"><i class="fa fa-check"></i><b>5.1.7</b> Modul <code>http</code></a></li>
<li class="chapter" data-level="5.1.8" data-path="Node-js.html"><a href="Node-js.html#tok-podatkov"><i class="fa fa-check"></i><b>5.1.8</b> Tok podatkov</a></li>
<li class="chapter" data-level="5.1.9" data-path="Node-js.html"><a href="Node-js.html#enostavni-datotečni-strežnik"><i class="fa fa-check"></i><b>5.1.9</b> Enostavni datotečni strežnik</a></li>
<li class="chapter" data-level="5.1.10" data-path="Node-js.html"><a href="Node-js.html#obvladovanje-napak"><i class="fa fa-check"></i><b>5.1.10</b> Obvladovanje napak</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="Node-js.html"><a href="Node-js.html#vzpostavitev-in-nastavitev-projekta"><i class="fa fa-check"></i><b>5.2</b> Vzpostavitev in nastavitev projekta</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="Node-js.html"><a href="Node-js.html#pregled-uporabljenih-orodij-express-node-in-npm"><i class="fa fa-check"></i><b>5.2.1</b> Pregled uporabljenih orodij Express, Node in <code>npm</code></a></li>
<li class="chapter" data-level="5.2.2" data-path="Node-js.html"><a href="Node-js.html#kreiranje-projekta-express"><i class="fa fa-check"></i><b>5.2.2</b> Kreiranje projekta Express</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="Node-js.html"><a href="Node-js.html#gradnja-aplikacije-z-mvc"><i class="fa fa-check"></i><b>5.3</b> Gradnja aplikacije z MVC</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="Node-js.html"><a href="Node-js.html#kratek-pregled-mvc-arhitekture"><i class="fa fa-check"></i><b>5.3.1</b> Kratek pregled MVC arhitekture</a></li>
<li class="chapter" data-level="5.3.2" data-path="Node-js.html"><a href="Node-js.html#kako-express-obdela-zahteve"><i class="fa fa-check"></i><b>5.3.2</b> Kako Express obdela zahteve?</a></li>
<li class="chapter" data-level="5.3.3" data-path="Node-js.html"><a href="Node-js.html#gradnja-statične-aplikacije-z-node-in-express"><i class="fa fa-check"></i><b>5.3.3</b> Gradnja statične aplikacije z Node in Express</a></li>
<li class="chapter" data-level="5.3.4" data-path="Node-js.html"><a href="Node-js.html#prilagoditev-ogrodja-express-za-mvc"><i class="fa fa-check"></i><b>5.3.4</b> Prilagoditev ogrodja Express za MVC</a></li>
<li class="chapter" data-level="5.3.5" data-path="Node-js.html"><a href="Node-js.html#dodajanje-zunanjih-knjižnic-za-prilagoditev-izgleda-strani"><i class="fa fa-check"></i><b>5.3.5</b> Dodajanje zunanjih knjižnic za prilagoditev izgleda strani</a></li>
<li class="chapter" data-level="5.3.6" data-path="Node-js.html"><a href="Node-js.html#opredelitev-usmerjevalnikov-v-express"><i class="fa fa-check"></i><b>5.3.6</b> Opredelitev usmerjevalnikov v Express</a></li>
<li class="chapter" data-level="5.3.7" data-path="Node-js.html"><a href="Node-js.html#izdelava-osnovnih-krmilnikov"><i class="fa fa-check"></i><b>5.3.7</b> Izdelava osnovnih krmilnikov</a></li>
<li class="chapter" data-level="5.3.8" data-path="Node-js.html"><a href="Node-js.html#dopolnitev-pogledov"><i class="fa fa-check"></i><b>5.3.8</b> Dopolnitev pogledov</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="Node-js.html"><a href="Node-js.html#strežba-aplikacije-v-različnih-okoljih"><i class="fa fa-check"></i><b>5.4</b> Strežba aplikacije v različnih okoljih</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="Node-js.html"><a href="Node-js.html#docker"><i class="fa fa-check"></i><b>5.4.1</b> Strežba aplikacije v okolju Docker</a></li>
<li class="chapter" data-level="5.4.2" data-path="Node-js.html"><a href="Node-js.html#strežba-aplikacije-na-fly"><i class="fa fa-check"></i><b>5.4.2</b> Strežba aplikacije na Fly</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III sklop: Zaledni del in dostop do podatkov</b></span></li>
<li class="chapter" data-level="6" data-path="PB-REST-API.html"><a href="PB-REST-API.html"><i class="fa fa-check"></i><b>6</b> <span class="sklop3 oznaka">P3.1</span> Podatkovna baza in REST API</a>
<ul>
<li class="chapter" data-level="6.1" data-path="PB-REST-API.html"><a href="PB-REST-API.html#priprava-podatkovnega-modela-za-mongodb-z-mongoose"><i class="fa fa-check"></i><b>6.1</b> Priprava podatkovnega modela za MongoDB z Mongoose</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="PB-REST-API.html"><a href="PB-REST-API.html#Povezovanje-Express-aplikacije-in-MongoDB-z-Mongoose"><i class="fa fa-check"></i><b>6.1.1</b> Povezovanje Express aplikacije in MongoDB z Mongoose</a></li>
<li class="chapter" data-level="6.1.2" data-path="PB-REST-API.html"><a href="PB-REST-API.html#zakaj-je-treba-modelirati-podatke"><i class="fa fa-check"></i><b>6.1.2</b> Zakaj je treba modelirati podatke?</a></li>
<li class="chapter" data-level="6.1.3" data-path="PB-REST-API.html"><a href="PB-REST-API.html#podatki-iz-registra"><i class="fa fa-check"></i><b>6.1.3</b> Podatki iz registra kulturne dediščine</a></li>
<li class="chapter" data-level="6.1.4" data-path="PB-REST-API.html"><a href="PB-REST-API.html#opredelitev-sheme-z-mongoose"><i class="fa fa-check"></i><b>6.1.4</b> Opredelitev sheme z Mongoose</a></li>
<li class="chapter" data-level="6.1.5" data-path="PB-REST-API.html"><a href="PB-REST-API.html#Uporaba-MongoDB-ukazne-lupine-za-dodajanje-podatkov"><i class="fa fa-check"></i><b>6.1.5</b> Uporaba MongoDB ukazne lupine za dodajanje podatkov</a></li>
<li class="chapter" data-level="6.1.6" data-path="PB-REST-API.html"><a href="PB-REST-API.html#uvoz-testnih-podatkov"><i class="fa fa-check"></i><b>6.1.6</b> Uvoz testnih podatkov</a></li>
<li class="chapter" data-level="6.1.7" data-path="PB-REST-API.html"><a href="PB-REST-API.html#vključitev-podatkovne-baze"><i class="fa fa-check"></i><b>6.1.7</b> Vključitev podatkovne baze</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="PB-REST-API.html"><a href="PB-REST-API.html#priprava-rest-api-ja-za-dostop-do-mongodb-podatkovne-baze"><i class="fa fa-check"></i><b>6.2</b> Priprava REST API-ja za dostop do MongoDB podatkovne baze</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="PB-REST-API.html"><a href="PB-REST-API.html#rest-api"><i class="fa fa-check"></i><b>6.2.1</b> REST API</a></li>
<li class="chapter" data-level="6.2.2" data-path="PB-REST-API.html"><a href="PB-REST-API.html#url-zahteva"><i class="fa fa-check"></i><b>6.2.2</b> URL zahteva</a></li>
<li class="chapter" data-level="6.2.3" data-path="PB-REST-API.html"><a href="PB-REST-API.html#metoda-zahteve"><i class="fa fa-check"></i><b>6.2.3</b> Metoda zahteve</a></li>
<li class="chapter" data-level="6.2.4" data-path="PB-REST-API.html"><a href="PB-REST-API.html#odgovor-podatek-in-status-api-ja"><i class="fa fa-check"></i><b>6.2.4</b> Odgovor (podatek in status) API-ja</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="PB-REST-API.html"><a href="PB-REST-API.html#Implementacija-API-ja-z-ogrodjem-Express"><i class="fa fa-check"></i><b>6.3</b> Implementacija API-ja z ogrodjem Express</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="PB-REST-API.html"><a href="PB-REST-API.html#priprava-usmerjevalnika"><i class="fa fa-check"></i><b>6.3.1</b> Priprava usmerjevalnika</a></li>
<li class="chapter" data-level="6.3.2" data-path="PB-REST-API.html"><a href="PB-REST-API.html#priprava-osnutka-krmilnika"><i class="fa fa-check"></i><b>6.3.2</b> Priprava osnutka krmilnika</a></li>
<li class="chapter" data-level="6.3.3" data-path="PB-REST-API.html"><a href="PB-REST-API.html#testiranje-osnutka-api-ja"><i class="fa fa-check"></i><b>6.3.3</b> Testiranje osnutka API-ja</a></li>
<li class="chapter" data-level="6.3.4" data-path="PB-REST-API.html"><a href="PB-REST-API.html#vključitev-modela"><i class="fa fa-check"></i><b>6.3.4</b> Vključitev modela</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="PB-REST-API.html"><a href="PB-REST-API.html#get-metode-za-branje-podatkov-iz-mongodb"><i class="fa fa-check"></i><b>6.4</b> GET metode za branje podatkov iz MongoDB</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="PB-REST-API.html"><a href="PB-REST-API.html#iskanje-dokumenta"><i class="fa fa-check"></i><b>6.4.1</b> Iskanje dokumenta</a></li>
<li class="chapter" data-level="6.4.2" data-path="PB-REST-API.html"><a href="PB-REST-API.html#iskanje-odvisnega-dokumenta"><i class="fa fa-check"></i><b>6.4.2</b> Iskanje odvisnega dokumenta</a></li>
<li class="chapter" data-level="6.4.3" data-path="PB-REST-API.html"><a href="PB-REST-API.html#geografsko-iskanje"><i class="fa fa-check"></i><b>6.4.3</b> Geografsko iskanje več dokumentov</a></li>
<li class="chapter" data-level="6.4.4" data-path="PB-REST-API.html"><a href="PB-REST-API.html#napredno-iskanje"><i class="fa fa-check"></i><b>6.4.4</b> Napredno iskanje</a></li>
<li class="chapter" data-level="6.4.5" data-path="PB-REST-API.html"><a href="PB-REST-API.html#seznami-sifrantov"><i class="fa fa-check"></i><b>6.4.5</b> Seznami šifrantov</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="Swagger.html"><a href="Swagger.html"><i class="fa fa-check"></i><b>7</b> <span class="sklop3 oznaka">P3.2</span> Načrtovanje s Swagger in OpenAPI</a>
<ul>
<li class="chapter" data-level="7.1" data-path="Swagger.html"><a href="Swagger.html#dokumentiranje-rest-api-ja-z-openapi-specifikacijo"><i class="fa fa-check"></i><b>7.1</b> Dokumentiranje REST API-ja z OpenAPI specifikacijo</a></li>
<li class="chapter" data-level="7.2" data-path="Swagger.html"><a href="Swagger.html#post-metode-za-dodajanje-podatkov-v-mongodb"><i class="fa fa-check"></i><b>7.2</b> POST metode za dodajanje podatkov v MongoDB</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="Swagger.html"><a href="Swagger.html#dodajanje-novih-dokumentov-v-mongodb"><i class="fa fa-check"></i><b>7.2.1</b> Dodajanje novih dokumentov v MongoDB</a></li>
<li class="chapter" data-level="7.2.2" data-path="Swagger.html"><a href="Swagger.html#dodajanje-odvisnih-dokumentov-v-mongodb"><i class="fa fa-check"></i><b>7.2.2</b> Dodajanje odvisnih dokumentov v MongoDB</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="Swagger.html"><a href="Swagger.html#put-metode-za-ažuriranje-podatkov-v-mongodb"><i class="fa fa-check"></i><b>7.3</b> PUT metode za ažuriranje podatkov v MongoDB</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="Swagger.html"><a href="Swagger.html#posodobitev-obstoječega-dokumenta-v-mongodb"><i class="fa fa-check"></i><b>7.3.1</b> Posodobitev obstoječega dokumenta v MongoDB</a></li>
<li class="chapter" data-level="7.3.2" data-path="Swagger.html"><a href="Swagger.html#PUT-odvisni-dokument"><i class="fa fa-check"></i><b>7.3.2</b> Posodobitev obstoječega odvisnega dokumenta v MongoDB</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="Swagger.html"><a href="Swagger.html#delete-metode-za-brisanje-podatkov-iz-mongodb"><i class="fa fa-check"></i><b>7.4</b> DELETE metode za brisanje podatkov iz MongoDB</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="Swagger.html"><a href="Swagger.html#DELETE-comment"><i class="fa fa-check"></i><b>7.4.1</b> Brisanje obstoječega komentarja</a></li>
<li class="chapter" data-level="7.4.2" data-path="Swagger.html"><a href="Swagger.html#brisanje-dokumentov"><i class="fa fa-check"></i><b>7.4.2</b> Brisanje dokumentov</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="Swagger.html"><a href="Swagger.html#uporaba-rest-api-ja-v-express-aplikaciji"><i class="fa fa-check"></i><b>7.5</b> Uporaba REST API-ja v Express aplikaciji</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="Swagger.html"><a href="Swagger.html#priprava-na-api-klic-iz-express-aplikacije"><i class="fa fa-check"></i><b>7.5.1</b> Priprava na API klic iz Express aplikacije</a></li>
<li class="chapter" data-level="7.5.2" data-path="Swagger.html"><a href="Swagger.html#pridobitev-seznama-lokacij-preko-api-ja"><i class="fa fa-check"></i><b>7.5.2</b> Pridobitev seznama lokacij preko API-ja</a></li>
<li class="chapter" data-level="7.5.3" data-path="Swagger.html"><a href="Swagger.html#priprava-novega-pogleda-seznama"><i class="fa fa-check"></i><b>7.5.3</b> Priprava novega pogleda seznama</a></li>
<li class="chapter" data-level="7.5.4" data-path="Swagger.html"><a href="Swagger.html#axios-zunanji-viri"><i class="fa fa-check"></i><b>7.5.4</b> Vključitev ostalih podatkov iz zunanjih virov</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="Swagger.html"><a href="Swagger.html#izboljšanje-zmogljivosti-api-ja"><i class="fa fa-check"></i><b>7.6</b> Izboljšanje zmogljivosti API-ja</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="Swagger.html"><a href="Swagger.html#porazdelitev-po-straneh"><i class="fa fa-check"></i><b>7.6.1</b> Porazdelitev po straneh</a></li>
<li class="chapter" data-level="7.6.2" data-path="Swagger.html"><a href="Swagger.html#asinhrono-beleženje"><i class="fa fa-check"></i><b>7.6.2</b> Asinhrono beleženje</a></li>
<li class="chapter" data-level="7.6.3" data-path="Swagger.html"><a href="Swagger.html#predpomnjenje"><i class="fa fa-check"></i><b>7.6.3</b> Predpomnjenje</a></li>
<li class="chapter" data-level="7.6.4" data-path="Swagger.html"><a href="Swagger.html#stiskanje-koristne-vsebine"><i class="fa fa-check"></i><b>7.6.4</b> Stiskanje koristne vsebine</a></li>
<li class="chapter" data-level="7.6.5" data-path="Swagger.html"><a href="Swagger.html#bazen-povezav"><i class="fa fa-check"></i><b>7.6.5</b> Bazen povezav</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV sklop: Uporabniški vmesnik</b></span></li>
<li class="chapter" data-level="8" data-path="Angular.html"><a href="Angular.html"><i class="fa fa-check"></i><b>8</b> <span class="sklop4 oznaka">P4.1</span> TypeScript in Angular</a>
<ul>
<li class="chapter" data-level="8.1" data-path="Angular.html"><a href="Angular.html#Dodajanje-Angular-komponent-v-Express-aplikacijo"><i class="fa fa-check"></i><b>8.1</b> Dodajanje Angular komponent v Express aplikacijo</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="Angular.html"><a href="Angular.html#namestitev-ogrodja-angular"><i class="fa fa-check"></i><b>8.1.1</b> Namestitev ogrodja Angular</a></li>
<li class="chapter" data-level="8.1.2" data-path="Angular.html"><a href="Angular.html#jezik-typescript"><i class="fa fa-check"></i><b>8.1.2</b> Jezik TypeScript</a></li>
<li class="chapter" data-level="8.1.3" data-path="Angular.html"><a href="Angular.html#kreiranje-in-zagon-angular-aplikacije"><i class="fa fa-check"></i><b>8.1.3</b> Kreiranje in zagon Angular aplikacije</a></li>
<li class="chapter" data-level="8.1.4" data-path="Angular.html"><a href="Angular.html#Izvorna-koda-Angular-aplikacije"><i class="fa fa-check"></i><b>8.1.4</b> Izvorna koda Angular aplikacije</a></li>
<li class="chapter" data-level="8.1.5" data-path="Angular.html"><a href="Angular.html#generiranje-angular-aplikacije-v-jeziku-javascript"><i class="fa fa-check"></i><b>8.1.5</b> Generiranje Angular aplikacije v jeziku JavaScript</a></li>
<li class="chapter" data-level="8.1.6" data-path="Angular.html"><a href="Angular.html#komponenta-za-prikaz-podatkov"><i class="fa fa-check"></i><b>8.1.6</b> Komponenta za prikaz podatkov</a></li>
<li class="chapter" data-level="8.1.7" data-path="Angular.html"><a href="Angular.html#Pridobivanje-podatkov-preko-REST-API-ja"><i class="fa fa-check"></i><b>8.1.7</b> Pridobivanje podatkov preko REST API-ja</a></li>
<li class="chapter" data-level="8.1.8" data-path="Angular.html"><a href="Angular.html#prenos-angular-aplikacije-v-produkcijsko-okolje"><i class="fa fa-check"></i><b>8.1.8</b> Prenos Angular aplikacije v produkcijsko okolje</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="Angular.html"><a href="Angular.html#izdelava-angular-spa-aplikacije-na-eni-strani"><i class="fa fa-check"></i><b>8.2</b> Izdelava Angular SPA aplikacije na eni strani</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="Angular.html"><a href="Angular.html#Prehod-iz-Express-usmerjanja-na-Angular-usmerjanje"><i class="fa fa-check"></i><b>8.2.1</b> Prehod iz Express usmerjanja na Angular usmerjanje</a></li>
<li class="chapter" data-level="8.2.2" data-path="Angular.html"><a href="Angular.html#navigacija-med-stranmi"><i class="fa fa-check"></i><b>8.2.2</b> Navigacija med stranmi</a></li>
<li class="chapter" data-level="8.2.3" data-path="Angular.html"><a href="Angular.html#modularna-zasnova-aplikacije-z-vgnezdenimi-komponentami"><i class="fa fa-check"></i><b>8.2.3</b> Modularna zasnova aplikacije z vgnezdenimi komponentami</a></li>
<li class="chapter" data-level="8.2.4" data-path="Angular.html"><a href="Angular.html#dodajanje-html-geolokacije-za-iskanje-bližnjih-lokacij"><i class="fa fa-check"></i><b>8.2.4</b> Dodajanje HTML geolokacije za iskanje bližnjih lokacij</a></li>
<li class="chapter" data-level="8.2.5" data-path="Angular.html"><a href="Angular.html#prikaz-zvezdic-v-obliki-ponovno-uporabne-komponente"><i class="fa fa-check"></i><b>8.2.5</b> Prikaz zvezdic v obliki ponovno uporabne komponente</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="Angular-SPA.html"><a href="Angular-SPA.html"><i class="fa fa-check"></i><b>9</b> <span class="sklop4 oznaka">P4.2</span> Angular SPA</a>
<ul>
<li class="chapter" data-level="9.1" data-path="Angular-SPA.html"><a href="Angular-SPA.html#kompleksnejši-pogledi-s-parametri-usmerjevanja"><i class="fa fa-check"></i><b>9.1</b> Kompleksnejši pogledi s parametri usmerjevanja</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="Angular-SPA.html"><a href="Angular-SPA.html#sprememba-strukture-strani"><i class="fa fa-check"></i><b>9.1.1</b> Sprememba strukture strani</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="Angular-SPA.html"><a href="Angular-SPA.html#dodajanje-usmerjanja-z-url-parametri"><i class="fa fa-check"></i><b>9.2</b> Dodajanje usmerjanja z URL parametri</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="Angular-SPA.html"><a href="Angular-SPA.html#prenos-podatkov-do-komponente-s-podrobnostmi-lokacije"><i class="fa fa-check"></i><b>9.2.1</b> Prenos podatkov do komponente s podrobnostmi lokacije</a></li>
<li class="chapter" data-level="9.2.2" data-path="Angular-SPA.html"><a href="Angular-SPA.html#pogled-podrobnosti-lokacije"><i class="fa fa-check"></i><b>9.2.2</b> Pogled podrobnosti lokacije</a></li>
<li class="chapter" data-level="9.2.3" data-path="Angular-SPA.html"><a href="Angular-SPA.html#varnostne-izjeme-pri-prikazovanju-zunanjih-podatkov"><i class="fa fa-check"></i><b>9.2.3</b> Varnostne izjeme pri prikazovanju zunanjih podatkov</a></li>
<li class="chapter" data-level="9.2.4" data-path="Angular-SPA.html"><a href="Angular-SPA.html#sprememba-vrstnega-reda-prikaza-komentarjev"><i class="fa fa-check"></i><b>9.2.4</b> Sprememba vrstnega reda prikaza komentarjev</a></li>
<li class="chapter" data-level="9.2.5" data-path="Angular-SPA.html"><a href="Angular-SPA.html#formatiranje-datuma"><i class="fa fa-check"></i><b>9.2.5</b> Formatiranje datuma</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="Angular-SPA.html"><a href="Angular-SPA.html#delo-s-spletnimi-obrazci-in-pošiljanje-podatkov"><i class="fa fa-check"></i><b>9.3</b> Delo s spletnimi obrazci in pošiljanje podatkov</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="Angular-SPA.html"><a href="Angular-SPA.html#priprava-modalnega-okna"><i class="fa fa-check"></i><b>9.3.1</b> Priprava modalnega okna</a></li>
<li class="chapter" data-level="9.3.2" data-path="Angular-SPA.html"><a href="Angular-SPA.html#dodajanje-spletnega-obrazca"><i class="fa fa-check"></i><b>9.3.2</b> Dodajanje spletnega obrazca</a></li>
<li class="chapter" data-level="9.3.3" data-path="Angular-SPA.html"><a href="Angular-SPA.html#povezovanje-podatkov-in-vnosnih-polj-obrazca"><i class="fa fa-check"></i><b>9.3.3</b> Povezovanje podatkov in vnosnih polj obrazca</a></li>
<li class="chapter" data-level="9.3.4" data-path="Angular-SPA.html"><a href="Angular-SPA.html#posredovanje-podatkov-spletnega-obrazca-na-rest-api"><i class="fa fa-check"></i><b>9.3.4</b> Posredovanje podatkov spletnega obrazca na REST API</a></li>
<li class="chapter" data-level="9.3.5" data-path="Angular-SPA.html"><a href="Angular-SPA.html#brisanje-komentarjev"><i class="fa fa-check"></i><b>9.3.5</b> Brisanje komentarjev</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="Angular-SPA.html"><a href="Angular-SPA.html#izboljšava-arhitekture"><i class="fa fa-check"></i><b>9.4</b> Izboljšava arhitekture</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="Angular-SPA.html"><a href="Angular-SPA.html#locitev-usmerjanja"><i class="fa fa-check"></i><b>9.4.1</b> Ločitev usmerjanja</a></li>
<li class="chapter" data-level="9.4.2" data-path="Angular-SPA.html"><a href="Angular-SPA.html#opredelitev-razredov"><i class="fa fa-check"></i><b>9.4.2</b> Opredelitev razredov</a></li>
<li class="chapter" data-level="9.4.3" data-path="Angular-SPA.html"><a href="Angular-SPA.html#Organizacija-izvorne-kode-v-mape"><i class="fa fa-check"></i><b>9.4.3</b> Organizacija izvorne kode v mape</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="Angular-SPA.html"><a href="Angular-SPA.html#zamenjava-strežniške-aplikacije-s-spa-aplikacijo"><i class="fa fa-check"></i><b>9.5</b> Zamenjava strežniške aplikacije s SPA aplikacijo</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="Angular-SPA.html"><a href="Angular-SPA.html#preusmeritev-zahtev-na-angular-spa"><i class="fa fa-check"></i><b>9.5.1</b> Preusmeritev zahtev na Angular SPA</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="Angular-SPA.html"><a href="Angular-SPA.html#dodatni-gradniki-angular-aplikacije"><i class="fa fa-check"></i><b>9.6</b> Dodatni gradniki Angular aplikacije</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="Avtentikacija.html"><a href="Avtentikacija.html"><i class="fa fa-check"></i><b>10</b> <span class="sklop4 oznaka">P4.3</span> Preverjanje istovetnosti uporabnika</a>
<ul>
<li class="chapter" data-level="10.1" data-path="Avtentikacija.html"><a href="Avtentikacija.html#način-avtentikacije-z-uporabo-mean-sklada-tehnologij"><i class="fa fa-check"></i><b>10.1</b> Način avtentikacije z uporabo MEAN sklada tehnologij</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="Avtentikacija.html"><a href="Avtentikacija.html#klasični-pristop-avtentikacije-pri-strežniški-aplikaciji"><i class="fa fa-check"></i><b>10.1.1</b> Klasični pristop avtentikacije pri strežniški aplikaciji</a></li>
<li class="chapter" data-level="10.1.2" data-path="Avtentikacija.html"><a href="Avtentikacija.html#avtentikacija-z-mean-skladom-tehnologij"><i class="fa fa-check"></i><b>10.1.2</b> Avtentikacija z MEAN skladom tehnologij</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="Avtentikacija.html"><a href="Avtentikacija.html#kreiranje-sheme-uporabnikov-v-mongodb"><i class="fa fa-check"></i><b>10.2</b> Kreiranje sheme uporabnikov v MongoDB</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="Avtentikacija.html"><a href="Avtentikacija.html#enosmerno-šifriranje-gesel"><i class="fa fa-check"></i><b>10.2.1</b> Enosmerno šifriranje gesel</a></li>
<li class="chapter" data-level="10.2.2" data-path="Avtentikacija.html"><a href="Avtentikacija.html#Kreiranje-sheme-z-Mongoose"><i class="fa fa-check"></i><b>10.2.2</b> Kreiranje sheme z Mongoose</a></li>
<li class="chapter" data-level="10.2.3" data-path="Avtentikacija.html"><a href="Avtentikacija.html#šifriranje-uporabniškega-gesla"><i class="fa fa-check"></i><b>10.2.3</b> Šifriranje uporabniškega gesla</a></li>
<li class="chapter" data-level="10.2.4" data-path="Avtentikacija.html"><a href="Avtentikacija.html#preverjanje-ustreznosti-podanega-gesla"><i class="fa fa-check"></i><b>10.2.4</b> Preverjanje ustreznosti podanega gesla</a></li>
<li class="chapter" data-level="10.2.5" data-path="Avtentikacija.html"><a href="Avtentikacija.html#generiranje-json-spletnega-žetona-jwt"><i class="fa fa-check"></i><b>10.2.5</b> Generiranje JSON spletnega žetona (JWT)</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="Avtentikacija.html"><a href="Avtentikacija.html#Priprava-API-ja-za-avtentikacijo"><i class="fa fa-check"></i><b>10.3</b> Priprava API-ja za avtentikacijo</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="Avtentikacija.html"><a href="Avtentikacija.html#namestitev-in-konfiguracija-passporta"><i class="fa fa-check"></i><b>10.3.1</b> Namestitev in konfiguracija Passporta</a></li>
<li class="chapter" data-level="10.3.2" data-path="Avtentikacija.html"><a href="Avtentikacija.html#kreiranje-api-dostopne-točke-in-vračanje-json-spletnih-žetonov-jwt"><i class="fa fa-check"></i><b>10.3.2</b> Kreiranje API dostopne točke in vračanje JSON spletnih žetonov (JWT)</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="Avtentikacija.html"><a href="Avtentikacija.html#Varnostna-zascita-izbranih-API-dostopnih-tock"><i class="fa fa-check"></i><b>10.4</b> Varnostna zaščita izbranih API dostopnih točk</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="Avtentikacija.html"><a href="Avtentikacija.html#dodajanje-vmesne-avtentikacijske-ravni-pri-express-usmerjanju"><i class="fa fa-check"></i><b>10.4.1</b> Dodajanje vmesne avtentikacijske ravni pri Express usmerjanju</a></li>
<li class="chapter" data-level="10.4.2" data-path="Avtentikacija.html"><a href="Avtentikacija.html#uporaba-informacij-iz-jwt-v-express-krmilniku"><i class="fa fa-check"></i><b>10.4.2</b> Uporaba informacij iz JWT v Express krmilniku</a></li>
<li class="chapter" data-level="10.4.3" data-path="Avtentikacija.html"><a href="Avtentikacija.html#avtorizacija-azuriranje"><i class="fa fa-check"></i><b>10.4.3</b> Avtorizacija pri ažuriranju komentarja</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="Avtentikacija.html"><a href="Avtentikacija.html#Priprava-storitve-avtentikacije-v-Angular"><i class="fa fa-check"></i><b>10.5</b> Priprava storitve avtentikacije v Angular</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="Avtentikacija.html"><a href="Avtentikacija.html#obvladovanje-seje-uporabnika-v-angular"><i class="fa fa-check"></i><b>10.5.1</b> Obvladovanje seje uporabnika v Angular</a></li>
<li class="chapter" data-level="10.5.2" data-path="Avtentikacija.html"><a href="Avtentikacija.html#omogočanje-registracije-prijave-in-odjave-uporabnikov"><i class="fa fa-check"></i><b>10.5.2</b> Omogočanje registracije, prijave in odjave uporabnikov</a></li>
<li class="chapter" data-level="10.5.3" data-path="Avtentikacija.html"><a href="Avtentikacija.html#uporaba-podatkov-iz-jwt-v-angular-storitvi"><i class="fa fa-check"></i><b>10.5.3</b> Uporaba podatkov iz JWT v Angular storitvi</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="Avtentikacija.html"><a href="Avtentikacija.html#Priprava-strani-za-registracijo-in-prijavo-uporabnika"><i class="fa fa-check"></i><b>10.6</b> Priprava strani za registracijo in prijavo uporabnika</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="Avtentikacija.html"><a href="Avtentikacija.html#priprava-strani-za-registracijo"><i class="fa fa-check"></i><b>10.6.1</b> Priprava strani za registracijo</a></li>
<li class="chapter" data-level="10.6.2" data-path="Avtentikacija.html"><a href="Avtentikacija.html#priprava-strani-za-prijavo"><i class="fa fa-check"></i><b>10.6.2</b> Priprava strani za prijavo</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="Avtentikacija.html"><a href="Avtentikacija.html#uporaba-avtentikacije-v-angular-aplikaciji"><i class="fa fa-check"></i><b>10.7</b> Uporaba avtentikacije v Angular aplikaciji</a>
<ul>
<li class="chapter" data-level="10.7.1" data-path="Avtentikacija.html"><a href="Avtentikacija.html#posodobitev-navigacije"><i class="fa fa-check"></i><b>10.7.1</b> Posodobitev navigacije</a></li>
<li class="chapter" data-level="10.7.2" data-path="Avtentikacija.html"><a href="Avtentikacija.html#podpora-zgodovini-brskanja"><i class="fa fa-check"></i><b>10.7.2</b> Podpora zgodovini brskanja</a></li>
<li class="chapter" data-level="10.7.3" data-path="Avtentikacija.html"><a href="Avtentikacija.html#dodajanje-uporabnika-v-komentar"><i class="fa fa-check"></i><b>10.7.3</b> Dodajanje uporabniških podatkov v komentar</a></li>
<li class="chapter" data-level="10.7.4" data-path="Avtentikacija.html"><a href="Avtentikacija.html#brisanje-lastnih-komentarjev"><i class="fa fa-check"></i><b>10.7.4</b> Brisanje lastnih komentarjev</a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path="Avtentikacija.html"><a href="Avtentikacija.html#nastavitve-v-brskalniku"><i class="fa fa-check"></i><b>10.8</b> Shranjevanje uporabniških nastavitev v brskalniku</a></li>
<li class="chapter" data-level="10.9" data-path="Avtentikacija.html"><a href="Avtentikacija.html#auth-guard"><i class="fa fa-check"></i><b>10.9</b> Auth Guard</a>
<ul>
<li class="chapter" data-level="10.9.1" data-path="Avtentikacija.html"><a href="Avtentikacija.html#vrste"><i class="fa fa-check"></i><b>10.9.1</b> Vrste</a></li>
<li class="chapter" data-level="10.9.2" data-path="Avtentikacija.html"><a href="Avtentikacija.html#canRegister"><i class="fa fa-check"></i><b>10.9.2</b> Onemogočenje registracije prijavljenim uporabnikom</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V sklop: Decentralizirane aplikacije in veriga blokov</b></span></li>
<li class="chapter" data-level="11" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html"><i class="fa fa-check"></i><b>11</b> <span class="sklop5 oznaka">P5.1</span> DApps, pametne pogodbe in Solidity</a>
<ul>
<li class="chapter" data-level="11.1" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#decentralizirane-aplikacije"><i class="fa fa-check"></i><b>11.1</b> Decentralizirane aplikacije</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#kaj-je-decentralizirana-aplikacija-dapp"><i class="fa fa-check"></i><b>11.1.1</b> Kaj je decentralizirana aplikacija (DApp)?</a></li>
<li class="chapter" data-level="11.1.2" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#omrežje-ethereum"><i class="fa fa-check"></i><b>11.1.2</b> Omrežje Ethereum</a></li>
<li class="chapter" data-level="11.1.3" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#terminologija-dapp"><i class="fa fa-check"></i><b>11.1.3</b> Terminologija DApp</a></li>
<li class="chapter" data-level="11.1.4" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#decentralizirane-in-porazdeljene-aplikacije"><i class="fa fa-check"></i><b>11.1.4</b> Decentralizirane in porazdeljene aplikacije</a></li>
<li class="chapter" data-level="11.1.5" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#primeri-dobrih-praks"><i class="fa fa-check"></i><b>11.1.5</b> Primeri dobrih praks</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#veriga-blokov"><i class="fa fa-check"></i><b>11.2</b> Veriga blokov</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#sklad-tehnologij-za-podporo-dapp"><i class="fa fa-check"></i><b>11.2.1</b> Sklad tehnologij za podporo DApp</a></li>
<li class="chapter" data-level="11.2.2" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#podrobnosti-vozlišča-ethereum"><i class="fa fa-check"></i><b>11.2.2</b> Podrobnosti vozlišča Ethereum</a></li>
<li class="chapter" data-level="11.2.3" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#življenjski-cikel-transakcije"><i class="fa fa-check"></i><b>11.2.3</b> Življenjski cikel transakcije</a></li>
<li class="chapter" data-level="11.2.4" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#razvijalski-pogled-na-postavitev-pametne-pogodbe"><i class="fa fa-check"></i><b>11.2.4</b> Razvijalski pogled na postavitev pametne pogodbe</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#platforma-ethereum"><i class="fa fa-check"></i><b>11.3</b> Platforma Ethereum</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#pametne-pogodbe-kot-osnova-dapp"><i class="fa fa-check"></i><b>11.3.1</b> Pametne pogodbe kot osnova DApp</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#programiranje-pametnih-pogodb-s-solidity"><i class="fa fa-check"></i><b>11.4</b> Programiranje pametnih pogodb s Solidity</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#Struktura-pogodbe"><i class="fa fa-check"></i><b>11.4.1</b> Struktura pogodbe</a></li>
<li class="chapter" data-level="11.4.2" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#razvoj-enostavne-pogodbe"><i class="fa fa-check"></i><b>11.4.2</b> Razvoj enostavne pogodbe</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#razvoj-kompleksnih-pametnih-pogodb"><i class="fa fa-check"></i><b>11.5</b> Razvoj kompleksnih pametnih pogodb</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#spremenljivke-stanja"><i class="fa fa-check"></i><b>11.5.1</b> Spremenljivke stanja</a></li>
<li class="chapter" data-level="11.5.2" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#konstruktor"><i class="fa fa-check"></i><b>11.5.2</b> Konstruktor</a></li>
<li class="chapter" data-level="11.5.3" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#funkcije-za-podporo-množični-prodaji"><i class="fa fa-check"></i><b>11.5.3</b> Funkcije za podporo množični prodaji</a></li>
<li class="chapter" data-level="11.5.4" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#testiranje-množične-prodaje"><i class="fa fa-check"></i><b>11.5.4</b> Testiranje množične prodaje</a></li>
<li class="chapter" data-level="11.5.5" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#večkratno-dedovanje"><i class="fa fa-check"></i><b>11.5.5</b> Večkratno dedovanje</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#objektno-usmerjene-lastnosti-pametnih-pogodb"><i class="fa fa-check"></i><b>11.6</b> Objektno usmerjene lastnosti pametnih pogodb</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#dedovanje"><i class="fa fa-check"></i><b>11.6.1</b> Dedovanje</a></li>
<li class="chapter" data-level="11.6.2" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#abstraktne-pogodbe"><i class="fa fa-check"></i><b>11.6.2</b> Abstraktne pogodbe</a></li>
<li class="chapter" data-level="11.6.3" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#vmesniki"><i class="fa fa-check"></i><b>11.6.3</b> Vmesniki</a></li>
<li class="chapter" data-level="11.6.4" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#knjižnice"><i class="fa fa-check"></i><b>11.6.4</b> Knjižnice</a></li>
<li class="chapter" data-level="11.6.5" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#skladnost-s-standardom-erc20"><i class="fa fa-check"></i><b>11.6.5</b> Skladnost s standardom <code>ERC20</code></a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#ekosistem-ethereum"><i class="fa fa-check"></i><b>11.7</b> Ekosistem Ethereum</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="LP2.html"><a href="LP2.html"><i class="fa fa-check"></i><b>12</b> <span class="sklop5 oznaka">2. LP</span> Decentralizirana aplikacija na verigi blokov</a>
<ul>
<li class="chapter" data-level="12.1" data-path="LP2.html"><a href="LP2.html#pravila-zahteve-in-omejitve-1"><i class="fa fa-check"></i><b>12.1</b> Pravila, zahteve in omejitve</a></li>
<li class="chapter" data-level="12.2" data-path="LP2.html"><a href="LP2.html#kriteriji-vrednotenja-1"><i class="fa fa-check"></i><b>12.2</b> Kriteriji vrednotenja</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html"><i class="fa fa-check"></i><b>13</b> <span class="sklop5 oznaka">P5.2</span> Truffle in Web3</a>
<ul>
<li class="chapter" data-level="13.1" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#izdelava-decentralizirane-aplikacije"><i class="fa fa-check"></i><b>13.1</b> Izdelava decentralizirane aplikacije</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#opredelitev-zahtev-decentralizirane-aplikacije-za-glasovanje"><i class="fa fa-check"></i><b>13.1.1</b> Opredelitev zahtev decentralizirane aplikacije za glasovanje</a></li>
<li class="chapter" data-level="13.1.2" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#razvojni-načrt"><i class="fa fa-check"></i><b>13.1.2</b> Razvojni načrt</a></li>
<li class="chapter" data-level="13.1.3" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#Truffle-projekt"><i class="fa fa-check"></i><b>13.1.3</b> Truffle projekt</a></li>
<li class="chapter" data-level="13.1.4" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#razvoj-pametne-pogodbe"><i class="fa fa-check"></i><b>13.1.4</b> Razvoj pametne pogodbe</a></li>
<li class="chapter" data-level="13.1.5" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#lastna-privatna-veriga-blokov"><i class="fa fa-check"></i><b>13.1.5</b> Lastna privatna veriga blokov</a></li>
<li class="chapter" data-level="13.1.6" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#prevajanje-in-postavitev-pametne-pogodbe"><i class="fa fa-check"></i><b>13.1.6</b> Prevajanje in postavitev pametne pogodbe</a></li>
<li class="chapter" data-level="13.1.7" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#testi-enot"><i class="fa fa-check"></i><b>13.1.7</b> Testi enot</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#uporabniški-vmesnik"><i class="fa fa-check"></i><b>13.2</b> Uporabniški vmesnik</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#priprava-odvisnosti"><i class="fa fa-check"></i><b>13.2.1</b> Priprava odvisnosti</a></li>
<li class="chapter" data-level="13.2.2" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#spletna-stran"><i class="fa fa-check"></i><b>13.2.2</b> Spletna stran</a></li>
<li class="chapter" data-level="13.2.3" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#web3-aplikacija-kot-angular-komponenta"><i class="fa fa-check"></i><b>13.2.3</b> Web3 aplikacija kot Angular komponenta</a></li>
<li class="chapter" data-level="13.2.4" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#opredelitev-izgleda"><i class="fa fa-check"></i><b>13.2.4</b> Opredelitev izgleda</a></li>
<li class="chapter" data-level="13.2.5" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#povezava-na-verigo-blokov"><i class="fa fa-check"></i><b>13.2.5</b> Povezava na verigo blokov</a></li>
<li class="chapter" data-level="13.2.6" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#podpora-funkcionalnostim-neregistriranega-volivca"><i class="fa fa-check"></i><b>13.2.6</b> Podpora funkcionalnostim neregistriranega volivca</a></li>
<li class="chapter" data-level="13.2.7" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#podpora-funkcionalnostim-registriranega-volivca"><i class="fa fa-check"></i><b>13.2.7</b> Podpora funkcionalnostim registriranega volivca</a></li>
<li class="chapter" data-level="13.2.8" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#podpora-funkcionalnostim-skrbnika"><i class="fa fa-check"></i><b>13.2.8</b> Podpora funkcionalnostim skrbnika</a></li>
<li class="chapter" data-level="13.2.9" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#obvladovanje-dogodkov-v-okviru-dapp"><i class="fa fa-check"></i><b>13.2.9</b> Obvladovanje dogodkov v okviru DApp</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#testiranje-decentralizirane-aplikacije-za-glasovanje"><i class="fa fa-check"></i><b>13.3</b> Testiranje decentralizirane aplikacije za glasovanje</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#zagon-osebne-verige-blokov-ganache"><i class="fa fa-check"></i><b>13.3.1</b> Zagon osebne verige blokov Ganache</a></li>
<li class="chapter" data-level="13.3.2" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#dostop-do-racunov-metamask"><i class="fa fa-check"></i><b>13.3.2</b> Dostop do računov preko MetaMask</a></li>
<li class="chapter" data-level="13.3.3" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#postavitev-pametne-pogodbe-na-verigo-blokov"><i class="fa fa-check"></i><b>13.3.3</b> Postavitev pametne pogodbe na verigo blokov</a></li>
<li class="chapter" data-level="13.3.4" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#povezovanje-metamask-z-dapp"><i class="fa fa-check"></i><b>13.3.4</b> Povezovanje MetaMask z DApp</a></li>
<li class="chapter" data-level="13.3.5" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#faza-registracije-volivcev"><i class="fa fa-check"></i><b>13.3.5</b> Faza registracije volivcev</a></li>
<li class="chapter" data-level="13.3.6" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#faza-začetka-sprejemanja-predlogov"><i class="fa fa-check"></i><b>13.3.6</b> Faza začetka sprejemanja predlogov</a></li>
<li class="chapter" data-level="13.3.7" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#faza-konca-sprejemanja-predlogov"><i class="fa fa-check"></i><b>13.3.7</b> Faza konca sprejemanja predlogov</a></li>
<li class="chapter" data-level="13.3.8" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#faza-začetka-glasovanja"><i class="fa fa-check"></i><b>13.3.8</b> Faza začetka glasovanja</a></li>
<li class="chapter" data-level="13.3.9" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#faza-konca-glasovanja"><i class="fa fa-check"></i><b>13.3.9</b> Faza konca glasovanja</a></li>
<li class="chapter" data-level="13.3.10" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#zaključna-faza-preštetih-glasov"><i class="fa fa-check"></i><b>13.3.10</b> Zaključna faza preštetih glasov</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#varna-postavitev"><i class="fa fa-check"></i><b>13.4</b> Postavitev pametne pogodbe na zaščiteno verigo blokov</a></li>
<li class="chapter" data-level="13.5" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#postavitev-pametne-pogodbe-s-pomočjo-metamask"><i class="fa fa-check"></i><b>13.5</b> Postavitev pametne pogodbe s pomočjo MetaMask</a></li>
</ul></li>
<li class="part"><span><b>VI sklop: Dodatne funkcionalnosti</b></span></li>
<li class="chapter" data-level="14" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html"><i class="fa fa-check"></i><b>14</b> <span class="sklop6 oznaka">P6.1</span> Varnost spletnih aplikacij, testiranje in progresivne spletne aplikacije</a>
<ul>
<li class="chapter" data-level="14.1" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#odprtokodni-projekt-varnosti-spletnih-aplikacij-owasp"><i class="fa fa-check"></i><b>14.1</b> Odprtokodni projekt varnosti spletnih aplikacij OWASP</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#uvod-2"><i class="fa fa-check"></i><b>14.1.1</b> Uvod</a></li>
<li class="chapter" data-level="14.1.2" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#trend-največjih-varnostnih-tveganj-spletnih-aplikacij"><i class="fa fa-check"></i><b>14.1.2</b> Trend največjih varnostnih tveganj spletnih aplikacij</a></li>
<li class="chapter" data-level="14.1.3" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#ovrednotenje-varnostnih-tveganj-aplikacije"><i class="fa fa-check"></i><b>14.1.3</b> Ovrednotenje varnostnih tveganj aplikacije</a></li>
<li class="chapter" data-level="14.1.4" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#A1-2021"><i class="fa fa-check"></i><b>14.1.4</b> A1:2021 - Neustrezen nadzor dostopa</a></li>
<li class="chapter" data-level="14.1.5" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#A2-2021"><i class="fa fa-check"></i><b>14.1.5</b> A2:2021 - Kriptografske napake</a></li>
<li class="chapter" data-level="14.1.6" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#A3-2021"><i class="fa fa-check"></i><b>14.1.6</b> A3:2021 - Vrivanje zlonamerne kode</a></li>
<li class="chapter" data-level="14.1.7" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#A4-2021"><i class="fa fa-check"></i><b>14.1.7</b> A4:2021 - Nevaren načrt</a></li>
<li class="chapter" data-level="14.1.8" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#A5-2021"><i class="fa fa-check"></i><b>14.1.8</b> A5:2021 - Napačna varnostna konfiguracija</a></li>
<li class="chapter" data-level="14.1.9" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#A6-2021"><i class="fa fa-check"></i><b>14.1.9</b> A6:2021 - Ranljive in zastarele komponente</a></li>
<li class="chapter" data-level="14.1.10" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#A7-2021"><i class="fa fa-check"></i><b>14.1.10</b> A7:2021 - Napake pri identifikaciji in avtentikaciji</a></li>
<li class="chapter" data-level="14.1.11" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#A8-2021"><i class="fa fa-check"></i><b>14.1.11</b> A8:2021 - Napake v programski opremi in integriteti podatkov</a></li>
<li class="chapter" data-level="14.1.12" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#A9-2021"><i class="fa fa-check"></i><b>14.1.12</b> A9:2021 - Varnostno beleženje in spremljanje napak</a></li>
<li class="chapter" data-level="14.1.13" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#A10-2021"><i class="fa fa-check"></i><b>14.1.13</b> A10:2021 - Ponarejanje zahtev na strani strežnika (SSRF)</a></li>
<li class="chapter" data-level="14.1.14" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#priporočila-za-razvijalce"><i class="fa fa-check"></i><b>14.1.14</b> Priporočila za razvijalce</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#osnovni-varnostni-pregled-demo-aplikacije-z-owasp-zap"><i class="fa fa-check"></i><b>14.2</b> Osnovni varnostni pregled Demo aplikacije z OWASP ZAP</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#priprava-demo-aplikacije-v-lokalnem-okolju"><i class="fa fa-check"></i><b>14.2.1</b> Priprava Demo aplikacije v lokalnem okolju</a></li>
<li class="chapter" data-level="14.2.2" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#podpora-ssl"><i class="fa fa-check"></i><b>14.2.2</b> Podpora SSL</a></li>
<li class="chapter" data-level="14.2.3" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#zagon-aplikacije"><i class="fa fa-check"></i><b>14.2.3</b> Zagon aplikacije</a></li>
<li class="chapter" data-level="14.2.4" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#konfiguracija-orodja-owasp-zap"><i class="fa fa-check"></i><b>14.2.4</b> Konfiguracija orodja OWASP ZAP</a></li>
<li class="chapter" data-level="14.2.5" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#tezave-http-odgovori"><i class="fa fa-check"></i><b>14.2.5</b> Odprava težav s HTTP odgovori</a></li>
<li class="chapter" data-level="14.2.6" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#tezave-z-registracijo-in-prijavo"><i class="fa fa-check"></i><b>14.2.6</b> Odprava težav z registracijo in prijavo</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#osnovni-funkcionalni-testi-aplikacije-demo-s-selenium"><i class="fa fa-check"></i><b>14.3</b> Osnovni funkcionalni testi aplikacije Demo s Selenium</a></li>
<li class="chapter" data-level="14.4" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#Progresivne-spletne-aplikacije"><i class="fa fa-check"></i><b>14.4</b> Progresivne spletne aplikacije</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#uvod-3"><i class="fa fa-check"></i><b>14.4.1</b> Uvod</a></li>
<li class="chapter" data-level="14.4.2" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#Lighthouse"><i class="fa fa-check"></i><b>14.4.2</b> Pregled obstoječe aplikacije s pomočjo Lighthouse</a></li>
<li class="chapter" data-level="14.4.3" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#nadgradnja-angular"><i class="fa fa-check"></i><b>14.4.3</b> Nadgradnja Angular</a></li>
<li class="chapter" data-level="14.4.4" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#vključitev-podpore-za-pwa"><i class="fa fa-check"></i><b>14.4.4</b> Vključitev podpore za PWA</a></li>
<li class="chapter" data-level="14.4.5" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#Brskanje-brez-povezave"><i class="fa fa-check"></i><b>14.4.5</b> Brskanje brez povezave</a></li>
<li class="chapter" data-level="14.4.6" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#končno-testiranje"><i class="fa fa-check"></i><b>14.4.6</b> Končno testiranje</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="literatura.html"><a href="literatura.html"><i class="fa fa-check"></i>Literatura</a></li>
<li class="divider"></li>
<li><a href="https://ucilnica.fri.uni-lj.si/course/view.php?id=74">eUčilnica</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="index.html">Spletno programiranje 2023/2024</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="DApps-pametne-pogodbe" class="section level1 hasAnchor" number="11">
<h1><span class="header-section-number">Poglavje 11</span> <span class="sklop5 oznaka">P5.1</span> DApps, pametne pogodbe in Solidity<a href="DApps-pametne-pogodbe.html#DApps-pametne-pogodbe" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div class="vrstica">
<img src="assets/img/ninja/ninja_03_go_right.png">
<h3>
<span class="sklop5 oznaka">P5.1</span>
</h3>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js"></script>
<script>
  var options_dodaj = {acrossElements: true, element: "dodaj"};
  var options_izbrisi = {acrossElements: true, element: "izbrisi"};
</script>
<p><a href="https://unilj-my.sharepoint.com/:wb:/g/personal/dejanl_fri1_uni-lj_si/EUwL_wrScwBLolQ2DY9oLQIBTFmaYp5d-V9tt1BcR46Uwg?e=pb6ghM"><i class="fa-solid fa-chalkboard-user"></i>Sodelovalna <strong>tabla</strong></a>, ki jo bomo uporabljali pred in med predavanji ter je namenjena odložišču za vprašanja in komentarje. Vsi testni primeri, predstavljeni v okviru predavanja <span class="sklop5">P5.1</span>, so na voljo v GitHub repozitoriju <a href="https://github.com/sp-2023-2024/Snippets"><i class="fa-brands fa-github"></i>SP-2022-2023/<strong>Snippets</strong></a>.</p>
<div id="decentralizirane-aplikacije" class="section level2 hasAnchor" number="11.1">
<h2><span class="header-section-number">11.1</span> Decentralizirane aplikacije<a href="DApps-pametne-pogodbe.html#decentralizirane-aplikacije" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="kaj-je-decentralizirana-aplikacija-dapp" class="section level3 hasAnchor" number="11.1.1">
<h3><span class="header-section-number">11.1.1</span> Kaj je decentralizirana aplikacija (DApp)?<a href="DApps-pametne-pogodbe.html#kaj-je-decentralizirana-aplikacija-dapp" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Najprej si poglejmo koncept, ki ga že poznamo, in sicer centralizirana aplikacija. Ko govorimo o tradicionalnih spletnih in poslovnih aplikacijah, so le-te, z vidika uporabnika, implicitno centralizirane. <strong><a href="https://en.wikipedia.org/wiki/Centralisation"><i class="fa-brands fa-wikipedia-w"></i>Centralizirano</a> aplikacijo</strong> nadzira osrednji akter (npr. posameznik, podjetje, vladna agencija ipd.), ki sistem gosti neposredno v svojih prostorih ali preko ponudnikov storitev v oblaku in imajo popoln nadzor nad vsemi komponentami in plastmi arhitekture sistema. Uporabnik lahko tej centralni entiteti zaupa in se pri odločanju, ali bo dostopal do storitev nekega sistema, odloča na podlagi ugleda te centralne entitete. Z vidika uporabnika je takšen sistem lahko zaupanja vreden ali ne in tako je tudi zasnovana večina današnjih spletnih aplikacij.</p>
<p><strong>Soglasje</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Consensus_(computer_science)"><i class="fa-brands fa-wikipedia-w"></i>consensus</a>)</em> je <strong>porazdeljena</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Distributed_computing"><i class="fa-brands fa-wikipedia-w"></i>distributed</a>)</em> in <strong>nezaupljiva</strong> <em>(angl. <a href="https://en.wiktionary.org/wiki/trustless"><i class="fa-brands fa-wikipedia-w"></i>trustless</a>)</em> oblika dogovora pri preverjanju transakcije. Porazdeljenost v tem kontekstu pomeni, da neodvisen organ ne preverja transakcij, ampak namesto tega vsi udeleženci prispevajo k preverjanju in se pri tem strinjajo. Nezaupljivost pa pomeni, da si sodelujoči udeleženci pri doseganju končnega rezultata preverjanja medsebojno ne zaupajo. Soglasje je doseženo, ko se kvalificirana večina udeležencev strinja z izidom transakcije.</p>
<p>Posledica takšne arhitekture je decentralizirana obdelava na neodvisnih vozliščih, namesto centralizirane na izbranem naboru strežnikov, ki jih nadzoruje določena entiteta. Takšna decentralizacija razbremeni uporabnika, da bi moral zaupati določeni entiteti, saj mora zaupati le zasnovi omrežja. Aplikacije, ki so zgrajene na takšni arhitekturi, imenujemo <strong>decentralizirane aplikacije</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Decentralized_application"><i class="fa-brands fa-wikipedia-w"></i><strong>DApp</strong></a>)</em>.</p>
<p>Primer takšne aplikacije je <strong>aplikacija za podporo glasovanju</strong>, ki jo bomo razvili v okviru predmeta. Slika <a href="DApps-pametne-pogodbe.html#fig:slika-Centralizirana-vs-decentralizirana-aplikacija-za-glasovanje">11.1</a> prikazuje ključne razlike med dvema verzijama takšne aplikacije, in sicer med centralizirano in decentralizirano.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-Centralizirana-vs-decentralizirana-aplikacija-za-glasovanje"></span>
<img src="assets/img/Centralizirana_vs_decentralizirana_aplikacija_za_glasovanje.png" alt="Primerjava med centralizirano in decentralizirano aplikacijo za glasovanje" width="600" />
<p class="caption">
Slika 11.1: Primerjava med centralizirano in decentralizirano aplikacijo za glasovanje
</p>
</div>
<p>Decentralizirane aplikacije temeljijo na dveh ključnih načelih:</p>
<ul>
<li><strong>Aplikacijska logika</strong> je prisotna in se <strong>istočasno neodvisno izvaja na vsakem (enakovrednem) strežniku</strong> v <a href="https://en.wikipedia.org/wiki/Peer-to-peer"><span class="skupaj"><i class="fa-brands fa-wikipedia-w"></i>P2P omrežju</span></a>. Vsak strežnik ima lahko drugega lastnika in ne obstaja centralni strežnik, ki bi nadzoroval ostale. Strežniki ves čas medsebojno preverjajo rezultate izračunov, tako da mora uporabnik zgolj zaupati P2P omrežju in ne posamezni entiteti. Aplikacijski podatki so shranjeni v lokalni kopiji podatkovne baze na vsakem strežniku v omrežju.</li>
<li>Tehnologija podatkovne baze se imenuje <strong>veriga blokov</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Blockchain"><i class="fa-brands fa-wikipedia-w"></i>Blockchain</a>)</em>, kar je posebna oblika <strong>tehnologije razpršene evidence</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Distributed_ledger"><i class="fa-brands fa-wikipedia-w"></i>Distributed Ledger Technology (<strong>DLT</strong>)</a>)</em>, ki zagotavlja, da podatkov za nazaj ne moremo spreminjati.</li>
</ul>
<p>Podatkovna baza v obliki verige blokov temelji na podatkovni strukturi, kot že samo ime pove - veriga blokov. <a href="https://en.wikipedia.org/wiki/Blockchain#Blocks"><i class="fa-brands fa-wikipedia-w"></i><strong>Blok</strong></a> je zapis, ki vsebuje:</p>
<ul>
<li>množico transakcij, kjer je vsaka digitalno podpisana,</li>
<li>metapodatke (npr. številko bloka in časovni žig) in</li>
<li>povezavo do prejšnjega bloka.</li>
</ul>
<p>Vsaka transakcija, blok kot celota in povezave med bloki so zavarovane s kriptografsko tehnologijo, zaradi katere so le-te <strong>nespremenljive</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Immutable_object"><i class="fa-brands fa-wikipedia-w"></i>immutable</a>)</em> - retrospektivna sprememba posameznih transakcij je praktično nemogoča, še posebej, ko se v verigo doda več novih blokov. To je tudi ena izmed slabosti takšnih sistemov, saj so s tega vidika neprizanesljivi do napak, ki se lahko zgodijo pri transakcijah z napačno vsebino (npr. napačna količina poslanih sredstev, napačen naslovnik posredovanih sredstev, napake v izvorni kodi pametnih pogodb idr.).</p>
</div>
<div id="omrežje-ethereum" class="section level3 hasAnchor" number="11.1.2">
<h3><span class="header-section-number">11.1.2</span> Omrežje Ethereum<a href="DApps-pametne-pogodbe.html#omrežje-ethereum" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Obstajajo različna omrežja P2P, ki podpirajo tehnologijo veriženja blokov. Najbolj znano je <a href="https://en.wikipedia.org/wiki/Bitcoin_network"><i class="fa-brands fa-wikipedia-w"></i>omrežje <i class="fa-solid fa-bitcoin-sign"></i><strong>Bitcoin</strong></a>, ki je bilo tudi prvo javno dostopno omrežje verige blokov.</p>
<p>V okviru tega predmeta se bomo osredotočili na <a href="https://en.wikipedia.org/wiki/Ethereum"><i class="fa-brands fa-wikipedia-w"></i>omrežje <i class="fa-brands fa-ethereum"></i><strong>Ethereum</strong></a>. Vozlišča, ki sodelujejo v omrežju Ethereum, gostijo podatkovno bazo verige blokov in kos programske opreme - odjemalec vozlišča. Ker so vozlišča med seboj enakovredna, v omrežju Ethereum ni jasnega razlikovanja med konceptom odjemalec in strežnik. Vsako vozlišče je namreč strežnik za druga vozlišča in hkrati tudi odjemalec drugih vozlišč. Ravno zato se programski element vozlišča Ethereum imenuje odjemalec <em>(angl. <a href="https://en.wikipedia.org/wiki/Client_(computing)"><i class="fa-brands fa-wikipedia-w"></i>client</a>)</em>.</p>
<p>Odjemalci Ethereum izpostavljajo skupni odjemalski vmesnik in medsebojno komunicirajo preko protokola P2P, ki se imenuje <a href="https://en.wikipedia.org/wiki/Wire_protocol"><i class="fa-brands fa-wikipedia-w"></i>Wire</a>. Obstajajo različne implementacije odjemalca Ethereum (npr. v programskem jeziku C++, Go, Java, Ruby itd.), vendar vsi implementirajo standardni odjemalski vmesnik in protokol Wire, zato lahko komunicirajo brez težav.</p>
<p>Prednost odjemalca Ethereum vozlišča pred odjemalcem Bitcoin vozlišča je v tem, da poleg posredovanja transakcij in blokov kriptovalut, kot to podpira vozlišče Bitcoin, lahko vozlišče Ethereum izvaja tudi kodo aplikacije, ki se nahaja v podatkovni bazi verige blokov. S tega vidika so platforme, kot je Ethereum, znane tudi kot <strong>programabilne verige blokov</strong>. Izvorna koda decentraliziranih aplikacij se nahaja v <strong>pametnih pogodbah</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Smart_contract"><i class="fa-brands fa-wikipedia-w"></i>Smart Contract</a>)</em>, ki vsebujejo logiko in stanja, podobno kot razredi v objektno usmerjenih programskih jezikih.</p>
<p>Čeprav vozlišča omrežja Ethereum komunicirajo preko skupnega protokola Wire, vsa vozlišča ne opravljajo enake funkcije. V splošnem poznamo dve osrednji vrsti vozlišč, ki se razlikujeta po funkcionalnostih:</p>
<ul>
<li><strong>Polna vozlišča</strong> <em>(angl. full node)</em>, ki lahko pasivno obdelajo transakcije - berejo iz podatkovne baze verige blokov, ne morejo pa kreirati novih blokov. Lahko pa dodajo bloke, ki so jih prejeli od ostalih enakovrednih vozlišč, v svojo lokalno verzijo verige blokov. Izvajajo tudi transakcije, vendar zgolj zato, da preverijo pravilnost podatkov verige blokov, ki jih prejmejo od ostalih enakovrednih vozlišč. Preverjajo tudi ali so prejeti bloki pravilni in vsebujejo verodostojne podatke z izvajanjem pametnih pogodb, vendar v verigo blokov ne zapisujejo podatkov.</li>
<li><strong>Rudarska vozlišča</strong> <em>(angl. mining node)</em> aktivno obdelujejo transakcije - združujejo in shranjujejo transakcije v nove bloke podatkovne baze verige blokov. Za opravljanje računsko intenzivnega in energetsko zahtevnega dela so nagrajeni v <a href="https://en.wikipedia.org/wiki/Ethereum"><i class="fa-brands fa-ethereum"></i>Ether</a>-ju, kriptovaluti, podprti na platformi Ethereum. Te nove bloke tudi posredujejo naprej preostalim vozliščem omrežja P2P. Vozlišča so rudarska zato, ker je proces konsolidacije novega bloka v verigi blokov in nagrajevanje dela v žetonih kriptovalute, znano kot rudarjenje.</li>
</ul>
<blockquote>
<p><strong>Opomba</strong>: 15. 9. 2022 je Ethereum namesto <strong>mehanizma soglasja o delu</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Proof_of_work"><i class="fa-brands fa-wikipedia-w"></i>Proof-of-Work (<strong>PoW</strong>)</a>)</em> začel uporabljati <strong>mehanizem soglasja o deležu</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Proof_of_stake"><i class="fa-brands fa-wikipedia-w"></i>Proof-of-Stake (<strong>PoS</strong>)</a>)</em>, kar imenujemo <strong>združitev</strong> <em>(angl. the Merge)</em>.</p>
</blockquote>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-Zivljenjski-cikel-aplikacije-za-glasovanje"></span>
<img src="assets/img/Zivljenjski_cikel_aplikacije_za_glasovanje.png" alt="Življenjski cikel aplikacije za glasovanje" width="600" />
<p class="caption">
Slika 11.2: Življenjski cikel aplikacije za glasovanje
</p>
</div>
</div>
<div id="terminologija-dapp" class="section level3 hasAnchor" number="11.1.3">
<h3><span class="header-section-number">11.1.3</span> Terminologija DApp<a href="DApps-pametne-pogodbe.html#terminologija-dapp" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>V tem poglavju bomo predstavili ključne izraze, ki jih je eden od ustanoviteljev omrežja Ethereum, <a href="https://en.wikipedia.org/wiki/Vitalik_Buterin"><i class="fa-brands fa-wikipedia-w"></i>Vitalik Buterin</a>, opisal v dnevniškem zapisu <a href="https://blog.ethereum.org/2014/05/06/daos-dacs-das-and-more-an-incomplete-terminology-guide/"><i class="fa-solid fa-earth-europe"></i><strong>DAOs, DACs, DAs and More: An Incomplete Terminology Guide</strong></a>, kjer je pojasnil ključne koncepte DApp.</p>
<p><strong>Pametna pogodba</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Smart_contract"><i class="fa-brands fa-wikipedia-w"></i>smart contract</a>)</em> je dogovor med dvema ali več strankami, ki vključuje izmenjavo digitalnih sredstev. Ena ali več strank ob sklenitvi pogodbe le-tej dodeli digitalna sredstva. Sredstva se nato prerazporedijo med stranke v skladu z vnaprej določenim protokolom, zapisanim v poslovni logiki in stanjem, ki se inicializira ob začetku pogodbe.</p>
<p><strong>Avtonomni agent</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Autonomous_agent"><i class="fa-brands fa-wikipedia-w"></i>autonomous agent</a>)</em> je programska enota, ki samostojno sodeluje z zunanjimi programskimi storitvami in se lahko ponovno konfigurira ali ponastavi po preverjenih spremembah v zunanjem okolju.</p>
<p>Tradicionalna centralizirana organizacija vsebuje sredstva in različne skupine posameznikov, običajno vlagatelje, zaposlene in stranke. Vlagatelji nadzorujejo organizacijo tako, da imajo v lasti njen del z nakupom delnic. Na interakcije med nekaterimi skupinami posameznikov vpliva tudi to, ali nadzorujejo organizacijo. Zaposlene lahko npr. zaposlijo vlagatelji ali drugi zaposleni, ki jih neposredno ali posredno pooblastijo vlagatelji.</p>
<p><strong>Decentralizirane organizacije</strong> <em>(angl. decentralized organization (<strong>DO</strong>))</em> ne nadzoruje nobena entiteta. Vnaprej določeni protokoli so tisti, ki določajo interakcije med skupinami posameznikov, vključenih v organizacijo. Takšni protokoli so lahko zasnovani tako, da imajo nekateri posamezniki več moči kot drugi, npr. glede na število lastniških delnic (podobno kot pri centraliziranih organizacijah).</p>
<p><strong>Decentralizirana avtonomna organizacija</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Decentralized_autonomous_organization"><i class="fa-brands fa-wikipedia-w"></i>decentralized autonomous organization (<strong>DAO</strong>)</a>)</em> je hkrati decentralizirana organizacija (DO) in avtonomni agent. Tako kot avtonomni agent je programska enota, ki samostojno sodeluje z zunanjimi programskimi storitvami. Posamezniki, vključeni v DAO, sodelujejo, tako kot pri DO, preko vnaprej določenih protokolov. Glavna razlika med DAO in DO je v tem, da so interakcije med DAO in zunanjimi akterji v veliki meri avtomatizirane, protokoli interakcije pa so zapisani v pametni pogodbi, medtem ko so interakcije med lastniki DO in zunanjimi strankami predmet ročno opredeljenega protokola. Ključna prednost je, da so z vidika zunanjih akterjev DAO bolj zaupanja vredni kot DO, saj so avtomatizirane interakcije predvidljive, medtem ko so interakcije ročno opredeljenega protokola v celoti odvisne od ugleda posameznikov, ki mu sledijo.</p>
<p><strong>Decentralizirana avtonomna korporacija</strong> <em>(angl. decentralized autonomous corporation (<strong>DAC</strong>))</em> je DAO, ki je lahko delno v lasti tudi z nakupom delnic. Kot pri klasičnih centraliziranih korporacijah tudi DAC občasno izplačuje dividende, odvisno od finančnega uspeha. Po drugi strani je DAO v splošnem neprofitna organizacija, kjer imajo udeleženci ekonomsko korist izključno s prispevkom k ekosistemu in povečanjem notranjega kapitala.</p>
</div>
<div id="decentralizirane-in-porazdeljene-aplikacije" class="section level3 hasAnchor" number="11.1.4">
<h3><span class="header-section-number">11.1.4</span> Decentralizirane in porazdeljene aplikacije<a href="DApps-pametne-pogodbe.html#decentralizirane-in-porazdeljene-aplikacije" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Decentraliziranih <em>(angl. <a href="https://en.wikipedia.org/wiki/Decentralized_application"><i class="fa-brands fa-wikipedia-w"></i>decentralized</a>)</em> aplikacij ne smemo zamenjevati s porazdeljenimi <em>(angl. <a href="https://en.wikipedia.org/wiki/Distributed_computing"><i class="fa-brands fa-wikipedia-w"></i>distributed</a>)</em> aplikacijami. Oba pojma si delita nekaj skupnih lastnosti, vendar predstavljata dva različna koncepta.</p>
<p><strong>Aplikacija</strong> je <strong>porazdeljena</strong>, če deluje na več strežnikih v omrežju. Najenostavnejši primer porazdeljene aplikacije je spletna aplikacija, ki je običajno razdeljena na spletni strežnik, aplikacijski strežnik, podatkovno bazo ter mogoče še poštni strežnik in kakšen starejši mainframe sistem, kot to prikazuje levi del slike <a href="DApps-pametne-pogodbe.html#fig:slika-Decentralizirana-vs-porazdeljena-aplikacija">11.3</a>. Demo aplikacija, ki smo jo razvili do tega trenutka pri predmetu, je primer porazdeljene aplikacije.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-Decentralizirana-vs-porazdeljena-aplikacija"></span>
<img src="assets/img/Decentralizirana_vs_porazdeljena_aplikacija.png" alt="Primerjava strukture porazdeljene in decentralizirane aplikacije" width="600" />
<p class="caption">
Slika 11.3: Primerjava strukture porazdeljene in decentralizirane aplikacije
</p>
</div>
<p>Porazdeljena aplikacija se izvaja na več strežnikih v omrežju. <strong>Aplikacija</strong> je <strong>decentralizirana</strong>, če je v celoti replicirana na vsako vozlišče omrežja, kjer je vsako vozlišče lahko v lasti druge entitete. Večje kot je število entitet, ki imajo v lasti vozlišča omrežja, bolj zaupanja vredno je celotno omrežje. Očitno je, da omrežij, ki imajo le nekaj lastnikov, ne moremo šteti za zaupanja vredna, ker v resnici ne decentralizirajo obdelave.</p>
<p>Centralizirana aplikacija je ponavadi porazdeljena, vendar se lahko decentralizirane aplikacije tudi porazdelijo po več strežnikih znotraj vsakega logičnega vozlišča.</p>
</div>
<div id="primeri-dobrih-praks" class="section level3 hasAnchor" number="11.1.5">
<h3><span class="header-section-number">11.1.5</span> Primeri dobrih praks<a href="DApps-pametne-pogodbe.html#primeri-dobrih-praks" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>V zadnjem obdobju je bilo razvitih veliko decentraliziranih aplikacij DApps. Nekatere so prejele različne kroge financiranja tveganega kapitala in so bile uspešno vpeljane v produkcijo, spet druge niso uspele prepričati vlagateljev in uporabnikov ter niso nikoli prestale faze <a href="https://en.wikipedia.org/wiki/Proof_of_concept"><i class="fa-brands fa-wikipedia-w"></i>PoC</a>.</p>
<p>Glede na novost tehnologije je težko napovedati, kaj bo delovalo in kaj ne. Kljub temu poznamo različne primere uporabe, kjer so najbolj uspešni tisti, ki izkoriščajo glavne prednosti teh tehnologij, zlasti nespremenljivost, decentralizacijo, varnost in odpornost.</p>
<p>Posledično so ključna področja, kjer se lahko pristop DApps izkaže kot uspešen, naslednja:</p>
<ul>
<li><strong>sledenje poreklu in pristnosti</strong> (npr. proizvodnja hrane, zdravil, <a href="https://everledger.io/"><i class="fa-solid fa-earth-europe"></i>Everledger</a>),</li>
<li><strong>preverjanje identitete</strong> (npr. <a href="https://kyc-chain.com/"><i class="fa-solid fa-earth-europe"></i>KYC-Chain</a>),</li>
<li><strong>dokaz lastništva</strong> (npr. <a href="https://www.trusttoken.com/"><i class="fa-solid fa-earth-europe"></i>TrustToken</a>),</li>
<li><strong>ekonomija stvari</strong> (npr. <a href="https://www.blockchains.com/"><i class="fa-solid fa-earth-europe"></i>Blochains</a>),</li>
<li><strong>decentralizirani trgi za napovedovanje</strong> (npr. <a href="http://predictit.org/"><i class="fa-solid fa-earth-europe"></i>PredictIt</a>),</li>
<li><strong>financiranje mednarodne trgovine</strong> (npr. <a href="https://we-trade.com/"><i class="fa-solid fa-earth-europe"></i>we.trade</a>),</li>
<li><strong>množično financiranje</strong> (npr. <a href="http://weifund.io/"><i class="fa-solid fa-earth-europe"></i>WeiFund</a>),</li>
<li><strong>igre na srečo</strong> (npr. <a href="https://www.edgelessgroup.io/"><i class="fa-solid fa-earth-europe"></i>Edgeless</a>).</li>
</ul>
</div>
</div>
<div id="veriga-blokov" class="section level2 hasAnchor" number="11.2">
<h2><span class="header-section-number">11.2</span> Veriga blokov<a href="DApps-pametne-pogodbe.html#veriga-blokov" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="sklad-tehnologij-za-podporo-dapp" class="section level3 hasAnchor" number="11.2.1">
<h3><span class="header-section-number">11.2.1</span> Sklad tehnologij za podporo DApp<a href="DApps-pametne-pogodbe.html#sklad-tehnologij-za-podporo-dapp" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Decentralizirane aplikacije temeljijo na poslovni logiki, ki je zajeta v obliki pametne pogodbe in se izvaja v porazdeljeni podatkovni bazi verigi blokov. Tehnologija veriženja blokov pa temelji na <a href="https://en.wikipedia.org/wiki/Public-key_cryptography"><i class="fa-brands fa-wikipedia-w"></i><strong>kriptografiji z javnim ključem</strong></a>, <a href="https://en.wikipedia.org/wiki/Cryptographic_hash_function"><span class="skupaj"><i class="fa-brands fa-wikipedia-w"></i><strong>kriptografskih zgoščevalnih funkcijah</strong></span></a> in <a href="https://en.wikipedia.org/wiki/Consensus_(computer_science)"><i class="fa-brands fa-wikipedia-w"></i><strong>konceptu soglasja</strong></a>, ki ga lahko med drugim implementiramo npr. z dokazilom o delu <em>(angl. <a href="https://en.wikipedia.org/wiki/Proof_of_work"><i class="fa-brands fa-wikipedia-w"></i>Proof-of-Work (<strong>PoW</strong>)</a>)</em> ali dokazilom o vložku <em>(angl. <a href="https://en.wikipedia.org/wiki/Proof_of_stake"><i class="fa-brands fa-wikipedia-w"></i>Proof-of-Stake (<strong>PoS</strong>)</a>)</em>.</p>
<div id="kriptografija-z-javnim-ključem" class="section level4 hasAnchor" number="11.2.1.1">
<h4><span class="header-section-number">11.2.1.1</span> Kriptografija z javnim ključem<a href="DApps-pametne-pogodbe.html#kriptografija-z-javnim-ključem" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Kriptografija z javnim ključem</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Public-key_cryptography"><i class="fa-brands fa-wikipedia-w"></i>public key cryptography</a>)</em> je metodologija šifriranja, ki temelji na paru ključev: zasebni ključ (ponavadi ustvarjen naključno in je znan samo lastniku) in javni ključ (znan vsem in je ustvarjen s pomočjo algoritma, ki na vhodu uporabi privatni ključ). Za boljšo predstavo si lahko zasebni ključ predstavljamo kot fizični ključ poštnega predala, ki ga poznamo zgolj mi, in javni ključ je poštni naslov, ki ga poznajo vsi.</p>
<p>Zasebni ključ ima dva namena, in sicer omogoča:</p>
<ul>
<li><strong>dešifriranje podatkov</strong>, ki so bili šifrirani z javnim ključem,</li>
<li><strong>digitalno podpisovanje dokumentov</strong>, kjer lahko podpis izvede le tisti, ki pozna zasebni ključ, preveri pa ga lahko vsak z javnim ključem.</li>
</ul>
<p>Ravno pristnost transakcij pametnih pogodb je odvisna od digitalnih podpisov.</p>
<p>V okviru platforme verige blokov je kriptovaluta shranjena na računu, ki je identificiran z javnim ključem, vendar lahko z računom upravljamo le, če poznamo zasebni ključ. Če zasebni ključ izgubimo ali pozabimo, ne more nihče več upravljati z računom in sredstva na tem računu obravnavamo kot izgubljena.</p>
<blockquote>
<p><i class="fa-regular fa-lightbulb"></i><strong>Demo</strong>: Preveri delovanje <a href="https://andersbrownworth.com/blockchain/public-private-keys/keys"><i class="fa-solid fa-key"></i>para <strong>javnih</strong> in <strong>zasebnih ključev</strong></a>, <a href="https://andersbrownworth.com/blockchain/public-private-keys/signatures"><i class="fa-solid fa-signature"></i><strong>podpisovanje vsebine</strong></a> in <a href="https://andersbrownworth.com/blockchain/public-private-keys/transaction"><span class="skupaj"><i class="fa-solid fa-signature"></i><strong>podpisovanje transakcije</strong></span></a>.</p>
</blockquote>
</div>
<div id="kriptografska-zgoščevalna-funkcija" class="section level4 hasAnchor" number="11.2.1.2">
<h4><span class="header-section-number">11.2.1.2</span> Kriptografska zgoščevalna funkcija<a href="DApps-pametne-pogodbe.html#kriptografska-zgoščevalna-funkcija" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Zgoščevalna funkcija</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Hash_function"><i class="fa-brands fa-wikipedia-w"></i>hash function</a>)</em> je funkcija, ki lahko preslika podatke poljubne velikosti v podatke fiksne velikosti, kar imenujemo zgoščena vrednost <em>(angl. hash)</em>.</p>
<p>Kot primer lahko imamo zgoščevalno funkcijo, ki vedno generira 64-bitno zgoščeno vrednost iz datoteke ali niza poljubne velikosti. Ne glede na velikost, 10 KB ali 10 GB, bo rezultat 64-bitna zgoščena vrednost.</p>
<p><strong>Kriptografska zgoščevalna funkcija</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Cryptographic_hash_function"><i class="fa-brands fa-wikipedia-w"></i>cryptographic hash function</a>)</em> je zgoščevalna funkcija z naslednjimi dodatnimi lastnostmi:</p>
<ul>
<li>Je <a href="https://en.wikipedia.org/wiki/Deterministic_algorithm"><i class="fa-brands fa-wikipedia-w"></i><strong>deterministična</strong></a>, kjer isti vhod vrne vedno isto zgoščeno vrednost.</li>
<li><strong>Hitro izračunljiva</strong>.</li>
<li>Gre za <strong>enosmerno funkcijo</strong>, ki je ne moremo obrniti. To pomeni, da je edini način za določitev vhodnega podatka na podlagi zgoščene vrednosti takšen, da s surovo silo poskušamo pridobiti isto zgoščeno vrednost z ogromnim številom različnih vhodnih podatkov.</li>
<li><strong>Skoraj nemogoče</strong> je <strong>pridobiti isto zgoščeno vrednost</strong> iz dveh različnih vhodnih podatkov. Čeprav lahko obstaja manjša možnost, da dva vhoda povzročita isto zgoščeno vrednost, je to nemogoče vnaprej določiti, brez pristopa omenjenega v prejšnji alineji.</li>
<li><strong>Manjša sprememba vhodnega podatka</strong> povzroči <strong>večjo spremembo zgoščene vrednosti</strong>.</li>
</ul>
<p>Kriptografske zgoščevalne funkcije se zato uporabljajo za digitalno podpisovanje, lahko pa so uporabne tudi v ostalih scenarijih. Kot primer bi lahko pri spletni trgovini izboljšali varnost za prodajalce tako, da od kupca zahtevamo generiranje tajne kode (npr. naključno število) in potem prodajalcu posredujemo kriptografsko zgoščeno vrednost te kode. Ta zgoščena vrednost je neke vrste zagotovilo plačila. Ko pride dostava, bi npr. kurir izročil blago šele takrat, ko bi prejel to tajno kodo, ki bi ob dobavi v DApp za spletno trgovino ustvarila pričakovano začetno zgoščeno vrednost in bi se uporabila kot fizični ključ za odklepanje plačila. V nadaljevanju si bomo ogledali, kako lahko to idejo uporabimo za izboljšavo varnosti decentraliziranih aplikacij.</p>
<blockquote>
<p><i class="fa-regular fa-lightbulb"></i><strong>Demo</strong>: Preveri delovanje <a href="https://andersbrownworth.com/blockchain/hash"><i class="fa-solid fa-hashtag"></i>zgoščevalne funkcije <strong>SHA256</strong></a>.</p>
</blockquote>
</div>
<div id="veriga-blokov-1" class="section level4 hasAnchor" number="11.2.1.3">
<h4><span class="header-section-number">11.2.1.3</span> Veriga blokov<a href="DApps-pametne-pogodbe.html#veriga-blokov-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Veriga blokov</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Blockchain"><i class="fa-brands fa-wikipedia-w"></i>Blockchain</a>)</em> je porazdeljena podatkovna baza, ki hrani podatke v obliki blokov. Blok vsebuje množico transakcij, ki so digitalno podpisane, da lahko dokažemo njihov izvor. Večina verig blokov transakcije podpisuje z <strong>algoritmom digitalnega podpisa z uporabo eliptičnih krivulj</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Elliptic_Curve_Digital_Signature_Algorithm"><i class="fa-brands fa-wikipedia-w"></i>Elliptic Curve Digital Signature Algorithm (<strong>ECDSA</strong>)</a>)</em>, saj ga je težje zlomiti kot algoritem digitalnega podpisa <em>(angl. <a href="https://en.wikipedia.org/wiki/Digital_Signature_Algorithm"><i class="fa-brands fa-wikipedia-w"></i>Digital Signature Algorithm (<strong>DSA</strong>)</a>)</em> in uporablja manjše ključe pri isti stopnji varnosti.</p>
<p>Vsak blok vsebuje časovni žig in povezavo do prejšnjega bloka (glej sliko <a href="DApps-pametne-pogodbe.html#fig:slika-bloki-v-BC">11.4</a>), ki temelji na njegovi kriptografski zgoščeni vrednosti. Vsebuje tudi kriptografsko zgoščeno vrednost povzetka celotnega bloka, vključno z zgoščeno vrednostjo prejšnjega bloka. Na ta način veriga blokov vsebuje trenutno stanje (najnovejši blok) in tudi celotno zgodovino vseh transakcij od začetka.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-bloki-v-BC"></span>
<img src="assets/img/Bloki_v_BC.png" alt="Bloki v verigi blokov" width="400" />
<p class="caption">
Slika 11.4: Bloki v verigi blokov
</p>
</div>
<p>Takšna struktura zagotavlja, da transakcij ni mogoče spreminjati. Transakcije zapisane v bloku ni mogoče retroaktivno spreminjati, ker bi bilo za takšno operacijo treba spremeniti oz. ponovno generirati tudi zgoščeno vrednost bloka, ki ga vsebuje, sicer se podatki ne bi ujemali z obstoječim, na katerega se že sklicujejo naslednji bloki.</p>
<blockquote>
<p><strong>Opomba</strong>: Če imamo dve kontradiktorni transakciji, npr. vsaka poskuša prenesti vsa sredstva istega računa na drug ciljni račun (napad z dvojno porabo <em>(angl. <a href="https://en.wikipedia.org/wiki/Double-spending"><i class="fa-brands fa-wikipedia-w"></i>Double-spending</a>)</em>, bodo rudarji izvedli samo prvo, ki je priznana v omrežju Ethereum preko globalno dostopne zaporedne številke. Druga transakcija bo zavrnjena in se ne bo nikoli pojavila v konsolidiranem bloku. <a href="https://en.wikipedia.org/wiki/Satoshi_Nakamoto"><i class="fa-brands fa-wikipedia-w"></i><strong>Satoshi Nakamoto</strong></a> je bil prvi, ki je rešil problem dvojne porabe na verigi blokov <i class="fa-solid fa-bitcoin-sign"></i>Bitcoin in vsaka veriga blokov ima rešitev za to, sicer ne bi bila uporabna.</p>
</blockquote>
<p>Opisana struktura verige blokov je poenostavljena različica podatkovnih struktur verige blokov v resničnem svetu, kot je npr. <a href="https://en.wikipedia.org/wiki/Merkle_tree"><i class="fa-brands fa-wikipedia-w"></i>Merkle tree</a>, ki je v uporabi pri <i class="fa-solid fa-bitcoin-sign"></i>Bitcoinu in <a href="https://en.wikipedia.org/wiki/Radix_tree"><i class="fa-brands fa-wikipedia-w"></i>Patricia tree</a>, ki se uporablja pri <i class="fa-brands fa-ethereum"></i>Ethereum. Glede na te lastnosti so verige blokov še posebej primerne za trajno beleženje zgodovine dogodkov (npr. upravljanje identitete, obdelava transakcij, sledenje izvoru idr.).</p>
<blockquote>
<p><i class="fa-regular fa-lightbulb"></i><strong>Demo</strong>: Preveri vlogo zgoščevalne funkcije pri posameznem <a href="https://andersbrownworth.com/blockchain/block"><i class="fa-solid fa-cube"></i><strong>bloku</strong></a> in pri <a href="https://andersbrownworth.com/blockchain/blockchain"><i class="fa-solid fa-link"></i>povezovanju <strong>blokov</strong> v <strong>verigo</strong></a>.</p>
</blockquote>
</div>
<div id="rudarjenje" class="section level4 hasAnchor" number="11.2.1.4">
<h4><span class="header-section-number">11.2.1.4</span> Rudarjenje<a href="DApps-pametne-pogodbe.html#rudarjenje" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Za vzpodbujanje uporabe omrežja P2P, ki podpira verigo blokov, in neprekinjeno obdelavo transakcij, so aktivna procesna vozlišča oz. rudarji nagrajeni za zagotavljanje računskih virov in kritje stroškov električne energije preko mehanizma soglasja.</p>
<p>Vsakih nekaj sekund ima en uspešen rudar pravico ustvariti in obdržati določeno število žetonov <a href="https://en.wikipedia.org/wiki/Cryptocurrency"><i class="fa-brands fa-wikipedia-w"></i><strong>kriptovalute</strong></a>, podprtih s strani platforme. Takšna kriptovaluta ima ekonomsko vrednost, saj jo lahko uporabimo za nakupovanje storitev v omrežju, lahko pa jo tudi zamenjamo za konvencionalne <a href="https://en.wikipedia.org/wiki/Fiat_money"><i class="fa-brands fa-wikipedia-w"></i><strong>fiat valute</strong></a> (npr. evri, dolarji ipd.).</p>
</div>
<div id="soglasje" class="section level4 hasAnchor" number="11.2.1.5">
<h4><span class="header-section-number">11.2.1.5</span> Soglasje<a href="DApps-pametne-pogodbe.html#soglasje" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Soglasje</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Consensus_(computer_science)"><i class="fa-brands fa-wikipedia-w"></i>consensus</a>)</em> je mehanizem, kjer se vozlišča v omrežju dogovorijo o izidu transakcije, kar smo že opredelili v poglavju <a href="DApps-pametne-pogodbe.html#kaj-je-decentralizirana-aplikacija-dapp">11.1.1</a>. Omenili smo, da je soglasje porazdeljeno, ker ga oblikujejo številni udeleženci, in nezaupljivo, ker medsebojno zaupanje med udeleženci ni potrebno.</p>
<p>Dejansko soglasje se ne išče na ravni posamezne transakcije, ampak na ravni novega bloka verige. Vsak udeleženec neodvisno preveri ali je nov blok veljaven. Če je z rezultatom zadovoljen, ga posreduje naprej ostalim udeležencem omrežja.</p>
<p>V praksi se ponavadi zgodi, da večina udeležencev prejme blok kot veljaven in ga uspešno posredujejo po omrežju in pri tem rudarji takšen blok uporabijo kot zadnji veljavni blok, kjer bo preostali del verige blokov zgrajen na njem. Če bi zlonamerni rudar dodal napačen blok v verigo in bi se ta razširil na ostala vozlišča, bi ta vozlišča nov blok zavrnila in zlonamerna veriga bi takoj izumrla. Enako bi se zgodilo, če bi polno vozlišče poskušalo spremeniti blok, preden bi ga razširilo med ostala vozlišča.</p>
<p>Ključni korak mehanizma konsenza je preverjanje zadnjega bloka s strani udeleženega vozlišča. Po preverjanju digitalnega podpisa posameznih transakcij v bloku, vozlišče preveri ali je zgoščena vrednost bloka veljavna. Takšno zgoščeno vrednost rudarji ustvarijo po dogovorjenem protokolu. V preteklosti se je na verigi blokov <i class="fa-brands fa-ethereum"></i>Ethereum uporabljal protokol <a href="https://en.wikipedia.org/wiki/Proof_of_work"><i class="fa-brands fa-wikipedia-w"></i>Proof-of-Work (<strong>PoW</strong>)</a>, trenutna različica pa temeljili na protokolu <a href="https://en.wikipedia.org/wiki/Proof_of_stake"><i class="fa-brands fa-wikipedia-w"></i>Proof-of-Stake (<strong>PoS</strong>)</a>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-PoW-vs-PoS"></span>
<img src="assets/img/PoW_vs_PoS.png" alt="Primerjava PoW in PoS" width="700" />
<p class="caption">
Slika 11.5: Primerjava PoW in PoS
</p>
</div>
<p>Kot smo si že pogledali, blok vsebuje kriptografsko zgoščeno vrednost, ki povzema celotno vsebino bloka, vključno z njegovimi metapodatki in podatki o transakcijah ter dodaten del fiksne dolžine 32 bitov, ki se imenuje enkratno kriptografsko število <em>(angl. <a href="https://en.wikipedia.org/wiki/Cryptographic_nonce"><i class="fa-brands fa-wikipedia-w"></i>nonce</a>)</em>.</p>
<p>Cilj pri protokolu PoW je, da rudarji najdejo to enkratno kriptografsko število tako, da zgoščena vrednost ustreza določeni omejitvi (npr. vsebuje določeno število vodilnih ničel).</p>
<blockquote>
<p><i class="fa-regular fa-lightbulb"></i><strong>Demo</strong>: Preveri vlogo <a href="https://andersbrownworth.com/blockchain/distributed"><i class="fa-solid fa-link"></i><strong>soglasja</strong> pri <strong>porazdeljeni verigi blokov</strong></a>, <a href="https://andersbrownworth.com/blockchain/tokens"><i class="fa-solid fa-layer-group"></i><strong>vključevanje transakcij</strong> v blok</a> in <a href="https://andersbrownworth.com/blockchain/coinbase"><span class="skupaj"><i class="fa-solid fa-signature"></i><strong>podpisovanje transakcij</strong></span></a>.</p>
</blockquote>
</div>
</div>
<div id="podrobnosti-vozlišča-ethereum" class="section level3 hasAnchor" number="11.2.2">
<h3><span class="header-section-number">11.2.2</span> Podrobnosti vozlišča Ethereum<a href="DApps-pametne-pogodbe.html#podrobnosti-vozlišča-ethereum" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Kot prikazuje slika <a href="DApps-pametne-pogodbe.html#fig:slika-Podrobnosti-vozlisca-Ethereum">11.6</a>, je vsako vozlišče omrežja Ethereum sestavljeno iz dveh osrednjih komponent:</p>
<ul>
<li><strong>Odjemalec Ethereum</strong>, ki deluje kot izvajalno okolje in je sestavljen iz:
<ul>
<li><strong>Navideznega stroja</strong> <a href="https://ethereum.org/en/developers/docs/evm/"><i class="fa-brands fa-ethereum"></i>Ethereum Virtual Machine (<strong>EVM</strong>)</a>, ki je sposoben izvajanja izvorne kode pametne pogodbe, običajno napisane v programskem jeziku <a href="https://en.wikipedia.org/wiki/Solidity"><i class="fa-brands fa-wikipedia-w"></i>Solidity</a> in nato prevedene v <a href="https://en.wikipedia.org/wiki/Bytecode"><i class="fa-brands fa-wikipedia-w"></i>bajtno kodo</a> EVM.</li>
<li><strong>Pomnilniški bazen</strong>, kjer vozlišče shranjuje prejete transakcije, preden jih posreduje naprej v omrežje.</li>
<li><strong>Odjemalski proces</strong>, ki koordinira obdelavo in obdeluje vhodna sporočila ter transakcije, jih posreduje v EVM, ko je to potrebno, in shranjuje transakcije v pomnilniški bazen ter jih iz njega pridobiva. Odjemalski proces obravnava tudi vhodne bloke iz verige blokov, ki jih vozlišče prejme od ostalih enakovrednih vozlišč in jih dodaja lokalni kopiji podatkovne baze verige blokov.</li>
<li><a href="https://en.wikipedia.org/wiki/JSON-RPC"><i class="fa-brands fa-wikipedia-w"></i><strong>JSON-RPC</strong></a> <strong>API</strong>, ki izpostavlja funkcionalnost odjemalca drugim vozliščem in zunanjim uporabnikom.</li>
</ul></li>
<li><strong>Podatkovna baza verige blokov</strong> poleg podatkov o transakcijah hrani še kopijo bajtne kode EVM vseh pametnih pogodb, ki so nameščene v omrežju, in tudi njihovo stanje.
<ul>
<li>Rudarska vozlišča na verigi blokov Ethereum, ki uporablja PoW so redno dodajala nove bloke v verigo blokov, in sicer približno vsakih 15 s.</li>
<li>Odkar Ethereum uporablja PoS, se dodajanja blokov zgodi približno vsakih 12 s.</li>
<li>Časovna porazdelitev časov generiranja blokov na omrežju Ethereum lahko najdete na <a href="https://ycharts.com/indicators/ethereum_average_block_time"><i class="fa-solid fa-earth-europe"></i>yCharts</a>.</li>
</ul></li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-Podrobnosti-vozlisca-Ethereum"></span>
<img src="assets/img/Podrobnosti_vozlisca_Ethereum.png" alt="Podrobnosti vozlišča Ethereum" width="400" />
<p class="caption">
Slika 11.6: Podrobnosti vozlišča Ethereum
</p>
</div>
</div>
<div id="življenjski-cikel-transakcije" class="section level3 hasAnchor" number="11.2.3">
<h3><span class="header-section-number">11.2.3</span> Življenjski cikel transakcije<a href="DApps-pametne-pogodbe.html#življenjski-cikel-transakcije" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Transakcija na verigi blokov se ustvari, ko se v okviru izbranega vozlišča Ethereum preko vmesnika JSON-RPC na pametni pogodbi pokliče funkcija, in sicer so podrobni koraki naslednji (glej sliko <a href="DApps-pametne-pogodbe.html#fig:slika-Podrobnosti-vozlisca-Ethereum">11.6</a>):</p>
<ol style="list-style-type: decimal">
<li>Polno vozlišče prejme transakcijo od enakovrednega vozlišča in jo shrani v pomnilniški bazen.</li>
<li>Zaradi preverjanja polno vozlišče izvede transakcijo znotraj svojega EVM.</li>
<li>Če je preverjanje uspešno, vozlišče posreduje transakcijo preostalim enakovrednim vozliščem. V nasprotnem primeru vozlišče transakcije ne posreduje naprej in transakcija je zavržena.</li>
<li>Rudarsko vozlišče prejeto transakcijo shrani v pomnilniški bazen.</li>
<li>Rudarsko vozlišče iz pomnilniškega bazena izbere tiste transakcije, za katere meni, da so donosne (tj. tiste z določenim višjim dovoljenim stroškom transakcije) in jih poskuša dodati v nov blok.</li>
<li>Če je blok uspešno dodan v verigo blokov, rudarsko vozlišče odstrani povezane transakcije iz svojega pomnilniškega bazena.</li>
<li>Vozlišče posreduje nov blok enakovrednim vozliščem.</li>
<li>Polno vozlišče prejme nov blok od enakovrednega vozlišča.</li>
<li>Zaradi preverjanja polno vozlišče izvede vse transakcije bloka v okviru svojega okolja EVM.</li>
<li>Če je bilo preverjanje uspešno, vozlišče odstrani vse povezane transakcije iz pomnilniškega bazena.</li>
<li>Vozlišče posreduje blok ostalim enakovrednim vozliščem.</li>
</ol>
</div>
<div id="razvijalski-pogled-na-postavitev-pametne-pogodbe" class="section level3 hasAnchor" number="11.2.4">
<h3><span class="header-section-number">11.2.4</span> Razvijalski pogled na postavitev pametne pogodbe<a href="DApps-pametne-pogodbe.html#razvijalski-pogled-na-postavitev-pametne-pogodbe" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Do tega trenutka smo si pogledali, kako je sestavljena decentralizirana aplikacija in kakšen je življenjski cikel transakcije. Zdaj pa si bomo pogledali, kako se pametna pogodba posreduje v omrežje. Izkaže se, da je ta postopek podoben kot pri standardni transakciji.</p>
<p>Pametna pogodba na verigi blokov Ethereum je ponavadi napisana v jeziku Solidity. Razvijalec pametno pogodbo prevede v bajtno kodo EVM in jo nato posreduje na omrežje P2P s pomočjo transakcije postavitve pametne pogodbe. Le-ta se izvede na lokalnem vozlišču Ethereum in se nato posreduje naprej v omrežje. Med širjenjem po omrežju rudarsko vozlišče obdela transakcijo postavitve pametne pogodbe in shrani bajtno kodo EVM v verigo blokov, kot to prikazuje slika <a href="DApps-pametne-pogodbe.html#fig:slika-Razvijalski-pogled-na-postavitev-pametne-pogodbe">11.7</a>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-Razvijalski-pogled-na-postavitev-pametne-pogodbe"></span>
<img src="assets/img/Razvijalski_pogled_na_postavitev_pametne_pogodbe.png" alt="Razvijalski pogled na postavitev pametne pogodbe. Razvijalec razvije pametno pogodbo v jeziku Solidity in jo prevede v bajtno kodo EVM ter vključi v transakcijo postavitve. To se najprej posreduje na lokalno polno vozlišče Ethereum in se posreduje ostalim enakovrednim vozliščem na omrežju. Po rudarjenju je transakcija vključena v verigo blokov." width="600" />
<p class="caption">
Slika 11.7: Razvijalski pogled na postavitev pametne pogodbe. Razvijalec razvije pametno pogodbo v jeziku Solidity in jo prevede v bajtno kodo EVM ter vključi v transakcijo postavitve. To se najprej posreduje na lokalno polno vozlišče Ethereum in se posreduje ostalim enakovrednim vozliščem na omrežju. Po rudarjenju je transakcija vključena v verigo blokov.
</p>
</div>
<p>DApp, ki uporablja omrežje Ethereum, lahko razvijemo z jeziki, podobnimi tistim, ki se uporabljajo za razvoj centraliziranih spletnih aplikacij in smo jih pri predmetu že spoznali (npr. HTML + JavaScript), kot je prikazano na sliki <a href="DApps-pametne-pogodbe.html#fig:slika-Spletne-tehnologije-za-razvoj-DApp">11.8</a>. Komunikacijska plast med uporabniškim vmesnikom in strežniško stranjo temelji na knjižnici <a href="https://web3js.readthedocs.io/"><i class="fa-solid fa-earth-europe"></i>Web3</a>, ki se izvaja na strani odjemalca. Pametne pogodbe pa lahko razvijemo v programskem jeziku <a href="https://docs.soliditylang.org/"><i class="fa-solid fa-earth-europe"></i>Solidity</a>, ki je določena različica jezika JavaScript.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-Spletne-tehnologije-za-razvoj-DApp"></span>
<img src="assets/img/Spletne_tehnologije_za_DApp.png" alt="Spletne tehnologije za razvoj decentraliziranih aplikacij." width="450" />
<p class="caption">
Slika 11.8: Spletne tehnologije za razvoj decentraliziranih aplikacij.
</p>
</div>
</div>
</div>
<div id="platforma-ethereum" class="section level2 hasAnchor" number="11.3">
<h2><span class="header-section-number">11.3</span> Platforma Ethereum<a href="DApps-pametne-pogodbe.html#platforma-ethereum" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="pametne-pogodbe-kot-osnova-dapp" class="section level3 hasAnchor" number="11.3.1">
<h3><span class="header-section-number">11.3.1</span> Pametne pogodbe kot osnova DApp<a href="DApps-pametne-pogodbe.html#pametne-pogodbe-kot-osnova-dapp" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Kot je že predstavljeno v poglavju <a href="DApps-pametne-pogodbe.html#terminologija-dapp">11.1.3</a>, je <strong>pametna pogodba</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Smart_contract"><i class="fa-brands fa-wikipedia-w"></i>Smart Contract</a>)</em> oz. pogodba del programske opreme, ki vsebuje poslovna pravila in stanja. Napisana je v visokonivojskem programskem jeziku, kot je npr. Solidity, prevedena v bajtno kodo EVM, postavljena v omrežje Ethereum in shranjena na verigi blokov v imenu računa, generiranega ob postavitvi na verigo blokov.</p>
<p>Pogodba sprejema transakcijska sporočila iz uporabniškega računa (ali iz drugih pogodb) in izvaja logiko na navideznem stroju Ethereum (EVM). To lahko vključuje tudi pošiljanje sporočil drugim pogodbam, branje stanja iz verige blokov ali zapisovanje stanja v verigo blokov.</p>
<p>Računu, ki pošlje sporočilo pogodbi, se zaračuna transakcijski strošek (v Etherju) s strani uspešnega rudarskega vozlišča, kot kompenzacija za računske in omrežne vire, porabljene med obdelavo zahtevane operacije. Višina takšne kompenzacije se izračuna v enoti <a href="https://golden.com/wiki/Gas_(Ethereum)-NMGDKAB"><i class="fa-brands fa-wikipedia-w"></i><strong>gas</strong></a>, zato običajno pravimo, da je transakcija porabila določeno količino enote gas.</p>
<p>Če želimo podrobno razumeti pametne pogodbe, kako jih uporabniki ali druge pametne pogodbe prožijo, in še posebej, kako se izvajajo, si bomo v nadaljevanju podrobneje pogledali naslednje koncepte: <strong>računi</strong>, <strong>Ether</strong> in <strong>gas</strong>, <strong>transakcijska sporočila</strong> in <strong>navidezni stroj Ethereum</strong>.</p>
<div id="računi" class="section level4 hasAnchor" number="11.3.1.1">
<h4><span class="header-section-number">11.3.1.1</span> Računi<a href="DApps-pametne-pogodbe.html#računi" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Računi so na voljo v dveh oblikah:</p>
<ul>
<li><strong>Računi v zunanji lasti</strong> <em>(angl. externally owned accounts (<strong>EOA</strong>))</em> ali <strong>zunanji računi</strong> <em>(angl. external accounts)</em>, ki jih pogosto imenujemo kar <strong>uporabniški računi</strong> <em>(angl. user accounts)</em>. Javno so dosegljivi preko javnega ključa, vendar lahko z njimi upravljamo le s poznavanjem zasebnega ključa. Če kupite določeno količino Etherja, ga lahko v takšen račun shranite. Prav tako lahko s takšnim računom zahtevate transakcijo v okviru pametne pogodbe.</li>
<li><strong>Pogodbeni računi</strong> <em>(angl. contract accounts)</em> so računi, s katerimi se izvajajo pogodbe. Naslov računa se ustvari v času postavitve na verigo blokov in identificira lokacijo pogodbe v verigi blokov.</li>
</ul>
<p>Tabela <a href="DApps-pametne-pogodbe.html#tab:tabela-Primerjava-racunov">11.1</a> prikazuje ključne lastnostih obeh vrst računov.</p>
<table class="tabela-manjsa table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:tabela-Primerjava-racunov">Tabela 11.1: </span>Primerjava računov
</caption>
<thead>
<tr>
<th style="text-align:left;">
Lastnost
</th>
<th style="text-align:center;">
Uporabniški račun
</th>
<th style="text-align:center;">
Pogodbeni račun
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Ima stanje v Ether.
</td>
<td style="text-align:center;">
<i class="fa-solid fa-check"></i>
</td>
<td style="text-align:center;">
<i class="fa-solid fa-check"></i>
</td>
</tr>
<tr>
<td style="text-align:left;">
Lahko zahteva sporočilo transakcije.
</td>
<td style="text-align:center;">
<i class="fa-solid fa-check"></i>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Lahko zahteva sporočilo klica.
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<i class="fa-solid fa-check"></i>
</td>
</tr>
<tr>
<td style="text-align:left;">
Vsebuje kodo.
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<i class="fa-solid fa-check"></i>
</td>
</tr>
</tbody>
</table>
</div>
<div id="ether" class="section level4 hasAnchor" number="11.3.1.2">
<h4><span class="header-section-number">11.3.1.2</span> Ether<a href="DApps-pametne-pogodbe.html#ether" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><a href="https://en.wikipedia.org/wiki/Ethereum"><i class="fa-brands fa-wikipedia-w"></i><strong>Ether</strong></a> je kriptovaluta, ki jo podpira veriga blokov Ethereum. Njena ključna lastnost je predstavljanje denarne vrednosti storitev in blaga, s katerimi se trguje preko platforme.</p>
<p>Ether se uporablja tudi za plačilo transakcijskih stroškov, ki so izračunani v enoti gas, s katero merimo računske vire, ki jih transakcija porabi. Transakcijski stroški so poravnani v Ethru, kar se izračuna iz cene enote gas. Stroške transakcije zaračunajo rudarji, ki jo opravijo, ko v verigo blokov dodajajo nove bloke transakcij.</p>
<p>Ether lahko izrazimo v različnih enotah, kot je prikazano v tabeli <a href="DApps-pametne-pogodbe.html#tab:tabela-vrednosti-Wei">11.2</a>, kjer je najmanjša enota <a href="https://www.investopedia.com/terms/w/wei.asp"><i class="fa-solid fa-earth-europe"></i><strong>Wei</strong></a>.</p>
<table class="tabela-manjsa table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:tabela-vrednosti-Wei">Tabela 11.2: </span>Različne enote Ethra
</caption>
<thead>
<tr>
<th style="text-align:left;">
Enota
</th>
<th style="text-align:right;">
Vrednost v Wei
</th>
<th style="text-align:left;">
Wei
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Wei
</td>
<td style="text-align:right;">
1 Wei
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Kwei (Babbage)
</td>
<td style="text-align:right;">
<span class="math inline">\(10^3\)</span> Wei
</td>
<td style="text-align:left;">
1.000
</td>
</tr>
<tr>
<td style="text-align:left;">
Mwei (Lovelace)
</td>
<td style="text-align:right;">
<span class="math inline">\(10^6\)</span> Wei
</td>
<td style="text-align:left;">
1.000.000
</td>
</tr>
<tr>
<td style="text-align:left;">
Gwei (Shannon)
</td>
<td style="text-align:right;">
<span class="math inline">\(10^9\)</span> Wei
</td>
<td style="text-align:left;">
1.000.000.000
</td>
</tr>
<tr>
<td style="text-align:left;">
Microether (Szabo)
</td>
<td style="text-align:right;">
<span class="math inline">\(10^{12}\)</span> Wei
</td>
<td style="text-align:left;">
1.000.000.000.000
</td>
</tr>
<tr>
<td style="text-align:left;">
Milliether (Finney)
</td>
<td style="text-align:right;">
<span class="math inline">\(10^{15}\)</span> Wei
</td>
<td style="text-align:left;">
1.000.000.000.000.000
</td>
</tr>
<tr>
<td style="text-align:left;">
Ether
</td>
<td style="text-align:right;">
<span class="math inline">\(10^{18}\)</span> Wei
</td>
<td style="text-align:left;">
1.000.000.000.000.000.000
</td>
</tr>
</tbody>
</table>
<p>Slika <a href="DApps-pametne-pogodbe.html#fig:slika-Zivljenjski-cikel-Ethra">11.9</a> povzema življenjski cikel Ethra, kjer so ključni naslednji koraki:</p>
<ol style="list-style-type: decimal">
<li><strong>Kovanje</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Coining_(mint)"><i class="fa-brands fa-wikipedia-w"></i>minting</a>)</em> Ethra, kar se zgodi s postopkom rudarjenja, kjer rudarji tekmujejo za združevanje in dodajanje transakcij v nove bloke verige blokov. Če je rudar uspešen, je nagrajen z določenim številom kovancev Ether. Ko se bloki dodajajo v verigo blokov, se temu primerno poveča tudi ponudba denarja.</li>
<li><strong>Prenos</strong> Ethra, kjer ga lahko prenesemo iz računa rudarja na druge uporabniške ali pogodbene račune.</li>
<li><strong>Shranjevanje</strong> Ethra na računih, ki jih lahko uporabljamo z različnimi metodami, kjer izbiramo med kompromisom udobja (npr. spletna, mobilna ali namizna denarnica) in varnosti (npr. strojna in papirna denarnica).</li>
<li><strong>Zamenjava</strong> Ethra, ki poteka preko menjalnic kriptovalut, ki so lahko centralizirane (npr. <a href="https://www.binance.com/"><i class="fa-solid fa-earth-europe"></i>Binance</a>, <a href="https://www.kraken.com/"><i class="fa-solid fa-earth-europe"></i>Kraken</a> ipd.) ali decentralizirane (npr. <a href="https://uniswap.org/"><i class="fa-solid fa-earth-europe"></i>Uniswap</a>).</li>
</ol>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-Zivljenjski-cikel-Ethra"></span>
<img src="assets/img/Zivljenjski_cikel_Ethra.png" alt="Življenjski cikel Ethra." width="700" />
<p class="caption">
Slika 11.9: Življenjski cikel Ethra.
</p>
</div>
</div>
<div id="gas" class="section level4 hasAnchor" number="11.3.1.3">
<h4><span class="header-section-number">11.3.1.3</span> Gas<a href="DApps-pametne-pogodbe.html#gas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><a href="https://golden.com/wiki/Gas_(Ethereum)-NMGDKAB"><i class="fa-brands fa-wikipedia-w"></i><strong>Gas</strong></a> je merska enota za stroške transakcij, ki se zaračunavajo na platformi Ethereum. Količina gas, ki je potrebna za izvedbo transakcije, je odvisna od količine računskih virov, ki jih EVM porabi med izvajanjem transakcije. Bolj specifično, to je odvisno od podrobnih ukazov EVM na najnižji ravni, ki so bili izvedeni med transakcijo. V tabeli <a href="DApps-pametne-pogodbe.html#tab:tabela-stroski-gas">11.3</a> je prikazanih nekaj najbolj pogostih operacij EVM in pripadajoči strošek v enoti gas.</p>
<table class="tabela-manjsa table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:tabela-stroski-gas">Tabela 11.3: </span>Stroški gas najbolj pogostih enostavnih operacij EVM
</caption>
<thead>
<tr>
<th style="text-align:left;">
Operacija
</th>
<th style="text-align:left;">
EVM koda
</th>
<th style="text-align:right;">
Strošek gas
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
seštevanje, odštevanje
</td>
<td style="text-align:left;">
ADD, SUB
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
množenje, deljenje
</td>
<td style="text-align:left;">
MUL, DIV
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
primerjava
</td>
<td style="text-align:left;">
LT, GT, SLT, SGT
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
nalaganje podatka iz spomina
</td>
<td style="text-align:left;">
MLOAD
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
shranjevanje podatka v spomin
</td>
<td style="text-align:left;">
MSTORE
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
nalaganje podatka iz shrambe
</td>
<td style="text-align:left;">
SLOAD
</td>
<td style="text-align:right;">
200
</td>
</tr>
<tr>
<td style="text-align:left;">
shranjevanje podatka v shrambo
</td>
<td style="text-align:left;">
SSTORE
</td>
<td style="text-align:right;">
&gt; 5.000
</td>
</tr>
<tr>
<td style="text-align:left;">
kreiranje pogodbe
</td>
<td style="text-align:left;">
CREATE
</td>
<td style="text-align:right;">
32.000
</td>
</tr>
</tbody>
</table>
<p>Glavni razlog za zaračunavanje stroškov transakcije je preprečevanje napadov za zavrnitev storitve <em>(angl. <a href="https://en.wikipedia.org/wiki/Denial-of-service_attack"><i class="fa-brands fa-wikipedia-w"></i>Denial of Service (<strong>DoS</strong>)</a>)</em> s strani uporabnikov, ki bi želeli motiti delovanje omrežja.</p>
<p>Pri izvajanju transakcije, EVM za delovanje porablja gas, kjer sta možna dva izida:</p>
<ol style="list-style-type: decimal">
<li><strong>Transakcija se uspešno zaključi</strong>, kjer se neporabljen gas vrne pošiljatelju.</li>
<li><strong>Količine razpoložljivih sredstev za plačilo gas zmanjka pred zaključkom transakcije</strong>. V tem primeru EVM vrne izjemo in transakcijo razveljavi.</li>
</ol>
<p>V obeh primerih stroške transakcije prejme rudar. V prvem primeru prejme provizijo tako, da vključi transakcijo v nov blok, ki je uspešno dodan v verigo blokov. Tudi v drugem primeru se provizija zaračuna, kljub neuspešni transakciji.</p>
</div>
<div id="klici-in-transakcije" class="section level4 hasAnchor" number="11.3.1.4">
<h4><span class="header-section-number">11.3.1.4</span> Klici in transakcije<a href="DApps-pametne-pogodbe.html#klici-in-transakcije" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Računi medsebojno komunicirajo preko dveh vrst sporočil: klicev in transakcij.</p>
<p><strong>Klic</strong> se pošlje preko sporočila, ki ni shranjeno v verigi blokov in katerega izvedba ima naslednje lastnosti:</p>
<ul>
<li>izvaja lahko samo operacije branja, ki ne spreminjajo stanja verige blokov,</li>
<li>je brezplačen, saj ne porabi stroškov gas,</li>
<li>obdela se sinhrono,</li>
<li>takoj vrne vrednost,</li>
<li>ne dovoljuje prenosa Ethra na pogodbeni račun.</li>
</ul>
<p><strong>Transakcija</strong> se pošlje preko sporočila, ki se med postopkom rudarjenja serializira in shrani v verigo blokov ter vsebuje naslednje podatke:</p>
<ul>
<li><strong>naslov pošiljatelja</strong>,</li>
<li><strong>naslov prejemnika</strong>,</li>
<li>(opcijska) <strong>vrednost</strong>, ki predstavlja količino Ethra za prenos (v enoti Wei), če se sporočilo uporablja za prenos Ethra,</li>
<li>(opcijski) <strong>podatki</strong>, ki predstavljajo vhodne parametre, če se sporočilo uporablja za klic funkcije,</li>
<li><strong>največja vrednost gas</strong>, ki se uporabi za izvedbo sporočila - če je omejitev presežena, EVM vrne izjemo in sporočilo razveljavi,</li>
<li><strong>digitalni podpis</strong>, ki dokazuje identiteto pošiljatelja transakcije,</li>
<li><strong>cena gas</strong> je cena enote gas (izražena v Ethru), ki jo je pobudnik transakcije pripravljen plačati.</li>
</ul>
<p>Izvedba transakcije ima naslednje lastnosti:</p>
<ul>
<li>izvaja lahko operacije pisanja, ki spremenijo stanje verige blokov,</li>
<li>porabijo se stroški gas, ki se plačajo v Ethru,</li>
<li>obdela se asinhrono, saj se izvede z rudarjenjem in se nato doda novemu bloku verige blokov, ki se posreduje po celotnem omrežju,</li>
<li>takoj vrne ID transakcije, ne pa rezultata,</li>
<li>omogoča prenos Ethra na pogodbeni račun, ki postane del transakcije.</li>
</ul>
</div>
<div id="navidezni-stroj-ethereum-evm" class="section level4 hasAnchor" number="11.3.1.5">
<h4><span class="header-section-number">11.3.1.5</span> Navidezni stroj Ethereum (EVM)<a href="DApps-pametne-pogodbe.html#navidezni-stroj-ethereum-evm" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Navidezni stroj Ethereum (EVM)</strong> je abstraktni računalniški stroj, ki temelji na skladu, podobnemu <a href="https://en.wikipedia.org/wiki/Java_virtual_machine"><i class="fa-brands fa-wikipedia-w"></i>Java Virtual Machine (JVM)</a> ali <a href="https://en.wikipedia.org/wiki/.NET_Framework"><i class="fa-brands fa-wikipedia-w"></i>.NET Common Language Runtime (CLR)</a>. Računalniku omogoča zagon aplikacije Ethereum in ima na voljo dve pomnilniški področji:</p>
<ul>
<li><strong>Pomnilnik</strong> je niz bajtov, naslovljen z besedami, ki se pri vsakem klicu sporočila dodeli pogodbi. Bralni dostop je do 256-bitnih besed, medtem ko se pisanje izvaja na dolžini 8 ali 256 bitov.</li>
<li><strong>Shramba</strong> je zbirka podatkov tipa ključ-vrednost, kjer imata ključ in vrednost velikost 256 bitov. Shramba je dodeljena vsakemu računu in je shranjena v verigi blokov. Pogodbeni račun lahko dostopa samo do svojega lastnega prostora za shranjevanje.</li>
</ul>
<p>EVM je v celoti zaščiten v peskovniku - pogodba ne more dostopati do virov omrežja ali datotečnega sistema. Dostopa lahko zgolj do drugih pogodb.</p>
</div>
</div>
</div>
<div id="programiranje-pametnih-pogodb-s-solidity" class="section level2 hasAnchor" number="11.4">
<h2><span class="header-section-number">11.4</span> Programiranje pametnih pogodb s Solidity<a href="DApps-pametne-pogodbe.html#programiranje-pametnih-pogodb-s-solidity" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Do tega trenutka smo omenili jezik <a href="https://docs.soliditylang.org/"><i class="fa-solid fa-earth-europe"></i>Solidity</a> kot visokonivojski jezik EVM, ki omogoča razvoj pametnih pogodb. Pametna pogodba oz. preprosto pogodba je enakovredna razredu v drugih objektno usmerjenih jezikih in vsebuje spremenljivke stanja, konstruktor, funkcije in dogodke.</p>
<p>Preden si pogledamo podrobnosti jezika Solidity, je treba omeniti, da to ni edini visokonivojski jezik EVM za razvoj pogodb. Je zagotovo najbolj priljubljena izbira med razvijalci ekosistema Ethereum, ker je pogosto nadgrajen, dobro vzdrževan in tudi priporočen v uradni dokumentaciji Ethereum. Poleg Solidity pa obstajata še npr. <a href="https://github.com/benjaminion/LLL_docs/blob/master/index.rst"><i class="fa-brands fa-github"></i>LLL</a> (ni več v aktivnem razvoju) in <a href="https://github.com/vyperlang/vyper"><i class="fa-brands fa-github"></i>Viper</a> (omogoča manj funkcionalnosti kot Solidity, vendar lažjo revizijo programske kode).</p>
<p>Življenjski cikel pametne pogodbe lahko zajamemo z naslednjimi koraki:</p>
<ol style="list-style-type: decimal">
<li>Pametna pogodba ima opredeljen cilj, ki ga dosežemo s klicem funkcij s strani vsaj ene entitete oz. njegove denarnice.</li>
<li>Lastnik denarnice postavi primerek pametne pogodbe na podlagi konstruktorja.</li>
<li>Klic funkcije iz vsaj ene denarnice z namenom dosega cilja.</li>
<li>Dosežen cilj se odraža v doseženem soglasju, npr. v obliki zapisanega podatka v pametni pogodbi in/ali izvedbi transakcije prenosa sredstev neposredno preko pametne pogodbe.</li>
</ol>
<div id="Struktura-pogodbe" class="section level3 hasAnchor" number="11.4.1">
<h3><span class="header-section-number">11.4.1</span> Struktura pogodbe<a href="DApps-pametne-pogodbe.html#Struktura-pogodbe" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Poglejmo si enostaven primer pogodbe <code>AuthorizedToken</code>, ki je prikazan v nadaljevanju in vsebuje vse možne opredelitve, ki se lahko pojavijo v pogodbi.</p>
<p><strong>Spremenljivka stanja</strong> <em>(angl. <a href="https://docs.soliditylang.org/en/v0.8.17/structure-of-a-contract.html#state-variables"><i class="fa-brands fa-ethereum"></i>State variable</a>)</em> hrani stanje pogodbe. Opredelimo jih lahko s poljubnim tipom, ki ga jezik Solidity podpira. Nekateri tipi (npr. preslikave <code>tokenBalance</code>, <code>registeredAccount</code> in <code>frozenAccount</code>) so dovoljeni zgolj za spremenljivko stanja.</p>
<p><strong>Dogodek</strong> <em>(angl. <a href="https://docs.soliditylang.org/en/v0.8.17/structure-of-a-contract.html#events"><i class="fa-brands fa-ethereum"></i>Event</a>)</em> je del pogodbe (npr. <code>Transfer</code> in <code>FrozenAccount</code>), ki je v interakciji z dnevnikom transakcij EVM in njegov klic sproži posredovanje vsem odjemalcem, ki so naročeni na posamezen dogodek.</p>
<p><strong>Zaloga vrednosti</strong> <em>(angl. <a href="https://docs.soliditylang.org/en/v0.8.17/structure-of-a-contract.html#enum-types"><i class="fa-brands fa-ethereum"></i>Enum</a>)</em> opredeljuje lasten podatkovni tip po meri z vnaprej določenim naborom dovoljenih vrednosti.</p>
<p><strong>Struktura podatkov</strong> <em>(angl. <a href="https://docs.soliditylang.org/en/v0.8.17/structure-of-a-contract.html#struct-types"><i class="fa-brands fa-ethereum"></i>Struct</a>)</em> opredeljuje lasten podatkovni tip po meri, ki vsebuje spremenljivke, kjer je lahko vsaka drugačnega tipa.</p>
<p><strong>Funkcija</strong> <em>(angl. <a href="https://docs.soliditylang.org/en/v0.8.17/structure-of-a-contract.html#functions"><i class="fa-brands fa-ethereum"></i>Function</a>)</em> zajema logiko pogodbe, ki jo lahko omejujejo funkcijski modifikatorji. Ima dostop do spremenljivk stanja in lahko proži dogodek, opredeljen v pogodbi.</p>
<p><strong>Funkcijski modifikator</strong> <em>(angl. <a href="https://docs.soliditylang.org/en/v0.8.10/structure-of-a-contract.html#function-modifiers"><i class="fa-brands fa-ethereum"></i>Function modifier</a>)</em> omogoča spremembo obnašanja funkcije na deklarativni način. Ponavadi ga uporabljamo za omejevanje na določen vhodni podatek. Pogodba lahko opredeli več modifikatorjev, ki jih lahko uporabimo pri več funkcijah.</p>
<p><code>AuthorizedToken.sol</code></p>
<div class="sourceCode" id="cb769"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb769-1"><a href="DApps-pametne-pogodbe.html#cb769-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb769-2"><a href="DApps-pametne-pogodbe.html#cb769-2" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.23</span><span class="op">;</span></span>
<span id="cb769-3"><a href="DApps-pametne-pogodbe.html#cb769-3" tabindex="-1"></a></span>
<span id="cb769-4"><a href="DApps-pametne-pogodbe.html#cb769-4" tabindex="-1"></a>contract AuthorizedToken {</span>
<span id="cb769-5"><a href="DApps-pametne-pogodbe.html#cb769-5" tabindex="-1"></a>    <span class="kw">enum</span> UserType {</span>
<span id="cb769-6"><a href="DApps-pametne-pogodbe.html#cb769-6" tabindex="-1"></a>        TokenHolder<span class="op">,</span></span>
<span id="cb769-7"><a href="DApps-pametne-pogodbe.html#cb769-7" tabindex="-1"></a>        Admin<span class="op">,</span></span>
<span id="cb769-8"><a href="DApps-pametne-pogodbe.html#cb769-8" tabindex="-1"></a>        Owner</span>
<span id="cb769-9"><a href="DApps-pametne-pogodbe.html#cb769-9" tabindex="-1"></a>    }</span>
<span id="cb769-10"><a href="DApps-pametne-pogodbe.html#cb769-10" tabindex="-1"></a>    struct AccountInfo {</span>
<span id="cb769-11"><a href="DApps-pametne-pogodbe.html#cb769-11" tabindex="-1"></a>        address account<span class="op">;</span></span>
<span id="cb769-12"><a href="DApps-pametne-pogodbe.html#cb769-12" tabindex="-1"></a>        string firstName<span class="op">;</span></span>
<span id="cb769-13"><a href="DApps-pametne-pogodbe.html#cb769-13" tabindex="-1"></a>        string lastName<span class="op">;</span></span>
<span id="cb769-14"><a href="DApps-pametne-pogodbe.html#cb769-14" tabindex="-1"></a>        UserType userType<span class="op">;</span></span>
<span id="cb769-15"><a href="DApps-pametne-pogodbe.html#cb769-15" tabindex="-1"></a>    }</span>
<span id="cb769-16"><a href="DApps-pametne-pogodbe.html#cb769-16" tabindex="-1"></a>    <span class="fu">mapping</span>(address <span class="kw">=&gt;</span> uint256) <span class="kw">public</span> tokenBalance<span class="op">;</span></span>
<span id="cb769-17"><a href="DApps-pametne-pogodbe.html#cb769-17" tabindex="-1"></a>    <span class="fu">mapping</span>(address <span class="kw">=&gt;</span> AccountInfo) <span class="kw">public</span> registeredAccount<span class="op">;</span></span>
<span id="cb769-18"><a href="DApps-pametne-pogodbe.html#cb769-18" tabindex="-1"></a>    <span class="fu">mapping</span>(address <span class="kw">=&gt;</span> bool) <span class="kw">public</span> frozenAccount<span class="op">;</span></span>
<span id="cb769-19"><a href="DApps-pametne-pogodbe.html#cb769-19" tabindex="-1"></a>    address <span class="kw">public</span> owner<span class="op">;</span></span>
<span id="cb769-20"><a href="DApps-pametne-pogodbe.html#cb769-20" tabindex="-1"></a>    uint256 <span class="kw">public</span> constant maxTransferLimit <span class="op">=</span> <span class="dv">15000</span><span class="op">;</span></span>
<span id="cb769-21"><a href="DApps-pametne-pogodbe.html#cb769-21" tabindex="-1"></a>    <span class="bu">event</span> <span class="fu">Transfer</span>(address indexed <span class="im">from</span><span class="op">,</span> address indexed to<span class="op">,</span> uint256 value)<span class="op">;</span></span>
<span id="cb769-22"><a href="DApps-pametne-pogodbe.html#cb769-22" tabindex="-1"></a>    <span class="bu">event</span> <span class="fu">FrozenAccount</span>(address target<span class="op">,</span> bool frozen)<span class="op">;</span></span>
<span id="cb769-23"><a href="DApps-pametne-pogodbe.html#cb769-23" tabindex="-1"></a>    modifier <span class="fu">onlyOwner</span>() {</span>
<span id="cb769-24"><a href="DApps-pametne-pogodbe.html#cb769-24" tabindex="-1"></a>        <span class="pp">require</span>(msg<span class="op">.</span><span class="at">sender</span> <span class="op">==</span> owner)<span class="op">;</span></span>
<span id="cb769-25"><a href="DApps-pametne-pogodbe.html#cb769-25" tabindex="-1"></a>        _<span class="op">;</span></span>
<span id="cb769-26"><a href="DApps-pametne-pogodbe.html#cb769-26" tabindex="-1"></a>    }</span>
<span id="cb769-27"><a href="DApps-pametne-pogodbe.html#cb769-27" tabindex="-1"></a>    <span class="fu">constructor</span>(uint256 _initialSupply) {</span>
<span id="cb769-28"><a href="DApps-pametne-pogodbe.html#cb769-28" tabindex="-1"></a>        owner <span class="op">=</span> msg<span class="op">.</span><span class="at">sender</span><span class="op">;</span></span>
<span id="cb769-29"><a href="DApps-pametne-pogodbe.html#cb769-29" tabindex="-1"></a>        <span class="fu">mintToken</span>(owner<span class="op">,</span> _initialSupply)<span class="op">;</span></span>
<span id="cb769-30"><a href="DApps-pametne-pogodbe.html#cb769-30" tabindex="-1"></a>    }</span>
<span id="cb769-31"><a href="DApps-pametne-pogodbe.html#cb769-31" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">transfer</span>(address _to<span class="op">,</span> uint256 _amount) <span class="kw">public</span> {</span>
<span id="cb769-32"><a href="DApps-pametne-pogodbe.html#cb769-32" tabindex="-1"></a>        <span class="pp">require</span>(<span class="fu">checkLimit</span>(_amount))<span class="op">;</span></span>
<span id="cb769-33"><a href="DApps-pametne-pogodbe.html#cb769-33" tabindex="-1"></a>        <span class="co">// ...</span></span>
<span id="cb769-34"><a href="DApps-pametne-pogodbe.html#cb769-34" tabindex="-1"></a>        emit <span class="fu">Transfer</span>(msg<span class="op">.</span><span class="at">sender</span><span class="op">,</span> _to<span class="op">,</span> _amount)<span class="op">;</span></span>
<span id="cb769-35"><a href="DApps-pametne-pogodbe.html#cb769-35" tabindex="-1"></a>    }</span>
<span id="cb769-36"><a href="DApps-pametne-pogodbe.html#cb769-36" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">registerAccount</span>(</span>
<span id="cb769-37"><a href="DApps-pametne-pogodbe.html#cb769-37" tabindex="-1"></a>        address account<span class="op">,</span></span>
<span id="cb769-38"><a href="DApps-pametne-pogodbe.html#cb769-38" tabindex="-1"></a>        string memory firstName<span class="op">,</span></span>
<span id="cb769-39"><a href="DApps-pametne-pogodbe.html#cb769-39" tabindex="-1"></a>        string memory lastName<span class="op">,</span></span>
<span id="cb769-40"><a href="DApps-pametne-pogodbe.html#cb769-40" tabindex="-1"></a>        bool isAdmin</span>
<span id="cb769-41"><a href="DApps-pametne-pogodbe.html#cb769-41" tabindex="-1"></a>    ) <span class="kw">public</span> onlyOwner {</span>
<span id="cb769-42"><a href="DApps-pametne-pogodbe.html#cb769-42" tabindex="-1"></a>        <span class="co">/* ... */</span></span>
<span id="cb769-43"><a href="DApps-pametne-pogodbe.html#cb769-43" tabindex="-1"></a>    }</span>
<span id="cb769-44"><a href="DApps-pametne-pogodbe.html#cb769-44" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">checkLimit</span>(uint256 _amount) <span class="kw">private</span> pure <span class="fu">returns</span> (bool) {</span>
<span id="cb769-45"><a href="DApps-pametne-pogodbe.html#cb769-45" tabindex="-1"></a>        <span class="cf">if</span> (_amount <span class="op">&lt;</span> maxTransferLimit) <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb769-46"><a href="DApps-pametne-pogodbe.html#cb769-46" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb769-47"><a href="DApps-pametne-pogodbe.html#cb769-47" tabindex="-1"></a>    }</span>
<span id="cb769-48"><a href="DApps-pametne-pogodbe.html#cb769-48" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">validateAccount</span>(address _account) internal view <span class="fu">returns</span> (bool) {</span>
<span id="cb769-49"><a href="DApps-pametne-pogodbe.html#cb769-49" tabindex="-1"></a>        <span class="cf">if</span> (<span class="op">!</span>frozenAccount[_account] <span class="op">&amp;&amp;</span> tokenBalance[_account] <span class="op">&gt;</span> <span class="dv">0</span>) <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb769-50"><a href="DApps-pametne-pogodbe.html#cb769-50" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb769-51"><a href="DApps-pametne-pogodbe.html#cb769-51" tabindex="-1"></a>    }</span>
<span id="cb769-52"><a href="DApps-pametne-pogodbe.html#cb769-52" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">mintToken</span>(</span>
<span id="cb769-53"><a href="DApps-pametne-pogodbe.html#cb769-53" tabindex="-1"></a>        address _recipient<span class="op">,</span></span>
<span id="cb769-54"><a href="DApps-pametne-pogodbe.html#cb769-54" tabindex="-1"></a>        uint256 _mintedAmount</span>
<span id="cb769-55"><a href="DApps-pametne-pogodbe.html#cb769-55" tabindex="-1"></a>    ) <span class="kw">public</span> onlyOwner {</span>
<span id="cb769-56"><a href="DApps-pametne-pogodbe.html#cb769-56" tabindex="-1"></a>        tokenBalance[_recipient] <span class="op">+=</span> _mintedAmount<span class="op">;</span></span>
<span id="cb769-57"><a href="DApps-pametne-pogodbe.html#cb769-57" tabindex="-1"></a>        emit <span class="fu">Transfer</span>(owner<span class="op">,</span> _recipient<span class="op">,</span> _mintedAmount)<span class="op">;</span></span>
<span id="cb769-58"><a href="DApps-pametne-pogodbe.html#cb769-58" tabindex="-1"></a>    }</span>
<span id="cb769-59"><a href="DApps-pametne-pogodbe.html#cb769-59" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">freezeAccount</span>(address target<span class="op">,</span> bool freeze) <span class="kw">public</span> onlyOwner {</span>
<span id="cb769-60"><a href="DApps-pametne-pogodbe.html#cb769-60" tabindex="-1"></a>        frozenAccount[target] <span class="op">=</span> freeze<span class="op">;</span></span>
<span id="cb769-61"><a href="DApps-pametne-pogodbe.html#cb769-61" tabindex="-1"></a>        emit <span class="fu">FrozenAccount</span>(target<span class="op">,</span> freeze)<span class="op">;</span></span>
<span id="cb769-62"><a href="DApps-pametne-pogodbe.html#cb769-62" tabindex="-1"></a>    }</span>
<span id="cb769-63"><a href="DApps-pametne-pogodbe.html#cb769-63" tabindex="-1"></a>}</span></code></pre></div>
<div id="vrste-vrednosti" class="section level4 hasAnchor" number="11.4.1.1">
<h4><span class="header-section-number">11.4.1.1</span> Vrste vrednosti<a href="DApps-pametne-pogodbe.html#vrste-vrednosti" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Spremenljivka je v skladu EVM shranjena tako, da se pri shranjevanju vrednosti dodeli pomnilniški prostor. Ko je spremenljivka dodeljena drugi spremenljivki ali posredovana funkciji kot parameter, se njena vrednost prekopira v nov in ločen primer spremenljivke.</p>
<p>V tabeli <a href="DApps-pametne-pogodbe.html#tab:tabela-Solidity-vrste-vrednosti">11.4</a> so povzete vrste vrednosti, ki jih podpira jezik Solidity.</p>
<table class="tabela-manjsa">
<caption>
<span id="tab:tabela-Solidity-vrste-vrednosti">Tabela 11.4: </span>Vrednosti, podprte v Solidity.
</caption>
<thead>
<tr>
<th style="text-align:left;">
Naziv
</th>
<th style="text-align:left;">
Tip
</th>
<th style="text-align:left;">
Opis
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
logična vrednost
</td>
<td style="text-align:left;">
<a href="https://docs.soliditylang.org/en/v0.8.17/types.html#booleans"><i class='fa-brands fa-ethereum'></i><code>bool</code></a>
</td>
<td style="text-align:left;">
Uporabljajo se vrednosti <code>true</code> in <code>false</code>, kjer vrednosti <code>0</code> ali <code>1</code> nista dovoljeni, kot npr. v JavaScript-u.
</td>
</tr>
<tr>
<td style="text-align:left;">
celo število
</td>
<td style="text-align:left;">
<a href="https://docs.soliditylang.org/en/v0.8.17/types.html#integers"><i class='fa-brands fa-ethereum'></i><code>int</code></a> (predznačeno),<br><a href="https://docs.soliditylang.org/en/v0.8.17/types.html#integers"><i class='fa-brands fa-ethereum'></i><code>uint</code></a> (nepredznačeno)
</td>
<td style="text-align:left;">
Določimo lahko tudi velikost od 8 do 256 bitov, npr. <code>int32</code> je predznačeno 32-bitno število.
</td>
</tr>
<tr>
<td style="text-align:left;">
statični bajtni niz
</td>
<td style="text-align:left;">
<a href="https://docs.soliditylang.org/en/v0.8.17/types.html#fixed-size-byte-arrays"><i class='fa-brands fa-ethereum'></i><code>byte</code></a>, <code>bytes8</code> itd.
</td>
<td style="text-align:left;">
Dolžina je lahko od 1 do 32, npr. <code>bytes8</code>, <code>bytes12</code> itd. <code>byte</code> = <code>bytes1</code>.
</td>
</tr>
<tr>
<td style="text-align:left;">
naslov
</td>
<td style="text-align:left;">
<a href="https://docs.soliditylang.org/en/v0.8.17/types.html#address"><i class='fa-brands fa-ethereum'></i><code>address</code></a>
</td>
<td style="text-align:left;">
Objekt naslova opredelimo z vrednostjo, ki vsebuje do 40 šestnajstiških števk in je prepoznan kot veljaven le, če ima ustrezno kontrolno vsoto.
</td>
</tr>
</tbody>
</table>
</div>
<div id="vrste-referenc" class="section level4 hasAnchor" number="11.4.1.2">
<h4><span class="header-section-number">11.4.1.2</span> Vrste referenc<a href="DApps-pametne-pogodbe.html#vrste-referenc" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Do spremenljivk se dostopa preko njihove reference (lokacije njihovega prvega elementa). Shranimo jih lahko na eno izmed naslednjih podatkovnih lokacij, ki jih lahko v nekaterih primerih tudi neposredno navedete v izvorni kodi:</p>
<ul>
<li><strong>spomin</strong> <em>(angl. <a href="https://docs.soliditylang.org/en/v0.8.17/types.html#data-location"><i class='fa-brands fa-ethereum'></i><code>memory</code></a>)</em>, kjer vrednosti niso trajno shranjene, ampak so prisotne zgolj v spominu,</li>
<li><strong>shramba</strong> <em>(angl. <a href="https://docs.soliditylang.org/en/v0.8.17/types.html#data-location"><i class='fa-brands fa-ethereum'></i><code>storage</code></a>)</em>, kjer so vrednosti trajno shranjene na verigi blokov, kot spremenljivke stanja.</li>
</ul>
<p>Obstaja pa tudi tretja vrsta podatkovne lokacije, ki je izrecno ne moremo nastaviti, in sicer:</p>
<ul>
<li><strong>podatki o klicu</strong> <em>(angl. <a href="https://docs.soliditylang.org/en/v0.8.17/types.html#data-location"><i class='fa-brands fa-ethereum'></i>calldata</a>)</em> predstavljajo področje, namenjeno shranjevanju vrednosti parametrov zunanjih funkcij. Takšni objekti se obnašajo podobno kot tisti, shranjeni v spominu.</li>
</ul>
</div>
<div id="globalni-imenski-prostor" class="section level4 hasAnchor" number="11.4.1.3">
<h4><span class="header-section-number">11.4.1.3</span> Globalni imenski prostor<a href="DApps-pametne-pogodbe.html#globalni-imenski-prostor" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Globalni imenski prostor predstavlja mnnožico implicitno deklariranih spremenljivk in funkcij, na katere se lahko sklicujete in jih neposredno uporabite v izvorni kodi pogodbe.</p>
<p>Na voljo imamo naslednje <a href="https://docs.soliditylang.org/en/v0.8.17/units-and-global-variables.html"><i class="fa-brands fa-ethereum"></i>spremenljivke</a>, ki so še podrobneje predstavljene v tabeli <a href="DApps-pametne-pogodbe.html#tab:tabela-Globalni-imenski-prostor">11.5</a>:</p>
<ul>
<li><code>block</code> vsebuje podatke o najnovejšem bloku na verigi blokov,</li>
<li><code>msg</code> vsebuje podatke o dohodnem sporočilu,</li>
<li><code>tx</code> zagotavlja podatke o transakcijah,</li>
<li><code>this</code> je referenca na trenutno pogodbo,</li>
<li><code>now</code> je čas kreiranja najnovejšega bloka.</li>
</ul>
<table class="tabela-manjsa">
<caption>
<span id="tab:tabela-Globalni-imenski-prostor">Tabela 11.5: </span>Elementi globalnega imenskega prostora.
</caption>
<thead>
<tr>
<th style="text-align:left;">
Globalna spremenljivka
</th>
<th style="text-align:left;">
Tip
</th>
<th style="text-align:left;">
Element
</th>
<th style="text-align:left;">
Vrsta odgovora
</th>
<th style="text-align:left;">
Opis
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<code>block</code>
</td>
<td style="text-align:left;">
funkcija
</td>
<td style="text-align:left;">
<code>blockhash(uint blocknumber)</code>
</td>
<td style="text-align:left;">
<code>bytes32</code>
</td>
<td style="text-align:left;">
Zgoščena vrednost podanega bloka.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>block</code>
</td>
<td style="text-align:left;">
lastnost
</td>
<td style="text-align:left;">
<code>coinbase</code>
</td>
<td style="text-align:left;">
<code>address</code>
</td>
<td style="text-align:left;">
Naslov rudarja bloka.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>block</code>
</td>
<td style="text-align:left;">
lastnost
</td>
<td style="text-align:left;">
<code>gaslimit</code>
</td>
<td style="text-align:left;">
<code>uint</code>
</td>
<td style="text-align:left;">
Zgornja meja stroška gas.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>block</code>
</td>
<td style="text-align:left;">
lastnost
</td>
<td style="text-align:left;">
<code>number</code>
</td>
<td style="text-align:left;">
<code>uint</code>
</td>
<td style="text-align:left;">
Številka bloka.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>block</code>
</td>
<td style="text-align:left;">
lastnost
</td>
<td style="text-align:left;">
<code>timestamp</code>
</td>
<td style="text-align:left;">
<code>uint</code>
</td>
<td style="text-align:left;">
Časovni žig bloka.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>msg</code>
</td>
<td style="text-align:left;">
lastnost
</td>
<td style="text-align:left;">
<code>data</code>
</td>
<td style="text-align:left;">
<code>bytes</code>
</td>
<td style="text-align:left;">
Celotno telo podatkov klica.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>msg</code>
</td>
<td style="text-align:left;">
lastnost
</td>
<td style="text-align:left;">
<code>sender</code>
</td>
<td style="text-align:left;">
<code>address</code>
</td>
<td style="text-align:left;">
Pošiljatelj sporočila, ki izvaja trenutni klic.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>msg</code>
</td>
<td style="text-align:left;">
lastnost
</td>
<td style="text-align:left;">
<code>gas</code>
</td>
<td style="text-align:left;">
<code>uint</code>
</td>
<td style="text-align:left;">
Preostala vrednost gas.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>msg</code>
</td>
<td style="text-align:left;">
lastnost
</td>
<td style="text-align:left;">
<code>value</code>
</td>
<td style="text-align:left;">
<code>uint</code>
</td>
<td style="text-align:left;">
Količina Ethra, poslana s sporočilom, v enoti Wei.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>tx</code>
</td>
<td style="text-align:left;">
lastnost
</td>
<td style="text-align:left;">
<code>gasprice</code>
</td>
<td style="text-align:left;">
<code>uint</code>
</td>
<td style="text-align:left;">
Strošek transakcije gas.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>tx</code>
</td>
<td style="text-align:left;">
lastnost
</td>
<td style="text-align:left;">
<code>origin</code>
</td>
<td style="text-align:left;">
<code>address</code>
</td>
<td style="text-align:left;">
Pošiljatelj transakcije, ki je ustvaril celotno verigo klicev.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>now</code>
</td>
<td style="text-align:left;">
lastnost
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
<code>uint</code>
</td>
<td style="text-align:left;">
Čas kreiranja trenutnega zadnjega bloka.
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="razvoj-enostavne-pogodbe" class="section level3 hasAnchor" number="11.4.2">
<h3><span class="header-section-number">11.4.2</span> Razvoj enostavne pogodbe<a href="DApps-pametne-pogodbe.html#razvoj-enostavne-pogodbe" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="prenos-žetonov" class="section level4 hasAnchor" number="11.4.2.1">
<h4><span class="header-section-number">11.4.2.1</span> Prenos žetonov<a href="DApps-pametne-pogodbe.html#prenos-žetonov" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Razvili bomo enostavno pametno pogodbo <code>SimpleCoin</code>, ki bo v osnovni funkcionalnosti zgolj omogočala prenos določenega števila žetonov med računi. Pri tem bomo uporabili spletno razvojno okolje <a href="https://remix.ethereum.org/"><i class="fa-brands fa-ethereum"></i><strong>Remix</strong></a>. Opredelimo naslednje gradnike:</p>
<ul>
<li>spremenljivko stanja <code>coinBalance</code>, ki je preslikava med naslovi in dejanskim stanjem žetonov <code>SimpleCoin</code>,
<ul>
<li>s kvantifikatorjem <a href="https://solidity-by-example.org/visibility/"><i class="fa-brands fa-ethereum"></i><code>public</code></a> določimo, da lahko do spremenljivke dostopajo vse pogodbe in računi,</li>
</ul></li>
<li>dogodek <code>Transfer</code>, ki se proži ob prenosu sredstev med računi,</li>
<li>funkcijo <code>transfer</code>, ki preveri pogoje za prenos med računom klicatelja in podanim računom prejemnika ter ga tudi izvede.</li>
</ul>
<p><code>SimpleCoin.sol</code></p>
<div class="sourceCode" id="cb770"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb770-1"><a href="DApps-pametne-pogodbe.html#cb770-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb770-2"><a href="DApps-pametne-pogodbe.html#cb770-2" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.23</span><span class="op">;</span></span>
<span id="cb770-3"><a href="DApps-pametne-pogodbe.html#cb770-3" tabindex="-1"></a></span>
<span id="cb770-4"><a href="DApps-pametne-pogodbe.html#cb770-4" tabindex="-1"></a>contract SimpleCoin {</span>
<span id="cb770-5"><a href="DApps-pametne-pogodbe.html#cb770-5" tabindex="-1"></a>  <span class="fu">mapping</span>(address <span class="kw">=&gt;</span> uint256) <span class="kw">public</span> coinBalance<span class="op">;</span></span>
<span id="cb770-6"><a href="DApps-pametne-pogodbe.html#cb770-6" tabindex="-1"></a>  <span class="bu">event</span> <span class="fu">Transfer</span>(</span>
<span id="cb770-7"><a href="DApps-pametne-pogodbe.html#cb770-7" tabindex="-1"></a>    address indexed <span class="im">from</span><span class="op">,</span></span>
<span id="cb770-8"><a href="DApps-pametne-pogodbe.html#cb770-8" tabindex="-1"></a>    address indexed to<span class="op">,</span></span>
<span id="cb770-9"><a href="DApps-pametne-pogodbe.html#cb770-9" tabindex="-1"></a>    uint256 value</span>
<span id="cb770-10"><a href="DApps-pametne-pogodbe.html#cb770-10" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb770-11"><a href="DApps-pametne-pogodbe.html#cb770-11" tabindex="-1"></a>  <span class="fu">constructor</span>(uint256 _initialSupply) {</span>
<span id="cb770-12"><a href="DApps-pametne-pogodbe.html#cb770-12" tabindex="-1"></a>    coinBalance[msg<span class="op">.</span><span class="at">sender</span>] <span class="op">=</span> _initialSupply<span class="op">;</span></span>
<span id="cb770-13"><a href="DApps-pametne-pogodbe.html#cb770-13" tabindex="-1"></a>  }</span>
<span id="cb770-14"><a href="DApps-pametne-pogodbe.html#cb770-14" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">transfer</span>(address _to<span class="op">,</span> uint256 _amount) <span class="kw">public</span> {</span>
<span id="cb770-15"><a href="DApps-pametne-pogodbe.html#cb770-15" tabindex="-1"></a>    <span class="pp">require</span>(_to <span class="op">!=</span> <span class="fu">address</span>(<span class="bn">0x0</span>))<span class="op">;</span></span>
<span id="cb770-16"><a href="DApps-pametne-pogodbe.html#cb770-16" tabindex="-1"></a>    <span class="pp">require</span>(coinBalance[msg<span class="op">.</span><span class="at">sender</span>] <span class="op">&gt;</span> _amount)<span class="op">;</span></span>
<span id="cb770-17"><a href="DApps-pametne-pogodbe.html#cb770-17" tabindex="-1"></a>    <span class="pp">require</span>(coinBalance[_to] <span class="op">+</span> _amount <span class="op">&gt;=</span> coinBalance[_to])<span class="op">;</span></span>
<span id="cb770-18"><a href="DApps-pametne-pogodbe.html#cb770-18" tabindex="-1"></a>    coinBalance[msg<span class="op">.</span><span class="at">sender</span>] <span class="op">-=</span> _amount<span class="op">;</span></span>
<span id="cb770-19"><a href="DApps-pametne-pogodbe.html#cb770-19" tabindex="-1"></a>    coinBalance[_to] <span class="op">+=</span> _amount<span class="op">;</span></span>
<span id="cb770-20"><a href="DApps-pametne-pogodbe.html#cb770-20" tabindex="-1"></a>    emit <span class="fu">Transfer</span>(msg<span class="op">.</span><span class="at">sender</span><span class="op">,</span> _to<span class="op">,</span> _amount)<span class="op">;</span></span>
<span id="cb770-21"><a href="DApps-pametne-pogodbe.html#cb770-21" tabindex="-1"></a>  }</span>
<span id="cb770-22"><a href="DApps-pametne-pogodbe.html#cb770-22" tabindex="-1"></a>}</span></code></pre></div>
<p>Ko kreiramo novo datoteko <code>SimpleCoin.sol</code> in zapišemo izvorno kodo pametne pogodbe, v orodju Remix v orodni vrstici na levi strani izberemo možnost <i class="fa-brands fa-ethereum"></i><strong>Solidity compiler</strong> ter nastavimo ustrezno verzijo prevajalnika, v našem primeru <code>0.8.23+commit.f704f362</code>. S klikom na gumb <i class="fa-solid fa-rotate"></i><strong>Compile SimpleCoin.sol</strong> zahtevamo prevajanje pametne pogodbe, kot to prikazuje slika <a href="DApps-pametne-pogodbe.html#fig:slika-Remix-compile">11.10</a>. Če pri prevajanju pride do napake, nas orodje na to tudi opozori.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-Remix-compile"></span>
<img src="assets/img/Remix_compile.png" alt="Prevajanje pametne pogodbe." width="600" />
<p class="caption">
Slika 11.10: Prevajanje pametne pogodbe.
</p>
</div>
<p>Ko je pogodba prevedena, v orodni vrstici na levi strani izberemo možnost <i class="fa-brands fa-ethereum"></i><strong>Deploy &amp; run transactions</strong> ter najprej zahtevamo postavitev pogodbe na testni navidezni stroj <code>Remix VM (Shanghai)</code>. Pri tem je privzeto izbran 1. račun <code>0x5B38Da6a701c568545dCfcB03FcB875f56beddC4</code> in pogodba <code>SimpleCoin</code>. Pri postavitvi pogodbe moramo konstruktorju podati parameter začetnega stanja <code>_initialSupply</code>, ki ga nastavimo na <code>200</code> in kliknemo na gumb <strong>Deploy</strong>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-Remix-deploy"></span>
<img src="assets/img/Remix_deploy.png" alt="Postavitev pametne pogodbe v testni navidezni stroj." width="200" />
<p class="caption">
Slika 11.11: Postavitev pametne pogodbe v testni navidezni stroj.
</p>
</div>
<p>Na seznamu <strong>Deployed Contracts</strong> opazimo novo postavljeno pogodbo, prav tako opazimo tudi, da je 1. račun za postavitev pogodbe moral plačati stroške postavitvene transakcije, saj je stanje njegovega računa sedaj <code>99,999999999999657465</code> <code>ETH</code> (začetna vrednost vseh računov je bila <code>100</code> <code>ETH</code>).</p>
<p>Glede na izvorno kodo pametne pogodbe pričakujemo, da ima lastnik (tisti račun, ki je zahteval postavitev pogodbe na omrežje, v našem primeru je to 1. račun) na začetku na računu <code>200</code> žetonov <code>SimpleCoin</code>. To lahko preprosto preverimo tako, da med postavljenimi pogodbami izberemo našo pogodbo in preverimo vrednost spremenljivke <code>coinBalance</code> za 1. račun z naslovom <code>0x5B38Da6a701c568545dCfcB03FcB875f56beddC4</code>. Kot prikazuje slika <a href="DApps-pametne-pogodbe.html#fig:slika-Remix-stanje-100">11.12</a> je začetno stanje na računu skrbnika (1. račun) enako <code>200</code>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-Remix-stanje-100"></span>
<img src="assets/img/Remix_SimpleCoin_coinBalance_200.png" alt="Stanje kovancev lastnika pametne pogodbe." width="250" />
<p class="caption">
Slika 11.12: Stanje kovancev lastnika pametne pogodbe.
</p>
</div>
<p>Sedaj zahtevajmo prenos <code>20</code> žetonov <code>SimpleCoin</code> iz 1. računa na 2. račun (<code>0xAb8483F64d9C6d1EcF9b849Ae677dD3315835cb2</code>). Pri tem moramo biti pozorni, da je med računi izbran 1. račun (to je tisti iz katerega se sredstva prenašajo), pri klicu funkcije <code>transfer</code> pa nastavimo parametra <code>_to</code> na <code>0xAb8483F64d9C6d1EcF9b849Ae677dD3315835cb2</code> in <code>_amount</code> na <code>20</code>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-Remix-prenos-20"></span>
<img src="assets/img/Remix_SimpleCoin_transfer_20.png" alt="Prenos `20` žetonov `SimpleCoin`." width="300" />
<p class="caption">
Slika 11.13: Prenos <code>20</code> žetonov <code>SimpleCoin</code>.
</p>
</div>
<p>Ko ponovno preverimo stanje žetonov <code>SimpleCoin</code> na obeh računih, opazimo, da je na 1. računu (<code>0x5B38Da6a701c568545dCfcB03FcB875f56beddC4</code>) sedaj <code>180</code> žetonov <code>SimpleCoin</code> in na 2. računu (<code>0xAb8483F64d9C6d1EcF9b849Ae677dD3315835cb2</code>) <code>20</code> žetonov <code>SimpleCoin</code>, kar je pričakovano stanje.</p>
<script>
  $(document).ready(function() {
    $("#prenos-žetonov code:eq(0)").markRegExp(/.+/, options_dodaj);
    $("#prenos-žetonov code.javascript:eq(0)").markRegExp(/.+/, options_dodaj);
  });
</script>
</div>
<div id="podpora-dodatkom" class="section level4 hasAnchor" number="11.4.2.2">
<h4><span class="header-section-number">11.4.2.2</span> Podpora dodatkom<a href="DApps-pametne-pogodbe.html#podpora-dodatkom" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Funkcionalnosti prenosa žetonov v okviru pametne pogodbe <code>SimpleCoin</code> bomo sedaj dodali <strong>možnost odobritve dodatkov</strong>, kjer lastniku računa omogočimo, da lahko odobri dodatek, ki ga lahko uporabi drug račun.</p>
<p>Npr. če imamo račun A s stanjem <code>10.000</code> žetonov, lahko njegov lastnik pooblasti račun B, da prenese določeno količino žetonov (npr. skupaj največ <code>200</code> v ločenih prenosih) na druge račune.</p>
<p>V okviru pogodbe Solidity lahko takšno funkcionalnost podpremo z ugnezdeno preslikavo.</p>
<p><code>SimpleCoin.sol</code></p>
<div class="sourceCode" id="cb771"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb771-1"><a href="DApps-pametne-pogodbe.html#cb771-1" tabindex="-1"></a>contract SimpleCoin {</span>
<span id="cb771-2"><a href="DApps-pametne-pogodbe.html#cb771-2" tabindex="-1"></a>  <span class="fu">mapping</span>(address <span class="kw">=&gt;</span> uint256) <span class="kw">public</span> coinBalance<span class="op">;</span></span>
<span id="cb771-3"><a href="DApps-pametne-pogodbe.html#cb771-3" tabindex="-1"></a>  <span class="fu">mapping</span>(address <span class="kw">=&gt;</span> <span class="fu">mapping</span>(address <span class="kw">=&gt;</span> uint256)) <span class="kw">public</span> allowance<span class="op">;</span></span>
<span id="cb771-4"><a href="DApps-pametne-pogodbe.html#cb771-4" tabindex="-1"></a>  <span class="op">..</span></span>
<span id="cb771-5"><a href="DApps-pametne-pogodbe.html#cb771-5" tabindex="-1"></a>}</span></code></pre></div>
<p>To pomeni, da račun omogoča drugemu računu upravljanje določenega števila žetonov, npr. <code>address2</code> lahko upravlja z <code>200</code> žetoni, ki so v lasti <code>address1</code> in <code>address3</code> lahko upravlja s <code>150</code> žetoni, ki so ravno tako v lasti <code>address1</code>.</p>
<pre class="javascritp"><code>allowance[address1][address2] = 200;
allowance[address1][address3] = 150;</code></pre>
<p>Takšno funkcionalnost lahko odobrimo s pomočjo funkcije <code>authorize</code>, kjer v ugnezdeno preslikavo dodamo odobritev dodatka in nato novo funkcijo <code>transferFrom</code> za dejansko izvedbo prenosa z upoštevanjem odobrenih dodatkov.</p>
<p><code>SimpleCoin.sol</code></p>
<div class="sourceCode" id="cb773"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb773-1"><a href="DApps-pametne-pogodbe.html#cb773-1" tabindex="-1"></a>contract SimpleCoin {</span>
<span id="cb773-2"><a href="DApps-pametne-pogodbe.html#cb773-2" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb773-3"><a href="DApps-pametne-pogodbe.html#cb773-3" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">authorize</span>(address _authorizedAccount<span class="op">,</span> uint256 _allowance)</span>
<span id="cb773-4"><a href="DApps-pametne-pogodbe.html#cb773-4" tabindex="-1"></a>    <span class="kw">public</span></span>
<span id="cb773-5"><a href="DApps-pametne-pogodbe.html#cb773-5" tabindex="-1"></a>    <span class="fu">returns</span> (bool success)</span>
<span id="cb773-6"><a href="DApps-pametne-pogodbe.html#cb773-6" tabindex="-1"></a>  {</span>
<span id="cb773-7"><a href="DApps-pametne-pogodbe.html#cb773-7" tabindex="-1"></a>    allowance[msg<span class="op">.</span><span class="at">sender</span>][_authorizedAccount] <span class="op">=</span> _allowance<span class="op">;</span></span>
<span id="cb773-8"><a href="DApps-pametne-pogodbe.html#cb773-8" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb773-9"><a href="DApps-pametne-pogodbe.html#cb773-9" tabindex="-1"></a>  }</span>
<span id="cb773-10"><a href="DApps-pametne-pogodbe.html#cb773-10" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">transferFrom</span>(</span>
<span id="cb773-11"><a href="DApps-pametne-pogodbe.html#cb773-11" tabindex="-1"></a>    address _from<span class="op">,</span></span>
<span id="cb773-12"><a href="DApps-pametne-pogodbe.html#cb773-12" tabindex="-1"></a>    address _to<span class="op">,</span></span>
<span id="cb773-13"><a href="DApps-pametne-pogodbe.html#cb773-13" tabindex="-1"></a>    uint256 _amount</span>
<span id="cb773-14"><a href="DApps-pametne-pogodbe.html#cb773-14" tabindex="-1"></a>  ) <span class="kw">public</span> <span class="fu">returns</span> (bool success) {</span>
<span id="cb773-15"><a href="DApps-pametne-pogodbe.html#cb773-15" tabindex="-1"></a>    <span class="pp">require</span>(_to <span class="op">!=</span> <span class="fu">address</span>(<span class="bn">0x0</span>))<span class="op">;</span></span>
<span id="cb773-16"><a href="DApps-pametne-pogodbe.html#cb773-16" tabindex="-1"></a>    <span class="pp">require</span>(coinBalance[_from] <span class="op">&gt;</span> _amount)<span class="op">;</span></span>
<span id="cb773-17"><a href="DApps-pametne-pogodbe.html#cb773-17" tabindex="-1"></a>    <span class="pp">require</span>(coinBalance[_to] <span class="op">+</span> _amount <span class="op">&gt;=</span> coinBalance[_to])<span class="op">;</span></span>
<span id="cb773-18"><a href="DApps-pametne-pogodbe.html#cb773-18" tabindex="-1"></a>    <span class="pp">require</span>(_amount <span class="op">&lt;=</span> allowance[_from][msg<span class="op">.</span><span class="at">sender</span>])<span class="op">;</span></span>
<span id="cb773-19"><a href="DApps-pametne-pogodbe.html#cb773-19" tabindex="-1"></a>    coinBalance[_from] <span class="op">-=</span> _amount<span class="op">;</span></span>
<span id="cb773-20"><a href="DApps-pametne-pogodbe.html#cb773-20" tabindex="-1"></a>    coinBalance[_to] <span class="op">+=</span> _amount<span class="op">;</span></span>
<span id="cb773-21"><a href="DApps-pametne-pogodbe.html#cb773-21" tabindex="-1"></a>    allowance[_from][msg<span class="op">.</span><span class="at">sender</span>] <span class="op">-=</span> _amount<span class="op">;</span></span>
<span id="cb773-22"><a href="DApps-pametne-pogodbe.html#cb773-22" tabindex="-1"></a>    emit <span class="fu">Transfer</span>(_from<span class="op">,</span> _to<span class="op">,</span> _amount)<span class="op">;</span></span>
<span id="cb773-23"><a href="DApps-pametne-pogodbe.html#cb773-23" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb773-24"><a href="DApps-pametne-pogodbe.html#cb773-24" tabindex="-1"></a>  }</span>
<span id="cb773-25"><a href="DApps-pametne-pogodbe.html#cb773-25" tabindex="-1"></a>}</span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#podpora-dodatkom code.javascript:eq(0)").markRegExp(/.+?public allowance;/, options_dodaj);
    $("#podpora-dodatkom code.javascript:eq(1)").markRegExp(/\s+?function[\s\S]+?}/, options_dodaj);
  });
</script>
</div>
<div id="omejevanje-dostopa" class="section level4 hasAnchor" number="11.4.2.3">
<h4><span class="header-section-number">11.4.2.3</span> Omejevanje dostopa<a href="DApps-pametne-pogodbe.html#omejevanje-dostopa" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Lastnik pogodbe je račun, s katerega je bila pogodba postavljena na omrežje. <code>SimpleCoin</code> že ima funkcijo, ki se izvaja glede na lastnika pogodbe, in sicer v konstruktorju dodelimo začetno stanje žetonov lastniku pogodbe.</p>
<p>Funkcionalnost lahko dopolnimo do te mere, da lastnika v konstruktorju shranimo v privatno spremenljivko <code>owner</code>, da jo lahko uporabimo še na drugih mestih.</p>
<p>S kvantifikatorjem <a href="https://solidity-by-example.org/visibility/"><i class="fa-brands fa-ethereum"></i><code>private</code></a> določimo, da lahko do spremenljivke <code>owner</code> dostopa le trenutna pogodba.</p>
<p><code>SimpleCoin.sol</code></p>
<div class="sourceCode" id="cb774"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb774-1"><a href="DApps-pametne-pogodbe.html#cb774-1" tabindex="-1"></a>contract SimpleCoin {</span>
<span id="cb774-2"><a href="DApps-pametne-pogodbe.html#cb774-2" tabindex="-1"></a>  address <span class="kw">private</span> owner<span class="op">;</span></span>
<span id="cb774-3"><a href="DApps-pametne-pogodbe.html#cb774-3" tabindex="-1"></a>  <span class="fu">mapping</span>(address <span class="kw">=&gt;</span> uint256) <span class="kw">public</span> coinBalance<span class="op">;</span></span>
<span id="cb774-4"><a href="DApps-pametne-pogodbe.html#cb774-4" tabindex="-1"></a>  <span class="fu">mapping</span>(address <span class="kw">=&gt;</span> <span class="fu">mapping</span>(address <span class="kw">=&gt;</span> uint256)) <span class="kw">public</span> allowance<span class="op">;</span></span>
<span id="cb774-5"><a href="DApps-pametne-pogodbe.html#cb774-5" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb774-6"><a href="DApps-pametne-pogodbe.html#cb774-6" tabindex="-1"></a>  <span class="fu">constructor</span>(uint256 _initialSupply) {</span>
<span id="cb774-7"><a href="DApps-pametne-pogodbe.html#cb774-7" tabindex="-1"></a>    owner <span class="op">=</span> msg<span class="op">.</span><span class="at">sender</span><span class="op">;</span></span>
<span id="cb774-8"><a href="DApps-pametne-pogodbe.html#cb774-8" tabindex="-1"></a>    coinBalance[owner msg<span class="op">.</span><span class="at">sender</span> ] <span class="op">=</span> _initialSupply<span class="op">;</span></span>
<span id="cb774-9"><a href="DApps-pametne-pogodbe.html#cb774-9" tabindex="-1"></a>  }</span>
<span id="cb774-10"><a href="DApps-pametne-pogodbe.html#cb774-10" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb774-11"><a href="DApps-pametne-pogodbe.html#cb774-11" tabindex="-1"></a>}</span></code></pre></div>
<p>Del funkcionalnosti konstruktorja, kjer nastavimo začetno stanje, lahko ločimo v lastno funkcijo <code>mint</code>, ki jo lahko pokliče zgolj lastnik.</p>
<p><code>SimpleCoin.sol</code></p>
<div class="sourceCode" id="cb775"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb775-1"><a href="DApps-pametne-pogodbe.html#cb775-1" tabindex="-1"></a>contract SimpleCoin {</span>
<span id="cb775-2"><a href="DApps-pametne-pogodbe.html#cb775-2" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb775-3"><a href="DApps-pametne-pogodbe.html#cb775-3" tabindex="-1"></a>  <span class="fu">constructor</span>(uint256 _initialSupply) {</span>
<span id="cb775-4"><a href="DApps-pametne-pogodbe.html#cb775-4" tabindex="-1"></a>    owner <span class="op">=</span> msg<span class="op">.</span><span class="at">sender</span><span class="op">;</span></span>
<span id="cb775-5"><a href="DApps-pametne-pogodbe.html#cb775-5" tabindex="-1"></a>    coinBalance[owner] <span class="op">=</span> _initialSupply<span class="op">;</span></span>
<span id="cb775-6"><a href="DApps-pametne-pogodbe.html#cb775-6" tabindex="-1"></a>    <span class="fu">mint</span>(owner<span class="op">,</span> _initialSupply)<span class="op">;</span></span>
<span id="cb775-7"><a href="DApps-pametne-pogodbe.html#cb775-7" tabindex="-1"></a>  }</span>
<span id="cb775-8"><a href="DApps-pametne-pogodbe.html#cb775-8" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">mint</span>(address _recipient<span class="op">,</span> uint256 _mintedAmount) <span class="kw">public</span> {</span>
<span id="cb775-9"><a href="DApps-pametne-pogodbe.html#cb775-9" tabindex="-1"></a>    <span class="pp">require</span>(msg<span class="op">.</span><span class="at">sender</span> <span class="op">==</span> owner)<span class="op">;</span></span>
<span id="cb775-10"><a href="DApps-pametne-pogodbe.html#cb775-10" tabindex="-1"></a>    coinBalance[_recipient] <span class="op">+=</span> _mintedAmount<span class="op">;</span></span>
<span id="cb775-11"><a href="DApps-pametne-pogodbe.html#cb775-11" tabindex="-1"></a>    emit <span class="fu">Transfer</span>(owner<span class="op">,</span> _recipient<span class="op">,</span> _mintedAmount)<span class="op">;</span></span>
<span id="cb775-12"><a href="DApps-pametne-pogodbe.html#cb775-12" tabindex="-1"></a>  }</span>
<span id="cb775-13"><a href="DApps-pametne-pogodbe.html#cb775-13" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb775-14"><a href="DApps-pametne-pogodbe.html#cb775-14" tabindex="-1"></a>}</span></code></pre></div>
<p>Pooblastila lastnika pogodbe bomo dodatno razširili z možnostjo zamrznitve oz. odmrznitve računov, kar bomo shranili v preslikavi <code>frozenAccount</code>, prav tako pa lahko tudi opredelimo dogodek <code>FrozenAccount</code>, medtem ko v funkciji <code>freezeAccount</code> to funkcionalnost dovolimo zgolj lastniku in dodamo zahtevan račun na seznam onemogočenih.</p>
<p><code>SimpleCoin.sol</code></p>
<div class="sourceCode" id="cb776"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb776-1"><a href="DApps-pametne-pogodbe.html#cb776-1" tabindex="-1"></a>contract SimpleCoin {</span>
<span id="cb776-2"><a href="DApps-pametne-pogodbe.html#cb776-2" tabindex="-1"></a>  address <span class="kw">private</span> owner<span class="op">;</span></span>
<span id="cb776-3"><a href="DApps-pametne-pogodbe.html#cb776-3" tabindex="-1"></a>  <span class="fu">mapping</span>(address <span class="kw">=&gt;</span> uint256) <span class="kw">public</span> coinBalance<span class="op">;</span></span>
<span id="cb776-4"><a href="DApps-pametne-pogodbe.html#cb776-4" tabindex="-1"></a>  <span class="fu">mapping</span>(address <span class="kw">=&gt;</span> <span class="fu">mapping</span>(address <span class="kw">=&gt;</span> uint256)) <span class="kw">public</span> allowance<span class="op">;</span></span>
<span id="cb776-5"><a href="DApps-pametne-pogodbe.html#cb776-5" tabindex="-1"></a>  <span class="fu">mapping</span>(address <span class="kw">=&gt;</span> bool) <span class="kw">public</span> frozenAccount<span class="op">;</span></span>
<span id="cb776-6"><a href="DApps-pametne-pogodbe.html#cb776-6" tabindex="-1"></a>  <span class="bu">event</span> <span class="fu">Transfer</span>(address indexed <span class="im">from</span><span class="op">,</span> address indexed to<span class="op">,</span> uint256 value)<span class="op">;</span></span>
<span id="cb776-7"><a href="DApps-pametne-pogodbe.html#cb776-7" tabindex="-1"></a>  <span class="bu">event</span> <span class="fu">FrozenAccount</span>(address target<span class="op">,</span> bool frozen)<span class="op">;</span></span>
<span id="cb776-8"><a href="DApps-pametne-pogodbe.html#cb776-8" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb776-9"><a href="DApps-pametne-pogodbe.html#cb776-9" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">freezeAccount</span>(address target<span class="op">,</span> bool freeze) <span class="kw">public</span> {</span>
<span id="cb776-10"><a href="DApps-pametne-pogodbe.html#cb776-10" tabindex="-1"></a>    <span class="pp">require</span>(msg<span class="op">.</span><span class="at">sender</span> <span class="op">==</span> owner)<span class="op">;</span></span>
<span id="cb776-11"><a href="DApps-pametne-pogodbe.html#cb776-11" tabindex="-1"></a>    frozenAccount[target] <span class="op">=</span> freeze<span class="op">;</span></span>
<span id="cb776-12"><a href="DApps-pametne-pogodbe.html#cb776-12" tabindex="-1"></a>    emit <span class="fu">FrozenAccount</span>(target<span class="op">,</span> freeze)<span class="op">;</span></span>
<span id="cb776-13"><a href="DApps-pametne-pogodbe.html#cb776-13" tabindex="-1"></a>  }</span>
<span id="cb776-14"><a href="DApps-pametne-pogodbe.html#cb776-14" tabindex="-1"></a>}</span></code></pre></div>
<p>V obstoječi kodi lahko opazimo, da na več mestih preko <code>msg.sender</code> preverjamo ali je klicatelj funkcije lastnik. Takšno funkcionalnost najlažje zajamemo v obliki funkcijskega modifikatorja in na ta način preoblikujemo podvojene dele izvorne kode tako, da vpeljemo nov <a href="https://docs.soliditylang.org/en/v0.8.23/structure-of-a-contract.html#function-modifiers"><i class="fa-brands fa-ethereum"></i>funkcijski modifikator</a> <code>onlyOwner</code>. Pri delovanju modifikatorja zahtevamo, da se naslov uporabnika, ki zahteva funkcionalnost, ujema z lastnikom (naslovomo, ki je pogodbo postavil). Šele nato poženemo zahtevamo funkcijo, kar označimo z <a href="https://www.educative.io/answers/what-is-in-solidity"><i class="fa-solid fa-earth-europe"></i><strong><code>_;</code></strong></a>.</p>
<p><code>SimpleCoin.sol</code></p>
<div class="sourceCode" id="cb777"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb777-1"><a href="DApps-pametne-pogodbe.html#cb777-1" tabindex="-1"></a>contract SimpleCoin {</span>
<span id="cb777-2"><a href="DApps-pametne-pogodbe.html#cb777-2" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb777-3"><a href="DApps-pametne-pogodbe.html#cb777-3" tabindex="-1"></a>  modifier <span class="fu">onlyOwner</span>() {</span>
<span id="cb777-4"><a href="DApps-pametne-pogodbe.html#cb777-4" tabindex="-1"></a>    <span class="pp">require</span>(msg<span class="op">.</span><span class="at">sender</span> <span class="op">==</span> owner)<span class="op">;</span></span>
<span id="cb777-5"><a href="DApps-pametne-pogodbe.html#cb777-5" tabindex="-1"></a>    _<span class="op">;</span></span>
<span id="cb777-6"><a href="DApps-pametne-pogodbe.html#cb777-6" tabindex="-1"></a>  }</span>
<span id="cb777-7"><a href="DApps-pametne-pogodbe.html#cb777-7" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">mint</span>(address _recipient<span class="op">,</span> uint256 _mintedAmount) <span class="kw">public</span> onlyOwner {</span>
<span id="cb777-8"><a href="DApps-pametne-pogodbe.html#cb777-8" tabindex="-1"></a>    <span class="pp">require</span>(msg<span class="op">.</span><span class="at">sender</span> <span class="op">==</span> owner)<span class="op">;</span> </span>
<span id="cb777-9"><a href="DApps-pametne-pogodbe.html#cb777-9" tabindex="-1"></a>    coinBalance[_recipient] <span class="op">+=</span> _mintedAmount<span class="op">;</span></span>
<span id="cb777-10"><a href="DApps-pametne-pogodbe.html#cb777-10" tabindex="-1"></a>    emit <span class="fu">Transfer</span>(owner<span class="op">,</span> _recipient<span class="op">,</span> _mintedAmount)<span class="op">;</span></span>
<span id="cb777-11"><a href="DApps-pametne-pogodbe.html#cb777-11" tabindex="-1"></a>  }</span>
<span id="cb777-12"><a href="DApps-pametne-pogodbe.html#cb777-12" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb777-13"><a href="DApps-pametne-pogodbe.html#cb777-13" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">freezeAccount</span>(address target<span class="op">,</span> bool freeze) <span class="kw">public</span> onlyOwner {</span>
<span id="cb777-14"><a href="DApps-pametne-pogodbe.html#cb777-14" tabindex="-1"></a>    <span class="pp">require</span>(msg<span class="op">.</span><span class="at">sender</span> <span class="op">==</span> owner)<span class="op">;</span> </span>
<span id="cb777-15"><a href="DApps-pametne-pogodbe.html#cb777-15" tabindex="-1"></a>    frozenAccount[target] <span class="op">=</span> freeze<span class="op">;</span></span>
<span id="cb777-16"><a href="DApps-pametne-pogodbe.html#cb777-16" tabindex="-1"></a>    emit <span class="fu">FrozenAccount</span>(target<span class="op">,</span> freeze)<span class="op">;</span></span>
<span id="cb777-17"><a href="DApps-pametne-pogodbe.html#cb777-17" tabindex="-1"></a>  }</span>
<span id="cb777-18"><a href="DApps-pametne-pogodbe.html#cb777-18" tabindex="-1"></a>}</span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#omejevanje-dostopa code.javascript:eq(0)").markRegExp(/\s+?address private owner;/, options_dodaj);
    $("#omejevanje-dostopa code.javascript:eq(0)").markRegExp(/\s+?owner =.+/, options_dodaj);
    $("#omejevanje-dostopa code.javascript:eq(0)").markRegExp(/owner/, options_dodaj);
    $("#omejevanje-dostopa code.javascript:eq(0)").markRegExp(/ msg\.sender /, options_izbrisi);
    $("#omejevanje-dostopa code.javascript:eq(1)").markRegExp(/\s+?coinBalance\[owner\].+/, options_izbrisi);
    $("#omejevanje-dostopa code.javascript:eq(1)").markRegExp(/\s+?mint.+/, options_dodaj);
    $("#omejevanje-dostopa code.javascript:eq(1)").markRegExp(/\s+?function mint[\s\S]+?}/, options_dodaj);
    $("#omejevanje-dostopa code.javascript:eq(2)").markRegExp(/.+?frozenAccount.*/i, options_dodaj);
    $("#omejevanje-dostopa code.javascript:eq(2)").markRegExp(/\s+?function[\s\S]+?}/, options_dodaj);
    $("#omejevanje-dostopa code.javascript:eq(3)").markRegExp(/\s+?modifier[\s\S]+?}/, options_dodaj);
    $("#omejevanje-dostopa code.javascript:eq(3)").markRegExp(/ onlyOwner/, options_dodaj);
    $("#omejevanje-dostopa code.javascript:eq(3)").markRegExp(/\s+?require\(msg\.sender == owner\); /, options_izbrisi);
  });
</script>
</div>
</div>
</div>
<div id="razvoj-kompleksnih-pametnih-pogodb" class="section level2 hasAnchor" number="11.5">
<h2><span class="header-section-number">11.5</span> Razvoj kompleksnih pametnih pogodb<a href="DApps-pametne-pogodbe.html#razvoj-kompleksnih-pametnih-pogodb" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>V prejšnjem poglavju <a href="DApps-pametne-pogodbe.html#programiranje-pametnih-pogodb-s-solidity">11.4</a> smo si ogledali osnovne gradnika jezika Solidity, zdaj pa se bomo osredotočili na naprednejše objektno-usmerjene funkcionalnosti, kot je npr. dedovanje.</p>
<p>Pri dejanski decentralizirani aplikaciji je pogodba bolj zapletena kot npr. naša enostavna pametna pogodba <code>SimpleCoin</code>, ki vsebuje zgolj 1 pogodbo. Pogosto DApp vsebujejo več pogodb, ki medsebojno sodelujejo. V tem poglavju si bomo pogledali <strong>razvoj pametne pogodbe <code>SimpleCrowdsale</code></strong>. Gre za postopek, s katerim vlagatelji financirajo DApp z nakupom žetonov, ki jih izda organizacija, povezana z razvojem DApp. Razvoj takšne pogodbe si bomo olajšali z uporabo dedovanja, abstraktnih razredov in vmesnikov.</p>
<p>Zagotovo ste že slišali za <strong>množično financiranje</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Crowdfunding"><i class="fa-brands fa-wikipedia-w"></i>crowdfunding</a>)</em>, ki je način financiranja projekta z relativno majhnimi zneski sorazmerno velikega števila ljudi in v zadnjem času pogosto poteka preko interneta (npr. <a href="https://www.kickstarter.com/"><span class="skupaj"><i class="fa-solid fa-earth-europe"></i>Kickstarter</span></a>). Če ste v kakšen takšen projekt že financirali in je bil uspešen, ste kot nagrado mogoče prejeli izdelek ali popust na končno ceno izdelka, kar se imenuje množično financiranje na podlagi nagrad.</p>
<p>V zadnjem času pa se je pojavila nova shema množičnega financiranja, in sicer <strong>množična prodaja</strong> <em>(angl. <a href="https://wiki.trezor.io/Crowdsale"><i class="fa-solid fa-earth-europe"></i>crowdsale</a>)</em>, ki je v glavnem usmerjena v financiranje zagonskih <em>(angl. startup)</em> podjetij. Namesto znižane cena izdelka, vam v zahvalo za financiranje podjetje ponudi nekaj lastniškega kapitala, ki je ponavadi v obliki žetona, podobnega <code>SimpleCoin</code>. Vrednost žetona organizatorji ponavadi določijo pred začetkom prodaje ali pa se le-ta določi dinamično med kampanjo, glede na tržne dejavnike (npr. začetna ponudba žetonov in dejansko povpraševanje).</p>
<p>Pogosto se žeton oz. množična prodaja kovancev imenuje <strong>začetna ponudba kovancev</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Initial_coin_offering"><i class="fa-brands fa-wikipedia-w"></i>Initial Coin Offering (<strong>ICO</strong>)</a>)</em>, kar je bolj konvencionalna oblika <strong>javne ponudbe delnic</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Initial_public_offering"><i class="fa-brands fa-wikipedia-w"></i>Initial Public Offering (<strong>IPO</strong>)</a>)</em> podjetij, ki prvič vstopijo na borzo.</p>
<p>V okviru predmeta bomo zgradili pametno pogodbo <code>SimpleCrowdsale</code>, ki bo podpirala decentralizirano aplikacijo za upravljanje množične prodaje. Osnovno delovanje je predstavljeno na sliki <a href="DApps-pametne-pogodbe.html#fig:slika-Potek-mnozicne-prodaje">11.14</a>, medtem ko so funkcionalnosti naslednje:</p>
<ul>
<li><strong>Upravljanje financiranja v obliki kriptovalute</strong>, ki ga vlagatelji množične prodaje zagotovijo v fazi financiranja.</li>
<li>Če so <strong>cilji množične prodaje izpolnjeni</strong> (npr. minimalna naložba ali časovna omejitev), <strong>vlagatelj sprosti žetone</strong>. Organizacija, ki razvija DApp, pridobi Ether in ga uporabi za financiranje stroškov projekta. Organizatorjem ali razvojni skupini, ki je vključena v prodajo, se lahko dodelijo dodatni bonus žetoni.
<ul>
<li>Sprostitev žetonov pomeni aktiviranje le-teh tako, da jih je mogoče uporabiti.</li>
<li>Vlagatelj lahko zamenja žetone za fiat denar takoj, ko žeton postane dobičkonosen glede na začetno naložbo.</li>
<li>Ta postopek je podoben tistemu pri podjetju, ki je javno in vlagateljem izda delnice v zameno za denar, ki ga uporabi za financiranje svojih dejavnosti. Vlagatelj lahko pozneje trguje z delnicami na sekundarnem trgu, te delnice pa lahko postanejo bolj ali manj vredne, odvisno od uspeha podjetja.</li>
</ul></li>
<li>Če je <strong>množična prodaja neuspešna</strong> (npr. ciljna naložba ni dosežena), pogodba vlagateljem omogoča, da se njihove <strong>naložbe povrnejo</strong>.</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-Potek-mnozicne-prodaje"></span>
<img src="assets/img/Potek_mnozicne_prodaje.png" alt="Potek množične prodaje." width="600" />
<p class="caption">
Slika 11.14: Potek množične prodaje.
</p>
</div>
<p>Za začetek pripravimo osnutek pametne pogodbe, kjer so opredeljene osrednje funkcije <code>invest</code>, <code>finalize</code> in <code>refund</code>. Pri funkciji <code>invest</code> uporabimo kvantifikator <a href="https://solidity-by-example.org/payable/"><i class="fa-brands fa-ethereum"></i><code>payable</code></a>, s čimer označimo, da funkcija omogoča prejem Ethr-a v pogodbo.</p>
<p><code>SimpleCrowdsale.sol</code></p>
<div class="sourceCode" id="cb778"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb778-1"><a href="DApps-pametne-pogodbe.html#cb778-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb778-2"><a href="DApps-pametne-pogodbe.html#cb778-2" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.23</span><span class="op">;</span></span>
<span id="cb778-3"><a href="DApps-pametne-pogodbe.html#cb778-3" tabindex="-1"></a></span>
<span id="cb778-4"><a href="DApps-pametne-pogodbe.html#cb778-4" tabindex="-1"></a>contract SimpleCrowdsale {</span>
<span id="cb778-5"><a href="DApps-pametne-pogodbe.html#cb778-5" tabindex="-1"></a>  address <span class="kw">private</span> owner<span class="op">;</span></span>
<span id="cb778-6"><a href="DApps-pametne-pogodbe.html#cb778-6" tabindex="-1"></a>  <span class="fu">constructor</span>() {</span>
<span id="cb778-7"><a href="DApps-pametne-pogodbe.html#cb778-7" tabindex="-1"></a>    owner <span class="op">=</span> msg<span class="op">.</span><span class="at">sender</span><span class="op">;</span></span>
<span id="cb778-8"><a href="DApps-pametne-pogodbe.html#cb778-8" tabindex="-1"></a>  }</span>
<span id="cb778-9"><a href="DApps-pametne-pogodbe.html#cb778-9" tabindex="-1"></a>  modifier <span class="fu">onlyOwner</span>() {</span>
<span id="cb778-10"><a href="DApps-pametne-pogodbe.html#cb778-10" tabindex="-1"></a>    <span class="pp">require</span>(msg<span class="op">.</span><span class="at">sender</span> <span class="op">==</span> owner)<span class="op">;</span></span>
<span id="cb778-11"><a href="DApps-pametne-pogodbe.html#cb778-11" tabindex="-1"></a>    _<span class="op">;</span></span>
<span id="cb778-12"><a href="DApps-pametne-pogodbe.html#cb778-12" tabindex="-1"></a>  }</span>
<span id="cb778-13"><a href="DApps-pametne-pogodbe.html#cb778-13" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">invest</span>() <span class="kw">public</span> payable {}</span>
<span id="cb778-14"><a href="DApps-pametne-pogodbe.html#cb778-14" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">finalize</span>() <span class="kw">public</span> onlyOwner {}</span>
<span id="cb778-15"><a href="DApps-pametne-pogodbe.html#cb778-15" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">refund</span>() <span class="kw">public</span> {}</span>
<span id="cb778-16"><a href="DApps-pametne-pogodbe.html#cb778-16" tabindex="-1"></a>}</span></code></pre></div>
<p>S funkcijo <code>invest</code> vlagatelju omogočimo rezervacijo žetonov množične prodaje (za določitev količine vloženega Ethr-a ni potreben parameter, ker se pošilja preko lastnosti <code>msg.value</code>).</p>
<p>Funkcija <code>finalize</code> omogoča organizatorju množične prodaje, ki je lastnik pogodbe, izdajo žetonov vlagateljem v primeru uspešnega zaključka in hkrati dodelitev dodatnih bonus žetonov razvojni ekipi, če je to del dogovora.</p>
<p>S klicem funkcije <code>refund</code> pa omogočamo vlagateljem vračilo vloženih sredstev v primeru neuspešnega zaključka množične prodaje.</p>
<p>Začnimo z osnovno strukturo pogodbe, ki jo bomo nato v nadaljevanju postopoma izboljševali.</p>
<script>
  $(document).ready(function() {
    $("#razvoj-kompleksnih-pametnih-pogodb code.javascript:eq(0)").markRegExp(/.+/, options_dodaj);
  });
</script>
<div id="spremenljivke-stanja" class="section level3 hasAnchor" number="11.5.1">
<h3><span class="header-section-number">11.5.1</span> Spremenljivke stanja<a href="DApps-pametne-pogodbe.html#spremenljivke-stanja" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Pogodba o množični prodaji mora imeti opredeljeno določeno konfiguracijo glede obdobja financiranja, kjer se sprejemajo prispevki, cene prodanega žetona, minimalnega naložbenega cilja in naslova računa, ki sprejema naložbe. Prav tako mora voditi evidenco prispevkov, ki jih posredujejo vlagatelji. Ti podatki morajo biti na voljo celotni pogodbi, zato jih bomo opredelili v spremenljivkah stanja.</p>
<p><code>SimpleCrowdsale.sol</code></p>
<div class="sourceCode" id="cb779"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb779-1"><a href="DApps-pametne-pogodbe.html#cb779-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb779-2"><a href="DApps-pametne-pogodbe.html#cb779-2" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.23</span><span class="op">;</span></span>
<span id="cb779-3"><a href="DApps-pametne-pogodbe.html#cb779-3" tabindex="-1"></a><span class="im">import</span> <span class="st">&quot;./SimpleCoin.sol&quot;</span><span class="op">;</span></span>
<span id="cb779-4"><a href="DApps-pametne-pogodbe.html#cb779-4" tabindex="-1"></a></span>
<span id="cb779-5"><a href="DApps-pametne-pogodbe.html#cb779-5" tabindex="-1"></a>contract SimpleCrowdsale {</span>
<span id="cb779-6"><a href="DApps-pametne-pogodbe.html#cb779-6" tabindex="-1"></a>  address <span class="kw">private</span> owner<span class="op">;</span></span>
<span id="cb779-7"><a href="DApps-pametne-pogodbe.html#cb779-7" tabindex="-1"></a>  uint256 <span class="kw">public</span> startTime<span class="op">;</span></span>
<span id="cb779-8"><a href="DApps-pametne-pogodbe.html#cb779-8" tabindex="-1"></a>  uint256 <span class="kw">public</span> endTime<span class="op">;</span></span>
<span id="cb779-9"><a href="DApps-pametne-pogodbe.html#cb779-9" tabindex="-1"></a>  uint256 <span class="kw">public</span> weiTokenPrice<span class="op">;</span></span>
<span id="cb779-10"><a href="DApps-pametne-pogodbe.html#cb779-10" tabindex="-1"></a>  uint256 <span class="kw">public</span> weiInvestmentObjective<span class="op">;</span></span>
<span id="cb779-11"><a href="DApps-pametne-pogodbe.html#cb779-11" tabindex="-1"></a>  <span class="fu">mapping</span>(address <span class="kw">=&gt;</span> uint256) <span class="kw">public</span> investmentAmount<span class="op">;</span></span>
<span id="cb779-12"><a href="DApps-pametne-pogodbe.html#cb779-12" tabindex="-1"></a>  uint256 <span class="kw">public</span> investmentReceived<span class="op">;</span></span>
<span id="cb779-13"><a href="DApps-pametne-pogodbe.html#cb779-13" tabindex="-1"></a>  uint256 <span class="kw">public</span> investmentRefunded<span class="op">;</span></span>
<span id="cb779-14"><a href="DApps-pametne-pogodbe.html#cb779-14" tabindex="-1"></a>  bool <span class="kw">public</span> isFinalized<span class="op">;</span></span>
<span id="cb779-15"><a href="DApps-pametne-pogodbe.html#cb779-15" tabindex="-1"></a>  bool <span class="kw">public</span> isRefundingAllowed<span class="op">;</span></span>
<span id="cb779-16"><a href="DApps-pametne-pogodbe.html#cb779-16" tabindex="-1"></a>  SimpleCoin <span class="kw">public</span> crowdsaleToken<span class="op">;</span></span>
<span id="cb779-17"><a href="DApps-pametne-pogodbe.html#cb779-17" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb779-18"><a href="DApps-pametne-pogodbe.html#cb779-18" tabindex="-1"></a>}</span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#spremenljivke-stanja code.javascript:eq(0)").markRegExp(/.+?public.+/, options_dodaj);
    $("#spremenljivke-stanja code.javascript:eq(0)").markRegExp(/import.+/, options_dodaj);
  });
</script>
</div>
<div id="konstruktor" class="section level3 hasAnchor" number="11.5.2">
<h3><span class="header-section-number">11.5.2</span> Konstruktor<a href="DApps-pametne-pogodbe.html#konstruktor" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Konstruktor pametne pogodbe mora prejeti parametre, povezane s spremenljivkami stanja, jih preveriti in ustrezno nastaviti ter ustvariti primerek pogodbe žetona, ki se uporablja. Pri vseh pametnih pogodbah se konstruktor kliče zgolj enkrat ob postavitvi primerka pametne pogodbe. Zaradi poenostavitve bo to kar naša pametna pogodba <code>SimpleCoin</code> iz prejšnjega poglavja <a href="DApps-pametne-pogodbe.html#razvoj-enostavne-pogodbe">11.4.2</a>.</p>
<p><code>SimpleCrowdsale.sol</code></p>
<div class="sourceCode" id="cb780"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb780-1"><a href="DApps-pametne-pogodbe.html#cb780-1" tabindex="-1"></a>contract SimpleCrowdsale {</span>
<span id="cb780-2"><a href="DApps-pametne-pogodbe.html#cb780-2" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb780-3"><a href="DApps-pametne-pogodbe.html#cb780-3" tabindex="-1"></a>  <span class="fu">constructor</span>(</span>
<span id="cb780-4"><a href="DApps-pametne-pogodbe.html#cb780-4" tabindex="-1"></a>    uint256 _startTime<span class="op">,</span></span>
<span id="cb780-5"><a href="DApps-pametne-pogodbe.html#cb780-5" tabindex="-1"></a>    uint256 _endTime<span class="op">,</span></span>
<span id="cb780-6"><a href="DApps-pametne-pogodbe.html#cb780-6" tabindex="-1"></a>    uint256 _weiTokenPrice<span class="op">,</span></span>
<span id="cb780-7"><a href="DApps-pametne-pogodbe.html#cb780-7" tabindex="-1"></a>    uint256 _etherInvestmentObjective</span>
<span id="cb780-8"><a href="DApps-pametne-pogodbe.html#cb780-8" tabindex="-1"></a>  ) {</span>
<span id="cb780-9"><a href="DApps-pametne-pogodbe.html#cb780-9" tabindex="-1"></a>    <span class="pp">require</span>(_startTime <span class="op">&gt;=</span> block<span class="op">.</span><span class="at">timestamp</span>)<span class="op">;</span></span>
<span id="cb780-10"><a href="DApps-pametne-pogodbe.html#cb780-10" tabindex="-1"></a>    <span class="pp">require</span>(_endTime <span class="op">&gt;=</span> _startTime)<span class="op">;</span></span>
<span id="cb780-11"><a href="DApps-pametne-pogodbe.html#cb780-11" tabindex="-1"></a>    <span class="pp">require</span>(_weiTokenPrice <span class="op">!=</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb780-12"><a href="DApps-pametne-pogodbe.html#cb780-12" tabindex="-1"></a>    <span class="pp">require</span>(_etherInvestmentObjective <span class="op">!=</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb780-13"><a href="DApps-pametne-pogodbe.html#cb780-13" tabindex="-1"></a>    startTime <span class="op">=</span> _startTime<span class="op">;</span></span>
<span id="cb780-14"><a href="DApps-pametne-pogodbe.html#cb780-14" tabindex="-1"></a>    endTime <span class="op">=</span> _endTime<span class="op">;</span></span>
<span id="cb780-15"><a href="DApps-pametne-pogodbe.html#cb780-15" tabindex="-1"></a>    weiTokenPrice <span class="op">=</span> _weiTokenPrice<span class="op">;</span></span>
<span id="cb780-16"><a href="DApps-pametne-pogodbe.html#cb780-16" tabindex="-1"></a>    weiInvestmentObjective <span class="op">=</span> _etherInvestmentObjective <span class="op">*</span> <span class="dv">1000000000000000000</span><span class="op">;</span></span>
<span id="cb780-17"><a href="DApps-pametne-pogodbe.html#cb780-17" tabindex="-1"></a>    crowdsaleToken <span class="op">=</span> <span class="kw">new</span> <span class="fu">SimpleCoin</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb780-18"><a href="DApps-pametne-pogodbe.html#cb780-18" tabindex="-1"></a>    isFinalized <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb780-19"><a href="DApps-pametne-pogodbe.html#cb780-19" tabindex="-1"></a>    isRefundingAllowed <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb780-20"><a href="DApps-pametne-pogodbe.html#cb780-20" tabindex="-1"></a>    owner <span class="op">=</span> msg<span class="op">.</span><span class="at">sender</span><span class="op">;</span></span>
<span id="cb780-21"><a href="DApps-pametne-pogodbe.html#cb780-21" tabindex="-1"></a>  }</span>
<span id="cb780-22"><a href="DApps-pametne-pogodbe.html#cb780-22" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb780-23"><a href="DApps-pametne-pogodbe.html#cb780-23" tabindex="-1"></a>}</span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#konstruktor code.javascript:eq(0)").markRegExp(/.+?(uint256|require|time|price|wei|false|token).+/i, options_dodaj);
  });
</script>
</div>
<div id="funkcije-za-podporo-množični-prodaji" class="section level3 hasAnchor" number="11.5.3">
<h3><span class="header-section-number">11.5.3</span> Funkcije za podporo množični prodaji<a href="DApps-pametne-pogodbe.html#funkcije-za-podporo-množični-prodaji" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="vlaganje" class="section level4 hasAnchor" number="11.5.3.1">
<h4><span class="header-section-number">11.5.3.1</span> Vlaganje<a href="DApps-pametne-pogodbe.html#vlaganje" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Najpomembnejša funkcija pogodbe je <code>invest</code>, saj je njen namen sprejemanje sredstev Ether od vlagateljev in jih pretvoriti v žetone za množično prodajo. Ti žetoni ne bodo izdani lastnikom vse dokler se množična prodaja uspešno ne zaključi. Omenjeno funkcijo tudi označimo za plačljivo <a href="https://solidity-by-example.org/payable/"><i class="fa-brands fa-ethereum"></i><code>payable</code></a> in vključimo preverjanje začetnih pogojev ter logiko za pretvorbo žetonov preko podpornih funkcij.</p>
<p>Pripravimo tudi podporni funkciji <code>isValidInvestment</code> in <code>assignTokens</code> ter dogodka <code>LogInvestment</code> in <code>LogTokenAssignment</code>.</p>
<p>Pri dogodkih smo uporabili kvantifikator <a href="https://solidity-by-example.org/events/"><i class="fa-brands fa-ethereum"></i><code>indexed</code></a>, ki nam omogoča filtriranje dnevniških zapisov po izbranem atributu. Pri podpornih funkcijah smo dodali kvantifikator <a href="https://solidity-by-example.org/visibility/"><i class="fa-brands fa-ethereum"></i><code>internal</code></a>, ki omejuje uporabo znotraj pogodbe. Funkcije, ki stanja spremenljivk ne spreminjajo, lahko označimo s kvantifikatorjem <a href="https://docs.soliditylang.org/en/v0.8.17/contracts.html#view-functions"><i class="fa-brands fa-ethereum"></i><code>view</code></a>.</p>
<p><code>SimpleCrowdsale.sol</code></p>
<div class="sourceCode" id="cb781"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb781-1"><a href="DApps-pametne-pogodbe.html#cb781-1" tabindex="-1"></a>contract SimpleCrowdsale {</span>
<span id="cb781-2"><a href="DApps-pametne-pogodbe.html#cb781-2" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb781-3"><a href="DApps-pametne-pogodbe.html#cb781-3" tabindex="-1"></a>  <span class="bu">event</span> <span class="fu">LogInvestment</span>(address indexed investor<span class="op">,</span> uint256 value)<span class="op">;</span></span>
<span id="cb781-4"><a href="DApps-pametne-pogodbe.html#cb781-4" tabindex="-1"></a>  <span class="bu">event</span> <span class="fu">LogTokenAssignment</span>(address indexed investor<span class="op">,</span> uint256 numTokens)<span class="op">;</span></span>
<span id="cb781-5"><a href="DApps-pametne-pogodbe.html#cb781-5" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb781-6"><a href="DApps-pametne-pogodbe.html#cb781-6" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">invest</span>() <span class="kw">public</span> payable {</span>
<span id="cb781-7"><a href="DApps-pametne-pogodbe.html#cb781-7" tabindex="-1"></a>    <span class="pp">require</span>(<span class="fu">isValidInvestment</span>(msg<span class="op">.</span><span class="at">value</span>))<span class="op">;</span></span>
<span id="cb781-8"><a href="DApps-pametne-pogodbe.html#cb781-8" tabindex="-1"></a>    address investor <span class="op">=</span> msg<span class="op">.</span><span class="at">sender</span><span class="op">;</span></span>
<span id="cb781-9"><a href="DApps-pametne-pogodbe.html#cb781-9" tabindex="-1"></a>    uint256 investment <span class="op">=</span> msg<span class="op">.</span><span class="at">value</span><span class="op">;</span></span>
<span id="cb781-10"><a href="DApps-pametne-pogodbe.html#cb781-10" tabindex="-1"></a>    investmentAmount[investor] <span class="op">+=</span> investment<span class="op">;</span></span>
<span id="cb781-11"><a href="DApps-pametne-pogodbe.html#cb781-11" tabindex="-1"></a>    investmentReceived <span class="op">+=</span> investment<span class="op">;</span></span>
<span id="cb781-12"><a href="DApps-pametne-pogodbe.html#cb781-12" tabindex="-1"></a>    <span class="fu">assignTokens</span>(investor<span class="op">,</span> investment)<span class="op">;</span></span>
<span id="cb781-13"><a href="DApps-pametne-pogodbe.html#cb781-13" tabindex="-1"></a>    emit <span class="fu">LogInvestment</span>(investor<span class="op">,</span> investment)<span class="op">;</span></span>
<span id="cb781-14"><a href="DApps-pametne-pogodbe.html#cb781-14" tabindex="-1"></a>  }</span>
<span id="cb781-15"><a href="DApps-pametne-pogodbe.html#cb781-15" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">isValidInvestment</span>(uint256 _investment) internal view <span class="fu">returns</span> (bool) {</span>
<span id="cb781-16"><a href="DApps-pametne-pogodbe.html#cb781-16" tabindex="-1"></a>    bool nonZeroInvestment <span class="op">=</span> _investment <span class="op">!=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb781-17"><a href="DApps-pametne-pogodbe.html#cb781-17" tabindex="-1"></a>    bool withinCrowdsalePeriod <span class="op">=</span> block<span class="op">.</span><span class="at">timestamp</span> <span class="op">&gt;=</span> startTime <span class="op">&amp;&amp;</span></span>
<span id="cb781-18"><a href="DApps-pametne-pogodbe.html#cb781-18" tabindex="-1"></a>      block<span class="op">.</span><span class="at">timestamp</span> <span class="op">&lt;=</span> endTime<span class="op">;</span></span>
<span id="cb781-19"><a href="DApps-pametne-pogodbe.html#cb781-19" tabindex="-1"></a>    <span class="cf">return</span> nonZeroInvestment <span class="op">&amp;&amp;</span> withinCrowdsalePeriod<span class="op">;</span></span>
<span id="cb781-20"><a href="DApps-pametne-pogodbe.html#cb781-20" tabindex="-1"></a>  }</span>
<span id="cb781-21"><a href="DApps-pametne-pogodbe.html#cb781-21" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">assignTokens</span>(address _beneficiary<span class="op">,</span> uint256 _investment) internal {</span>
<span id="cb781-22"><a href="DApps-pametne-pogodbe.html#cb781-22" tabindex="-1"></a>    uint256 _numberOfTokens <span class="op">=</span> <span class="fu">calculateNumberOfTokens</span>(_investment)<span class="op">;</span></span>
<span id="cb781-23"><a href="DApps-pametne-pogodbe.html#cb781-23" tabindex="-1"></a>    crowdsaleToken<span class="op">.</span><span class="fu">mint</span>(_beneficiary<span class="op">,</span> _numberOfTokens)<span class="op">;</span></span>
<span id="cb781-24"><a href="DApps-pametne-pogodbe.html#cb781-24" tabindex="-1"></a>  }</span>
<span id="cb781-25"><a href="DApps-pametne-pogodbe.html#cb781-25" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">calculateNumberOfTokens</span>(uint256 _investment)</span>
<span id="cb781-26"><a href="DApps-pametne-pogodbe.html#cb781-26" tabindex="-1"></a>    internal view <span class="fu">returns</span> (uint256)</span>
<span id="cb781-27"><a href="DApps-pametne-pogodbe.html#cb781-27" tabindex="-1"></a>  {</span>
<span id="cb781-28"><a href="DApps-pametne-pogodbe.html#cb781-28" tabindex="-1"></a>    <span class="cf">return</span> _investment <span class="op">/</span> weiTokenPrice<span class="op">;</span></span>
<span id="cb781-29"><a href="DApps-pametne-pogodbe.html#cb781-29" tabindex="-1"></a>  }</span>
<span id="cb781-30"><a href="DApps-pametne-pogodbe.html#cb781-30" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb781-31"><a href="DApps-pametne-pogodbe.html#cb781-31" tabindex="-1"></a>}</span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#vlaganje code.javascript:eq(0)").markRegExp(/\s+?event.+/, options_dodaj);
    $("#vlaganje code.javascript:eq(0)").markRegExp(/\s+?function (isValidInvestment|assignTokens|calculateNumberOfTokens)[\s\S]+?}/, options_dodaj);
    $("#vlaganje code.javascript:eq(0)").markRegExp(/\s+?require[\s\S]+?emit LogInvestment.+/, options_dodaj);
  });
</script>
</div>
<div id="zaključi-množično-prodajo" class="section level4 hasAnchor" number="11.5.3.2">
<h4><span class="header-section-number">11.5.3.2</span> Zaključi množično prodajo<a href="DApps-pametne-pogodbe.html#zaključi-množično-prodajo" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Namen funkcije <code>finalize</code> je izvedba zaključnih aktivnosti, povezanih z množično prodajo. Če je le-ta dosegla minimalni naložbeni cilj, pogodba vlagateljem sprosti žetone in jih lahko uporabljajo. Prav tako se lahko posreduje del dodatnih bonus žetonov za razvojno ekipo, ki je lahko odvisen od celotne višine zbranih sredstev. V primeru ko je množična prodaja neuspešna, se prestavimo v stanje vračila vloženih sredstev in vlagateljem je dovoljen prenos naložbe nazaj na njihove račune.</p>
<p>Pred sprostitvijo žetonov vlagateljem, morajo le-ti ostati zaklenjeni in so v neuporabnem stanju - lastniki ne smejo izvajati nobenih operacij z njimi, kot je npr. prenos na druge račune. Pogodba sprosti prvotno zaklenjene žetone le, če je množična prodaja uspešna.</p>
<p>Operacije pogodbe <code>SimpleCoin</code> niso na noben način omejene (razen metodi <code>mint</code> in <code>finalize</code>) in niso odvisne od lastnika pogodbe, ki bi določeno izvajanje moral omogočiti. Pametna pogodba <code>SimpleCoin</code> v trenutni obliki ni primerna za množično prodajo, zato bomo razvili spremenjeno različico <code>ReleasableSimpleCoin</code>. V tej novi pametni pogodbi npr. operaciji <code>transfer</code> in <code>transferFrom</code> ne bosta delovali, če žetonov predhodno nismo sprostili.</p>
<p>Da ne bomo podvajali kode, bomo <strong>novo pogodbo</strong> <code>ReleasableSimpleCoin</code> <strong>izpeljali iz obstoječe</strong> pogodbe <code>SimpleCoin</code>.</p>
<p><code>ReleasableSimpleCoin.sol</code></p>
<div class="sourceCode" id="cb782"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb782-1"><a href="DApps-pametne-pogodbe.html#cb782-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb782-2"><a href="DApps-pametne-pogodbe.html#cb782-2" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.23</span><span class="op">;</span></span>
<span id="cb782-3"><a href="DApps-pametne-pogodbe.html#cb782-3" tabindex="-1"></a><span class="im">import</span> <span class="st">&quot;./SimpleCoin.sol&quot;</span><span class="op">;</span></span>
<span id="cb782-4"><a href="DApps-pametne-pogodbe.html#cb782-4" tabindex="-1"></a></span>
<span id="cb782-5"><a href="DApps-pametne-pogodbe.html#cb782-5" tabindex="-1"></a>contract ReleasableSimpleCoin is SimpleCoin {</span>
<span id="cb782-6"><a href="DApps-pametne-pogodbe.html#cb782-6" tabindex="-1"></a>  bool <span class="kw">public</span> released <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb782-7"><a href="DApps-pametne-pogodbe.html#cb782-7" tabindex="-1"></a>  <span class="fu">constructor</span>(uint256 _initialSupply) <span class="fu">SimpleCoin</span>(_initialSupply) {}</span>
<span id="cb782-8"><a href="DApps-pametne-pogodbe.html#cb782-8" tabindex="-1"></a>  modifier <span class="fu">isReleased</span>() {</span>
<span id="cb782-9"><a href="DApps-pametne-pogodbe.html#cb782-9" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>released) <span class="fu">revert</span>()<span class="op">;</span></span>
<span id="cb782-10"><a href="DApps-pametne-pogodbe.html#cb782-10" tabindex="-1"></a>    _<span class="op">;</span></span>
<span id="cb782-11"><a href="DApps-pametne-pogodbe.html#cb782-11" tabindex="-1"></a>  }</span>
<span id="cb782-12"><a href="DApps-pametne-pogodbe.html#cb782-12" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">release</span>() <span class="kw">public</span> onlyOwner {</span>
<span id="cb782-13"><a href="DApps-pametne-pogodbe.html#cb782-13" tabindex="-1"></a>    released <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb782-14"><a href="DApps-pametne-pogodbe.html#cb782-14" tabindex="-1"></a>  }</span>
<span id="cb782-15"><a href="DApps-pametne-pogodbe.html#cb782-15" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">transfer</span>(address _to<span class="op">,</span> uint256 _amount) <span class="kw">public</span> override isReleased {</span>
<span id="cb782-16"><a href="DApps-pametne-pogodbe.html#cb782-16" tabindex="-1"></a>    <span class="kw">super</span><span class="op">.</span><span class="fu">transfer</span>(_to<span class="op">,</span> _amount)<span class="op">;</span></span>
<span id="cb782-17"><a href="DApps-pametne-pogodbe.html#cb782-17" tabindex="-1"></a>  }</span>
<span id="cb782-18"><a href="DApps-pametne-pogodbe.html#cb782-18" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">transferFrom</span>(</span>
<span id="cb782-19"><a href="DApps-pametne-pogodbe.html#cb782-19" tabindex="-1"></a>    address _from<span class="op">,</span></span>
<span id="cb782-20"><a href="DApps-pametne-pogodbe.html#cb782-20" tabindex="-1"></a>    address _to<span class="op">,</span></span>
<span id="cb782-21"><a href="DApps-pametne-pogodbe.html#cb782-21" tabindex="-1"></a>    uint256 _amount</span>
<span id="cb782-22"><a href="DApps-pametne-pogodbe.html#cb782-22" tabindex="-1"></a>  ) <span class="kw">public</span> override isReleased <span class="fu">returns</span> (bool success) {</span>
<span id="cb782-23"><a href="DApps-pametne-pogodbe.html#cb782-23" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">super</span><span class="op">.</span><span class="fu">transferFrom</span>(_from<span class="op">,</span> _to<span class="op">,</span> _amount)<span class="op">;</span></span>
<span id="cb782-24"><a href="DApps-pametne-pogodbe.html#cb782-24" tabindex="-1"></a>  }</span>
<span id="cb782-25"><a href="DApps-pametne-pogodbe.html#cb782-25" tabindex="-1"></a>}</span></code></pre></div>
<p>Pri opredelitvi nove pogodbe smo zgolj dodali manjkajoče funkcionalnosti, in sicer spremenljivko stanja <code>released</code>, funkcijski modifikator <code>isReleased</code> in metodo <code>release</code>, ki jo lahko pokliče zgolj lastnik pametne pogodbe.</p>
<p>Pri metodah <code>transfer</code> in <code>transferFrom</code> smo uporabili obstoječe delovanje v pogodbi <code>SimpleCoin</code> (s pomočjo uporabe <a href="https://solidity-by-example.org/super/"><i class="fa-brands fa-ethereum"></i><code>super</code></a>) in dopolnili funkcionalnost tako, da smo dodatno zahtevali preverjanje pogoja s pomočjo funkcijskega modifikatorja <code>isReleased</code>. Pri tem smo uporabili rezervirano besedo <a href="https://docs.soliditylang.org/en/v0.8.17/contracts.html#inheritance"><i class="fa-brands fa-ethereum"></i><code>override</code></a>.</p>
<p>V prvotni pogodbi <code>SimpleCoin</code> moramo metodi <code>transfer</code> in <code>transferFrom</code> označiti s kvantifikatorjem <a href="https://www.developer.com/languages/inheritance-solidity/"><i class="fa-brands fa-ethereum"></i><code>virtual</code></a>, s čimer v izvorni pogodbi dovolimo ponovno implementacijo obstoječih metod v izpeljani pogodbi.</p>
<p><code>SimpleCoin.sol</code></p>
<div class="sourceCode" id="cb783"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb783-1"><a href="DApps-pametne-pogodbe.html#cb783-1" tabindex="-1"></a>contract SimpleCoin {</span>
<span id="cb783-2"><a href="DApps-pametne-pogodbe.html#cb783-2" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb783-3"><a href="DApps-pametne-pogodbe.html#cb783-3" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">transfer</span>(address _to<span class="op">,</span> uint256 _amount) <span class="kw">public</span> virtual {</span>
<span id="cb783-4"><a href="DApps-pametne-pogodbe.html#cb783-4" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb783-5"><a href="DApps-pametne-pogodbe.html#cb783-5" tabindex="-1"></a>  }</span>
<span id="cb783-6"><a href="DApps-pametne-pogodbe.html#cb783-6" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb783-7"><a href="DApps-pametne-pogodbe.html#cb783-7" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">transferFrom</span>(</span>
<span id="cb783-8"><a href="DApps-pametne-pogodbe.html#cb783-8" tabindex="-1"></a>    address _from<span class="op">,</span></span>
<span id="cb783-9"><a href="DApps-pametne-pogodbe.html#cb783-9" tabindex="-1"></a>    address _to<span class="op">,</span></span>
<span id="cb783-10"><a href="DApps-pametne-pogodbe.html#cb783-10" tabindex="-1"></a>    uint256 _amount</span>
<span id="cb783-11"><a href="DApps-pametne-pogodbe.html#cb783-11" tabindex="-1"></a>  ) <span class="kw">public</span> virtual <span class="fu">returns</span> (bool success) {</span>
<span id="cb783-12"><a href="DApps-pametne-pogodbe.html#cb783-12" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb783-13"><a href="DApps-pametne-pogodbe.html#cb783-13" tabindex="-1"></a>  }</span>
<span id="cb783-14"><a href="DApps-pametne-pogodbe.html#cb783-14" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb783-15"><a href="DApps-pametne-pogodbe.html#cb783-15" tabindex="-1"></a>}</span></code></pre></div>
<p>Razmerje dedovanja pogodb lahko predstavimo kot <a href="https://en.wikipedia.org/wiki/Class_diagram#Generalization/Inheritance"><i class="fa-brands fa-wikipedia-w"></i>generalizacijo</a> v obliki <a href="https://en.wikipedia.org/wiki/Class_diagram"><i class="fa-brands fa-wikipedia-w"></i>razrednega diagrama UML</a> na sliki <a href="DApps-pametne-pogodbe.html#fig:slika-UML-SimpleCoin-ReleasableSimpleCoin">11.15</a>.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-UML-SimpleCoin-ReleasableSimpleCoin"></span>
<img src="../../plantuml/svg/fLBBRi8m4BpdAonn0K4kbQWGeaY0oWUq7u0SUmCMZZTQEusQbd-ldITgQNlWPitEpExisfwLoJdnZ0dDhMKV4MC95-SZOM7a3ZKIAq_AmKzyjL9LGjpWUir6i4ZdgGma90dK24Vp_NRnlFCe9yAo0HFjRQ9BPFlEWw-e6SwRMby2uwAJai248g6XULi71EZUSuYYNJtogyfo3JjKffu-nj80BHcNai1QZqo5hssvvaR0" alt="Odvisnost pogodb ReleasableSimpleCoin in SimpleCoin preko razmerja generalizacije, kjer so spremenljivke stanja predstavljane kot atributi, funkcije pa kot metode. PlantUML" width="400" />
<p class="caption">
Slika 11.15: Odvisnost pogodb <code>ReleasableSimpleCoin</code> in <code>SimpleCoin</code> preko razmerja generalizacije, kjer so spremenljivke stanja predstavljane kot atributi, funkcije pa kot metode. <a href="https://teaching.lavbic.net/plantuml/uml/fLBBRi8m4BpdAonn0K4kbQWGeaY0oWUq7u0SUmCMZZTQEusQbd-ldITgQNlWPitEpExisfwLoJdnZ0dDhMKV4MC95-SZOM7a3ZKIAq_AmKzyjL9LGjpWUir6i4ZdgGma90dK24Vp_NRnlFCe9yAo0HFjRQ9BPFlEWw-e6SwRMby2uwAJai248g6XULi71EZUSuYYNJtogyfo3JjKffu-nj80BHcNai1QZqo5hssvvaR0acKypvKvZjiwUrgpGXdtC7-S12xN6ijVcN-8QtLAM87P2E7Jk9iE2Q8Er3YEWo3pwhvy810gLpxthBDbXy00kSc2usJ9tb25DK_h9QL0WzZXbOf_v_F2dP1K1OEWXsGxyBM-MyEDbdl2R73naRCP-sUAaBhP3q05RRlUmt4wWkyUMAoXT6qltPLVG0EtFD4mtFlw1uRJJwacWUmRDajkuV4TwxiZUvVZLW8M5tdykRxwmry0"><small><i class="fa-solid fa-diagram-project"></i>PlantUML</small></a>
</p>
</div>
<p>Zdaj se lahko vrnemo nazaj k implementaciji metode za zaključek množične prodaje, saj imamo na voljo ustrezen žeton v obliki <code>ReleasableSimpleCoin</code>. V izvorni kodi najprej popravimo reference na novo pogodbo za žeton množične prodaje in implementirajmo metodo <code>finalize</code>.</p>
<p><code>SimpleCrowdsale.sol</code></p>
<div class="sourceCode" id="cb784"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb784-1"><a href="DApps-pametne-pogodbe.html#cb784-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb784-2"><a href="DApps-pametne-pogodbe.html#cb784-2" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.23</span><span class="op">;</span></span>
<span id="cb784-3"><a href="DApps-pametne-pogodbe.html#cb784-3" tabindex="-1"></a><span class="im">import</span> <span class="st">&quot;./ReleasableSimpleCoin.sol&quot;</span><span class="op">;</span></span>
<span id="cb784-4"><a href="DApps-pametne-pogodbe.html#cb784-4" tabindex="-1"></a></span>
<span id="cb784-5"><a href="DApps-pametne-pogodbe.html#cb784-5" tabindex="-1"></a>contract SimpleCrowdsale {</span>
<span id="cb784-6"><a href="DApps-pametne-pogodbe.html#cb784-6" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb784-7"><a href="DApps-pametne-pogodbe.html#cb784-7" tabindex="-1"></a>  ReleasableSimpleCoin <span class="kw">public</span> crowdsaleToken<span class="op">;</span></span>
<span id="cb784-8"><a href="DApps-pametne-pogodbe.html#cb784-8" tabindex="-1"></a>  <span class="fu">constructor</span>(</span>
<span id="cb784-9"><a href="DApps-pametne-pogodbe.html#cb784-9" tabindex="-1"></a>    uint256 _startTime<span class="op">,</span></span>
<span id="cb784-10"><a href="DApps-pametne-pogodbe.html#cb784-10" tabindex="-1"></a>    uint256 _endTime<span class="op">,</span></span>
<span id="cb784-11"><a href="DApps-pametne-pogodbe.html#cb784-11" tabindex="-1"></a>    uint256 _weiTokenPrice<span class="op">,</span></span>
<span id="cb784-12"><a href="DApps-pametne-pogodbe.html#cb784-12" tabindex="-1"></a>    uint256 _etherInvestmentObjective</span>
<span id="cb784-13"><a href="DApps-pametne-pogodbe.html#cb784-13" tabindex="-1"></a>  ) {</span>
<span id="cb784-14"><a href="DApps-pametne-pogodbe.html#cb784-14" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb784-15"><a href="DApps-pametne-pogodbe.html#cb784-15" tabindex="-1"></a>    crowdsaleToken <span class="op">=</span> <span class="kw">new</span> <span class="fu">ReleasableSimpleCoin</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb784-16"><a href="DApps-pametne-pogodbe.html#cb784-16" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb784-17"><a href="DApps-pametne-pogodbe.html#cb784-17" tabindex="-1"></a>  }</span>
<span id="cb784-18"><a href="DApps-pametne-pogodbe.html#cb784-18" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb784-19"><a href="DApps-pametne-pogodbe.html#cb784-19" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">finalize</span>() <span class="kw">public</span> onlyOwner {</span>
<span id="cb784-20"><a href="DApps-pametne-pogodbe.html#cb784-20" tabindex="-1"></a>    <span class="cf">if</span> (isFinalized) <span class="fu">revert</span>()<span class="op">;</span></span>
<span id="cb784-21"><a href="DApps-pametne-pogodbe.html#cb784-21" tabindex="-1"></a>    bool isCrowdsaleComplete <span class="op">=</span> block<span class="op">.</span><span class="at">timestamp</span> <span class="op">&gt;</span> endTime<span class="op">;</span></span>
<span id="cb784-22"><a href="DApps-pametne-pogodbe.html#cb784-22" tabindex="-1"></a>    bool investmentObjectiveMet <span class="op">=</span> investmentReceived <span class="op">&gt;=</span> weiInvestmentObjective<span class="op">;</span></span>
<span id="cb784-23"><a href="DApps-pametne-pogodbe.html#cb784-23" tabindex="-1"></a>    <span class="cf">if</span> (isCrowdsaleComplete) {</span>
<span id="cb784-24"><a href="DApps-pametne-pogodbe.html#cb784-24" tabindex="-1"></a>      <span class="cf">if</span> (investmentObjectiveMet) crowdsaleToken<span class="op">.</span><span class="fu">release</span>()<span class="op">;</span></span>
<span id="cb784-25"><a href="DApps-pametne-pogodbe.html#cb784-25" tabindex="-1"></a>      <span class="cf">else</span> isRefundingAllowed <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb784-26"><a href="DApps-pametne-pogodbe.html#cb784-26" tabindex="-1"></a>      isFinalized <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb784-27"><a href="DApps-pametne-pogodbe.html#cb784-27" tabindex="-1"></a>    }</span>
<span id="cb784-28"><a href="DApps-pametne-pogodbe.html#cb784-28" tabindex="-1"></a>  }</span>
<span id="cb784-29"><a href="DApps-pametne-pogodbe.html#cb784-29" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb784-30"><a href="DApps-pametne-pogodbe.html#cb784-30" tabindex="-1"></a>}</span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#zaključi-množično-prodajo code:eq(8)").markRegExp(/.+/, options_dodaj);
    $("#zaključi-množično-prodajo code.javascript:eq(0)").markRegExp(/.+/, options_dodaj);
    $("#zaključi-množično-prodajo code.javascript:eq(1)").markRegExp(/ virtual/, options_dodaj);
    $("#zaključi-množično-prodajo code.javascript:eq(2)").markRegExp(/Releasable/, options_dodaj);
    $("#zaključi-množično-prodajo code.javascript:eq(2)").markRegExp(/\s+?if[\s\S]+?}/, options_dodaj);
  });
</script>
</div>
<div id="povračilo" class="section level4 hasAnchor" number="11.5.3.3">
<h4><span class="header-section-number">11.5.3.3</span> Povračilo<a href="DApps-pametne-pogodbe.html#povračilo" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Zadnja funkcija, ki jo še moramo implementirati za dokončanje začetne različice pogodbe za podporo množični prodaji, je <code>refund</code>, ki jo investitor lahko pokliče po neuspešno izvedeni množični prodaji. Pri implementaciji dodamo tudi dogodek <code>Refund</code>.</p>
<p>Klic je dovoljen le ob zaključku množične prodaje in samo takrat, ko je vlagatelj dejansko prispeval sredstva.</p>
<p><code>SimpleCrowdsale.sol</code></p>
<div class="sourceCode" id="cb785"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb785-1"><a href="DApps-pametne-pogodbe.html#cb785-1" tabindex="-1"></a>contract SimpleCrowdsale {</span>
<span id="cb785-2"><a href="DApps-pametne-pogodbe.html#cb785-2" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb785-3"><a href="DApps-pametne-pogodbe.html#cb785-3" tabindex="-1"></a>  <span class="bu">event</span> <span class="fu">LogInvestment</span>(address indexed investor<span class="op">,</span> uint256 value)<span class="op">;</span></span>
<span id="cb785-4"><a href="DApps-pametne-pogodbe.html#cb785-4" tabindex="-1"></a>  <span class="bu">event</span> <span class="fu">LogTokenAssignment</span>(address indexed investor<span class="op">,</span> uint256 numTokens)<span class="op">;</span></span>
<span id="cb785-5"><a href="DApps-pametne-pogodbe.html#cb785-5" tabindex="-1"></a>  <span class="bu">event</span> <span class="fu">Refund</span>(address investor<span class="op">,</span> uint256 value)<span class="op">;</span></span>
<span id="cb785-6"><a href="DApps-pametne-pogodbe.html#cb785-6" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb785-7"><a href="DApps-pametne-pogodbe.html#cb785-7" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">refund</span>() <span class="kw">public</span> {</span>
<span id="cb785-8"><a href="DApps-pametne-pogodbe.html#cb785-8" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>isRefundingAllowed) <span class="fu">revert</span>()<span class="op">;</span></span>
<span id="cb785-9"><a href="DApps-pametne-pogodbe.html#cb785-9" tabindex="-1"></a>    address investor <span class="op">=</span> msg<span class="op">.</span><span class="at">sender</span><span class="op">;</span></span>
<span id="cb785-10"><a href="DApps-pametne-pogodbe.html#cb785-10" tabindex="-1"></a>    uint256 investment <span class="op">=</span> investmentAmount[investor]<span class="op">;</span></span>
<span id="cb785-11"><a href="DApps-pametne-pogodbe.html#cb785-11" tabindex="-1"></a>    <span class="cf">if</span> (investment <span class="op">==</span> <span class="dv">0</span>) <span class="fu">revert</span>()<span class="op">;</span></span>
<span id="cb785-12"><a href="DApps-pametne-pogodbe.html#cb785-12" tabindex="-1"></a>    investmentAmount[investor] <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb785-13"><a href="DApps-pametne-pogodbe.html#cb785-13" tabindex="-1"></a>    investmentRefunded <span class="op">+=</span> investment<span class="op">;</span></span>
<span id="cb785-14"><a href="DApps-pametne-pogodbe.html#cb785-14" tabindex="-1"></a>    emit <span class="fu">Refund</span>(investor<span class="op">,</span> investment)<span class="op">;</span></span>
<span id="cb785-15"><a href="DApps-pametne-pogodbe.html#cb785-15" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span><span class="fu">payable</span>(investor)<span class="op">.</span><span class="fu">send</span>(investment)) <span class="fu">revert</span>()<span class="op">;</span></span>
<span id="cb785-16"><a href="DApps-pametne-pogodbe.html#cb785-16" tabindex="-1"></a>  }</span>
<span id="cb785-17"><a href="DApps-pametne-pogodbe.html#cb785-17" tabindex="-1"></a>}</span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#povračilo code.javascript:eq(0)").markRegExp(/\s+?event Refund.+/, options_dodaj);
    $("#povračilo code.javascript:eq(0)").markRegExp(/\s+?if [\s\S]+?\(investment\)\).+/, options_dodaj);
  });
</script>
</div>
<div id="odprava-podvajanja-kode-z-dedovanjem" class="section level4 hasAnchor" number="11.5.3.4">
<h4><span class="header-section-number">11.5.3.4</span> Odprava podvajanja kode z dedovanjem<a href="DApps-pametne-pogodbe.html#odprava-podvajanja-kode-z-dedovanjem" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Opazimo lahko, da obe pogodbi <code>SimpleCoin</code> in <code>SimpleCrowdsale</code> uporabljata funkcijski modifikator <code>onlyOwner</code>. To je zagotovo dober pristop, slabost pa je, da smo morali ta funkcijski modifikator opredeliti v vsaki pogodbi posebej. Zato bomo to težavo rešili tako, da vpeljemo novo pametno pogodbo <code>Ownable</code>.</p>
<p><code>Ownable.sol</code></p>
<div class="sourceCode" id="cb786"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb786-1"><a href="DApps-pametne-pogodbe.html#cb786-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb786-2"><a href="DApps-pametne-pogodbe.html#cb786-2" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.23</span><span class="op">;</span></span>
<span id="cb786-3"><a href="DApps-pametne-pogodbe.html#cb786-3" tabindex="-1"></a></span>
<span id="cb786-4"><a href="DApps-pametne-pogodbe.html#cb786-4" tabindex="-1"></a>contract Ownable {</span>
<span id="cb786-5"><a href="DApps-pametne-pogodbe.html#cb786-5" tabindex="-1"></a>  address <span class="kw">public</span> owner<span class="op">;</span></span>
<span id="cb786-6"><a href="DApps-pametne-pogodbe.html#cb786-6" tabindex="-1"></a>  <span class="fu">constructor</span>() {</span>
<span id="cb786-7"><a href="DApps-pametne-pogodbe.html#cb786-7" tabindex="-1"></a>    owner <span class="op">=</span> msg<span class="op">.</span><span class="at">sender</span><span class="op">;</span></span>
<span id="cb786-8"><a href="DApps-pametne-pogodbe.html#cb786-8" tabindex="-1"></a>  }</span>
<span id="cb786-9"><a href="DApps-pametne-pogodbe.html#cb786-9" tabindex="-1"></a>  modifier <span class="fu">onlyOwner</span>() {</span>
<span id="cb786-10"><a href="DApps-pametne-pogodbe.html#cb786-10" tabindex="-1"></a>    <span class="pp">require</span>(msg<span class="op">.</span><span class="at">sender</span> <span class="op">==</span> owner)<span class="op">;</span></span>
<span id="cb786-11"><a href="DApps-pametne-pogodbe.html#cb786-11" tabindex="-1"></a>    _<span class="op">;</span></span>
<span id="cb786-12"><a href="DApps-pametne-pogodbe.html#cb786-12" tabindex="-1"></a>  }</span>
<span id="cb786-13"><a href="DApps-pametne-pogodbe.html#cb786-13" tabindex="-1"></a>}</span></code></pre></div>
<p>Sedaj pogodbo <code>Ownable</code> vključimo v obstoječi pogodbi <code>SimpleCoin</code> in <code>SimpleCrowdsale</code>, kot to prikazuje slika <a href="DApps-pametne-pogodbe.html#fig:slika-UML-Lastnistvo-dodano">11.16</a>.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-UML-Lastnistvo-dodano"></span>
<img src="../../plantuml/svg/RO_1Ri8m44Jl-nLMEUU8n27AeL6v8fKlsDYROc7iQDSeQe5_nv0cH2QttTdncx4ShU-GyQIqGn5r0QKQrCSV3cTlwk02g_vW8xthPMd_6aOVgagjQDEkM_Cm1JR4myFLUlkv-QgJYioX7yJ69GpSGARa5rS_7J519Pt8HpXOGqfRrew6MI8nXVZR4K3zhFoXTht7nb6QKCPbrcxoxUsfSrG7wmVhQvyit-G8vG78pKkN" alt="Medsebojna odvisnost pogodb, kjer SimpleCoin in SimpleCrowdsale dedujeta iz pogodbe Ownable, medtem ko je pogodba SimpleCrowdsale odvisna tudi od pogodbe ReleasableSimpleCoin, ki deduje iz pogodbe SimpleCoin. PlantUML" width="330" />
<p class="caption">
Slika 11.16: Medsebojna odvisnost pogodb, kjer <code>SimpleCoin</code> in <code>SimpleCrowdsale</code> dedujeta iz pogodbe <code>Ownable</code>, medtem ko je pogodba <code>SimpleCrowdsale</code> odvisna tudi od pogodbe <code>ReleasableSimpleCoin</code>, ki deduje iz pogodbe <code>SimpleCoin</code>. <a href="https://teaching.lavbic.net/plantuml/uml/RO_1Ri8m44Jl-nLMEUU8n27AeL6v8fKlsDYROc7iQDSeQe5_nv0cH2QttTdncx4ShU-GyQIqGn5r0QKQrCSV3cTlwk02g_vW8xthPMd_6aOVgagjQDEkM_Cm1JR4myFLUlkv-QgJYioX7yJ69GpSGARa5rS_7J519Pt8HpXOGqfRrew6MI8nXVZR4K3zhFoXTht7nb6QKCPbrcxoxUsfSrG7wmVhQvyit-G8vG78pKkNd9m-QGJ79fa8C4CMvwwuLcDPM8pzzypYyfYCydPsrCQYMgn-1m00"><small><i class="fa-solid fa-diagram-project"></i>PlantUML</small></a>
</p>
</div>
<p><code>SimpleCoin.sol</code></p>
<div class="sourceCode" id="cb787"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb787-1"><a href="DApps-pametne-pogodbe.html#cb787-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb787-2"><a href="DApps-pametne-pogodbe.html#cb787-2" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.23</span><span class="op">;</span></span>
<span id="cb787-3"><a href="DApps-pametne-pogodbe.html#cb787-3" tabindex="-1"></a><span class="im">import</span> <span class="st">&quot;./Ownable.sol&quot;</span><span class="op">;</span></span>
<span id="cb787-4"><a href="DApps-pametne-pogodbe.html#cb787-4" tabindex="-1"></a></span>
<span id="cb787-5"><a href="DApps-pametne-pogodbe.html#cb787-5" tabindex="-1"></a>contract SimpleCoin is Ownable {</span>
<span id="cb787-6"><a href="DApps-pametne-pogodbe.html#cb787-6" tabindex="-1"></a>  address <span class="kw">private</span> owner<span class="op">;</span></span>
<span id="cb787-7"><a href="DApps-pametne-pogodbe.html#cb787-7" tabindex="-1"></a>  <span class="fu">mapping</span>(address <span class="kw">=&gt;</span> uint256) <span class="kw">public</span> coinBalance<span class="op">;</span></span>
<span id="cb787-8"><a href="DApps-pametne-pogodbe.html#cb787-8" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb787-9"><a href="DApps-pametne-pogodbe.html#cb787-9" tabindex="-1"></a>  <span class="fu">constructor</span>(uint256 _initialSupply) <span class="fu">Ownable</span>() {</span>
<span id="cb787-10"><a href="DApps-pametne-pogodbe.html#cb787-10" tabindex="-1"></a>    owner <span class="op">=</span> msg<span class="op">.</span><span class="at">sender</span><span class="op">;</span></span>
<span id="cb787-11"><a href="DApps-pametne-pogodbe.html#cb787-11" tabindex="-1"></a>    <span class="fu">mint</span>(owner<span class="op">,</span> _initialSupply)<span class="op">;</span></span>
<span id="cb787-12"><a href="DApps-pametne-pogodbe.html#cb787-12" tabindex="-1"></a>  }</span>
<span id="cb787-13"><a href="DApps-pametne-pogodbe.html#cb787-13" tabindex="-1"></a>  modifier <span class="fu">onlyOwner</span>() {</span>
<span id="cb787-14"><a href="DApps-pametne-pogodbe.html#cb787-14" tabindex="-1"></a>    <span class="pp">require</span>(msg<span class="op">.</span><span class="at">sender</span> <span class="op">==</span> owner)<span class="op">;</span></span>
<span id="cb787-15"><a href="DApps-pametne-pogodbe.html#cb787-15" tabindex="-1"></a>    _<span class="op">;</span></span>
<span id="cb787-16"><a href="DApps-pametne-pogodbe.html#cb787-16" tabindex="-1"></a>  }</span>
<span id="cb787-17"><a href="DApps-pametne-pogodbe.html#cb787-17" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb787-18"><a href="DApps-pametne-pogodbe.html#cb787-18" tabindex="-1"></a>}</span></code></pre></div>
<p><code>SimpleCrowdsale.sol</code></p>
<div class="sourceCode" id="cb788"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb788-1"><a href="DApps-pametne-pogodbe.html#cb788-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb788-2"><a href="DApps-pametne-pogodbe.html#cb788-2" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.23</span><span class="op">;</span></span>
<span id="cb788-3"><a href="DApps-pametne-pogodbe.html#cb788-3" tabindex="-1"></a><span class="im">import</span> <span class="st">&quot;./Ownable.sol&quot;</span><span class="op">;</span></span>
<span id="cb788-4"><a href="DApps-pametne-pogodbe.html#cb788-4" tabindex="-1"></a><span class="im">import</span> <span class="st">&quot;./ReleasableSimpleCoin.sol&quot;</span><span class="op">;</span></span>
<span id="cb788-5"><a href="DApps-pametne-pogodbe.html#cb788-5" tabindex="-1"></a></span>
<span id="cb788-6"><a href="DApps-pametne-pogodbe.html#cb788-6" tabindex="-1"></a>contract SimpleCrowdsale is Ownable {</span>
<span id="cb788-7"><a href="DApps-pametne-pogodbe.html#cb788-7" tabindex="-1"></a>  address <span class="kw">private</span> owner<span class="op">;</span></span>
<span id="cb788-8"><a href="DApps-pametne-pogodbe.html#cb788-8" tabindex="-1"></a>  uint256 <span class="kw">public</span> startTime<span class="op">;</span></span>
<span id="cb788-9"><a href="DApps-pametne-pogodbe.html#cb788-9" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb788-10"><a href="DApps-pametne-pogodbe.html#cb788-10" tabindex="-1"></a>  <span class="fu">constructor</span>(</span>
<span id="cb788-11"><a href="DApps-pametne-pogodbe.html#cb788-11" tabindex="-1"></a>    uint256 _startTime<span class="op">,</span></span>
<span id="cb788-12"><a href="DApps-pametne-pogodbe.html#cb788-12" tabindex="-1"></a>    uint256 _endTime<span class="op">,</span></span>
<span id="cb788-13"><a href="DApps-pametne-pogodbe.html#cb788-13" tabindex="-1"></a>    uint256 _weiTokenPrice<span class="op">,</span></span>
<span id="cb788-14"><a href="DApps-pametne-pogodbe.html#cb788-14" tabindex="-1"></a>    uint256 _etherInvestmentObjective</span>
<span id="cb788-15"><a href="DApps-pametne-pogodbe.html#cb788-15" tabindex="-1"></a>  ) <span class="fu">Ownable</span>() {</span>
<span id="cb788-16"><a href="DApps-pametne-pogodbe.html#cb788-16" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb788-17"><a href="DApps-pametne-pogodbe.html#cb788-17" tabindex="-1"></a>    owner <span class="op">=</span> msg<span class="op">.</span><span class="at">sender</span><span class="op">;</span></span>
<span id="cb788-18"><a href="DApps-pametne-pogodbe.html#cb788-18" tabindex="-1"></a>  }</span>
<span id="cb788-19"><a href="DApps-pametne-pogodbe.html#cb788-19" tabindex="-1"></a>  modifier <span class="fu">onlyOwner</span>() {</span>
<span id="cb788-20"><a href="DApps-pametne-pogodbe.html#cb788-20" tabindex="-1"></a>    <span class="pp">require</span>(msg<span class="op">.</span><span class="at">sender</span> <span class="op">==</span> owner)<span class="op">;</span></span>
<span id="cb788-21"><a href="DApps-pametne-pogodbe.html#cb788-21" tabindex="-1"></a>    _<span class="op">;</span></span>
<span id="cb788-22"><a href="DApps-pametne-pogodbe.html#cb788-22" tabindex="-1"></a>  }</span>
<span id="cb788-23"><a href="DApps-pametne-pogodbe.html#cb788-23" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb788-24"><a href="DApps-pametne-pogodbe.html#cb788-24" tabindex="-1"></a>}</span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#odprava-podvajanja-kode-z-dedovanjem code.javascript:eq(0)").markRegExp(/.+/, options_dodaj);
    $("#odprava-podvajanja-kode-z-dedovanjem code.javascript:eq(1)").markRegExp(/import.+/, options_dodaj);
    $("#odprava-podvajanja-kode-z-dedovanjem code.javascript:eq(1)").markRegExp(/ is \w+/, options_dodaj);
    $("#odprava-podvajanja-kode-z-dedovanjem code.javascript:eq(1)").markRegExp(/ Ownable\(\)/, options_dodaj);
    $("#odprava-podvajanja-kode-z-dedovanjem code.javascript:eq(1)").markRegExp(/.+?private.+/, options_izbrisi);
    $("#odprava-podvajanja-kode-z-dedovanjem code.javascript:eq(1)").markRegExp(/.+?msg\.sender.+/, options_izbrisi);
    $("#odprava-podvajanja-kode-z-dedovanjem code.javascript:eq(1)").markRegExp(/\s+?modifier[\s\S]+?}/, options_izbrisi);
    $("#odprava-podvajanja-kode-z-dedovanjem code.javascript:eq(2)").markRegExp(/import "\.\/Ownable.+/, options_dodaj);
    $("#odprava-podvajanja-kode-z-dedovanjem code.javascript:eq(2)").markRegExp(/ is \w+/, options_dodaj);
    $("#odprava-podvajanja-kode-z-dedovanjem code.javascript:eq(2)").markRegExp(/ Ownable\(\)/, options_dodaj);
    $("#odprava-podvajanja-kode-z-dedovanjem code.javascript:eq(2)").markRegExp(/.+?private.+/, options_izbrisi);
    $("#odprava-podvajanja-kode-z-dedovanjem code.javascript:eq(2)").markRegExp(/.+?msg\.sender.+/, options_izbrisi);
    $("#odprava-podvajanja-kode-z-dedovanjem code.javascript:eq(2)").markRegExp(/\s+?modifier[\s\S]+?}/, options_izbrisi);
  });
</script>
</div>
</div>
<div id="testiranje-množične-prodaje" class="section level3 hasAnchor" number="11.5.4">
<h3><span class="header-section-number">11.5.4</span> Testiranje množične prodaje<a href="DApps-pametne-pogodbe.html#testiranje-množične-prodaje" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sedaj bi želeli funkcionalnost razvite funkcionalnosti množične prodaje tudi preveriti, in sicer bomo poleg osnovne pogodbe <code>SimpleCrowdsale</code> potrebovali še vse odvisne pogodbe <code>SimpleCoin</code>, <code>ReleasableSimpleCoin</code> in <code>Ownable</code>.</p>
<p>Zaradi lažjega testiranja bomo tudi nekoliko spremenili pogodbo <code>SimpleCrowdsale</code>, in sicer bomo odstranili preverjanja ali je postopek prodaje že zaključen.</p>
<p><code>SimpleCrowdsale.sol</code></p>
<div class="sourceCode" id="cb789"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb789-1"><a href="DApps-pametne-pogodbe.html#cb789-1" tabindex="-1"></a>contract SimpleCrowdsale is Ownable {</span>
<span id="cb789-2"><a href="DApps-pametne-pogodbe.html#cb789-2" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb789-3"><a href="DApps-pametne-pogodbe.html#cb789-3" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">isValidInvestment</span>(uint256 _investment) internal view <span class="fu">returns</span> (bool) {</span>
<span id="cb789-4"><a href="DApps-pametne-pogodbe.html#cb789-4" tabindex="-1"></a>    bool nonZeroInvestment <span class="op">=</span> _investment <span class="op">!=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb789-5"><a href="DApps-pametne-pogodbe.html#cb789-5" tabindex="-1"></a>    bool withinCrowdsalePeriod <span class="op">=</span> <span class="kw">true</span> <span class="op">||</span> block<span class="op">.</span><span class="at">timestamp</span> <span class="op">&gt;=</span> startTime <span class="op">&amp;&amp;</span></span>
<span id="cb789-6"><a href="DApps-pametne-pogodbe.html#cb789-6" tabindex="-1"></a>      block<span class="op">.</span><span class="at">timestamp</span> <span class="op">&lt;=</span> endTime<span class="op">;</span></span>
<span id="cb789-7"><a href="DApps-pametne-pogodbe.html#cb789-7" tabindex="-1"></a>    <span class="cf">return</span> nonZeroInvestment <span class="op">&amp;&amp;</span> withinCrowdsalePeriod<span class="op">;</span></span>
<span id="cb789-8"><a href="DApps-pametne-pogodbe.html#cb789-8" tabindex="-1"></a>  }</span>
<span id="cb789-9"><a href="DApps-pametne-pogodbe.html#cb789-9" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb789-10"><a href="DApps-pametne-pogodbe.html#cb789-10" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">calculateNumberOfTokens</span>(uint256 _investment)</span>
<span id="cb789-11"><a href="DApps-pametne-pogodbe.html#cb789-11" tabindex="-1"></a>    internal</span>
<span id="cb789-12"><a href="DApps-pametne-pogodbe.html#cb789-12" tabindex="-1"></a>    view</span>
<span id="cb789-13"><a href="DApps-pametne-pogodbe.html#cb789-13" tabindex="-1"></a>    <span class="fu">returns</span> (uint256)</span>
<span id="cb789-14"><a href="DApps-pametne-pogodbe.html#cb789-14" tabindex="-1"></a>  {</span>
<span id="cb789-15"><a href="DApps-pametne-pogodbe.html#cb789-15" tabindex="-1"></a>    <span class="cf">return</span> _investment <span class="op">/</span> weiTokenPrice<span class="op">;</span></span>
<span id="cb789-16"><a href="DApps-pametne-pogodbe.html#cb789-16" tabindex="-1"></a>  }</span>
<span id="cb789-17"><a href="DApps-pametne-pogodbe.html#cb789-17" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">finalize</span>() <span class="kw">public</span> onlyOwner {</span>
<span id="cb789-18"><a href="DApps-pametne-pogodbe.html#cb789-18" tabindex="-1"></a>    <span class="cf">if</span> (isFinalized) <span class="fu">revert</span>()<span class="op">;</span></span>
<span id="cb789-19"><a href="DApps-pametne-pogodbe.html#cb789-19" tabindex="-1"></a>    bool isCrowdsaleComplete <span class="op">=</span> <span class="kw">true</span> <span class="op">||</span> block<span class="op">.</span><span class="at">timestamp</span> <span class="op">&gt;</span> endTime<span class="op">;</span></span>
<span id="cb789-20"><a href="DApps-pametne-pogodbe.html#cb789-20" tabindex="-1"></a>    bool investmentObjectiveMet <span class="op">=</span> investmentReceived <span class="op">&gt;=</span> weiInvestmentObjective<span class="op">;</span></span>
<span id="cb789-21"><a href="DApps-pametne-pogodbe.html#cb789-21" tabindex="-1"></a>    <span class="cf">if</span> (isCrowdsaleComplete) {</span>
<span id="cb789-22"><a href="DApps-pametne-pogodbe.html#cb789-22" tabindex="-1"></a>      <span class="cf">if</span> (investmentObjectiveMet) crowdsaleToken<span class="op">.</span><span class="fu">release</span>()<span class="op">;</span></span>
<span id="cb789-23"><a href="DApps-pametne-pogodbe.html#cb789-23" tabindex="-1"></a>      <span class="cf">else</span> isRefundingAllowed <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb789-24"><a href="DApps-pametne-pogodbe.html#cb789-24" tabindex="-1"></a>      isFinalized <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb789-25"><a href="DApps-pametne-pogodbe.html#cb789-25" tabindex="-1"></a>    }</span>
<span id="cb789-26"><a href="DApps-pametne-pogodbe.html#cb789-26" tabindex="-1"></a>  }</span>
<span id="cb789-27"><a href="DApps-pametne-pogodbe.html#cb789-27" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb789-28"><a href="DApps-pametne-pogodbe.html#cb789-28" tabindex="-1"></a>}</span></code></pre></div>
<p>Pri testiranju množične prodaje bomo simulirali enostaven scenarij, kjer različni uporabniki vložijo del sredstev v množično prodajo in sledimo naslednjim korakom:</p>
<ol style="list-style-type: decimal">
<li><p>V spletnem razvojnem okolju <a href="https://remix.ethereum.org/"><i class="fa-brands fa-ethereum"></i><strong>Remix</strong></a> najprej izberemo pogodbo <code>SimpleCrowdsale.sol</code> in jo prevedemo (v orodni vrstici na levi strani izberemo možnost <i class="fa-brands fa-ethereum"></i><strong>Solidity compiler</strong> in potrdimo s klikom na gumb <i class="fa-solid fa-rotate"></i><strong>Compile SimpleCrowdsale.sol</strong>).</p></li>
<li><p>Ko je pogodba prevedena, v orodni vrstici na levi strani izberemo možnost <i class="fa-brands fa-ethereum"></i><strong>Deploy &amp; run transactions</strong> ter najprej zahtevamo postavitev pogodbe na testni navidezni stroj <code>JavaScript VM (Shanghai)</code>.</p>
<ul>
<li>Pri tem izberemo privzeto izbran 1. račun (<code>0x5B38Da6a701c568545dCfcB03FcB875f56beddC4</code>) in pogodbo <code>SimpleCrowdsale - contracts/SimpleCrowdsale.sol</code>.</li>
<li>Za parametre konstruktorja pogodbe vnesemo naslednje vrednosti:
<ul>
<li><code>_startTime</code>: <strong><code>4132184400</code></strong> (tj. čas <code>29. 11. 2100 6:00</code>, pretvorjen v obliko <a href="https://www.unixtimestamp.com/"><i class="fa-solid fa-earth-europe"></i>Unix Epoch</a>),</li>
<li><code>_endTime</code>: <strong><code>4132357200</code></strong> (tj. čas <code>13. 12. 2100 6:00</code>, pretvorjen v obliko <a href="https://www.unixtimestamp.com/"><i class="fa-solid fa-earth-europe"></i>Unix Epoch</a>),</li>
<li><code>_weiTokenPrice</code>: <strong><code>2000000000000000</code></strong> (tj. <span class="math inline">\(2\)</span> Miliether oz. <span class="math inline">\(2\times10^{15}\)</span> Wei),</li>
<li><code>_etherInvestmentObjective</code>: <strong><code>15000</code></strong> (tj. <span class="math inline">\(15\)</span> kEther)</li>
</ul></li>
<li>Postavitev potrdimo s klikom na gumb <strong>transact</strong>.</li>
</ul></li>
<li><p>Ko je pogodba postavljena v testno omrežje, lahko začnemo s simulacijo, tako da iz seznama <strong>Deployed Contracts</strong> izberemo našo pogodbo.</p></li>
<li><p>Izberemo zadnji račun na seznamu (<code>0xdD870fA1b7C4700F2BD7f44238821C26f7392148</code>) in v projekt vložimo <span class="math inline">\(20\)</span> Ethrov.</p>
<ul>
<li>Na začetku je na računu <span class="math inline">\(100\)</span> Ethrov.</li>
<li>Vrednost <strong>value</strong> nastavimo na <strong><code>20</code></strong> in enoto spremenimo na <strong><code>Ether</code></strong>.</li>
<li>V okviru postavljene pogodbe potrdimo prenos s klikom na gumb <strong>invest</strong>.</li>
<li>Ko se transakcija uspešno izvede, se stanje na računu iz začetnih <code>100</code> Ethrov zniža na <code>99,99999999999876049</code> Ethra, kar predstavlja zmanjšanje za <code>20</code> Ethrov in še dodaten strošek transakcije.</li>
</ul></li>
<li><p>Podobno v projekt vložimo še iz dodatnih dveh računov:</p>
<ul>
<li>Iz predzadnjega računa na seznamu (<code>0x583031D1113aD414F02576BD6afaBfb302140225</code>) v projekt vložimo <code>30</code> Ethrov.</li>
<li>Iz predpredzadnjega računa na seznamu (<code>0x4B0897b0513fdC7C541B6d9D7E929C4e5364D2dB</code>) v projekt vložimo <code>40</code> Ethrov.</li>
</ul></li>
<li><p>V okviru pogodbe s klikom na <strong>investmentReceived</strong> preverimo stanje istoimenske spremenljivke, ki ima vrednost nastavljeno na <span class="math inline">\(90 \times 10^{18}\)</span> Wei oz. <code>90</code> Ethrov, kar je dejanska skupna vrednost (<code>20 + 30 + 40</code>) vseh treh vložkov.</p>
<p>Čeprav so vlagatelji na tej točki že prejeli žetone, ki ustrezajo količini prispevanega Ethra, jih še ne morejo prenesti, saj lastnik še ni zaključil množične prodaje.</p>
<p>Če želimo preveriti stanje, moramo najprej pridobiti naslov, na katerem je postavljena pametna pogodba žetona množične prodaje, in sicer primerek pogodbe <code>ReleasableSimpleCoin</code>.</p></li>
<li><p>Pri izbrani pogodbi <code>SimpleCrowdsale</code> s klikom na gumb <strong>crowdsaleToken</strong> zahtevamo prikaz naslova pametne pogodbe, kjer so shranjeni žetoni in jo shranimo (npr. <code>0x5C9eb5D6a6C2c1B3EFc52255C0b356f116f6f66D</code>).</p></li>
<li><p>Nato zahtevamo dostop do te pogodbe tako, da iz izbirnega menija izberemo pogodbo <code>ReleasableSimpleCoin - contracts/ReleasableSimpleCoin.sol</code> in v polje poleg gumba <strong>At Address</strong> vnesemo naslov pogodbe od prej ter kliknemo na gumb.</p></li>
<li><p>Na seznamu postavljenih pogodb se nam pojavi pogodba, ki predstavlja žetone množične prodaje.</p></li>
<li><p>Sedaj vnesemo naslove naših treh vlagateljev iz 4. in 5. koraka ter njihove naslove vnesemo poleg gumba <strong>coinBalance</strong> in nanj kliknemo. S tem pridobimo stanje žetonov množične prodaje vseh vlagateljev, kar prikazuje tabela <a href="DApps-pametne-pogodbe.html#tab:tabela-Stanje-zetonov">11.6</a>.</p>
<table class="tabela-manjsa table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<p><span id="tab:tabela-Stanje-zetonov">Tabela 11.6: </span>Število žetonov, dodeljenih posameznemu vlagatelju, kjer je ob vplačilu <code>1</code> žeton vreden <code>2</code> Miliethra, kar je bila naša konfiguracija ob vzpostavitvi pametne pogodbe množične prodaje.</p>
</caption>
<thead>
<tr>
<th style="text-align:left;">
<p>Račun vlagatelja</p>
</th>
<th style="text-align:right;">
<p>Število žetonov</p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<p><code>0xdD870fA1b7C4700F2BD7f44238821C26f7392148</code></p>
</td>
<td style="text-align:right;">
<p><span class="math inline">\(10.000\)</span></p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p><code>0x583031D1113aD414F02576BD6afaBfb302140225</code></p>
</td>
<td style="text-align:right;">
<p><span class="math inline">\(15.000\)</span></p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p><code>0x4B0897b0513fdC7C541B6d9D7E929C4e5364D2dB</code></p>
</td>
<td style="text-align:right;">
<p><span class="math inline">\(20.000\)</span></p>
</td>
</tr>
</tbody>
</table>
<p>Kot smo omenili, so žetoni na voljo, vendar lastniki z njimi še ne morejo razpolagati, saj množična prodaja še ni zaključena. Poskusimo vseeno izvesti takšen prenos, da preverimo delovanje.</p></li>
<li><p>Iz seznama računov izberemo zadnji račun (tj. <code>0xdD870fA1b7C4700F2BD7f44238821C26f7392148</code>) in izberemo postavljeno pogodbo <code>ReleseableSimpleCoin</code> ter pri metodi <strong>transfer</strong> nastavimo parametra <code>_to</code> na predzadnji račun (tj. <code>0x583031D1113aD414F02576BD6afaBfb302140225</code>) in <code>_amount</code> na <code>1000</code>. Opazimo lahko, da transakcija ni bila uspešna, kar je pravilno, saj je vrednost spremenljivke stanja <strong>released</strong> nastavljena na <code>false</code>.</p></li>
<li><p>Sedaj poskrbimo, da je množična prodaja zaključena, tako da pri pametni pogodbi <code>SimpleCrowdsale</code> izberemo metodo <strong>finalize</strong>, kjer imamo izbran 1. račun (tj. <code>0x5B38Da6a701c568545dCfcB03FcB875f56beddC4</code>), ki je lastnik pogodbe.</p></li>
<li><p>Ker v našem testnem scenariju množična prodaja ni bila uspešna, saj smo zbrali zgolj <code>90</code> Ethra, medtem ko smo za spodnjo mejo zahtevali vsaj <code>15.000</code> Ethra, je množična prodaja neuspešna in vlagateljem omogočamo vrnitev začnetnega vložka.</p></li>
<li><p>Izberemo zadnji račun (tj. <code>0xdD870fA1b7C4700F2BD7f44238821C26f7392148</code>) in s klikom na gumb <strong>refund</strong> na postavljeni pametni pogodbi <code>SimpleCrowdsale</code> zahtevamo vračilo vloženih sredstev na račun.</p>
<ul>
<li>Opazimo lahko, da se je sedaj stanje na tem računu povečalo za <code>20</code> Ethra (toliko kot smo prvotno vložili), stanje pa je zmanjšano za plačilo stroškov transakcije.</li>
</ul></li>
</ol>
<script>
  $(document).ready(function() {
    $("#testiranje-množične-prodaje code.javascript:eq(0)").markRegExp(/true \|\| /, options_dodaj);
  });
</script>
</div>
<div id="večkratno-dedovanje" class="section level3 hasAnchor" number="11.5.5">
<h3><span class="header-section-number">11.5.5</span> Večkratno dedovanje<a href="DApps-pametne-pogodbe.html#večkratno-dedovanje" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Ko pametno pogodbo enkrat namestimo na Ethereum omrežje, je bolj malo verjetnosti, da jo bomo redno spreminjali. Lahko pa pride do odkritja kakšne nove varnostne napake, ki bi lahko povzročila izgubo Ethra. Ravno za takšne scenarije je smiselno, da v pametno pogodbo <strong>vključimo varnostne mehanizme</strong>, ki nam omogočajo, da <strong>začasno ustavimo delovanje pametne pogodbe</strong>. To stanje lahko potem razrešimo na več načinov, in sicer se lahko lastnik odloči, da pogodbo ponovno aktivira; se le-ta samouniči, kar npr. povzroči prenos Ethra iz pogodbe na varen račun ipd.</p>
<p>Za ta namen bomo pripravili novo pametno pogodbo <code>Pausable</code>, ki nadgrajuje pogodbo <code>Ownable</code>.</p>
<p><code>Pausable.sol</code></p>
<div class="sourceCode" id="cb790"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb790-1"><a href="DApps-pametne-pogodbe.html#cb790-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb790-2"><a href="DApps-pametne-pogodbe.html#cb790-2" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.23</span><span class="op">;</span></span>
<span id="cb790-3"><a href="DApps-pametne-pogodbe.html#cb790-3" tabindex="-1"></a><span class="im">import</span> <span class="st">&quot;./Ownable.sol&quot;</span><span class="op">;</span></span>
<span id="cb790-4"><a href="DApps-pametne-pogodbe.html#cb790-4" tabindex="-1"></a></span>
<span id="cb790-5"><a href="DApps-pametne-pogodbe.html#cb790-5" tabindex="-1"></a>contract Pausable is Ownable {</span>
<span id="cb790-6"><a href="DApps-pametne-pogodbe.html#cb790-6" tabindex="-1"></a>  bool <span class="kw">public</span> paused <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb790-7"><a href="DApps-pametne-pogodbe.html#cb790-7" tabindex="-1"></a>  modifier <span class="fu">whenNotPaused</span>() {</span>
<span id="cb790-8"><a href="DApps-pametne-pogodbe.html#cb790-8" tabindex="-1"></a>    <span class="pp">require</span>(<span class="op">!</span>paused)<span class="op">;</span></span>
<span id="cb790-9"><a href="DApps-pametne-pogodbe.html#cb790-9" tabindex="-1"></a>    _<span class="op">;</span></span>
<span id="cb790-10"><a href="DApps-pametne-pogodbe.html#cb790-10" tabindex="-1"></a>  }</span>
<span id="cb790-11"><a href="DApps-pametne-pogodbe.html#cb790-11" tabindex="-1"></a>  modifier <span class="fu">whenPaused</span>() {</span>
<span id="cb790-12"><a href="DApps-pametne-pogodbe.html#cb790-12" tabindex="-1"></a>    <span class="pp">require</span>(paused)<span class="op">;</span></span>
<span id="cb790-13"><a href="DApps-pametne-pogodbe.html#cb790-13" tabindex="-1"></a>    _<span class="op">;</span></span>
<span id="cb790-14"><a href="DApps-pametne-pogodbe.html#cb790-14" tabindex="-1"></a>  }</span>
<span id="cb790-15"><a href="DApps-pametne-pogodbe.html#cb790-15" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">pause</span>() <span class="kw">public</span> onlyOwner whenNotPaused {</span>
<span id="cb790-16"><a href="DApps-pametne-pogodbe.html#cb790-16" tabindex="-1"></a>    paused <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb790-17"><a href="DApps-pametne-pogodbe.html#cb790-17" tabindex="-1"></a>  }</span>
<span id="cb790-18"><a href="DApps-pametne-pogodbe.html#cb790-18" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">unpause</span>() <span class="kw">public</span> onlyOwner whenPaused {</span>
<span id="cb790-19"><a href="DApps-pametne-pogodbe.html#cb790-19" tabindex="-1"></a>    paused <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb790-20"><a href="DApps-pametne-pogodbe.html#cb790-20" tabindex="-1"></a>  }</span>
<span id="cb790-21"><a href="DApps-pametne-pogodbe.html#cb790-21" tabindex="-1"></a>}</span></code></pre></div>
<p>Če z rešitvijo, ki je zajeta v pogodbi <code>Pausable</code> nismo zadovoljni, lahko v nujnih primerih Ether v okviru pogodbe takoj prenesemo na varen naslov in pogodbo uničimo, tako da zlonamerni napadalci z njo ne morejo več manipulirati. Primer rešitve je pametna pogodba <code>Destructible</code>.</p>
<blockquote>
<p><strong>Opomba</strong>: Uporaba metode <a href="https://www.alchemy.com/overviews/selfdestruct-solidity"><i class="fa-brands fa-ethereum"></i><code>selfdestruct</code></a> je v okviru ekosistema Ethereum označena za odstranitev v prihodnjih verzijah, kot to predvidevata <a href="https://eips.ethereum.org/EIPS/eip-4758"><i class="fa-brands fa-ethereum"></i>EIP-4758</a> in <a href="https://eips.ethereum.org/EIPS/eip-6049"><i class="fa-brands fa-ethereum"></i>EIP-6049</a>.</p>
</blockquote>
<p><code>Destructible.sol</code></p>
<div class="sourceCode" id="cb791"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb791-1"><a href="DApps-pametne-pogodbe.html#cb791-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb791-2"><a href="DApps-pametne-pogodbe.html#cb791-2" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.23</span><span class="op">;</span></span>
<span id="cb791-3"><a href="DApps-pametne-pogodbe.html#cb791-3" tabindex="-1"></a><span class="im">import</span> <span class="st">&quot;./Ownable.sol&quot;</span><span class="op">;</span></span>
<span id="cb791-4"><a href="DApps-pametne-pogodbe.html#cb791-4" tabindex="-1"></a></span>
<span id="cb791-5"><a href="DApps-pametne-pogodbe.html#cb791-5" tabindex="-1"></a>contract Destructible is Ownable {</span>
<span id="cb791-6"><a href="DApps-pametne-pogodbe.html#cb791-6" tabindex="-1"></a>  <span class="fu">constructor</span>() payable {}</span>
<span id="cb791-7"><a href="DApps-pametne-pogodbe.html#cb791-7" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">destroyAndSend</span>(address payable _recipient) <span class="kw">public</span> onlyOwner {</span>
<span id="cb791-8"><a href="DApps-pametne-pogodbe.html#cb791-8" tabindex="-1"></a>    <span class="fu">selfdestruct</span>(_recipient)<span class="op">;</span></span>
<span id="cb791-9"><a href="DApps-pametne-pogodbe.html#cb791-9" tabindex="-1"></a>  }</span>
<span id="cb791-10"><a href="DApps-pametne-pogodbe.html#cb791-10" tabindex="-1"></a>}</span></code></pre></div>
<p>Ti novi funkcionalnosti bomo vključili v obstoječo pogodbo <code>ReleasableSimplecoin</code> in <code>SimpleCrowdsale</code>, kot prikazuje slika <a href="DApps-pametne-pogodbe.html#fig:slika-UML-Prekinjeno-Uniceno-dodano">11.17</a>.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-UML-Prekinjeno-Uniceno-dodano"></span>
<img src="../../plantuml/svg/bL11JiCm4Bpx5HOzvrYfXoe70bofu0KRPqEjkdQqwoXgWR_ZDiGnRa3YvfsPdPqn7xJjWE0ebG5c-Iwah44TtiZrjgcSSII7lVPuYs-t-bmJM5UMSeMRTjqs5v6Z1cbSNAsVxZUFLK21o0qZM9jW8pu5nykphxegV33bGA7rOgyRb4gJCZY-sIEXywSEXQYkaU_ays2XDXXUmDCGoLTzx0nMJjkHd-SeUK63m9UjNBp4" alt="Pogodbi ReleasableSimpleCoin in SimpleCrowdsale imata zdaj dodani funkcionalnosti preko pogodbe Pausable in Destructible, ki razširjata pogodbo Ownable. PlantUML" width="350" />
<p class="caption">
Slika 11.17: Pogodbi <code>ReleasableSimpleCoin</code> in <code>SimpleCrowdsale</code> imata zdaj dodani funkcionalnosti preko pogodbe <code>Pausable</code> in <code>Destructible</code>, ki razširjata pogodbo <code>Ownable</code>. <a href="https://teaching.lavbic.net/plantuml/uml/bL11JiCm4Bpx5HOzvrYfXoe70bofu0KRPqEjkdQqwoXgWR_ZDiGnRa3YvfsPdPqn7xJjWE0ebG5c-Iwah44TtiZrjgcSSII7lVPuYs-t-bmJM5UMSeMRTjqs5v6Z1cbSNAsVxZUFLK21o0qZM9jW8pu5nykphxegV33bGA7rOgyRb4gJCZY-sIEXywSEXQYkaU_ays2XDXXUmDCGoLTzx0nMJjkHd-SeUK63m9UjNBp4vCwXMSCmdS_0ADv1ptF8QKh-C2eVa3trokkeJf5qGoHnYxuhFihOVh7IjoQfabSe3BQ-A9TxYzWXE_OZyJ-2J7v_YbBpsxoPqIzywl45"><small><i class="fa-solid fa-diagram-project"></i>PlantUML</small></a>
</p>
</div>
<p><code>ReleasableSimpleCoin.sol</code></p>
<div class="sourceCode" id="cb792"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb792-1"><a href="DApps-pametne-pogodbe.html#cb792-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb792-2"><a href="DApps-pametne-pogodbe.html#cb792-2" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.17</span><span class="op">;</span></span>
<span id="cb792-3"><a href="DApps-pametne-pogodbe.html#cb792-3" tabindex="-1"></a><span class="im">import</span> <span class="st">&quot;./SimpleCoin.sol&quot;</span><span class="op">;</span></span>
<span id="cb792-4"><a href="DApps-pametne-pogodbe.html#cb792-4" tabindex="-1"></a><span class="im">import</span> <span class="st">&quot;./Pausable.sol&quot;</span><span class="op">;</span></span>
<span id="cb792-5"><a href="DApps-pametne-pogodbe.html#cb792-5" tabindex="-1"></a><span class="im">import</span> <span class="st">&quot;./Destructible.sol&quot;</span><span class="op">;</span></span>
<span id="cb792-6"><a href="DApps-pametne-pogodbe.html#cb792-6" tabindex="-1"></a></span>
<span id="cb792-7"><a href="DApps-pametne-pogodbe.html#cb792-7" tabindex="-1"></a>contract ReleasableSimpleCoin is SimpleCoin<span class="op">,</span> Pausable<span class="op">,</span> Destructible {</span>
<span id="cb792-8"><a href="DApps-pametne-pogodbe.html#cb792-8" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb792-9"><a href="DApps-pametne-pogodbe.html#cb792-9" tabindex="-1"></a>}</span></code></pre></div>
<p><code>SimpleCrowdsale.sol</code></p>
<div class="sourceCode" id="cb793"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb793-1"><a href="DApps-pametne-pogodbe.html#cb793-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb793-2"><a href="DApps-pametne-pogodbe.html#cb793-2" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.17</span><span class="op">;</span></span>
<span id="cb793-3"><a href="DApps-pametne-pogodbe.html#cb793-3" tabindex="-1"></a></span>
<span id="cb793-4"><a href="DApps-pametne-pogodbe.html#cb793-4" tabindex="-1"></a><span class="im">import</span> <span class="st">&quot;./Ownable.sol&quot;</span><span class="op">;</span></span>
<span id="cb793-5"><a href="DApps-pametne-pogodbe.html#cb793-5" tabindex="-1"></a><span class="im">import</span> <span class="st">&quot;./Pausable.sol&quot;</span><span class="op">;</span></span>
<span id="cb793-6"><a href="DApps-pametne-pogodbe.html#cb793-6" tabindex="-1"></a><span class="im">import</span> <span class="st">&quot;./Destructible.sol&quot;</span><span class="op">;</span></span>
<span id="cb793-7"><a href="DApps-pametne-pogodbe.html#cb793-7" tabindex="-1"></a><span class="im">import</span> <span class="st">&quot;./ReleasableSimpleCoin.sol&quot;</span><span class="op">;</span></span>
<span id="cb793-8"><a href="DApps-pametne-pogodbe.html#cb793-8" tabindex="-1"></a></span>
<span id="cb793-9"><a href="DApps-pametne-pogodbe.html#cb793-9" tabindex="-1"></a>contract SimpleCrowdsale is OwnablePausable<span class="op">,</span> Destructible {</span>
<span id="cb793-10"><a href="DApps-pametne-pogodbe.html#cb793-10" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb793-11"><a href="DApps-pametne-pogodbe.html#cb793-11" tabindex="-1"></a>}</span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#večkratno-dedovanje code.javascript:eq(0)").markRegExp(/.+/, options_dodaj);
    $("#večkratno-dedovanje code.javascript:eq(1)").markRegExp(/.+/, options_dodaj);
    $("#večkratno-dedovanje code.javascript:eq(2)").markRegExp(/.+?(Pausable|Destructible)\.sol.+/, options_dodaj);
    $("#večkratno-dedovanje code.javascript:eq(2)").markRegExp(/, (Pausable|Destructible)/, options_dodaj);
    
    $("#večkratno-dedovanje code.javascript:eq(3)").markRegExp(/(Pausable|, Destructible)/, options_dodaj);
    $("#večkratno-dedovanje code.javascript:eq(3)").markRegExp(/.+?(Pausable|Destructible)\.sol.+/, options_dodaj);
    $("#večkratno-dedovanje code.javascript:eq(3)").markRegExp(/Ownable/, options_izbrisi);
    $("#večkratno-dedovanje code.javascript:eq(3)").markRegExp(/.+?Ownable\.sol.+/, options_izbrisi);
  });
</script>
</div>
</div>
<div id="objektno-usmerjene-lastnosti-pametnih-pogodb" class="section level2 hasAnchor" number="11.6">
<h2><span class="header-section-number">11.6</span> Objektno usmerjene lastnosti pametnih pogodb<a href="DApps-pametne-pogodbe.html#objektno-usmerjene-lastnosti-pametnih-pogodb" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Kot pri večini programskih jezikov, lahko tudi v Solidity s pomočjo združevanja in organizacije pogosto uporabljenih funkcij, dosežemo ponovno uporabnost razvite kode. V nadaljevanju si bomo ogledali najbolj pogoste pristope, ki so nam na voljo.</p>
<div id="dedovanje" class="section level3 hasAnchor" number="11.6.1">
<h3><span class="header-section-number">11.6.1</span> Dedovanje<a href="DApps-pametne-pogodbe.html#dedovanje" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Solidity podpira <a href="https://solidity-by-example.org/inheritance/"><i class="fa-brands fa-ethereum"></i><strong>večkratno dedovanje</strong></a>, zato lahko izpeljana pogodba podeduje spremenljivke stanja in funkcije iz ene ali več pogodb, kot prikazuje naslednji primer.</p>
<p>Pametna pogodba <code>Child</code> podeduje spremenljivke stanj <code>stateVar1</code>, <code>stateVar2</code>, <code>stateVarA</code> in <code>stateVarB</code> ter funkcije <code>initialize</code>, <code>operation1</code> in <code>operationA</code>.</p>
<p>Tiste funkcije, za katere dovolimo, da jih pogodbe v prihodnje prilagodijo in dopolnijo delovanje, označimo z <a href="https://docs.soliditylang.org/en/v0.8.17/contracts.html#modifier-overriding"><span class="skupaj"><i class="fa-brands fa-ethereum"></i><code>virtual</code></span></a>.</p>
<p><code>Inheritance.sol</code></p>
<div class="sourceCode" id="cb794"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb794-1"><a href="DApps-pametne-pogodbe.html#cb794-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb794-2"><a href="DApps-pametne-pogodbe.html#cb794-2" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.23</span><span class="op">;</span></span>
<span id="cb794-3"><a href="DApps-pametne-pogodbe.html#cb794-3" tabindex="-1"></a></span>
<span id="cb794-4"><a href="DApps-pametne-pogodbe.html#cb794-4" tabindex="-1"></a>contract Parent1 {</span>
<span id="cb794-5"><a href="DApps-pametne-pogodbe.html#cb794-5" tabindex="-1"></a>  int256 <span class="kw">public</span> stateVar1<span class="op">;</span></span>
<span id="cb794-6"><a href="DApps-pametne-pogodbe.html#cb794-6" tabindex="-1"></a>  bool <span class="kw">public</span> stateVar2<span class="op">;</span></span>
<span id="cb794-7"><a href="DApps-pametne-pogodbe.html#cb794-7" tabindex="-1"></a>  <span class="fu">constructor</span>(int256 param1<span class="op">,</span> bool param2) {}</span>
<span id="cb794-8"><a href="DApps-pametne-pogodbe.html#cb794-8" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">initialize</span>() <span class="kw">public</span> virtual {}</span>
<span id="cb794-9"><a href="DApps-pametne-pogodbe.html#cb794-9" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">operation1</span>(int256 opParam1) <span class="kw">public</span> <span class="fu">returns</span> (int256) {}</span>
<span id="cb794-10"><a href="DApps-pametne-pogodbe.html#cb794-10" tabindex="-1"></a>}</span>
<span id="cb794-11"><a href="DApps-pametne-pogodbe.html#cb794-11" tabindex="-1"></a></span>
<span id="cb794-12"><a href="DApps-pametne-pogodbe.html#cb794-12" tabindex="-1"></a>contract ParentA {</span>
<span id="cb794-13"><a href="DApps-pametne-pogodbe.html#cb794-13" tabindex="-1"></a>  int256 <span class="kw">public</span> stateVarA<span class="op">;</span></span>
<span id="cb794-14"><a href="DApps-pametne-pogodbe.html#cb794-14" tabindex="-1"></a>  int16 <span class="kw">public</span> stateVarB<span class="op">;</span></span>
<span id="cb794-15"><a href="DApps-pametne-pogodbe.html#cb794-15" tabindex="-1"></a>  <span class="fu">constructor</span>(int256 paramA<span class="op">,</span> int16 paramB) {}</span>
<span id="cb794-16"><a href="DApps-pametne-pogodbe.html#cb794-16" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">initialize</span>() <span class="kw">public</span> virtual {}</span>
<span id="cb794-17"><a href="DApps-pametne-pogodbe.html#cb794-17" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">operationA</span>(bool opParamA) <span class="kw">public</span> virtual {}</span>
<span id="cb794-18"><a href="DApps-pametne-pogodbe.html#cb794-18" tabindex="-1"></a>}</span>
<span id="cb794-19"><a href="DApps-pametne-pogodbe.html#cb794-19" tabindex="-1"></a></span>
<span id="cb794-20"><a href="DApps-pametne-pogodbe.html#cb794-20" tabindex="-1"></a>contract Child is Parent1<span class="op">,</span> ParentA {}</span></code></pre></div>
<p><strong>Konstruktor</strong> izpeljane podrejene pogodbe <code>Child</code> mora poklicati vse nadrejene konstruktorje (v vrstnem redu, ki ga sami izberemo).</p>
<p><strong>Preglasitev funkcij</strong> v podrejeni pogodbi (npr. <code>operationA</code>) označimo z <a href="https://docs.soliditylang.org/en/v0.8.17/contracts.html#inheritance"><i class="fa-brands fa-ethereum"></i><code>override</code></a>, kjer lahko v telesu funkcije potem neposredno pokličemo odvisno funkcijo in dopolnimo njeno delovanje. V nekaterih primerih želimo poklicati vse izpeljane funkcije (npr. <code>inicializacija</code>), kar lahko dosežemo z uporabo <a href="https://docs.soliditylang.org/en/v0.8.17/contracts.html#inheritance"><i class="fa-brands fa-ethereum"></i><code>super</code></a>.</p>
<p><code>Inheritance.sol</code></p>
<div class="sourceCode" id="cb795"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb795-1"><a href="DApps-pametne-pogodbe.html#cb795-1" tabindex="-1"></a>contract Child is Parent1<span class="op">,</span> ParentA {</span>
<span id="cb795-2"><a href="DApps-pametne-pogodbe.html#cb795-2" tabindex="-1"></a>  <span class="fu">constructor</span>(</span>
<span id="cb795-3"><a href="DApps-pametne-pogodbe.html#cb795-3" tabindex="-1"></a>    int256 p1<span class="op">,</span></span>
<span id="cb795-4"><a href="DApps-pametne-pogodbe.html#cb795-4" tabindex="-1"></a>    bool p2<span class="op">,</span></span>
<span id="cb795-5"><a href="DApps-pametne-pogodbe.html#cb795-5" tabindex="-1"></a>    int256 pA<span class="op">,</span></span>
<span id="cb795-6"><a href="DApps-pametne-pogodbe.html#cb795-6" tabindex="-1"></a>    int16 pB</span>
<span id="cb795-7"><a href="DApps-pametne-pogodbe.html#cb795-7" tabindex="-1"></a>  ) <span class="fu">Parent1</span>(p1<span class="op">,</span> p2) <span class="fu">ParentA</span>(pA<span class="op">,</span> pB) {}</span>
<span id="cb795-8"><a href="DApps-pametne-pogodbe.html#cb795-8" tabindex="-1"></a></span>
<span id="cb795-9"><a href="DApps-pametne-pogodbe.html#cb795-9" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">initialize</span>() <span class="kw">public</span> <span class="fu">override</span>(Parent1<span class="op">,</span> ParentA) {</span>
<span id="cb795-10"><a href="DApps-pametne-pogodbe.html#cb795-10" tabindex="-1"></a>    <span class="kw">super</span><span class="op">.</span><span class="fu">initialize</span>()<span class="op">;</span></span>
<span id="cb795-11"><a href="DApps-pametne-pogodbe.html#cb795-11" tabindex="-1"></a>  }</span>
<span id="cb795-12"><a href="DApps-pametne-pogodbe.html#cb795-12" tabindex="-1"></a></span>
<span id="cb795-13"><a href="DApps-pametne-pogodbe.html#cb795-13" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">operationA</span>(bool opParamA) <span class="kw">public</span> override {</span>
<span id="cb795-14"><a href="DApps-pametne-pogodbe.html#cb795-14" tabindex="-1"></a>    ParentA<span class="op">.</span><span class="fu">operationA</span>(opParamA)<span class="op">;</span></span>
<span id="cb795-15"><a href="DApps-pametne-pogodbe.html#cb795-15" tabindex="-1"></a>  }</span>
<span id="cb795-16"><a href="DApps-pametne-pogodbe.html#cb795-16" tabindex="-1"></a>}</span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#dedovanje code.javascript:eq(0)").markRegExp(/ is \w+?, \w+/, options_dodaj);
    $("#dedovanje code.javascript:eq(0)").markRegExp(/ virtual/, options_dodaj);
    $("#dedovanje code.javascript:eq(1)").markRegExp(/ Parent.\(.+?, .+?\)/, options_dodaj);
    $("#dedovanje code.javascript:eq(1)").markRegExp(/ override/, options_dodaj);
    $("#dedovanje code.javascript:eq(1)").markRegExp(/ParentA\.operation.+/, options_dodaj);
    $("#dedovanje code.javascript:eq(1)").markRegExp(/override\(.+?\) /, options_dodaj);
    $("#dedovanje code.javascript:eq(1)").markRegExp(/super.+/, options_dodaj);
  });
</script>
</div>
<div id="abstraktne-pogodbe" class="section level3 hasAnchor" number="11.6.2">
<h3><span class="header-section-number">11.6.2</span> Abstraktne pogodbe<a href="DApps-pametne-pogodbe.html#abstraktne-pogodbe" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><a href="https://docs.soliditylang.org/en/v0.8.17/contracts.html#abstract-contracts"><i class="fa-brands fa-ethereum"></i><strong>Pogodba</strong> je <strong>abstraktna</strong></a> in ne konkretna, če je vsaj ena od njenih funkcij abstraktna. To pomeni, da je funkcija opredeljena, vendar ni implementirana, kot je to prikazano na primeru <code>operationA</code>. Takšna pogodba mora biti tudi posebej označena z <a href="https://docs.soliditylang.org/en/v0.8.17/contracts.html#abstract-contracts"><i class="fa-brands fa-ethereum"></i><code>abstract</code></a>, medtem ko neimplementirano funkcijo označimo z <a href="https://www.developer.com/languages/inheritance-solidity/"><i class="fa-brands fa-ethereum"></i><code>virtual</code></a>, saj jo bomo morali pri uporabi implementirati.</p>
<p><code>AbstractContract.sol</code></p>
<div class="sourceCode" id="cb796"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb796-1"><a href="DApps-pametne-pogodbe.html#cb796-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb796-2"><a href="DApps-pametne-pogodbe.html#cb796-2" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.23</span><span class="op">;</span></span>
<span id="cb796-3"><a href="DApps-pametne-pogodbe.html#cb796-3" tabindex="-1"></a></span>
<span id="cb796-4"><a href="DApps-pametne-pogodbe.html#cb796-4" tabindex="-1"></a>abstract contract AbstractContract {</span>
<span id="cb796-5"><a href="DApps-pametne-pogodbe.html#cb796-5" tabindex="-1"></a>  int256 <span class="kw">public</span> stateVar<span class="op">;</span></span>
<span id="cb796-6"><a href="DApps-pametne-pogodbe.html#cb796-6" tabindex="-1"></a>  <span class="fu">constructor</span>(int256 param1) {</span>
<span id="cb796-7"><a href="DApps-pametne-pogodbe.html#cb796-7" tabindex="-1"></a>    stateVar <span class="op">=</span> param1<span class="op">;</span></span>
<span id="cb796-8"><a href="DApps-pametne-pogodbe.html#cb796-8" tabindex="-1"></a>  }</span>
<span id="cb796-9"><a href="DApps-pametne-pogodbe.html#cb796-9" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">operation1</span>(int256 opParam1<span class="op">,</span> bool opParam2)</span>
<span id="cb796-10"><a href="DApps-pametne-pogodbe.html#cb796-10" tabindex="-1"></a>    <span class="kw">public</span> pure <span class="fu">returns</span> (int256)</span>
<span id="cb796-11"><a href="DApps-pametne-pogodbe.html#cb796-11" tabindex="-1"></a>  {</span>
<span id="cb796-12"><a href="DApps-pametne-pogodbe.html#cb796-12" tabindex="-1"></a>    <span class="cf">if</span> (opParam2) <span class="cf">return</span> opParam1<span class="op">;</span></span>
<span id="cb796-13"><a href="DApps-pametne-pogodbe.html#cb796-13" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb796-14"><a href="DApps-pametne-pogodbe.html#cb796-14" tabindex="-1"></a>  }</span>
<span id="cb796-15"><a href="DApps-pametne-pogodbe.html#cb796-15" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">operationA</span>(int256 opParamA) <span class="kw">public</span> virtual<span class="op">;</span></span>
<span id="cb796-16"><a href="DApps-pametne-pogodbe.html#cb796-16" tabindex="-1"></a>}</span></code></pre></div>
<blockquote>
<p><strong>Opomba</strong>: Pri opredelitvi funkcije <code>operation1</code> smo uporabili <a href="https://docs.soliditylang.org/en/v0.8.23/contracts.html#pure-functions"><i class="fa-brands fa-ethereum"></i><code>pure</code></a>, kjer se zavežemo, da ne bomo dostopali (tj. branje in pisanje) do spremenljivk stanja.</p>
</blockquote>
<script>
  $(document).ready(function() {
    $("#abstraktne-pogodbe code.javascript:eq(0)").markRegExp(/abstract /, options_dodaj);
    $("#abstraktne-pogodbe code.javascript:eq(0)").markRegExp(/\s+?function operationA.+/, options_dodaj);
  });
</script>
</div>
<div id="vmesniki" class="section level3 hasAnchor" number="11.6.3">
<h3><span class="header-section-number">11.6.3</span> Vmesniki<a href="DApps-pametne-pogodbe.html#vmesniki" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Funkcionalnost vmesnikov pri jeziku Solidity je podobna kot pri ostalih objektno usmerjenih jezikih (npr. Java in C#). <strong>Vmesnik</strong> <em>(angl. <a href="https://docs.soliditylang.org/en/v0.8.17/contracts.html#interfaces"><i class="fa-brands fa-ethereum"></i>Interface</a>)</em> definira množico funkcij in dogodkov, ki jih moramo implementirati v izpeljanih pogodbah, sama implementacija pa v vmesniku ni opredeljena. Vse funkcije, opredeljene v vmesniku, so abstraktne in označene z <a href="https://docs.soliditylang.org/en/v0.8.17/cheatsheet.html#function-visibility-specifiers"><i class="fa-brands fa-ethereum"></i><code>external</code></a>.</p>
<p><code>Interface.sol</code></p>
<div class="sourceCode" id="cb797"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb797-1"><a href="DApps-pametne-pogodbe.html#cb797-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb797-2"><a href="DApps-pametne-pogodbe.html#cb797-2" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.23</span><span class="op">;</span></span>
<span id="cb797-3"><a href="DApps-pametne-pogodbe.html#cb797-3" tabindex="-1"></a></span>
<span id="cb797-4"><a href="DApps-pametne-pogodbe.html#cb797-4" tabindex="-1"></a><span class="kw">interface</span> SampleInterface {</span>
<span id="cb797-5"><a href="DApps-pametne-pogodbe.html#cb797-5" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">operation1</span>(int256 param1<span class="op">,</span> bool param2) external<span class="op">;</span></span>
<span id="cb797-6"><a href="DApps-pametne-pogodbe.html#cb797-6" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">operationA</span>(int16 paramA) external<span class="op">;</span></span>
<span id="cb797-7"><a href="DApps-pametne-pogodbe.html#cb797-7" tabindex="-1"></a>}</span>
<span id="cb797-8"><a href="DApps-pametne-pogodbe.html#cb797-8" tabindex="-1"></a></span>
<span id="cb797-9"><a href="DApps-pametne-pogodbe.html#cb797-9" tabindex="-1"></a>contract SampleContract is SampleInterface {</span>
<span id="cb797-10"><a href="DApps-pametne-pogodbe.html#cb797-10" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">operation1</span>(int256 param1<span class="op">,</span> bool param2) <span class="kw">public</span> {}</span>
<span id="cb797-11"><a href="DApps-pametne-pogodbe.html#cb797-11" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">operationA</span>(int16 paramA) <span class="kw">public</span> {}</span>
<span id="cb797-12"><a href="DApps-pametne-pogodbe.html#cb797-12" tabindex="-1"></a>}</span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#vmesniki code.javascript:eq(0)").markRegExp(/interface /, options_dodaj);
    $("#vmesniki code.javascript:eq(0)").markRegExp(/ external/, options_dodaj);
  });
</script>
</div>
<div id="knjižnice" class="section level3 hasAnchor" number="11.6.4">
<h3><span class="header-section-number">11.6.4</span> Knjižnice<a href="DApps-pametne-pogodbe.html#knjižnice" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Podvajanju kode se lahko izognemo s pripravo dobre hierarhije pogodb, kjer pogodbe na najnižji ravni ponovno uporabijo implementacije funkcij v osnovnih razredih. Še vedno pa obstajajo določene funkcije, ki niso odvisne od problemske domene (npr. manipulacija s podatkovnimi strukturami na nizki ravni) in so uporabne v poljubni pogodbi. V takšnem primeru lahko uporabimo knjižnice.</p>
<p>Primer takšne knjižnice <a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/math/Math.sol"><i class="fa-brands fa-github"></i><code>Math</code></a>, ki je del večje knjižnice <a href="https://openzeppelin.com/"><i class="fa-solid fa-earth-europe"></i><strong>OpenZeppelin</strong></a>, je podan v nadaljevanju.</p>
<p><code>Math.sol</code></p>
<div class="sourceCode" id="cb798"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb798-1"><a href="DApps-pametne-pogodbe.html#cb798-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb798-2"><a href="DApps-pametne-pogodbe.html#cb798-2" tabindex="-1"></a><span class="co">// OpenZeppelin Contracts (last updated v5.0.0) (utils/math/Math.sol)</span></span>
<span id="cb798-3"><a href="DApps-pametne-pogodbe.html#cb798-3" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.20</span><span class="op">;</span></span>
<span id="cb798-4"><a href="DApps-pametne-pogodbe.html#cb798-4" tabindex="-1"></a><span class="op">...</span></span>
<span id="cb798-5"><a href="DApps-pametne-pogodbe.html#cb798-5" tabindex="-1"></a>library <span class="bu">Math</span> {</span>
<span id="cb798-6"><a href="DApps-pametne-pogodbe.html#cb798-6" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb798-7"><a href="DApps-pametne-pogodbe.html#cb798-7" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">tryAdd</span>(uint256 a<span class="op">,</span> uint256 b) internal pure <span class="fu">returns</span> (bool<span class="op">,</span> uint256) {</span>
<span id="cb798-8"><a href="DApps-pametne-pogodbe.html#cb798-8" tabindex="-1"></a>    unchecked {</span>
<span id="cb798-9"><a href="DApps-pametne-pogodbe.html#cb798-9" tabindex="-1"></a>      uint256 c <span class="op">=</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb798-10"><a href="DApps-pametne-pogodbe.html#cb798-10" tabindex="-1"></a>      <span class="cf">if</span> (c <span class="op">&lt;</span> a) <span class="cf">return</span> (<span class="kw">false</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb798-11"><a href="DApps-pametne-pogodbe.html#cb798-11" tabindex="-1"></a>      <span class="cf">return</span> (<span class="kw">true</span><span class="op">,</span> c)<span class="op">;</span></span>
<span id="cb798-12"><a href="DApps-pametne-pogodbe.html#cb798-12" tabindex="-1"></a>    }</span>
<span id="cb798-13"><a href="DApps-pametne-pogodbe.html#cb798-13" tabindex="-1"></a>  }</span>
<span id="cb798-14"><a href="DApps-pametne-pogodbe.html#cb798-14" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">trySub</span>(uint256 a<span class="op">,</span> uint256 b) internal pure <span class="fu">returns</span> (bool<span class="op">,</span> uint256) {</span>
<span id="cb798-15"><a href="DApps-pametne-pogodbe.html#cb798-15" tabindex="-1"></a>    unchecked {</span>
<span id="cb798-16"><a href="DApps-pametne-pogodbe.html#cb798-16" tabindex="-1"></a>      <span class="cf">if</span> (b <span class="op">&gt;</span> a) <span class="cf">return</span> (<span class="kw">false</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb798-17"><a href="DApps-pametne-pogodbe.html#cb798-17" tabindex="-1"></a>      <span class="cf">return</span> (<span class="kw">true</span><span class="op">,</span> a <span class="op">-</span> b)<span class="op">;</span></span>
<span id="cb798-18"><a href="DApps-pametne-pogodbe.html#cb798-18" tabindex="-1"></a>    }</span>
<span id="cb798-19"><a href="DApps-pametne-pogodbe.html#cb798-19" tabindex="-1"></a>  }</span>
<span id="cb798-20"><a href="DApps-pametne-pogodbe.html#cb798-20" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb798-21"><a href="DApps-pametne-pogodbe.html#cb798-21" tabindex="-1"></a>}</span></code></pre></div>
<p>Pri knjižnici moramo upoštevati nekaj omejitev, in sicer:</p>
<ul>
<li>ne more imeti opredeljene spremenljivke stanja,</li>
<li>ne podpira dedovanja,</li>
<li>ne more prejeti Ethra (funkcijam ne moremo dodati oznake <a href="https://docs.soliditylang.org/en/v0.8.23/contracts.html#receive-ether-function"><i class="fa-brands fa-ethereum"></i><code>payable</code></a>).</li>
</ul>
<p>Klic metode iz knjižnice zelo enostavno vključimo v pogodbo, kot to prikazuje naslednji primer:</p>
<p><code>Calculator.sol</code></p>
<div class="sourceCode" id="cb799"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb799-1"><a href="DApps-pametne-pogodbe.html#cb799-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb799-2"><a href="DApps-pametne-pogodbe.html#cb799-2" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.23</span><span class="op">;</span></span>
<span id="cb799-3"><a href="DApps-pametne-pogodbe.html#cb799-3" tabindex="-1"></a><span class="im">import</span> <span class="st">&quot;https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/math/Math.sol&quot;</span><span class="op">;</span></span>
<span id="cb799-4"><a href="DApps-pametne-pogodbe.html#cb799-4" tabindex="-1"></a></span>
<span id="cb799-5"><a href="DApps-pametne-pogodbe.html#cb799-5" tabindex="-1"></a>contract Calculator {</span>
<span id="cb799-6"><a href="DApps-pametne-pogodbe.html#cb799-6" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">add</span>(uint256 a<span class="op">,</span> uint256 b) <span class="kw">public</span> pure <span class="fu">returns</span> (bool<span class="op">,</span> uint256) {</span>
<span id="cb799-7"><a href="DApps-pametne-pogodbe.html#cb799-7" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">tryAdd</span>(a<span class="op">,</span> b)<span class="op">;</span></span>
<span id="cb799-8"><a href="DApps-pametne-pogodbe.html#cb799-8" tabindex="-1"></a>  }</span>
<span id="cb799-9"><a href="DApps-pametne-pogodbe.html#cb799-9" tabindex="-1"></a>}</span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#knjižnice code.javascript:eq(1)").markRegExp(/import.+/, options_dodaj);
    $("#knjižnice code.javascript:eq(1)").markRegExp(/SafeMath\.tryAdd\(a, b\)/, options_dodaj);
  });
</script>
</div>
<div id="skladnost-s-standardom-erc20" class="section level3 hasAnchor" number="11.6.5">
<h3><span class="header-section-number">11.6.5</span> Skladnost s standardom <code>ERC20</code><a href="DApps-pametne-pogodbe.html#skladnost-s-standardom-erc20" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Ker je izdelava pametne pogodbe z lastno kriptovaluto oz. žetonom zelo pogosta zahteva s strani decentraliziranih aplikacij, je bil za te potrebe predlagan standardni vmesnik žetonov. Takšen vmesnik omogoča vsaki pogodbi (npr. naša <code>SimpleCrowdsale</code>) vnaprej določeno interakcijo s pogodbo, ki podpira žetone. Takšen standard se v ekosistemu Ethereum imenuje <a href="https://ethereum.org/en/developers/docs/standards/tokens/erc-20/"><i class="fa-brands fa-ethereum"></i><strong>ERC20</strong></a>, ki temelji na <a href="https://eips.ethereum.org/EIPS/eip-20"><i class="fa-brands fa-ethereum"></i>EIP-20</a>.</p>
<p>Osnovne zahteve standarda ERC20 lahko prikažemo v obliki primera pogodbe v nadaljevanju, ki je na voljo v okviru <a href="https://github.com/OpenZeppelin/openzeppelin-contracts/tree/master/contracts/token/ERC20"><span class="skupaj"><i class="fa-brands fa-ethereum"></i>OpenZeppelin knjižnice</span></a>.</p>
<p><code>ERC20.sol</code></p>
<div class="sourceCode" id="cb800"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb800-1"><a href="DApps-pametne-pogodbe.html#cb800-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb800-2"><a href="DApps-pametne-pogodbe.html#cb800-2" tabindex="-1"></a><span class="co">// OpenZeppelin Contracts (last updated v5.0.0) (token/ERC20/ERC20.sol)</span></span>
<span id="cb800-3"><a href="DApps-pametne-pogodbe.html#cb800-3" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.20</span><span class="op">;</span></span>
<span id="cb800-4"><a href="DApps-pametne-pogodbe.html#cb800-4" tabindex="-1"></a></span>
<span id="cb800-5"><a href="DApps-pametne-pogodbe.html#cb800-5" tabindex="-1"></a><span class="im">import</span> {IERC20} <span class="im">from</span> <span class="st">&quot;./IERC20.sol&quot;</span><span class="op">;</span></span>
<span id="cb800-6"><a href="DApps-pametne-pogodbe.html#cb800-6" tabindex="-1"></a><span class="im">import</span> {IERC20Metadata} <span class="im">from</span> <span class="st">&quot;./extensions/IERC20Metadata.sol&quot;</span><span class="op">;</span></span>
<span id="cb800-7"><a href="DApps-pametne-pogodbe.html#cb800-7" tabindex="-1"></a><span class="im">import</span> {Context} <span class="im">from</span> <span class="st">&quot;../../utils/Context.sol&quot;</span><span class="op">;</span></span>
<span id="cb800-8"><a href="DApps-pametne-pogodbe.html#cb800-8" tabindex="-1"></a><span class="im">import</span> {IERC20Errors} <span class="im">from</span> <span class="st">&quot;../../interfaces/draft-IERC6093.sol&quot;</span><span class="op">;</span></span>
<span id="cb800-9"><a href="DApps-pametne-pogodbe.html#cb800-9" tabindex="-1"></a><span class="op">...</span></span>
<span id="cb800-10"><a href="DApps-pametne-pogodbe.html#cb800-10" tabindex="-1"></a>abstract contract ERC20 is Context<span class="op">,</span> IERC20<span class="op">,</span> IERC20Metadata<span class="op">,</span> IERC20Errors {</span>
<span id="cb800-11"><a href="DApps-pametne-pogodbe.html#cb800-11" tabindex="-1"></a>  <span class="fu">mapping</span>(address account <span class="kw">=&gt;</span> uint256) <span class="kw">private</span> _balances<span class="op">;</span></span>
<span id="cb800-12"><a href="DApps-pametne-pogodbe.html#cb800-12" tabindex="-1"></a>  <span class="fu">mapping</span>(address account <span class="kw">=&gt;</span> <span class="fu">mapping</span>(address spender <span class="kw">=&gt;</span> uint256)) <span class="kw">private</span> _allowances<span class="op">;</span></span>
<span id="cb800-13"><a href="DApps-pametne-pogodbe.html#cb800-13" tabindex="-1"></a>  uint256 <span class="kw">private</span> _totalSupply<span class="op">;</span></span>
<span id="cb800-14"><a href="DApps-pametne-pogodbe.html#cb800-14" tabindex="-1"></a>  string <span class="kw">private</span> _name<span class="op">;</span></span>
<span id="cb800-15"><a href="DApps-pametne-pogodbe.html#cb800-15" tabindex="-1"></a>  string <span class="kw">private</span> _symbol<span class="op">;</span></span>
<span id="cb800-16"><a href="DApps-pametne-pogodbe.html#cb800-16" tabindex="-1"></a>  <span class="fu">constructor</span>(string memory name_<span class="op">,</span> string memory symbol_) { <span class="op">...</span> }</span>
<span id="cb800-17"><a href="DApps-pametne-pogodbe.html#cb800-17" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">name</span>() <span class="kw">public</span> view virtual <span class="fu">returns</span> (string memory) { <span class="op">...</span> }</span>
<span id="cb800-18"><a href="DApps-pametne-pogodbe.html#cb800-18" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">symbol</span>() <span class="kw">public</span> view virtual <span class="fu">returns</span> (string memory) { <span class="op">...</span> }</span>
<span id="cb800-19"><a href="DApps-pametne-pogodbe.html#cb800-19" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">decimals</span>() <span class="kw">public</span> view virtual <span class="fu">returns</span> (uint8) { <span class="op">...</span> }</span>
<span id="cb800-20"><a href="DApps-pametne-pogodbe.html#cb800-20" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">totalSupply</span>() <span class="kw">public</span> view virtual <span class="fu">returns</span> (uint256) { <span class="op">...</span> }</span>
<span id="cb800-21"><a href="DApps-pametne-pogodbe.html#cb800-21" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">balanceOf</span>(address account) <span class="kw">public</span> view virtual <span class="fu">returns</span> (uint256) { <span class="op">...</span> }</span>
<span id="cb800-22"><a href="DApps-pametne-pogodbe.html#cb800-22" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">transfer</span>(address to<span class="op">,</span> uint256 value) <span class="kw">public</span> virtual <span class="fu">returns</span> (bool) { <span class="op">...</span> }</span>
<span id="cb800-23"><a href="DApps-pametne-pogodbe.html#cb800-23" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">allowance</span>(address owner<span class="op">,</span> address spender) <span class="kw">public</span> view virtual <span class="fu">returns</span> (uint256) { <span class="op">...</span> }</span>
<span id="cb800-24"><a href="DApps-pametne-pogodbe.html#cb800-24" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">approve</span>(address spender<span class="op">,</span> uint256 value) <span class="kw">public</span> virtual <span class="fu">returns</span> (bool) { <span class="op">...</span> }</span>
<span id="cb800-25"><a href="DApps-pametne-pogodbe.html#cb800-25" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">transferFrom</span>(address <span class="im">from</span><span class="op">,</span> address to<span class="op">,</span> uint256 value) <span class="kw">public</span> virtual <span class="fu">returns</span> (bool) { <span class="op">...</span> }</span>
<span id="cb800-26"><a href="DApps-pametne-pogodbe.html#cb800-26" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">_transfer</span>(address <span class="im">from</span><span class="op">,</span> address to<span class="op">,</span> uint256 value) internal { <span class="op">...</span> }</span>
<span id="cb800-27"><a href="DApps-pametne-pogodbe.html#cb800-27" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">_update</span>(address <span class="im">from</span><span class="op">,</span> address to<span class="op">,</span> uint256 value) internal virtual { <span class="op">...</span> }</span>
<span id="cb800-28"><a href="DApps-pametne-pogodbe.html#cb800-28" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">_mint</span>(address account<span class="op">,</span> uint256 value) internal { <span class="op">...</span> }</span>
<span id="cb800-29"><a href="DApps-pametne-pogodbe.html#cb800-29" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">_burn</span>(address account<span class="op">,</span> uint256 value) internal { <span class="op">...</span> }</span>
<span id="cb800-30"><a href="DApps-pametne-pogodbe.html#cb800-30" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">_approve</span>(address owner<span class="op">,</span> address spender<span class="op">,</span> uint256 value) internal { <span class="op">...</span> }</span>
<span id="cb800-31"><a href="DApps-pametne-pogodbe.html#cb800-31" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">_approve</span>(address owner<span class="op">,</span> address spender<span class="op">,</span> uint256 value<span class="op">,</span> bool emitEvent) internal virtual { <span class="op">...</span> }</span>
<span id="cb800-32"><a href="DApps-pametne-pogodbe.html#cb800-32" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">_spendAllowance</span>(address owner<span class="op">,</span> address spender<span class="op">,</span> uint256 value) internal virtual { <span class="op">...</span> }</span>
<span id="cb800-33"><a href="DApps-pametne-pogodbe.html#cb800-33" tabindex="-1"></a>}</span></code></pre></div>
<p><code>IERC20.sol</code></p>
<div class="sourceCode" id="cb801"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb801-1"><a href="DApps-pametne-pogodbe.html#cb801-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb801-2"><a href="DApps-pametne-pogodbe.html#cb801-2" tabindex="-1"></a><span class="co">// OpenZeppelin Contracts (last updated v5.0.0) (token/ERC20/IERC20.sol)</span></span>
<span id="cb801-3"><a href="DApps-pametne-pogodbe.html#cb801-3" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.20</span><span class="op">;</span></span>
<span id="cb801-4"><a href="DApps-pametne-pogodbe.html#cb801-4" tabindex="-1"></a></span>
<span id="cb801-5"><a href="DApps-pametne-pogodbe.html#cb801-5" tabindex="-1"></a><span class="kw">interface</span> IERC20 {</span>
<span id="cb801-6"><a href="DApps-pametne-pogodbe.html#cb801-6" tabindex="-1"></a>  <span class="bu">event</span> <span class="fu">Transfer</span>(address indexed <span class="im">from</span><span class="op">,</span> address indexed to<span class="op">,</span> uint256 value)<span class="op">;</span></span>
<span id="cb801-7"><a href="DApps-pametne-pogodbe.html#cb801-7" tabindex="-1"></a>  <span class="bu">event</span> <span class="fu">Approval</span>(address indexed owner<span class="op">,</span> address indexed spender<span class="op">,</span> uint256 value)<span class="op">;</span></span>
<span id="cb801-8"><a href="DApps-pametne-pogodbe.html#cb801-8" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">totalSupply</span>() external view <span class="fu">returns</span> (uint256)<span class="op">;</span></span>
<span id="cb801-9"><a href="DApps-pametne-pogodbe.html#cb801-9" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">balanceOf</span>(address account) external view <span class="fu">returns</span> (uint256)<span class="op">;</span></span>
<span id="cb801-10"><a href="DApps-pametne-pogodbe.html#cb801-10" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">transfer</span>(address to<span class="op">,</span> uint256 value) external <span class="fu">returns</span> (bool)<span class="op">;</span></span>
<span id="cb801-11"><a href="DApps-pametne-pogodbe.html#cb801-11" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">allowance</span>(address owner<span class="op">,</span> address spender) external view <span class="fu">returns</span> (uint256)<span class="op">;</span></span>
<span id="cb801-12"><a href="DApps-pametne-pogodbe.html#cb801-12" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">approve</span>(address spender<span class="op">,</span> uint256 value) external <span class="fu">returns</span> (bool)<span class="op">;</span></span>
<span id="cb801-13"><a href="DApps-pametne-pogodbe.html#cb801-13" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">transferFrom</span>(address <span class="im">from</span><span class="op">,</span> address to<span class="op">,</span> uint256 value) external <span class="fu">returns</span> (bool)<span class="op">;</span>  </span>
<span id="cb801-14"><a href="DApps-pametne-pogodbe.html#cb801-14" tabindex="-1"></a>}</span></code></pre></div>
<p><code>Context.sol</code></p>
<div class="sourceCode" id="cb802"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb802-1"><a href="DApps-pametne-pogodbe.html#cb802-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb802-2"><a href="DApps-pametne-pogodbe.html#cb802-2" tabindex="-1"></a><span class="co">// OpenZeppelin Contracts (last updated v5.0.0) (utils/Context.sol)</span></span>
<span id="cb802-3"><a href="DApps-pametne-pogodbe.html#cb802-3" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.20</span><span class="op">;</span></span>
<span id="cb802-4"><a href="DApps-pametne-pogodbe.html#cb802-4" tabindex="-1"></a></span>
<span id="cb802-5"><a href="DApps-pametne-pogodbe.html#cb802-5" tabindex="-1"></a>abstract contract Context {</span>
<span id="cb802-6"><a href="DApps-pametne-pogodbe.html#cb802-6" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">_msgSender</span>() internal view virtual <span class="fu">returns</span> (address) { <span class="op">...</span> }</span>
<span id="cb802-7"><a href="DApps-pametne-pogodbe.html#cb802-7" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">_msgData</span>() internal view virtual <span class="fu">returns</span> (bytes calldata) { <span class="op">...</span> }</span>
<span id="cb802-8"><a href="DApps-pametne-pogodbe.html#cb802-8" tabindex="-1"></a>}</span></code></pre></div>
<p><code>IERC20Metadata.sol</code></p>
<div class="sourceCode" id="cb803"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb803-1"><a href="DApps-pametne-pogodbe.html#cb803-1" tabindex="-1"></a><span class="co">// </span><span class="an">SPDX-License-Identifier:</span><span class="co"> MIT</span></span>
<span id="cb803-2"><a href="DApps-pametne-pogodbe.html#cb803-2" tabindex="-1"></a><span class="co">// OpenZeppelin Contracts (last updated v5.0.0) (token/ERC20/extensions/IERC20Metadata.sol)</span></span>
<span id="cb803-3"><a href="DApps-pametne-pogodbe.html#cb803-3" tabindex="-1"></a>pragma solidity <span class="op">^</span><span class="fl">0.8.20</span><span class="op">;</span></span>
<span id="cb803-4"><a href="DApps-pametne-pogodbe.html#cb803-4" tabindex="-1"></a></span>
<span id="cb803-5"><a href="DApps-pametne-pogodbe.html#cb803-5" tabindex="-1"></a><span class="im">import</span> {IERC20} <span class="im">from</span> <span class="st">&quot;../IERC20.sol&quot;</span><span class="op">;</span></span>
<span id="cb803-6"><a href="DApps-pametne-pogodbe.html#cb803-6" tabindex="-1"></a></span>
<span id="cb803-7"><a href="DApps-pametne-pogodbe.html#cb803-7" tabindex="-1"></a><span class="kw">interface</span> IERC20Metadata is IERC20 {</span>
<span id="cb803-8"><a href="DApps-pametne-pogodbe.html#cb803-8" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">name</span>() external view <span class="fu">returns</span> (string memory)<span class="op">;</span></span>
<span id="cb803-9"><a href="DApps-pametne-pogodbe.html#cb803-9" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">symbol</span>() external view <span class="fu">returns</span> (string memory)<span class="op">;</span></span>
<span id="cb803-10"><a href="DApps-pametne-pogodbe.html#cb803-10" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">decimals</span>() external view <span class="fu">returns</span> (uint8)<span class="op">;</span></span>
<span id="cb803-11"><a href="DApps-pametne-pogodbe.html#cb803-11" tabindex="-1"></a>}</span></code></pre></div>
<p>Če primerjamo našo implementacijo pogodbe <code>SimpleCoin</code>, lahko opazimo, da je naš žeton skoraj skladen s standardom ERC20. V tabeli <a href="DApps-pametne-pogodbe.html#tab:tabela-Primerjava-ERC20">11.7</a> so povzete ključne razlike v implementaciji.</p>
<table class="tabela-manjsa table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:tabela-Primerjava-ERC20">Tabela 11.7: </span>Razlike med specifikacijo <code>ERC20</code> in implementacijo <code>SimpleCoin</code>.
</caption>
<thead>
<tr>
<th style="text-align:left;">
Specifikacija <code>ERC20</code>
</th>
<th style="text-align:left;">
Implementacija <code>SimpleCoin</code>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<code>totalSupply()</code>
</td>
<td style="text-align:left;">
Ni na voljo.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>balanceOf()</code>
</td>
<td style="text-align:left;">
Ni neposredno na voljo (podatek je sicer na voljo v spremenljivki stanja <code>coinBalance</code>).
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>approve()</code>
</td>
<td style="text-align:left;">
<code>authorize()</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>allowance()</code>
</td>
<td style="text-align:left;">
Ni neposredno na voljo (podatek je sicer na voljo v spremenljivki stanja <code>allowance</code>).
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>Approval</code>
</td>
<td style="text-align:left;">
Ni na voljo.
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="ekosistem-ethereum" class="section level2 hasAnchor" number="11.7">
<h2><span class="header-section-number">11.7</span> Ekosistem Ethereum<a href="DApps-pametne-pogodbe.html#ekosistem-ethereum" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Slika <a href="DApps-pametne-pogodbe.html#fig:slika-Ethereum-ekosistem">11.18</a> prikazuje celoten pogled na ekosistem Ethereum. Večino elementov smo že spoznali, zato na tem mestu izpostavljamo zgolj dodatne infrastrukturne elemente:</p>
<ul>
<li><a href="https://wikitia.com/wiki/Ethereum_Name_Service"><i class="fa-brands fa-wikipedia-w"></i><strong>Ethereum Name Service (ENS)</strong></a> je pametna pogodba za decentralizirano preslikavo človeško berljivih naslovov (npr. <code>vitalik.eth</code>) v naslove Ethereum (npr. <code>0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045</code>).</li>
<li><a href="https://github.com/ethersphere/swarm"><i class="fa-brands fa-github"></i><strong>Swarm</strong></a> in <a href="https://en.wikipedia.org/wiki/InterPlanetary_File_System"><i class="fa-brands fa-wikipedia-w"></i><strong>IPFS</strong></a> sta dve konkurenčni omrežji za decentralizirano shranjevanje vsebine, na katero se lahko transakcije v verigi blokov Ethereum sklicujejo preko zgoščenih vrednosti ID-jev (ali človeku berljivih imen, ki jih ENS razreši v zgoščene vrednosti). Swarm je neposredno povezan z omrežjem Ethereum in se ga tudi zaveda, medtem ko je IPFS splošen tehnološko neodvisen protokol, ki zagotavlja podobno funkcionalnost.</li>
<li><strong>Pametni preroki</strong> <em>(angl. <a href="https://en.wikipedia.org/wiki/Blockchain_oracle"><i class="fa-brands fa-wikipedia-w"></i><strong>Oracle</strong></a>)</em> so ogrodja pametnih pogodb, ki omogočajo dostop do podatkov iz resničnega sveta na način, ki zagotavlja pristnost podatkov in dosledno obdelavo teh podatkov v celotnem omrežju Ethereum.</li>
<li><strong>Vozlišče <a href="https://infura.io/"><i class="fa-solid fa-earth-europe"></i>Infura</a></strong> je vozlišče Ethereum, ki ga gosti Infura (storitev v lasti podjetja <a href="https://consensys.io/"><i class="fa-solid fa-earth-europe"></i>ConsenSys</a>). Infura omogoča zagonskim podjetjem in neodvisnim razvijalcem, da izdelajo aplikacije Ethereum, ne da bi morali investirati v fizične strežnike. S temi vozlišči se povezuje tudi MetaMask.</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-Ethereum-ekosistem"></span>
<img src="assets/img/Ethereum_ekosistem.png" alt="Ekosistem Ethereum." width="700" />
<p class="caption">
Slika 11.18: Ekosistem Ethereum.
</p>
</div>
<h3>
Dodatno gradivo
</h3>
<table class="dodatnoGradivo">
<tr>
<td>
<p><img src="assets/img/Infante_2019.jpg" width="200" style="display: block; margin: auto;" /></p>
</td>
<td>
<ul>
<li><strong>Building Ethereum Dapps: Decentralized applications on the Ethereum blockchain</strong>, 1<sup>st</sup> edition <span class="citation">(<a href="literatura.html#ref-infante2019">Infante 2019</a>)</span>
<ul>
<li><strong>Part 1</strong>
<ul>
<li><strong>Chapter 1</strong>: A first look at decentralized applications</li>
<li><strong>Chapter 2</strong>: Understanding the blockchain</li>
<li><strong>Chapter 3</strong>: The Ethereum platform</li>
<li><strong>Chapter 4</strong>: Deploying your first contract</li>
</ul></li>
<li><strong>Part 2</strong>
<ul>
<li><strong>Chapter 5</strong>: Programming smart contracts in Solidity</li>
<li><strong>Chapter 6</strong>: Writing more complex smart contracts</li>
<li><strong>Chapter 7</strong>: Generalizing functionality with abstract contracts and interfaces</li>
</ul></li>
<li><strong>Part 3</strong>
<ul>
<li><strong>Chapter 9</strong>: The Ethereum ecosystem</li>
</ul></li>
</ul></li>
</ul>
</td>
</tr>
</table>

</div>
</div>
<script type="text/javascript">
  $(document).ready(function() {
    
    $("a").click(function(e) {
      if (
        $(this).has(".fa-solid").length == 1 || 
        $(this).has(".fa-brands").length == 1 || 
        $(this).has(".fa-regular").length == 1 || 
        $(this).has("img.git").length == 1
      ) {
        e.preventDefault();
        window.open($(this).attr("href"), '_blank');
      }
    });
  });
</script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Q6109Y2092"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Q6109Y2092');
</script>
<h3><i class="fas fa-globe-europe" style="padding-right:5px"></i>Choose your language</h3>

<p>Students whose mother tongue is not Slovene can choose to <a onclick="loadGoogleTranslate()" class="google-translate-povezava"><i class="fas fa-sync-alt" style="padding-right:3px"></i>translate the contents of the script</a> into the selected language.</p>

<div id="google_translate_element"></div>

<script type="text/javascript">
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'sl', 
      includedLanguages: 'en,mk', 
      layout: google.translate.TranslateElement.InlineLayout.SIMPLE, 
      multilanguagePage: true
    }, 'google_translate_element');
  }
  
  function loadGoogleTranslate() {
    if ($("script[src='//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit']").length == 0) {
      var googleTranslateScript = document.createElement('script');
      googleTranslateScript.type = 'text/javascript';
      googleTranslateScript.async = true;
      googleTranslateScript.src = '//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0] ).appendChild(googleTranslateScript);    
    }
  }
  
  $(document).ready(function() {
    // Če gre za administrativno stran, potem skrij obrazec za komentarje
    $("h1:contains('Administracija'),h1:contains('Komentarji'),h1:contains('Analiza začetnega vprašalnika'),h1:contains('Lastni projekt'),h1:contains('pisni izpit'),h1:contains('Pisni izpiti')").filter(function() {
      $("h3:contains('Choose your language')").next().hide();
      $("h3:contains('Choose your language')").hide();
    });
  });
</script>
            </section>

          </div>
        </div>
      </div>
<a href="Avtentikacija.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="LP2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="assets/lib/gitbook-2.6.7/js/app.min.js"></script>
<script src="assets/lib/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="assets/lib/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="assets/lib/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="assets/lib/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="assets/lib/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="assets/lib/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="assets/lib/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 1
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
