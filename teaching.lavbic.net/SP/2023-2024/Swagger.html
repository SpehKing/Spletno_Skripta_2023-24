<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Poglavje 7 P3.2 Načrtovanje s Swagger in OpenAPI | Spletno programiranje 2023/2024</title>
  <meta name="description" content="Skripta za pomoč pri predmetu Spletno programiranje 2022/2023" />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Poglavje 7 P3.2 Načrtovanje s Swagger in OpenAPI | Spletno programiranje 2023/2024" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Skripta za pomoč pri predmetu Spletno programiranje 2022/2023" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Poglavje 7 P3.2 Načrtovanje s Swagger in OpenAPI | Spletno programiranje 2023/2024" />
  
  <meta name="twitter:description" content="Skripta za pomoč pri predmetu Spletno programiranje 2022/2023" />
  

<meta name="author" content="izr. prof. dr. Dejan Lavbič" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="PB-REST-API.html"/>
<link rel="next" href="Angular.html"/>
<script src="assets/lib/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="assets/lib/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="assets/lib/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="assets/lib/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="assets/lib/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="assets/lib/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="assets/lib/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="assets/lib/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="assets/lib/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="assets/lib/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="assets/lib/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="assets/lib/kePrint-0.0.1/kePrint.js"></script>
<link href="assets/lib/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="assets/style/stil.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html#terminski-plan-izvajanja-predmeta">SP 2023/2024 terminski plan</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Uvod</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#splošne-informacije"><i class="fa fa-check"></i>Splošne informacije</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#predavatelj"><i class="fa fa-check"></i>Predavatelj</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#asistent"><i class="fa fa-check"></i>Asistent</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#terminski-plan-izvajanja-predmeta"><i class="fa fa-check"></i>Terminski plan izvajanja predmeta</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#pravila-igre"><i class="fa fa-check"></i>Pravila igre</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#predavanja"><i class="fa fa-check"></i>Predavanja</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#vaje"><i class="fa fa-check"></i>Vaje</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#ocenjevanje"><i class="fa fa-check"></i>Ocenjevanje</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#pisni-izpiti"><i class="fa fa-check"></i>Pisni izpiti</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#priporočena-literatura"><i class="fa fa-check"></i>Priporočena literatura</a></li>
</ul></li>
<li class="part"><span><b>I sklop: Uvod v spletno programiranje</b></span></li>
<li class="chapter" data-level="1" data-path="P11.html"><a href="P11.html"><i class="fa fa-check"></i><b>1</b> <span class="sklop1 oznaka">P1.1</span> Svetovni splet in celostni razvoj programske opreme</a>
<ul>
<li class="chapter" data-level="1.1" data-path="P11.html"><a href="P11.html#infrastrukturni-in-arhitekturni-pogled-na-svetovni-splet"><i class="fa fa-check"></i><b>1.1</b> Infrastrukturni in arhitekturni pogled na svetovni splet</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="P11.html"><a href="P11.html#moorov-zakon"><i class="fa fa-check"></i><b>1.1.1</b> Moorov zakon</a></li>
<li class="chapter" data-level="1.1.2" data-path="P11.html"><a href="P11.html#internet-vs.-svetovni-splet"><i class="fa fa-check"></i><b>1.1.2</b> Internet vs. (svetovni) splet</a></li>
<li class="chapter" data-level="1.1.3" data-path="P11.html"><a href="P11.html#razvoj-interneta"><i class="fa fa-check"></i><b>1.1.3</b> Razvoj interneta</a></li>
<li class="chapter" data-level="1.1.4" data-path="P11.html"><a href="P11.html#razvoj-WWW"><i class="fa fa-check"></i><b>1.1.4</b> Razvoj (svetovnega) spleta</a></li>
<li class="chapter" data-level="1.1.5" data-path="P11.html"><a href="P11.html#arhitektura-odjemalecstrežnik"><i class="fa fa-check"></i><b>1.1.5</b> Arhitektura odjemalec/strežnik</a></li>
<li class="chapter" data-level="1.1.6" data-path="P11.html"><a href="P11.html#večnivojska-arhitektura"><i class="fa fa-check"></i><b>1.1.6</b> Večnivojska arhitektura</a></li>
<li class="chapter" data-level="1.1.7" data-path="P11.html"><a href="P11.html#pomembni-mejniki-in-akterji"><i class="fa fa-check"></i><b>1.1.7</b> Pomembni mejniki in akterji</a></li>
<li class="chapter" data-level="1.1.8" data-path="P11.html"><a href="P11.html#trenutno-stanje-na-trgu"><i class="fa fa-check"></i><b>1.1.8</b> Trenutno stanje na trgu</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="P11.html"><a href="P11.html#uporabljen-pristop-pri-predmetu"><i class="fa fa-check"></i><b>1.2</b> Uporabljen pristop pri predmetu</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="P11.html"><a href="P11.html#tehnologije-ki-jih-bomo-uporabljali"><i class="fa fa-check"></i><b>1.2.1</b> Tehnologije, ki jih bomo uporabljali</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="P11.html"><a href="P11.html#celostni-razvoj-programske-opreme-z-mean-arhitekturo"><i class="fa fa-check"></i><b>1.3</b> Celostni razvoj programske opreme z MEAN arhitekturo</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="P11.html"><a href="P11.html#Node-js-niti"><i class="fa fa-check"></i><b>1.3.1</b> Node.js</a></li>
<li class="chapter" data-level="1.3.2" data-path="P11.html"><a href="P11.html#express"><i class="fa fa-check"></i><b>1.3.2</b> Express</a></li>
<li class="chapter" data-level="1.3.3" data-path="P11.html"><a href="P11.html#MongoDB-uvod"><i class="fa fa-check"></i><b>1.3.3</b> MongoDB</a></li>
<li class="chapter" data-level="1.3.4" data-path="P11.html"><a href="P11.html#angular"><i class="fa fa-check"></i><b>1.3.4</b> Angular</a></li>
<li class="chapter" data-level="1.3.5" data-path="P11.html"><a href="P11.html#podporna-orodja-ogrodja-in-knjižnice"><i class="fa fa-check"></i><b>1.3.5</b> Podporna orodja, ogrodja in knjižnice</a></li>
<li class="chapter" data-level="1.3.6" data-path="P11.html"><a href="P11.html#git"><i class="fa fa-check"></i><b>1.3.6</b> Git</a></li>
<li class="chapter" data-level="1.3.7" data-path="P11.html"><a href="P11.html#heroku"><i class="fa fa-check"></i><b>1.3.7</b> Heroku</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="P11.html"><a href="P11.html#razvoj-dejanske-aplikacije"><i class="fa fa-check"></i><b>1.4</b> Razvoj dejanske aplikacije</a></li>
<li class="chapter" data-level="1.5" data-path="P11.html"><a href="P11.html#nacrtovanje-aplikacije-po-mean-arhitekturi"><i class="fa fa-check"></i><b>1.5</b> Načrtovanje aplikacije po MEAN arhitekturi</a></li>
<li class="chapter" data-level="1.6" data-path="P11.html"><a href="P11.html#dobre-prakse-pri-načrtovanju-in-implementaciji-aplikacije"><i class="fa fa-check"></i><b>1.6</b> Dobre prakse pri načrtovanju in implementaciji aplikacije</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="P11.html"><a href="P11.html#uporaba-api-ja-za-dostop-do-podatkovne-ravni"><i class="fa fa-check"></i><b>1.6.1</b> Uporaba API-ja za dostop do podatkovne ravni</a></li>
<li class="chapter" data-level="1.6.2" data-path="P11.html"><a href="P11.html#koraki-pri-nacrtovanju-nove-spletne-aplikacije"><i class="fa fa-check"></i><b>1.6.2</b> Koraki pri načrtovanju nove spletne aplikacije</a></li>
<li class="chapter" data-level="1.6.3" data-path="P11.html"><a href="P11.html#koraki-pri-implementaciji-nove-spletne-aplikacije"><i class="fa fa-check"></i><b>1.6.3</b> Koraki pri implementaciji nove spletne aplikacije</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="P11.html"><a href="P11.html#okolje"><i class="fa fa-check"></i><b>1.7</b> Okolje</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="P11.html"><a href="P11.html#razvojno-okolje"><i class="fa fa-check"></i><b>1.7.1</b> Razvojno okolje</a></li>
<li class="chapter" data-level="1.7.2" data-path="P11.html"><a href="P11.html#produkcijsko-okolje"><i class="fa fa-check"></i><b>1.7.2</b> Produkcijsko okolje</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="P11.html"><a href="P11.html#git-1"><i class="fa fa-check"></i><b>1.8</b> Git</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="P11.html"><a href="P11.html#osnovne-operacije-vcs"><i class="fa fa-check"></i><b>1.8.1</b> Osnovne operacije VCS</a></li>
<li class="chapter" data-level="1.8.2" data-path="P11.html"><a href="P11.html#posebnosti-porazdeljenih-sistemov-za-obvladovanje-verzij-dvcs"><i class="fa fa-check"></i><b>1.8.2</b> Posebnosti porazdeljenih sistemov za obvladovanje verzij (DVCS)</a></li>
<li class="chapter" data-level="1.8.3" data-path="P11.html"><a href="P11.html#dobre-prakse-uporabe-git"><i class="fa fa-check"></i><b>1.8.3</b> Dobre prakse uporabe Git</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="LP1.html"><a href="LP1.html"><i class="fa fa-check"></i><b>2</b> <span class="sklop4 oznaka">1. LP</span> Dinamična spletna aplikacija na strani strežnika in odjemalca</a>
<ul>
<li class="chapter" data-level="2.1" data-path="LP1.html"><a href="LP1.html#pravila-zahteve-in-omejitve"><i class="fa fa-check"></i><b>2.1</b> Pravila, zahteve in omejitve</a></li>
<li class="chapter" data-level="2.2" data-path="LP1.html"><a href="LP1.html#LP11"><i class="fa fa-check"></i><b>2.2</b> <span class="sklop1 oznaka">1. del</span> Osnutek aplikacije in wireframe model</a></li>
<li class="chapter" data-level="2.3" data-path="LP1.html"><a href="LP1.html#LP12"><i class="fa fa-check"></i><b>2.3</b> <span class="sklop2 oznaka">2. del</span> Arhitektura aplikacije in različna razvojna okolja</a></li>
<li class="chapter" data-level="2.4" data-path="LP1.html"><a href="LP1.html#LP13"><i class="fa fa-check"></i><b>2.4</b> <span class="sklop3 oznaka">3. del</span> Zaledni del in dostop do podatkovne baze</a></li>
<li class="chapter" data-level="2.5" data-path="LP1.html"><a href="LP1.html#LP14"><i class="fa fa-check"></i><b>2.5</b> <span class="sklop4 oznaka">4. del</span> Uporabniški vmesnik, SPA in avtentikacija</a></li>
<li class="chapter" data-level="2.6" data-path="LP1.html"><a href="LP1.html#kriteriji-vrednotenja"><i class="fa fa-check"></i><b>2.6</b> Kriteriji vrednotenja</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="HTML-CSS.html"><a href="HTML-CSS.html"><i class="fa fa-check"></i><b>3</b> <span class="sklop1 oznaka">P1.2</span> Osnovna spletna standarda HTML in CSS</a>
<ul>
<li class="chapter" data-level="3.1" data-path="HTML-CSS.html"><a href="HTML-CSS.html#html-tehnologija"><i class="fa fa-check"></i><b>3.1</b> HTML</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="HTML-CSS.html"><a href="HTML-CSS.html#enostaven-primer-html5-dokumenta"><i class="fa fa-check"></i><b>3.1.1</b> Enostaven primer HTML5 dokumenta</a></li>
<li class="chapter" data-level="3.1.2" data-path="HTML-CSS.html"><a href="HTML-CSS.html#ustreznost-html5-dokumenta"><i class="fa fa-check"></i><b>3.1.2</b> Ustreznost HTML5 dokumenta</a></li>
<li class="chapter" data-level="3.1.3" data-path="HTML-CSS.html"><a href="HTML-CSS.html#naslovi"><i class="fa fa-check"></i><b>3.1.3</b> Naslovi</a></li>
<li class="chapter" data-level="3.1.4" data-path="HTML-CSS.html"><a href="HTML-CSS.html#povezave"><i class="fa fa-check"></i><b>3.1.4</b> Povezave</a></li>
<li class="chapter" data-level="3.1.5" data-path="HTML-CSS.html"><a href="HTML-CSS.html#slike"><i class="fa fa-check"></i><b>3.1.5</b> Slike</a></li>
<li class="chapter" data-level="3.1.6" data-path="HTML-CSS.html"><a href="HTML-CSS.html#posebni-znaki-in-vodoravne-črte"><i class="fa fa-check"></i><b>3.1.6</b> Posebni znaki in vodoravne črte</a></li>
<li class="chapter" data-level="3.1.7" data-path="HTML-CSS.html"><a href="HTML-CSS.html#seznami"><i class="fa fa-check"></i><b>3.1.7</b> Seznami</a></li>
<li class="chapter" data-level="3.1.8" data-path="HTML-CSS.html"><a href="HTML-CSS.html#tabele"><i class="fa fa-check"></i><b>3.1.8</b> Tabele</a></li>
<li class="chapter" data-level="3.1.9" data-path="HTML-CSS.html"><a href="HTML-CSS.html#Spletni-obrazci-HTML"><i class="fa fa-check"></i><b>3.1.9</b> Spletni obrazci</a></li>
<li class="chapter" data-level="3.1.10" data-path="HTML-CSS.html"><a href="HTML-CSS.html#interne-povezave"><i class="fa fa-check"></i><b>3.1.10</b> Interne povezave</a></li>
<li class="chapter" data-level="3.1.11" data-path="HTML-CSS.html"><a href="HTML-CSS.html#meta-elementi"><i class="fa fa-check"></i><b>3.1.11</b> Meta elementi</a></li>
<li class="chapter" data-level="3.1.12" data-path="HTML-CSS.html"><a href="HTML-CSS.html#napredni-gradniki-spletnih-obrazcev"><i class="fa fa-check"></i><b>3.1.12</b> Napredni gradniki spletnih obrazcev</a></li>
<li class="chapter" data-level="3.1.13" data-path="HTML-CSS.html"><a href="HTML-CSS.html#samodejno-dopolnjevanje-vrednosti-pri-vnosnih-poljih"><i class="fa fa-check"></i><b>3.1.13</b> Samodejno dopolnjevanje vrednosti pri vnosnih poljih</a></li>
<li class="chapter" data-level="3.1.14" data-path="HTML-CSS.html"><a href="HTML-CSS.html#elementi-za-opredelitev-strukture-strani"><i class="fa fa-check"></i><b>3.1.14</b> Elementi za opredelitev strukture strani</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="HTML-CSS.html"><a href="HTML-CSS.html#prekrivni-slogi-css"><i class="fa fa-check"></i><b>3.2</b> Prekrivni slogi (CSS)</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="HTML-CSS.html"><a href="HTML-CSS.html#uvod-1"><i class="fa fa-check"></i><b>3.2.1</b> Uvod</a></li>
<li class="chapter" data-level="3.2.2" data-path="HTML-CSS.html"><a href="HTML-CSS.html#neposredno-opredeljeni-slogi"><i class="fa fa-check"></i><b>3.2.2</b> Neposredno opredeljeni slogi</a></li>
<li class="chapter" data-level="3.2.3" data-path="HTML-CSS.html"><a href="HTML-CSS.html#vgrajeni-slogi"><i class="fa fa-check"></i><b>3.2.3</b> Vgrajeni slogi</a></li>
<li class="chapter" data-level="3.2.4" data-path="HTML-CSS.html"><a href="HTML-CSS.html#konfliktni-slogi"><i class="fa fa-check"></i><b>3.2.4</b> Konfliktni slogi</a></li>
<li class="chapter" data-level="3.2.5" data-path="HTML-CSS.html"><a href="HTML-CSS.html#zunanji-slogi"><i class="fa fa-check"></i><b>3.2.5</b> Zunanji slogi</a></li>
<li class="chapter" data-level="3.2.6" data-path="HTML-CSS.html"><a href="HTML-CSS.html#pozicioniranje-elementov"><i class="fa fa-check"></i><b>3.2.6</b> Pozicioniranje elementov</a></li>
<li class="chapter" data-level="3.2.7" data-path="HTML-CSS.html"><a href="HTML-CSS.html#ozadje"><i class="fa fa-check"></i><b>3.2.7</b> Ozadje</a></li>
<li class="chapter" data-level="3.2.8" data-path="HTML-CSS.html"><a href="HTML-CSS.html#dimenzije-elementa"><i class="fa fa-check"></i><b>3.2.8</b> Dimenzije elementa</a></li>
<li class="chapter" data-level="3.2.9" data-path="HTML-CSS.html"><a href="HTML-CSS.html#model-škatle"><i class="fa fa-check"></i><b>3.2.9</b> Model škatle</a></li>
<li class="chapter" data-level="3.2.10" data-path="HTML-CSS.html"><a href="HTML-CSS.html#plavajoči-elementi"><i class="fa fa-check"></i><b>3.2.10</b> Plavajoči elementi</a></li>
<li class="chapter" data-level="3.2.11" data-path="HTML-CSS.html"><a href="HTML-CSS.html#vrste-medijev"><i class="fa fa-check"></i><b>3.2.11</b> Vrste medijev</a></li>
<li class="chapter" data-level="3.2.12" data-path="HTML-CSS.html"><a href="HTML-CSS.html#spustni-meniji"><i class="fa fa-check"></i><b>3.2.12</b> Spustni meniji</a></li>
<li class="chapter" data-level="3.2.13" data-path="HTML-CSS.html"><a href="HTML-CSS.html#senca-na-besedilu"><i class="fa fa-check"></i><b>3.2.13</b> Senca na besedilu</a></li>
<li class="chapter" data-level="3.2.14" data-path="HTML-CSS.html"><a href="HTML-CSS.html#zaobljeni-robovi"><i class="fa fa-check"></i><b>3.2.14</b> Zaobljeni robovi</a></li>
<li class="chapter" data-level="3.2.15" data-path="HTML-CSS.html"><a href="HTML-CSS.html#barva"><i class="fa fa-check"></i><b>3.2.15</b> Barva</a></li>
<li class="chapter" data-level="3.2.16" data-path="HTML-CSS.html"><a href="HTML-CSS.html#senca-na-modelu-škatle"><i class="fa fa-check"></i><b>3.2.16</b> Senca na modelu škatle</a></li>
<li class="chapter" data-level="3.2.17" data-path="HTML-CSS.html"><a href="HTML-CSS.html#uporaba-pisav-s-spleta"><i class="fa fa-check"></i><b>3.2.17</b> Uporaba pisav s spleta</a></li>
<li class="chapter" data-level="3.2.18" data-path="HTML-CSS.html"><a href="HTML-CSS.html#prilagodljiv-model-škatle-in-izbira-poljubnega-ugnezdenega-elementa"><i class="fa fa-check"></i><b>3.2.18</b> Prilagodljiv model škatle in izbira poljubnega ugnezdenega elementa</a></li>
<li class="chapter" data-level="3.2.19" data-path="HTML-CSS.html"><a href="HTML-CSS.html#postavitev-v-več-stolpcev"><i class="fa fa-check"></i><b>3.2.19</b> Postavitev v več stolpcev</a></li>
<li class="chapter" data-level="3.2.20" data-path="HTML-CSS.html"><a href="HTML-CSS.html#poizvedovanje-po-medijih"><i class="fa fa-check"></i><b>3.2.20</b> Poizvedovanje po medijih</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="HTML-CSS.html"><a href="HTML-CSS.html#bootstrap-1"><i class="fa fa-check"></i><b>3.3</b> Bootstrap</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="HTML-CSS.html"><a href="HTML-CSS.html#uvod-in-način-uporabe"><i class="fa fa-check"></i><b>3.3.1</b> Uvod in način uporabe</a></li>
<li class="chapter" data-level="3.3.2" data-path="HTML-CSS.html"><a href="HTML-CSS.html#enostavni-primer"><i class="fa fa-check"></i><b>3.3.2</b> Enostavni primer</a></li>
<li class="chapter" data-level="3.3.3" data-path="HTML-CSS.html"><a href="HTML-CSS.html#prilagajanje-vsebine-z-mrežnim-sistemom"><i class="fa fa-check"></i><b>3.3.3</b> Prilagajanje vsebine z mrežnim sistemom</a></li>
<li class="chapter" data-level="3.3.4" data-path="HTML-CSS.html"><a href="HTML-CSS.html#tipografija"><i class="fa fa-check"></i><b>3.3.4</b> Tipografija</a></li>
<li class="chapter" data-level="3.3.5" data-path="HTML-CSS.html"><a href="HTML-CSS.html#tabele-1"><i class="fa fa-check"></i><b>3.3.5</b> Tabele</a></li>
<li class="chapter" data-level="3.3.6" data-path="HTML-CSS.html"><a href="HTML-CSS.html#slike-1"><i class="fa fa-check"></i><b>3.3.6</b> Slike</a></li>
<li class="chapter" data-level="3.3.7" data-path="HTML-CSS.html"><a href="HTML-CSS.html#opozorila"><i class="fa fa-check"></i><b>3.3.7</b> Opozorila</a></li>
<li class="chapter" data-level="3.3.8" data-path="HTML-CSS.html"><a href="HTML-CSS.html#gumbi"><i class="fa fa-check"></i><b>3.3.8</b> Gumbi</a></li>
<li class="chapter" data-level="3.3.9" data-path="HTML-CSS.html"><a href="HTML-CSS.html#ikone"><i class="fa fa-check"></i><b>3.3.9</b> Ikone</a></li>
<li class="chapter" data-level="3.3.10" data-path="HTML-CSS.html"><a href="HTML-CSS.html#oznake"><i class="fa fa-check"></i><b>3.3.10</b> Oznake</a></li>
<li class="chapter" data-level="3.3.11" data-path="HTML-CSS.html"><a href="HTML-CSS.html#kazalnik-poteka"><i class="fa fa-check"></i><b>3.3.11</b> Kazalnik poteka</a></li>
<li class="chapter" data-level="3.3.12" data-path="HTML-CSS.html"><a href="HTML-CSS.html#prehodi-po-straneh"><i class="fa fa-check"></i><b>3.3.12</b> Prehodi po straneh</a></li>
<li class="chapter" data-level="3.3.13" data-path="HTML-CSS.html"><a href="HTML-CSS.html#plošča"><i class="fa fa-check"></i><b>3.3.13</b> Plošča</a></li>
<li class="chapter" data-level="3.3.14" data-path="HTML-CSS.html"><a href="HTML-CSS.html#spustni-meni"><i class="fa fa-check"></i><b>3.3.14</b> Spustni meni</a></li>
<li class="chapter" data-level="3.3.15" data-path="HTML-CSS.html"><a href="HTML-CSS.html#spletni-obrazci"><i class="fa fa-check"></i><b>3.3.15</b> Spletni obrazci</a></li>
<li class="chapter" data-level="3.3.16" data-path="HTML-CSS.html"><a href="HTML-CSS.html#modalno-okno"><i class="fa fa-check"></i><b>3.3.16</b> Modalno okno</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="HTML-CSS.html"><a href="HTML-CSS.html#praktični-prikaz-uporabe-css"><i class="fa fa-check"></i><b>3.4</b> Praktični prikaz uporabe CSS</a></li>
</ul></li>
<li class="part"><span><b>II sklop: JavaScript - programski jezik na strani odjemalca in strežnika</b></span></li>
<li class="chapter" data-level="4" data-path="JavaScript.html"><a href="JavaScript.html"><i class="fa fa-check"></i><b>4</b> <span class="sklop2 oznaka">P2.1</span> JavaScript, jezik svetovnega spleta</a>
<ul>
<li class="chapter" data-level="4.1" data-path="JavaScript.html"><a href="JavaScript.html#razvoj-jezika"><i class="fa fa-check"></i><b>4.1</b> Razvoj jezika</a></li>
<li class="chapter" data-level="4.2" data-path="JavaScript.html"><a href="JavaScript.html#vrednosti-podatkovni-tipi-in-operatorji"><i class="fa fa-check"></i><b>4.2</b> Vrednosti, podatkovni tipi in operatorji</a></li>
<li class="chapter" data-level="4.3" data-path="JavaScript.html"><a href="JavaScript.html#struktura-programa"><i class="fa fa-check"></i><b>4.3</b> Struktura programa</a></li>
<li class="chapter" data-level="4.4" data-path="JavaScript.html"><a href="JavaScript.html#kontrolni-stavki"><i class="fa fa-check"></i><b>4.4</b> Kontrolni stavki</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="JavaScript.html"><a href="JavaScript.html#if-stavek"><i class="fa fa-check"></i><b>4.4.1</b> <code>if</code> stavek</a></li>
<li class="chapter" data-level="4.4.2" data-path="JavaScript.html"><a href="JavaScript.html#if...else-stavek"><i class="fa fa-check"></i><b>4.4.2</b> <code>if...else</code> stavek</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="JavaScript.html"><a href="JavaScript.html#operatorji"><i class="fa fa-check"></i><b>4.5</b> Operatorji</a></li>
<li class="chapter" data-level="4.6" data-path="JavaScript.html"><a href="JavaScript.html#struktura-ponavljanja"><i class="fa fa-check"></i><b>4.6</b> Struktura ponavljanja</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="JavaScript.html"><a href="JavaScript.html#while-stavek"><i class="fa fa-check"></i><b>4.6.1</b> <code>while</code> stavek</a></li>
<li class="chapter" data-level="4.6.2" data-path="JavaScript.html"><a href="JavaScript.html#for-stavek"><i class="fa fa-check"></i><b>4.6.2</b> <code>for</code> stavek</a></li>
<li class="chapter" data-level="4.6.3" data-path="JavaScript.html"><a href="JavaScript.html#do...while-stavek"><i class="fa fa-check"></i><b>4.6.3</b> <code>do...while</code> stavek</a></li>
<li class="chapter" data-level="4.6.4" data-path="JavaScript.html"><a href="JavaScript.html#break-in-continue"><i class="fa fa-check"></i><b>4.6.4</b> <code>break</code> in <code>continue</code></a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="JavaScript.html"><a href="JavaScript.html#funkcije"><i class="fa fa-check"></i><b>4.7</b> Funkcije</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="JavaScript.html"><a href="JavaScript.html#opredelitev-funkcije"><i class="fa fa-check"></i><b>4.7.1</b> Opredelitev funkcije</a></li>
<li class="chapter" data-level="4.7.2" data-path="JavaScript.html"><a href="JavaScript.html#parametri-in-kontekst"><i class="fa fa-check"></i><b>4.7.2</b> Parametri in kontekst</a></li>
<li class="chapter" data-level="4.7.3" data-path="JavaScript.html"><a href="JavaScript.html#zaprtje"><i class="fa fa-check"></i><b>4.7.3</b> Zaprtje</a></li>
<li class="chapter" data-level="4.7.4" data-path="JavaScript.html"><a href="JavaScript.html#rekurzija"><i class="fa fa-check"></i><b>4.7.4</b> Rekurzija</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="JavaScript.html"><a href="JavaScript.html#podatkovne-strukture"><i class="fa fa-check"></i><b>4.8</b> Podatkovne strukture</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="JavaScript.html"><a href="JavaScript.html#nizi-in-njihove-lastnosti"><i class="fa fa-check"></i><b>4.8.1</b> Nizi in njihove lastnosti</a></li>
<li class="chapter" data-level="4.8.2" data-path="JavaScript.html"><a href="JavaScript.html#objekt-argumentov-funkcije"><i class="fa fa-check"></i><b>4.8.2</b> Objekt argumentov funkcije</a></li>
<li class="chapter" data-level="4.8.3" data-path="JavaScript.html"><a href="JavaScript.html#json"><i class="fa fa-check"></i><b>4.8.3</b> JSON</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="JavaScript.html"><a href="JavaScript.html#funkcije-višjega-reda"><i class="fa fa-check"></i><b>4.9</b> Funkcije višjega reda</a>
<ul>
<li class="chapter" data-level="4.9.1" data-path="JavaScript.html"><a href="JavaScript.html#abstrakcija"><i class="fa fa-check"></i><b>4.9.1</b> Abstrakcija</a></li>
<li class="chapter" data-level="4.9.2" data-path="JavaScript.html"><a href="JavaScript.html#funkcije-višjega-reda-1"><i class="fa fa-check"></i><b>4.9.2</b> Funkcije višjega reda</a></li>
<li class="chapter" data-level="4.9.3" data-path="JavaScript.html"><a href="JavaScript.html#posredovanje-argumentov"><i class="fa fa-check"></i><b>4.9.3</b> Posredovanje argumentov</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="JavaScript.html"><a href="JavaScript.html#objekti"><i class="fa fa-check"></i><b>4.10</b> Objekti</a>
<ul>
<li class="chapter" data-level="4.10.1" data-path="JavaScript.html"><a href="JavaScript.html#metode"><i class="fa fa-check"></i><b>4.10.1</b> Metode</a></li>
<li class="chapter" data-level="4.10.2" data-path="JavaScript.html"><a href="JavaScript.html#prototipi"><i class="fa fa-check"></i><b>4.10.2</b> Prototipi</a></li>
<li class="chapter" data-level="4.10.3" data-path="JavaScript.html"><a href="JavaScript.html#konstruktorji"><i class="fa fa-check"></i><b>4.10.3</b> Konstruktorji</a></li>
<li class="chapter" data-level="4.10.4" data-path="JavaScript.html"><a href="JavaScript.html#razredna-notacija"><i class="fa fa-check"></i><b>4.10.4</b> Razredna notacija</a></li>
<li class="chapter" data-level="4.10.5" data-path="JavaScript.html"><a href="JavaScript.html#prekrivanje-lastnosti"><i class="fa fa-check"></i><b>4.10.5</b> Prekrivanje lastnosti</a></li>
<li class="chapter" data-level="4.10.6" data-path="JavaScript.html"><a href="JavaScript.html#get-in-set-metode"><i class="fa fa-check"></i><b>4.10.6</b> <code>Get</code> in <code>set</code> metode</a></li>
<li class="chapter" data-level="4.10.7" data-path="JavaScript.html"><a href="JavaScript.html#primerek"><i class="fa fa-check"></i><b>4.10.7</b> Primerek</a></li>
</ul></li>
<li class="chapter" data-level="4.11" data-path="JavaScript.html"><a href="JavaScript.html#hrošči-in-obvladovanje-napak"><i class="fa fa-check"></i><b>4.11</b> Hrošči in obvladovanje napak</a>
<ul>
<li class="chapter" data-level="4.11.1" data-path="JavaScript.html"><a href="JavaScript.html#strog-način-delovanja"><i class="fa fa-check"></i><b>4.11.1</b> Strog način delovanja</a></li>
<li class="chapter" data-level="4.11.2" data-path="JavaScript.html"><a href="JavaScript.html#testiranje"><i class="fa fa-check"></i><b>4.11.2</b> Testiranje</a></li>
<li class="chapter" data-level="4.11.3" data-path="JavaScript.html"><a href="JavaScript.html#obvladovanje-izjem"><i class="fa fa-check"></i><b>4.11.3</b> Obvladovanje izjem</a></li>
</ul></li>
<li class="chapter" data-level="4.12" data-path="JavaScript.html"><a href="JavaScript.html#regularni-izrazi"><i class="fa fa-check"></i><b>4.12</b> Regularni izrazi</a>
<ul>
<li class="chapter" data-level="4.12.1" data-path="JavaScript.html"><a href="JavaScript.html#kreiranje-regularnega-izraza"><i class="fa fa-check"></i><b>4.12.1</b> Kreiranje regularnega izraza</a></li>
<li class="chapter" data-level="4.12.2" data-path="JavaScript.html"><a href="JavaScript.html#testiranje-ujemanja"><i class="fa fa-check"></i><b>4.12.2</b> Testiranje ujemanja</a></li>
<li class="chapter" data-level="4.12.3" data-path="JavaScript.html"><a href="JavaScript.html#testiranje-ujemanja-množice-znakov"><i class="fa fa-check"></i><b>4.12.3</b> Testiranje ujemanja množice znakov</a></li>
<li class="chapter" data-level="4.12.4" data-path="JavaScript.html"><a href="JavaScript.html#ponavljanje-delov-vzorca"><i class="fa fa-check"></i><b>4.12.4</b> Ponavljanje delov vzorca</a></li>
<li class="chapter" data-level="4.12.5" data-path="JavaScript.html"><a href="JavaScript.html#združevanje-delov-vzorca"><i class="fa fa-check"></i><b>4.12.5</b> Združevanje delov vzorca</a></li>
<li class="chapter" data-level="4.12.6" data-path="JavaScript.html"><a href="JavaScript.html#ujemanje-in-grupiranje"><i class="fa fa-check"></i><b>4.12.6</b> Ujemanje in grupiranje</a></li>
<li class="chapter" data-level="4.12.7" data-path="JavaScript.html"><a href="JavaScript.html#omejevanje-besed"><i class="fa fa-check"></i><b>4.12.7</b> Omejevanje besed</a></li>
<li class="chapter" data-level="4.12.8" data-path="JavaScript.html"><a href="JavaScript.html#vzorci-z-več-možnostmi"><i class="fa fa-check"></i><b>4.12.8</b> Vzorci z več možnostmi</a></li>
<li class="chapter" data-level="4.12.9" data-path="JavaScript.html"><a href="JavaScript.html#zamenjava-podnizov"><i class="fa fa-check"></i><b>4.12.9</b> Zamenjava podnizov</a></li>
<li class="chapter" data-level="4.12.10" data-path="JavaScript.html"><a href="JavaScript.html#požrešna-metoda-ujemanja"><i class="fa fa-check"></i><b>4.12.10</b> Požrešna metoda ujemanja</a></li>
<li class="chapter" data-level="4.12.11" data-path="JavaScript.html"><a href="JavaScript.html#dinamično-kreiranje-regexp-objektov"><i class="fa fa-check"></i><b>4.12.11</b> Dinamično kreiranje <code>RegExp</code> objektov</a></li>
<li class="chapter" data-level="4.12.12" data-path="JavaScript.html"><a href="JavaScript.html#sprehod-po-zadetkih-ujemanja"><i class="fa fa-check"></i><b>4.12.12</b> Sprehod po zadetkih ujemanja</a></li>
</ul></li>
<li class="chapter" data-level="4.13" data-path="JavaScript.html"><a href="JavaScript.html#moduli"><i class="fa fa-check"></i><b>4.13</b> Moduli</a>
<ul>
<li class="chapter" data-level="4.13.1" data-path="JavaScript.html"><a href="JavaScript.html#uporaba-funkcij-v-vlogi-imenskega-prostora"><i class="fa fa-check"></i><b>4.13.1</b> Uporaba funkcij v vlogi imenskega prostora</a></li>
<li class="chapter" data-level="4.13.2" data-path="JavaScript.html"><a href="JavaScript.html#objekti-kot-vmesniki"><i class="fa fa-check"></i><b>4.13.2</b> Objekti kot vmesniki</a></li>
<li class="chapter" data-level="4.13.3" data-path="JavaScript.html"><a href="JavaScript.html#izvajanje-podatkov-v-obliki-kode"><i class="fa fa-check"></i><b>4.13.3</b> Izvajanje podatkov v obliki kode</a></li>
</ul></li>
<li class="chapter" data-level="4.14" data-path="JavaScript.html"><a href="JavaScript.html#javascript-in-spletni-brskalnik"><i class="fa fa-check"></i><b>4.14</b> JavaScript in spletni brskalnik</a>
<ul>
<li class="chapter" data-level="4.14.1" data-path="JavaScript.html"><a href="JavaScript.html#html-in-javascript"><i class="fa fa-check"></i><b>4.14.1</b> HTML in JavaScript</a></li>
<li class="chapter" data-level="4.14.2" data-path="JavaScript.html"><a href="JavaScript.html#zaščiteno-okolje"><i class="fa fa-check"></i><b>4.14.2</b> Zaščiteno okolje</a></li>
</ul></li>
<li class="chapter" data-level="4.15" data-path="JavaScript.html"><a href="JavaScript.html#objektni-model-dokumenta"><i class="fa fa-check"></i><b>4.15</b> Objektni model dokumenta</a>
<ul>
<li class="chapter" data-level="4.15.1" data-path="JavaScript.html"><a href="JavaScript.html#struktura-dokumenta-in-predstavitev-v-obliki-drevesa"><i class="fa fa-check"></i><b>4.15.1</b> Struktura dokumenta in predstavitev v obliki drevesa</a></li>
<li class="chapter" data-level="4.15.2" data-path="JavaScript.html"><a href="JavaScript.html#iskanje-elementov"><i class="fa fa-check"></i><b>4.15.2</b> Iskanje elementov</a></li>
<li class="chapter" data-level="4.15.3" data-path="JavaScript.html"><a href="JavaScript.html#spreminjanje-dokumenta"><i class="fa fa-check"></i><b>4.15.3</b> Spreminjanje dokumenta</a></li>
<li class="chapter" data-level="4.15.4" data-path="JavaScript.html"><a href="JavaScript.html#dodajanje-elementov"><i class="fa fa-check"></i><b>4.15.4</b> Dodajanje elementov</a></li>
<li class="chapter" data-level="4.15.5" data-path="JavaScript.html"><a href="JavaScript.html#uporaba-lastnih-atributov"><i class="fa fa-check"></i><b>4.15.5</b> Uporaba lastnih atributov</a></li>
<li class="chapter" data-level="4.15.6" data-path="JavaScript.html"><a href="JavaScript.html#postavitev-na-strani"><i class="fa fa-check"></i><b>4.15.6</b> Postavitev na strani</a></li>
<li class="chapter" data-level="4.15.7" data-path="JavaScript.html"><a href="JavaScript.html#oblikovanje-in-prekrivni-slogi"><i class="fa fa-check"></i><b>4.15.7</b> Oblikovanje in prekrivni slogi</a></li>
</ul></li>
<li class="chapter" data-level="4.16" data-path="JavaScript.html"><a href="JavaScript.html#obvladovanje-dogodkov"><i class="fa fa-check"></i><b>4.16</b> Obvladovanje dogodkov</a>
<ul>
<li class="chapter" data-level="4.16.1" data-path="JavaScript.html"><a href="JavaScript.html#dogodki-na-html-gradnikih"><i class="fa fa-check"></i><b>4.16.1</b> Dogodki na HTML gradnikih</a></li>
<li class="chapter" data-level="4.16.2" data-path="JavaScript.html"><a href="JavaScript.html#objekt-dogodka"><i class="fa fa-check"></i><b>4.16.2</b> Objekt dogodka</a></li>
<li class="chapter" data-level="4.16.3" data-path="JavaScript.html"><a href="JavaScript.html#širjenje-obvladovanja-dogodkov"><i class="fa fa-check"></i><b>4.16.3</b> Širjenje obvladovanja dogodkov</a></li>
<li class="chapter" data-level="4.16.4" data-path="JavaScript.html"><a href="JavaScript.html#privzete-akcije"><i class="fa fa-check"></i><b>4.16.4</b> Privzete akcije</a></li>
<li class="chapter" data-level="4.16.5" data-path="JavaScript.html"><a href="JavaScript.html#pritisk-tipke-na-tipkovnici"><i class="fa fa-check"></i><b>4.16.5</b> Pritisk tipke na tipkovnici</a></li>
<li class="chapter" data-level="4.16.6" data-path="JavaScript.html"><a href="JavaScript.html#dogodki-z-miško"><i class="fa fa-check"></i><b>4.16.6</b> Dogodki z miško</a></li>
<li class="chapter" data-level="4.16.7" data-path="JavaScript.html"><a href="JavaScript.html#fokusiranje"><i class="fa fa-check"></i><b>4.16.7</b> Fokusiranje</a></li>
<li class="chapter" data-level="4.16.8" data-path="JavaScript.html"><a href="JavaScript.html#dogodek-nalaganja"><i class="fa fa-check"></i><b>4.16.8</b> Dogodek nalaganja</a></li>
<li class="chapter" data-level="4.16.9" data-path="JavaScript.html"><a href="JavaScript.html#časovniki"><i class="fa fa-check"></i><b>4.16.9</b> Časovniki</a></li>
<li class="chapter" data-level="4.16.10" data-path="JavaScript.html"><a href="JavaScript.html#čas-poteka"><i class="fa fa-check"></i><b>4.16.10</b> Čas poteka</a></li>
</ul></li>
<li class="chapter" data-level="4.17" data-path="JavaScript.html"><a href="JavaScript.html#http"><i class="fa fa-check"></i><b>4.17</b> HTTP</a>
<ul>
<li class="chapter" data-level="4.17.1" data-path="JavaScript.html"><a href="JavaScript.html#spletni-brskalniki-in-http"><i class="fa fa-check"></i><b>4.17.1</b> Spletni brskalniki in HTTP</a></li>
<li class="chapter" data-level="4.17.2" data-path="JavaScript.html"><a href="JavaScript.html#posredovanje-zahteve"><i class="fa fa-check"></i><b>4.17.2</b> Posredovanje zahteve</a></li>
<li class="chapter" data-level="4.17.3" data-path="JavaScript.html"><a href="JavaScript.html#http-peskovnik"><i class="fa fa-check"></i><b>4.17.3</b> HTTP peskovnik</a></li>
<li class="chapter" data-level="4.17.4" data-path="JavaScript.html"><a href="JavaScript.html#abstrakcija-zahtev"><i class="fa fa-check"></i><b>4.17.4</b> Abstrakcija zahtev</a></li>
<li class="chapter" data-level="4.17.5" data-path="JavaScript.html"><a href="JavaScript.html#promises"><i class="fa fa-check"></i><b>4.17.5</b> Promises</a></li>
</ul></li>
<li class="chapter" data-level="4.18" data-path="JavaScript.html"><a href="JavaScript.html#spletni-obrazci-in-vnosna-polja"><i class="fa fa-check"></i><b>4.18</b> Spletni obrazci in vnosna polja</a>
<ul>
<li class="chapter" data-level="4.18.1" data-path="JavaScript.html"><a href="JavaScript.html#vnosna-polja"><i class="fa fa-check"></i><b>4.18.1</b> Vnosna polja</a></li>
<li class="chapter" data-level="4.18.2" data-path="JavaScript.html"><a href="JavaScript.html#fokus-vnosa-s-tipkovnico"><i class="fa fa-check"></i><b>4.18.2</b> Fokus vnosa s tipkovnico</a></li>
<li class="chapter" data-level="4.18.3" data-path="JavaScript.html"><a href="JavaScript.html#onemogočeni-elementi-spletnega-obrazca"><i class="fa fa-check"></i><b>4.18.3</b> Onemogočeni elementi spletnega obrazca</a></li>
<li class="chapter" data-level="4.18.4" data-path="JavaScript.html"><a href="JavaScript.html#spletni-obrazec-kot-celota"><i class="fa fa-check"></i><b>4.18.4</b> Spletni obrazec kot celota</a></li>
<li class="chapter" data-level="4.18.5" data-path="JavaScript.html"><a href="JavaScript.html#besedilna-vnosna-polja"><i class="fa fa-check"></i><b>4.18.5</b> Besedilna vnosna polja</a></li>
<li class="chapter" data-level="4.18.6" data-path="JavaScript.html"><a href="JavaScript.html#gradniki-večkratne-izbire"><i class="fa fa-check"></i><b>4.18.6</b> Gradniki (večkratne) izbire</a></li>
<li class="chapter" data-level="4.18.7" data-path="JavaScript.html"><a href="JavaScript.html#izbirna-polja"><i class="fa fa-check"></i><b>4.18.7</b> Izbirna polja</a></li>
<li class="chapter" data-level="4.18.8" data-path="JavaScript.html"><a href="JavaScript.html#vnosno-polje-datoteke"><i class="fa fa-check"></i><b>4.18.8</b> Vnosno polje datoteke</a></li>
<li class="chapter" data-level="4.18.9" data-path="JavaScript.html"><a href="JavaScript.html#shranjevanje-podatkov-na-odjemalcu"><i class="fa fa-check"></i><b>4.18.9</b> Shranjevanje podatkov na odjemalcu</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="Node-js.html"><a href="Node-js.html"><i class="fa fa-check"></i><b>5</b> <span class="sklop2 oznaka">P2.2</span> Node.js, MVC in različna okolja</a>
<ul>
<li class="chapter" data-level="5.1" data-path="Node-js.html"><a href="Node-js.html#node.js"><i class="fa fa-check"></i><b>5.1</b> Node.js</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="Node-js.html"><a href="Node-js.html#ozadje-1"><i class="fa fa-check"></i><b>5.1.1</b> Ozadje</a></li>
<li class="chapter" data-level="5.1.2" data-path="Node-js.html"><a href="Node-js.html#asinhronost"><i class="fa fa-check"></i><b>5.1.2</b> Asinhronost</a></li>
<li class="chapter" data-level="5.1.3" data-path="Node-js.html"><a href="Node-js.html#ukaz-node"><i class="fa fa-check"></i><b>5.1.3</b> Ukaz <code>node</code></a></li>
<li class="chapter" data-level="5.1.4" data-path="Node-js.html"><a href="Node-js.html#moduli-1"><i class="fa fa-check"></i><b>5.1.4</b> Moduli</a></li>
<li class="chapter" data-level="5.1.5" data-path="Node-js.html"><a href="Node-js.html#nameščanje-z-npm"><i class="fa fa-check"></i><b>5.1.5</b> Nameščanje z <code>npm</code></a></li>
<li class="chapter" data-level="5.1.6" data-path="Node-js.html"><a href="Node-js.html#modul-za-dostop-do-datotečnega-sistema"><i class="fa fa-check"></i><b>5.1.6</b> Modul za dostop do datotečnega sistema</a></li>
<li class="chapter" data-level="5.1.7" data-path="Node-js.html"><a href="Node-js.html#modul-http"><i class="fa fa-check"></i><b>5.1.7</b> Modul <code>http</code></a></li>
<li class="chapter" data-level="5.1.8" data-path="Node-js.html"><a href="Node-js.html#tok-podatkov"><i class="fa fa-check"></i><b>5.1.8</b> Tok podatkov</a></li>
<li class="chapter" data-level="5.1.9" data-path="Node-js.html"><a href="Node-js.html#enostavni-datotečni-strežnik"><i class="fa fa-check"></i><b>5.1.9</b> Enostavni datotečni strežnik</a></li>
<li class="chapter" data-level="5.1.10" data-path="Node-js.html"><a href="Node-js.html#obvladovanje-napak"><i class="fa fa-check"></i><b>5.1.10</b> Obvladovanje napak</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="Node-js.html"><a href="Node-js.html#vzpostavitev-in-nastavitev-projekta"><i class="fa fa-check"></i><b>5.2</b> Vzpostavitev in nastavitev projekta</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="Node-js.html"><a href="Node-js.html#pregled-uporabljenih-orodij-express-node-in-npm"><i class="fa fa-check"></i><b>5.2.1</b> Pregled uporabljenih orodij Express, Node in <code>npm</code></a></li>
<li class="chapter" data-level="5.2.2" data-path="Node-js.html"><a href="Node-js.html#kreiranje-projekta-express"><i class="fa fa-check"></i><b>5.2.2</b> Kreiranje projekta Express</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="Node-js.html"><a href="Node-js.html#gradnja-aplikacije-z-mvc"><i class="fa fa-check"></i><b>5.3</b> Gradnja aplikacije z MVC</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="Node-js.html"><a href="Node-js.html#kratek-pregled-mvc-arhitekture"><i class="fa fa-check"></i><b>5.3.1</b> Kratek pregled MVC arhitekture</a></li>
<li class="chapter" data-level="5.3.2" data-path="Node-js.html"><a href="Node-js.html#kako-express-obdela-zahteve"><i class="fa fa-check"></i><b>5.3.2</b> Kako Express obdela zahteve?</a></li>
<li class="chapter" data-level="5.3.3" data-path="Node-js.html"><a href="Node-js.html#gradnja-statične-aplikacije-z-node-in-express"><i class="fa fa-check"></i><b>5.3.3</b> Gradnja statične aplikacije z Node in Express</a></li>
<li class="chapter" data-level="5.3.4" data-path="Node-js.html"><a href="Node-js.html#prilagoditev-ogrodja-express-za-mvc"><i class="fa fa-check"></i><b>5.3.4</b> Prilagoditev ogrodja Express za MVC</a></li>
<li class="chapter" data-level="5.3.5" data-path="Node-js.html"><a href="Node-js.html#dodajanje-zunanjih-knjižnic-za-prilagoditev-izgleda-strani"><i class="fa fa-check"></i><b>5.3.5</b> Dodajanje zunanjih knjižnic za prilagoditev izgleda strani</a></li>
<li class="chapter" data-level="5.3.6" data-path="Node-js.html"><a href="Node-js.html#opredelitev-usmerjevalnikov-v-express"><i class="fa fa-check"></i><b>5.3.6</b> Opredelitev usmerjevalnikov v Express</a></li>
<li class="chapter" data-level="5.3.7" data-path="Node-js.html"><a href="Node-js.html#izdelava-osnovnih-krmilnikov"><i class="fa fa-check"></i><b>5.3.7</b> Izdelava osnovnih krmilnikov</a></li>
<li class="chapter" data-level="5.3.8" data-path="Node-js.html"><a href="Node-js.html#dopolnitev-pogledov"><i class="fa fa-check"></i><b>5.3.8</b> Dopolnitev pogledov</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="Node-js.html"><a href="Node-js.html#strežba-aplikacije-v-različnih-okoljih"><i class="fa fa-check"></i><b>5.4</b> Strežba aplikacije v različnih okoljih</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="Node-js.html"><a href="Node-js.html#docker"><i class="fa fa-check"></i><b>5.4.1</b> Strežba aplikacije v okolju Docker</a></li>
<li class="chapter" data-level="5.4.2" data-path="Node-js.html"><a href="Node-js.html#strežba-aplikacije-na-fly"><i class="fa fa-check"></i><b>5.4.2</b> Strežba aplikacije na Fly</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III sklop: Zaledni del in dostop do podatkov</b></span></li>
<li class="chapter" data-level="6" data-path="PB-REST-API.html"><a href="PB-REST-API.html"><i class="fa fa-check"></i><b>6</b> <span class="sklop3 oznaka">P3.1</span> Podatkovna baza in REST API</a>
<ul>
<li class="chapter" data-level="6.1" data-path="PB-REST-API.html"><a href="PB-REST-API.html#priprava-podatkovnega-modela-za-mongodb-z-mongoose"><i class="fa fa-check"></i><b>6.1</b> Priprava podatkovnega modela za MongoDB z Mongoose</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="PB-REST-API.html"><a href="PB-REST-API.html#Povezovanje-Express-aplikacije-in-MongoDB-z-Mongoose"><i class="fa fa-check"></i><b>6.1.1</b> Povezovanje Express aplikacije in MongoDB z Mongoose</a></li>
<li class="chapter" data-level="6.1.2" data-path="PB-REST-API.html"><a href="PB-REST-API.html#zakaj-je-treba-modelirati-podatke"><i class="fa fa-check"></i><b>6.1.2</b> Zakaj je treba modelirati podatke?</a></li>
<li class="chapter" data-level="6.1.3" data-path="PB-REST-API.html"><a href="PB-REST-API.html#podatki-iz-registra"><i class="fa fa-check"></i><b>6.1.3</b> Podatki iz registra kulturne dediščine</a></li>
<li class="chapter" data-level="6.1.4" data-path="PB-REST-API.html"><a href="PB-REST-API.html#opredelitev-sheme-z-mongoose"><i class="fa fa-check"></i><b>6.1.4</b> Opredelitev sheme z Mongoose</a></li>
<li class="chapter" data-level="6.1.5" data-path="PB-REST-API.html"><a href="PB-REST-API.html#Uporaba-MongoDB-ukazne-lupine-za-dodajanje-podatkov"><i class="fa fa-check"></i><b>6.1.5</b> Uporaba MongoDB ukazne lupine za dodajanje podatkov</a></li>
<li class="chapter" data-level="6.1.6" data-path="PB-REST-API.html"><a href="PB-REST-API.html#uvoz-testnih-podatkov"><i class="fa fa-check"></i><b>6.1.6</b> Uvoz testnih podatkov</a></li>
<li class="chapter" data-level="6.1.7" data-path="PB-REST-API.html"><a href="PB-REST-API.html#vključitev-podatkovne-baze"><i class="fa fa-check"></i><b>6.1.7</b> Vključitev podatkovne baze</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="PB-REST-API.html"><a href="PB-REST-API.html#priprava-rest-api-ja-za-dostop-do-mongodb-podatkovne-baze"><i class="fa fa-check"></i><b>6.2</b> Priprava REST API-ja za dostop do MongoDB podatkovne baze</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="PB-REST-API.html"><a href="PB-REST-API.html#rest-api"><i class="fa fa-check"></i><b>6.2.1</b> REST API</a></li>
<li class="chapter" data-level="6.2.2" data-path="PB-REST-API.html"><a href="PB-REST-API.html#url-zahteva"><i class="fa fa-check"></i><b>6.2.2</b> URL zahteva</a></li>
<li class="chapter" data-level="6.2.3" data-path="PB-REST-API.html"><a href="PB-REST-API.html#metoda-zahteve"><i class="fa fa-check"></i><b>6.2.3</b> Metoda zahteve</a></li>
<li class="chapter" data-level="6.2.4" data-path="PB-REST-API.html"><a href="PB-REST-API.html#odgovor-podatek-in-status-api-ja"><i class="fa fa-check"></i><b>6.2.4</b> Odgovor (podatek in status) API-ja</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="PB-REST-API.html"><a href="PB-REST-API.html#Implementacija-API-ja-z-ogrodjem-Express"><i class="fa fa-check"></i><b>6.3</b> Implementacija API-ja z ogrodjem Express</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="PB-REST-API.html"><a href="PB-REST-API.html#priprava-usmerjevalnika"><i class="fa fa-check"></i><b>6.3.1</b> Priprava usmerjevalnika</a></li>
<li class="chapter" data-level="6.3.2" data-path="PB-REST-API.html"><a href="PB-REST-API.html#priprava-osnutka-krmilnika"><i class="fa fa-check"></i><b>6.3.2</b> Priprava osnutka krmilnika</a></li>
<li class="chapter" data-level="6.3.3" data-path="PB-REST-API.html"><a href="PB-REST-API.html#testiranje-osnutka-api-ja"><i class="fa fa-check"></i><b>6.3.3</b> Testiranje osnutka API-ja</a></li>
<li class="chapter" data-level="6.3.4" data-path="PB-REST-API.html"><a href="PB-REST-API.html#vključitev-modela"><i class="fa fa-check"></i><b>6.3.4</b> Vključitev modela</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="PB-REST-API.html"><a href="PB-REST-API.html#get-metode-za-branje-podatkov-iz-mongodb"><i class="fa fa-check"></i><b>6.4</b> GET metode za branje podatkov iz MongoDB</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="PB-REST-API.html"><a href="PB-REST-API.html#iskanje-dokumenta"><i class="fa fa-check"></i><b>6.4.1</b> Iskanje dokumenta</a></li>
<li class="chapter" data-level="6.4.2" data-path="PB-REST-API.html"><a href="PB-REST-API.html#iskanje-odvisnega-dokumenta"><i class="fa fa-check"></i><b>6.4.2</b> Iskanje odvisnega dokumenta</a></li>
<li class="chapter" data-level="6.4.3" data-path="PB-REST-API.html"><a href="PB-REST-API.html#geografsko-iskanje"><i class="fa fa-check"></i><b>6.4.3</b> Geografsko iskanje več dokumentov</a></li>
<li class="chapter" data-level="6.4.4" data-path="PB-REST-API.html"><a href="PB-REST-API.html#napredno-iskanje"><i class="fa fa-check"></i><b>6.4.4</b> Napredno iskanje</a></li>
<li class="chapter" data-level="6.4.5" data-path="PB-REST-API.html"><a href="PB-REST-API.html#seznami-sifrantov"><i class="fa fa-check"></i><b>6.4.5</b> Seznami šifrantov</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="Swagger.html"><a href="Swagger.html"><i class="fa fa-check"></i><b>7</b> <span class="sklop3 oznaka">P3.2</span> Načrtovanje s Swagger in OpenAPI</a>
<ul>
<li class="chapter" data-level="7.1" data-path="Swagger.html"><a href="Swagger.html#dokumentiranje-rest-api-ja-z-openapi-specifikacijo"><i class="fa fa-check"></i><b>7.1</b> Dokumentiranje REST API-ja z OpenAPI specifikacijo</a></li>
<li class="chapter" data-level="7.2" data-path="Swagger.html"><a href="Swagger.html#post-metode-za-dodajanje-podatkov-v-mongodb"><i class="fa fa-check"></i><b>7.2</b> POST metode za dodajanje podatkov v MongoDB</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="Swagger.html"><a href="Swagger.html#dodajanje-novih-dokumentov-v-mongodb"><i class="fa fa-check"></i><b>7.2.1</b> Dodajanje novih dokumentov v MongoDB</a></li>
<li class="chapter" data-level="7.2.2" data-path="Swagger.html"><a href="Swagger.html#dodajanje-odvisnih-dokumentov-v-mongodb"><i class="fa fa-check"></i><b>7.2.2</b> Dodajanje odvisnih dokumentov v MongoDB</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="Swagger.html"><a href="Swagger.html#put-metode-za-ažuriranje-podatkov-v-mongodb"><i class="fa fa-check"></i><b>7.3</b> PUT metode za ažuriranje podatkov v MongoDB</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="Swagger.html"><a href="Swagger.html#posodobitev-obstoječega-dokumenta-v-mongodb"><i class="fa fa-check"></i><b>7.3.1</b> Posodobitev obstoječega dokumenta v MongoDB</a></li>
<li class="chapter" data-level="7.3.2" data-path="Swagger.html"><a href="Swagger.html#PUT-odvisni-dokument"><i class="fa fa-check"></i><b>7.3.2</b> Posodobitev obstoječega odvisnega dokumenta v MongoDB</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="Swagger.html"><a href="Swagger.html#delete-metode-za-brisanje-podatkov-iz-mongodb"><i class="fa fa-check"></i><b>7.4</b> DELETE metode za brisanje podatkov iz MongoDB</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="Swagger.html"><a href="Swagger.html#DELETE-comment"><i class="fa fa-check"></i><b>7.4.1</b> Brisanje obstoječega komentarja</a></li>
<li class="chapter" data-level="7.4.2" data-path="Swagger.html"><a href="Swagger.html#brisanje-dokumentov"><i class="fa fa-check"></i><b>7.4.2</b> Brisanje dokumentov</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="Swagger.html"><a href="Swagger.html#uporaba-rest-api-ja-v-express-aplikaciji"><i class="fa fa-check"></i><b>7.5</b> Uporaba REST API-ja v Express aplikaciji</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="Swagger.html"><a href="Swagger.html#priprava-na-api-klic-iz-express-aplikacije"><i class="fa fa-check"></i><b>7.5.1</b> Priprava na API klic iz Express aplikacije</a></li>
<li class="chapter" data-level="7.5.2" data-path="Swagger.html"><a href="Swagger.html#pridobitev-seznama-lokacij-preko-api-ja"><i class="fa fa-check"></i><b>7.5.2</b> Pridobitev seznama lokacij preko API-ja</a></li>
<li class="chapter" data-level="7.5.3" data-path="Swagger.html"><a href="Swagger.html#priprava-novega-pogleda-seznama"><i class="fa fa-check"></i><b>7.5.3</b> Priprava novega pogleda seznama</a></li>
<li class="chapter" data-level="7.5.4" data-path="Swagger.html"><a href="Swagger.html#axios-zunanji-viri"><i class="fa fa-check"></i><b>7.5.4</b> Vključitev ostalih podatkov iz zunanjih virov</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="Swagger.html"><a href="Swagger.html#izboljšanje-zmogljivosti-api-ja"><i class="fa fa-check"></i><b>7.6</b> Izboljšanje zmogljivosti API-ja</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="Swagger.html"><a href="Swagger.html#porazdelitev-po-straneh"><i class="fa fa-check"></i><b>7.6.1</b> Porazdelitev po straneh</a></li>
<li class="chapter" data-level="7.6.2" data-path="Swagger.html"><a href="Swagger.html#asinhrono-beleženje"><i class="fa fa-check"></i><b>7.6.2</b> Asinhrono beleženje</a></li>
<li class="chapter" data-level="7.6.3" data-path="Swagger.html"><a href="Swagger.html#predpomnjenje"><i class="fa fa-check"></i><b>7.6.3</b> Predpomnjenje</a></li>
<li class="chapter" data-level="7.6.4" data-path="Swagger.html"><a href="Swagger.html#stiskanje-koristne-vsebine"><i class="fa fa-check"></i><b>7.6.4</b> Stiskanje koristne vsebine</a></li>
<li class="chapter" data-level="7.6.5" data-path="Swagger.html"><a href="Swagger.html#bazen-povezav"><i class="fa fa-check"></i><b>7.6.5</b> Bazen povezav</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV sklop: Uporabniški vmesnik</b></span></li>
<li class="chapter" data-level="8" data-path="Angular.html"><a href="Angular.html"><i class="fa fa-check"></i><b>8</b> <span class="sklop4 oznaka">P4.1</span> TypeScript in Angular</a>
<ul>
<li class="chapter" data-level="8.1" data-path="Angular.html"><a href="Angular.html#Dodajanje-Angular-komponent-v-Express-aplikacijo"><i class="fa fa-check"></i><b>8.1</b> Dodajanje Angular komponent v Express aplikacijo</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="Angular.html"><a href="Angular.html#namestitev-ogrodja-angular"><i class="fa fa-check"></i><b>8.1.1</b> Namestitev ogrodja Angular</a></li>
<li class="chapter" data-level="8.1.2" data-path="Angular.html"><a href="Angular.html#jezik-typescript"><i class="fa fa-check"></i><b>8.1.2</b> Jezik TypeScript</a></li>
<li class="chapter" data-level="8.1.3" data-path="Angular.html"><a href="Angular.html#kreiranje-in-zagon-angular-aplikacije"><i class="fa fa-check"></i><b>8.1.3</b> Kreiranje in zagon Angular aplikacije</a></li>
<li class="chapter" data-level="8.1.4" data-path="Angular.html"><a href="Angular.html#Izvorna-koda-Angular-aplikacije"><i class="fa fa-check"></i><b>8.1.4</b> Izvorna koda Angular aplikacije</a></li>
<li class="chapter" data-level="8.1.5" data-path="Angular.html"><a href="Angular.html#generiranje-angular-aplikacije-v-jeziku-javascript"><i class="fa fa-check"></i><b>8.1.5</b> Generiranje Angular aplikacije v jeziku JavaScript</a></li>
<li class="chapter" data-level="8.1.6" data-path="Angular.html"><a href="Angular.html#komponenta-za-prikaz-podatkov"><i class="fa fa-check"></i><b>8.1.6</b> Komponenta za prikaz podatkov</a></li>
<li class="chapter" data-level="8.1.7" data-path="Angular.html"><a href="Angular.html#Pridobivanje-podatkov-preko-REST-API-ja"><i class="fa fa-check"></i><b>8.1.7</b> Pridobivanje podatkov preko REST API-ja</a></li>
<li class="chapter" data-level="8.1.8" data-path="Angular.html"><a href="Angular.html#prenos-angular-aplikacije-v-produkcijsko-okolje"><i class="fa fa-check"></i><b>8.1.8</b> Prenos Angular aplikacije v produkcijsko okolje</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="Angular.html"><a href="Angular.html#izdelava-angular-spa-aplikacije-na-eni-strani"><i class="fa fa-check"></i><b>8.2</b> Izdelava Angular SPA aplikacije na eni strani</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="Angular.html"><a href="Angular.html#Prehod-iz-Express-usmerjanja-na-Angular-usmerjanje"><i class="fa fa-check"></i><b>8.2.1</b> Prehod iz Express usmerjanja na Angular usmerjanje</a></li>
<li class="chapter" data-level="8.2.2" data-path="Angular.html"><a href="Angular.html#navigacija-med-stranmi"><i class="fa fa-check"></i><b>8.2.2</b> Navigacija med stranmi</a></li>
<li class="chapter" data-level="8.2.3" data-path="Angular.html"><a href="Angular.html#modularna-zasnova-aplikacije-z-vgnezdenimi-komponentami"><i class="fa fa-check"></i><b>8.2.3</b> Modularna zasnova aplikacije z vgnezdenimi komponentami</a></li>
<li class="chapter" data-level="8.2.4" data-path="Angular.html"><a href="Angular.html#dodajanje-html-geolokacije-za-iskanje-bližnjih-lokacij"><i class="fa fa-check"></i><b>8.2.4</b> Dodajanje HTML geolokacije za iskanje bližnjih lokacij</a></li>
<li class="chapter" data-level="8.2.5" data-path="Angular.html"><a href="Angular.html#prikaz-zvezdic-v-obliki-ponovno-uporabne-komponente"><i class="fa fa-check"></i><b>8.2.5</b> Prikaz zvezdic v obliki ponovno uporabne komponente</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="Angular-SPA.html"><a href="Angular-SPA.html"><i class="fa fa-check"></i><b>9</b> <span class="sklop4 oznaka">P4.2</span> Angular SPA</a>
<ul>
<li class="chapter" data-level="9.1" data-path="Angular-SPA.html"><a href="Angular-SPA.html#kompleksnejši-pogledi-s-parametri-usmerjevanja"><i class="fa fa-check"></i><b>9.1</b> Kompleksnejši pogledi s parametri usmerjevanja</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="Angular-SPA.html"><a href="Angular-SPA.html#sprememba-strukture-strani"><i class="fa fa-check"></i><b>9.1.1</b> Sprememba strukture strani</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="Angular-SPA.html"><a href="Angular-SPA.html#dodajanje-usmerjanja-z-url-parametri"><i class="fa fa-check"></i><b>9.2</b> Dodajanje usmerjanja z URL parametri</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="Angular-SPA.html"><a href="Angular-SPA.html#prenos-podatkov-do-komponente-s-podrobnostmi-lokacije"><i class="fa fa-check"></i><b>9.2.1</b> Prenos podatkov do komponente s podrobnostmi lokacije</a></li>
<li class="chapter" data-level="9.2.2" data-path="Angular-SPA.html"><a href="Angular-SPA.html#pogled-podrobnosti-lokacije"><i class="fa fa-check"></i><b>9.2.2</b> Pogled podrobnosti lokacije</a></li>
<li class="chapter" data-level="9.2.3" data-path="Angular-SPA.html"><a href="Angular-SPA.html#varnostne-izjeme-pri-prikazovanju-zunanjih-podatkov"><i class="fa fa-check"></i><b>9.2.3</b> Varnostne izjeme pri prikazovanju zunanjih podatkov</a></li>
<li class="chapter" data-level="9.2.4" data-path="Angular-SPA.html"><a href="Angular-SPA.html#sprememba-vrstnega-reda-prikaza-komentarjev"><i class="fa fa-check"></i><b>9.2.4</b> Sprememba vrstnega reda prikaza komentarjev</a></li>
<li class="chapter" data-level="9.2.5" data-path="Angular-SPA.html"><a href="Angular-SPA.html#formatiranje-datuma"><i class="fa fa-check"></i><b>9.2.5</b> Formatiranje datuma</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="Angular-SPA.html"><a href="Angular-SPA.html#delo-s-spletnimi-obrazci-in-pošiljanje-podatkov"><i class="fa fa-check"></i><b>9.3</b> Delo s spletnimi obrazci in pošiljanje podatkov</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="Angular-SPA.html"><a href="Angular-SPA.html#priprava-modalnega-okna"><i class="fa fa-check"></i><b>9.3.1</b> Priprava modalnega okna</a></li>
<li class="chapter" data-level="9.3.2" data-path="Angular-SPA.html"><a href="Angular-SPA.html#dodajanje-spletnega-obrazca"><i class="fa fa-check"></i><b>9.3.2</b> Dodajanje spletnega obrazca</a></li>
<li class="chapter" data-level="9.3.3" data-path="Angular-SPA.html"><a href="Angular-SPA.html#povezovanje-podatkov-in-vnosnih-polj-obrazca"><i class="fa fa-check"></i><b>9.3.3</b> Povezovanje podatkov in vnosnih polj obrazca</a></li>
<li class="chapter" data-level="9.3.4" data-path="Angular-SPA.html"><a href="Angular-SPA.html#posredovanje-podatkov-spletnega-obrazca-na-rest-api"><i class="fa fa-check"></i><b>9.3.4</b> Posredovanje podatkov spletnega obrazca na REST API</a></li>
<li class="chapter" data-level="9.3.5" data-path="Angular-SPA.html"><a href="Angular-SPA.html#brisanje-komentarjev"><i class="fa fa-check"></i><b>9.3.5</b> Brisanje komentarjev</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="Angular-SPA.html"><a href="Angular-SPA.html#izboljšava-arhitekture"><i class="fa fa-check"></i><b>9.4</b> Izboljšava arhitekture</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="Angular-SPA.html"><a href="Angular-SPA.html#locitev-usmerjanja"><i class="fa fa-check"></i><b>9.4.1</b> Ločitev usmerjanja</a></li>
<li class="chapter" data-level="9.4.2" data-path="Angular-SPA.html"><a href="Angular-SPA.html#opredelitev-razredov"><i class="fa fa-check"></i><b>9.4.2</b> Opredelitev razredov</a></li>
<li class="chapter" data-level="9.4.3" data-path="Angular-SPA.html"><a href="Angular-SPA.html#Organizacija-izvorne-kode-v-mape"><i class="fa fa-check"></i><b>9.4.3</b> Organizacija izvorne kode v mape</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="Angular-SPA.html"><a href="Angular-SPA.html#zamenjava-strežniške-aplikacije-s-spa-aplikacijo"><i class="fa fa-check"></i><b>9.5</b> Zamenjava strežniške aplikacije s SPA aplikacijo</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="Angular-SPA.html"><a href="Angular-SPA.html#preusmeritev-zahtev-na-angular-spa"><i class="fa fa-check"></i><b>9.5.1</b> Preusmeritev zahtev na Angular SPA</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="Angular-SPA.html"><a href="Angular-SPA.html#dodatni-gradniki-angular-aplikacije"><i class="fa fa-check"></i><b>9.6</b> Dodatni gradniki Angular aplikacije</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="Avtentikacija.html"><a href="Avtentikacija.html"><i class="fa fa-check"></i><b>10</b> <span class="sklop4 oznaka">P4.3</span> Preverjanje istovetnosti uporabnika</a>
<ul>
<li class="chapter" data-level="10.1" data-path="Avtentikacija.html"><a href="Avtentikacija.html#način-avtentikacije-z-uporabo-mean-sklada-tehnologij"><i class="fa fa-check"></i><b>10.1</b> Način avtentikacije z uporabo MEAN sklada tehnologij</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="Avtentikacija.html"><a href="Avtentikacija.html#klasični-pristop-avtentikacije-pri-strežniški-aplikaciji"><i class="fa fa-check"></i><b>10.1.1</b> Klasični pristop avtentikacije pri strežniški aplikaciji</a></li>
<li class="chapter" data-level="10.1.2" data-path="Avtentikacija.html"><a href="Avtentikacija.html#avtentikacija-z-mean-skladom-tehnologij"><i class="fa fa-check"></i><b>10.1.2</b> Avtentikacija z MEAN skladom tehnologij</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="Avtentikacija.html"><a href="Avtentikacija.html#kreiranje-sheme-uporabnikov-v-mongodb"><i class="fa fa-check"></i><b>10.2</b> Kreiranje sheme uporabnikov v MongoDB</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="Avtentikacija.html"><a href="Avtentikacija.html#enosmerno-šifriranje-gesel"><i class="fa fa-check"></i><b>10.2.1</b> Enosmerno šifriranje gesel</a></li>
<li class="chapter" data-level="10.2.2" data-path="Avtentikacija.html"><a href="Avtentikacija.html#Kreiranje-sheme-z-Mongoose"><i class="fa fa-check"></i><b>10.2.2</b> Kreiranje sheme z Mongoose</a></li>
<li class="chapter" data-level="10.2.3" data-path="Avtentikacija.html"><a href="Avtentikacija.html#šifriranje-uporabniškega-gesla"><i class="fa fa-check"></i><b>10.2.3</b> Šifriranje uporabniškega gesla</a></li>
<li class="chapter" data-level="10.2.4" data-path="Avtentikacija.html"><a href="Avtentikacija.html#preverjanje-ustreznosti-podanega-gesla"><i class="fa fa-check"></i><b>10.2.4</b> Preverjanje ustreznosti podanega gesla</a></li>
<li class="chapter" data-level="10.2.5" data-path="Avtentikacija.html"><a href="Avtentikacija.html#generiranje-json-spletnega-žetona-jwt"><i class="fa fa-check"></i><b>10.2.5</b> Generiranje JSON spletnega žetona (JWT)</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="Avtentikacija.html"><a href="Avtentikacija.html#Priprava-API-ja-za-avtentikacijo"><i class="fa fa-check"></i><b>10.3</b> Priprava API-ja za avtentikacijo</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="Avtentikacija.html"><a href="Avtentikacija.html#namestitev-in-konfiguracija-passporta"><i class="fa fa-check"></i><b>10.3.1</b> Namestitev in konfiguracija Passporta</a></li>
<li class="chapter" data-level="10.3.2" data-path="Avtentikacija.html"><a href="Avtentikacija.html#kreiranje-api-dostopne-točke-in-vračanje-json-spletnih-žetonov-jwt"><i class="fa fa-check"></i><b>10.3.2</b> Kreiranje API dostopne točke in vračanje JSON spletnih žetonov (JWT)</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="Avtentikacija.html"><a href="Avtentikacija.html#Varnostna-zascita-izbranih-API-dostopnih-tock"><i class="fa fa-check"></i><b>10.4</b> Varnostna zaščita izbranih API dostopnih točk</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="Avtentikacija.html"><a href="Avtentikacija.html#dodajanje-vmesne-avtentikacijske-ravni-pri-express-usmerjanju"><i class="fa fa-check"></i><b>10.4.1</b> Dodajanje vmesne avtentikacijske ravni pri Express usmerjanju</a></li>
<li class="chapter" data-level="10.4.2" data-path="Avtentikacija.html"><a href="Avtentikacija.html#uporaba-informacij-iz-jwt-v-express-krmilniku"><i class="fa fa-check"></i><b>10.4.2</b> Uporaba informacij iz JWT v Express krmilniku</a></li>
<li class="chapter" data-level="10.4.3" data-path="Avtentikacija.html"><a href="Avtentikacija.html#avtorizacija-azuriranje"><i class="fa fa-check"></i><b>10.4.3</b> Avtorizacija pri ažuriranju komentarja</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="Avtentikacija.html"><a href="Avtentikacija.html#Priprava-storitve-avtentikacije-v-Angular"><i class="fa fa-check"></i><b>10.5</b> Priprava storitve avtentikacije v Angular</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="Avtentikacija.html"><a href="Avtentikacija.html#obvladovanje-seje-uporabnika-v-angular"><i class="fa fa-check"></i><b>10.5.1</b> Obvladovanje seje uporabnika v Angular</a></li>
<li class="chapter" data-level="10.5.2" data-path="Avtentikacija.html"><a href="Avtentikacija.html#omogočanje-registracije-prijave-in-odjave-uporabnikov"><i class="fa fa-check"></i><b>10.5.2</b> Omogočanje registracije, prijave in odjave uporabnikov</a></li>
<li class="chapter" data-level="10.5.3" data-path="Avtentikacija.html"><a href="Avtentikacija.html#uporaba-podatkov-iz-jwt-v-angular-storitvi"><i class="fa fa-check"></i><b>10.5.3</b> Uporaba podatkov iz JWT v Angular storitvi</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="Avtentikacija.html"><a href="Avtentikacija.html#Priprava-strani-za-registracijo-in-prijavo-uporabnika"><i class="fa fa-check"></i><b>10.6</b> Priprava strani za registracijo in prijavo uporabnika</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="Avtentikacija.html"><a href="Avtentikacija.html#priprava-strani-za-registracijo"><i class="fa fa-check"></i><b>10.6.1</b> Priprava strani za registracijo</a></li>
<li class="chapter" data-level="10.6.2" data-path="Avtentikacija.html"><a href="Avtentikacija.html#priprava-strani-za-prijavo"><i class="fa fa-check"></i><b>10.6.2</b> Priprava strani za prijavo</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="Avtentikacija.html"><a href="Avtentikacija.html#uporaba-avtentikacije-v-angular-aplikaciji"><i class="fa fa-check"></i><b>10.7</b> Uporaba avtentikacije v Angular aplikaciji</a>
<ul>
<li class="chapter" data-level="10.7.1" data-path="Avtentikacija.html"><a href="Avtentikacija.html#posodobitev-navigacije"><i class="fa fa-check"></i><b>10.7.1</b> Posodobitev navigacije</a></li>
<li class="chapter" data-level="10.7.2" data-path="Avtentikacija.html"><a href="Avtentikacija.html#podpora-zgodovini-brskanja"><i class="fa fa-check"></i><b>10.7.2</b> Podpora zgodovini brskanja</a></li>
<li class="chapter" data-level="10.7.3" data-path="Avtentikacija.html"><a href="Avtentikacija.html#dodajanje-uporabnika-v-komentar"><i class="fa fa-check"></i><b>10.7.3</b> Dodajanje uporabniških podatkov v komentar</a></li>
<li class="chapter" data-level="10.7.4" data-path="Avtentikacija.html"><a href="Avtentikacija.html#brisanje-lastnih-komentarjev"><i class="fa fa-check"></i><b>10.7.4</b> Brisanje lastnih komentarjev</a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path="Avtentikacija.html"><a href="Avtentikacija.html#nastavitve-v-brskalniku"><i class="fa fa-check"></i><b>10.8</b> Shranjevanje uporabniških nastavitev v brskalniku</a></li>
<li class="chapter" data-level="10.9" data-path="Avtentikacija.html"><a href="Avtentikacija.html#auth-guard"><i class="fa fa-check"></i><b>10.9</b> Auth Guard</a>
<ul>
<li class="chapter" data-level="10.9.1" data-path="Avtentikacija.html"><a href="Avtentikacija.html#vrste"><i class="fa fa-check"></i><b>10.9.1</b> Vrste</a></li>
<li class="chapter" data-level="10.9.2" data-path="Avtentikacija.html"><a href="Avtentikacija.html#canRegister"><i class="fa fa-check"></i><b>10.9.2</b> Onemogočenje registracije prijavljenim uporabnikom</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V sklop: Decentralizirane aplikacije in veriga blokov</b></span></li>
<li class="chapter" data-level="11" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html"><i class="fa fa-check"></i><b>11</b> <span class="sklop5 oznaka">P5.1</span> DApps, pametne pogodbe in Solidity</a>
<ul>
<li class="chapter" data-level="11.1" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#decentralizirane-aplikacije"><i class="fa fa-check"></i><b>11.1</b> Decentralizirane aplikacije</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#kaj-je-decentralizirana-aplikacija-dapp"><i class="fa fa-check"></i><b>11.1.1</b> Kaj je decentralizirana aplikacija (DApp)?</a></li>
<li class="chapter" data-level="11.1.2" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#omrežje-ethereum"><i class="fa fa-check"></i><b>11.1.2</b> Omrežje Ethereum</a></li>
<li class="chapter" data-level="11.1.3" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#terminologija-dapp"><i class="fa fa-check"></i><b>11.1.3</b> Terminologija DApp</a></li>
<li class="chapter" data-level="11.1.4" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#decentralizirane-in-porazdeljene-aplikacije"><i class="fa fa-check"></i><b>11.1.4</b> Decentralizirane in porazdeljene aplikacije</a></li>
<li class="chapter" data-level="11.1.5" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#primeri-dobrih-praks"><i class="fa fa-check"></i><b>11.1.5</b> Primeri dobrih praks</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#veriga-blokov"><i class="fa fa-check"></i><b>11.2</b> Veriga blokov</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#sklad-tehnologij-za-podporo-dapp"><i class="fa fa-check"></i><b>11.2.1</b> Sklad tehnologij za podporo DApp</a></li>
<li class="chapter" data-level="11.2.2" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#podrobnosti-vozlišča-ethereum"><i class="fa fa-check"></i><b>11.2.2</b> Podrobnosti vozlišča Ethereum</a></li>
<li class="chapter" data-level="11.2.3" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#življenjski-cikel-transakcije"><i class="fa fa-check"></i><b>11.2.3</b> Življenjski cikel transakcije</a></li>
<li class="chapter" data-level="11.2.4" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#razvijalski-pogled-na-postavitev-pametne-pogodbe"><i class="fa fa-check"></i><b>11.2.4</b> Razvijalski pogled na postavitev pametne pogodbe</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#platforma-ethereum"><i class="fa fa-check"></i><b>11.3</b> Platforma Ethereum</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#pametne-pogodbe-kot-osnova-dapp"><i class="fa fa-check"></i><b>11.3.1</b> Pametne pogodbe kot osnova DApp</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#programiranje-pametnih-pogodb-s-solidity"><i class="fa fa-check"></i><b>11.4</b> Programiranje pametnih pogodb s Solidity</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#Struktura-pogodbe"><i class="fa fa-check"></i><b>11.4.1</b> Struktura pogodbe</a></li>
<li class="chapter" data-level="11.4.2" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#razvoj-enostavne-pogodbe"><i class="fa fa-check"></i><b>11.4.2</b> Razvoj enostavne pogodbe</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#razvoj-kompleksnih-pametnih-pogodb"><i class="fa fa-check"></i><b>11.5</b> Razvoj kompleksnih pametnih pogodb</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#spremenljivke-stanja"><i class="fa fa-check"></i><b>11.5.1</b> Spremenljivke stanja</a></li>
<li class="chapter" data-level="11.5.2" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#konstruktor"><i class="fa fa-check"></i><b>11.5.2</b> Konstruktor</a></li>
<li class="chapter" data-level="11.5.3" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#funkcije-za-podporo-množični-prodaji"><i class="fa fa-check"></i><b>11.5.3</b> Funkcije za podporo množični prodaji</a></li>
<li class="chapter" data-level="11.5.4" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#testiranje-množične-prodaje"><i class="fa fa-check"></i><b>11.5.4</b> Testiranje množične prodaje</a></li>
<li class="chapter" data-level="11.5.5" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#večkratno-dedovanje"><i class="fa fa-check"></i><b>11.5.5</b> Večkratno dedovanje</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#objektno-usmerjene-lastnosti-pametnih-pogodb"><i class="fa fa-check"></i><b>11.6</b> Objektno usmerjene lastnosti pametnih pogodb</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#dedovanje"><i class="fa fa-check"></i><b>11.6.1</b> Dedovanje</a></li>
<li class="chapter" data-level="11.6.2" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#abstraktne-pogodbe"><i class="fa fa-check"></i><b>11.6.2</b> Abstraktne pogodbe</a></li>
<li class="chapter" data-level="11.6.3" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#vmesniki"><i class="fa fa-check"></i><b>11.6.3</b> Vmesniki</a></li>
<li class="chapter" data-level="11.6.4" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#knjižnice"><i class="fa fa-check"></i><b>11.6.4</b> Knjižnice</a></li>
<li class="chapter" data-level="11.6.5" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#skladnost-s-standardom-erc20"><i class="fa fa-check"></i><b>11.6.5</b> Skladnost s standardom <code>ERC20</code></a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="DApps-pametne-pogodbe.html"><a href="DApps-pametne-pogodbe.html#ekosistem-ethereum"><i class="fa fa-check"></i><b>11.7</b> Ekosistem Ethereum</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="LP2.html"><a href="LP2.html"><i class="fa fa-check"></i><b>12</b> <span class="sklop5 oznaka">2. LP</span> Decentralizirana aplikacija na verigi blokov</a>
<ul>
<li class="chapter" data-level="12.1" data-path="LP2.html"><a href="LP2.html#pravila-zahteve-in-omejitve-1"><i class="fa fa-check"></i><b>12.1</b> Pravila, zahteve in omejitve</a></li>
<li class="chapter" data-level="12.2" data-path="LP2.html"><a href="LP2.html#kriteriji-vrednotenja-1"><i class="fa fa-check"></i><b>12.2</b> Kriteriji vrednotenja</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html"><i class="fa fa-check"></i><b>13</b> <span class="sklop5 oznaka">P5.2</span> Truffle in Web3</a>
<ul>
<li class="chapter" data-level="13.1" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#izdelava-decentralizirane-aplikacije"><i class="fa fa-check"></i><b>13.1</b> Izdelava decentralizirane aplikacije</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#opredelitev-zahtev-decentralizirane-aplikacije-za-glasovanje"><i class="fa fa-check"></i><b>13.1.1</b> Opredelitev zahtev decentralizirane aplikacije za glasovanje</a></li>
<li class="chapter" data-level="13.1.2" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#razvojni-načrt"><i class="fa fa-check"></i><b>13.1.2</b> Razvojni načrt</a></li>
<li class="chapter" data-level="13.1.3" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#Truffle-projekt"><i class="fa fa-check"></i><b>13.1.3</b> Truffle projekt</a></li>
<li class="chapter" data-level="13.1.4" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#razvoj-pametne-pogodbe"><i class="fa fa-check"></i><b>13.1.4</b> Razvoj pametne pogodbe</a></li>
<li class="chapter" data-level="13.1.5" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#lastna-privatna-veriga-blokov"><i class="fa fa-check"></i><b>13.1.5</b> Lastna privatna veriga blokov</a></li>
<li class="chapter" data-level="13.1.6" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#prevajanje-in-postavitev-pametne-pogodbe"><i class="fa fa-check"></i><b>13.1.6</b> Prevajanje in postavitev pametne pogodbe</a></li>
<li class="chapter" data-level="13.1.7" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#testi-enot"><i class="fa fa-check"></i><b>13.1.7</b> Testi enot</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#uporabniški-vmesnik"><i class="fa fa-check"></i><b>13.2</b> Uporabniški vmesnik</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#priprava-odvisnosti"><i class="fa fa-check"></i><b>13.2.1</b> Priprava odvisnosti</a></li>
<li class="chapter" data-level="13.2.2" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#spletna-stran"><i class="fa fa-check"></i><b>13.2.2</b> Spletna stran</a></li>
<li class="chapter" data-level="13.2.3" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#web3-aplikacija-kot-angular-komponenta"><i class="fa fa-check"></i><b>13.2.3</b> Web3 aplikacija kot Angular komponenta</a></li>
<li class="chapter" data-level="13.2.4" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#opredelitev-izgleda"><i class="fa fa-check"></i><b>13.2.4</b> Opredelitev izgleda</a></li>
<li class="chapter" data-level="13.2.5" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#povezava-na-verigo-blokov"><i class="fa fa-check"></i><b>13.2.5</b> Povezava na verigo blokov</a></li>
<li class="chapter" data-level="13.2.6" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#podpora-funkcionalnostim-neregistriranega-volivca"><i class="fa fa-check"></i><b>13.2.6</b> Podpora funkcionalnostim neregistriranega volivca</a></li>
<li class="chapter" data-level="13.2.7" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#podpora-funkcionalnostim-registriranega-volivca"><i class="fa fa-check"></i><b>13.2.7</b> Podpora funkcionalnostim registriranega volivca</a></li>
<li class="chapter" data-level="13.2.8" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#podpora-funkcionalnostim-skrbnika"><i class="fa fa-check"></i><b>13.2.8</b> Podpora funkcionalnostim skrbnika</a></li>
<li class="chapter" data-level="13.2.9" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#obvladovanje-dogodkov-v-okviru-dapp"><i class="fa fa-check"></i><b>13.2.9</b> Obvladovanje dogodkov v okviru DApp</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#testiranje-decentralizirane-aplikacije-za-glasovanje"><i class="fa fa-check"></i><b>13.3</b> Testiranje decentralizirane aplikacije za glasovanje</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#zagon-osebne-verige-blokov-ganache"><i class="fa fa-check"></i><b>13.3.1</b> Zagon osebne verige blokov Ganache</a></li>
<li class="chapter" data-level="13.3.2" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#dostop-do-racunov-metamask"><i class="fa fa-check"></i><b>13.3.2</b> Dostop do računov preko MetaMask</a></li>
<li class="chapter" data-level="13.3.3" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#postavitev-pametne-pogodbe-na-verigo-blokov"><i class="fa fa-check"></i><b>13.3.3</b> Postavitev pametne pogodbe na verigo blokov</a></li>
<li class="chapter" data-level="13.3.4" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#povezovanje-metamask-z-dapp"><i class="fa fa-check"></i><b>13.3.4</b> Povezovanje MetaMask z DApp</a></li>
<li class="chapter" data-level="13.3.5" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#faza-registracije-volivcev"><i class="fa fa-check"></i><b>13.3.5</b> Faza registracije volivcev</a></li>
<li class="chapter" data-level="13.3.6" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#faza-začetka-sprejemanja-predlogov"><i class="fa fa-check"></i><b>13.3.6</b> Faza začetka sprejemanja predlogov</a></li>
<li class="chapter" data-level="13.3.7" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#faza-konca-sprejemanja-predlogov"><i class="fa fa-check"></i><b>13.3.7</b> Faza konca sprejemanja predlogov</a></li>
<li class="chapter" data-level="13.3.8" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#faza-začetka-glasovanja"><i class="fa fa-check"></i><b>13.3.8</b> Faza začetka glasovanja</a></li>
<li class="chapter" data-level="13.3.9" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#faza-konca-glasovanja"><i class="fa fa-check"></i><b>13.3.9</b> Faza konca glasovanja</a></li>
<li class="chapter" data-level="13.3.10" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#zaključna-faza-preštetih-glasov"><i class="fa fa-check"></i><b>13.3.10</b> Zaključna faza preštetih glasov</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#varna-postavitev"><i class="fa fa-check"></i><b>13.4</b> Postavitev pametne pogodbe na zaščiteno verigo blokov</a></li>
<li class="chapter" data-level="13.5" data-path="Truffle-Web3.html"><a href="Truffle-Web3.html#postavitev-pametne-pogodbe-s-pomočjo-metamask"><i class="fa fa-check"></i><b>13.5</b> Postavitev pametne pogodbe s pomočjo MetaMask</a></li>
</ul></li>
<li class="part"><span><b>VI sklop: Dodatne funkcionalnosti</b></span></li>
<li class="chapter" data-level="14" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html"><i class="fa fa-check"></i><b>14</b> <span class="sklop6 oznaka">P6.1</span> Varnost spletnih aplikacij, testiranje in progresivne spletne aplikacije</a>
<ul>
<li class="chapter" data-level="14.1" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#odprtokodni-projekt-varnosti-spletnih-aplikacij-owasp"><i class="fa fa-check"></i><b>14.1</b> Odprtokodni projekt varnosti spletnih aplikacij OWASP</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#uvod-2"><i class="fa fa-check"></i><b>14.1.1</b> Uvod</a></li>
<li class="chapter" data-level="14.1.2" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#trend-največjih-varnostnih-tveganj-spletnih-aplikacij"><i class="fa fa-check"></i><b>14.1.2</b> Trend največjih varnostnih tveganj spletnih aplikacij</a></li>
<li class="chapter" data-level="14.1.3" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#ovrednotenje-varnostnih-tveganj-aplikacije"><i class="fa fa-check"></i><b>14.1.3</b> Ovrednotenje varnostnih tveganj aplikacije</a></li>
<li class="chapter" data-level="14.1.4" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#A1-2021"><i class="fa fa-check"></i><b>14.1.4</b> A1:2021 - Neustrezen nadzor dostopa</a></li>
<li class="chapter" data-level="14.1.5" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#A2-2021"><i class="fa fa-check"></i><b>14.1.5</b> A2:2021 - Kriptografske napake</a></li>
<li class="chapter" data-level="14.1.6" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#A3-2021"><i class="fa fa-check"></i><b>14.1.6</b> A3:2021 - Vrivanje zlonamerne kode</a></li>
<li class="chapter" data-level="14.1.7" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#A4-2021"><i class="fa fa-check"></i><b>14.1.7</b> A4:2021 - Nevaren načrt</a></li>
<li class="chapter" data-level="14.1.8" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#A5-2021"><i class="fa fa-check"></i><b>14.1.8</b> A5:2021 - Napačna varnostna konfiguracija</a></li>
<li class="chapter" data-level="14.1.9" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#A6-2021"><i class="fa fa-check"></i><b>14.1.9</b> A6:2021 - Ranljive in zastarele komponente</a></li>
<li class="chapter" data-level="14.1.10" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#A7-2021"><i class="fa fa-check"></i><b>14.1.10</b> A7:2021 - Napake pri identifikaciji in avtentikaciji</a></li>
<li class="chapter" data-level="14.1.11" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#A8-2021"><i class="fa fa-check"></i><b>14.1.11</b> A8:2021 - Napake v programski opremi in integriteti podatkov</a></li>
<li class="chapter" data-level="14.1.12" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#A9-2021"><i class="fa fa-check"></i><b>14.1.12</b> A9:2021 - Varnostno beleženje in spremljanje napak</a></li>
<li class="chapter" data-level="14.1.13" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#A10-2021"><i class="fa fa-check"></i><b>14.1.13</b> A10:2021 - Ponarejanje zahtev na strani strežnika (SSRF)</a></li>
<li class="chapter" data-level="14.1.14" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#priporočila-za-razvijalce"><i class="fa fa-check"></i><b>14.1.14</b> Priporočila za razvijalce</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#osnovni-varnostni-pregled-demo-aplikacije-z-owasp-zap"><i class="fa fa-check"></i><b>14.2</b> Osnovni varnostni pregled Demo aplikacije z OWASP ZAP</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#priprava-demo-aplikacije-v-lokalnem-okolju"><i class="fa fa-check"></i><b>14.2.1</b> Priprava Demo aplikacije v lokalnem okolju</a></li>
<li class="chapter" data-level="14.2.2" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#podpora-ssl"><i class="fa fa-check"></i><b>14.2.2</b> Podpora SSL</a></li>
<li class="chapter" data-level="14.2.3" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#zagon-aplikacije"><i class="fa fa-check"></i><b>14.2.3</b> Zagon aplikacije</a></li>
<li class="chapter" data-level="14.2.4" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#konfiguracija-orodja-owasp-zap"><i class="fa fa-check"></i><b>14.2.4</b> Konfiguracija orodja OWASP ZAP</a></li>
<li class="chapter" data-level="14.2.5" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#tezave-http-odgovori"><i class="fa fa-check"></i><b>14.2.5</b> Odprava težav s HTTP odgovori</a></li>
<li class="chapter" data-level="14.2.6" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#tezave-z-registracijo-in-prijavo"><i class="fa fa-check"></i><b>14.2.6</b> Odprava težav z registracijo in prijavo</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#osnovni-funkcionalni-testi-aplikacije-demo-s-selenium"><i class="fa fa-check"></i><b>14.3</b> Osnovni funkcionalni testi aplikacije Demo s Selenium</a></li>
<li class="chapter" data-level="14.4" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#Progresivne-spletne-aplikacije"><i class="fa fa-check"></i><b>14.4</b> Progresivne spletne aplikacije</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#uvod-3"><i class="fa fa-check"></i><b>14.4.1</b> Uvod</a></li>
<li class="chapter" data-level="14.4.2" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#Lighthouse"><i class="fa fa-check"></i><b>14.4.2</b> Pregled obstoječe aplikacije s pomočjo Lighthouse</a></li>
<li class="chapter" data-level="14.4.3" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#nadgradnja-angular"><i class="fa fa-check"></i><b>14.4.3</b> Nadgradnja Angular</a></li>
<li class="chapter" data-level="14.4.4" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#vključitev-podpore-za-pwa"><i class="fa fa-check"></i><b>14.4.4</b> Vključitev podpore za PWA</a></li>
<li class="chapter" data-level="14.4.5" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#Brskanje-brez-povezave"><i class="fa fa-check"></i><b>14.4.5</b> Brskanje brez povezave</a></li>
<li class="chapter" data-level="14.4.6" data-path="Varnost-testiranje-PWA.html"><a href="Varnost-testiranje-PWA.html#končno-testiranje"><i class="fa fa-check"></i><b>14.4.6</b> Končno testiranje</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="literatura.html"><a href="literatura.html"><i class="fa fa-check"></i>Literatura</a></li>
<li class="divider"></li>
<li><a href="https://ucilnica.fri.uni-lj.si/course/view.php?id=74">eUčilnica</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="index.html">Spletno programiranje 2023/2024</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="Swagger" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Poglavje 7</span> <span class="sklop3 oznaka">P3.2</span> Načrtovanje s Swagger in OpenAPI<a href="Swagger.html#Swagger" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div class="vrstica">
<img src="assets/img/ninja/ninja_03_go_right.png">
<h3>
<span class="sklop3 oznaka">P3.2</span>
</h3>
</div>
<p><a href="https://unilj-my.sharepoint.com/:wb:/g/personal/dejanl_fri1_uni-lj_si/EZ9b8m3lOCpKm0Qi_tgHTTMBZC_mHatGqnrlQ64Y2rDeOg?e=KXIzDZ"><i class="fa-solid fa-chalkboard-user"></i>Sodelovalna <strong>tabla</strong></a>, ki jo bomo uporabljali pred in med predavanji ter je namenjena odložišču za vprašanja in komentarje.</p>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js"></script>
<script>
  var options_dodaj = {acrossElements: true, element: "dodaj"};
  var options_izbrisi = {acrossElements: true, element: "izbrisi"};
</script>
<div id="dokumentiranje-rest-api-ja-z-openapi-specifikacijo" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Dokumentiranje REST API-ja z OpenAPI specifikacijo<a href="Swagger.html#dokumentiranje-rest-api-ja-z-openapi-specifikacijo" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Za lažje testiranje aplikacije bomo obstoječi REST API (do tega trenutka smo razvili zgolj metode GET) opisali s pomočjo ogrodja <a href="https://swagger.io"><i class="fa-solid fa-earth-europe"></i><strong>Swagger</strong></a> in v skladu z <a href="https://www.openapis.org"><i class="fa-solid fa-earth-europe"></i><strong>OpenAPI specifikacijo</strong></a>.</p>
<p>Za podporo dokumentiranju API-ja bomo uporabili knjižnici <a href="https://www.npmjs.com/package/swagger-jsdoc"><i class="fa-brands fa-node-js"></i>swagger-jsdoc</a>, s katero lahko dokumentiramo izvorno kodo v OpenAPI specifikaciji, in <a href="https://www.npmjs.com/package/swagger-ui-express"><i class="fa-brands fa-node-js"></i>swagger-ui-express</a>, ki nam omogoča generiranje uporabniškega vmesnika za pregled API dokumentacije ter specifikacije v obliki datoteke <i class="fa-regular fa-file-lines"></i><code>swagger.json</code>.</p>
<p>Najprej namestimo omenjeni knjižnici.</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb484-1"><a href="Swagger.html#cb484-1" tabindex="-1"></a><span class="ex">$</span> npm install swagger-jsdoc swagger-ui-express</span></code></pre></div>
<p>V začetno datoteko aplikacije <code>server.js</code> vključimo reference na omenjeni knjižnici in poskrbimo za začetne nastavitve, kjer v <strong>seznam dostopnih točk</strong> dodamo razvojni in produkcijski strežnik. Pomembna je tudi množica poti v okviru nastavitve <code>apis</code>, s katero navedemo <strong>datoteke izvorne kode, kjer se nahajajo metapodatki</strong> za izdelavo Swagger UI uporabniškega vmesnika pregleda dokumentacije.</p>
<p><code>server.js</code></p>
<div class="sourceCode" id="cb485"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb485-1"><a href="Swagger.html#cb485-1" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb485-2"><a href="Swagger.html#cb485-2" tabindex="-1"></a><span class="co"> * Load environment variables</span></span>
<span id="cb485-3"><a href="Swagger.html#cb485-3" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb485-4"><a href="Swagger.html#cb485-4" tabindex="-1"></a><span class="pp">require</span>(<span class="st">&quot;dotenv&quot;</span>)<span class="op">.</span><span class="fu">config</span>()<span class="op">;</span></span>
<span id="cb485-5"><a href="Swagger.html#cb485-5" tabindex="-1"></a><span class="kw">const</span> express <span class="op">=</span> <span class="pp">require</span>(<span class="st">&quot;express&quot;</span>)<span class="op">;</span></span>
<span id="cb485-6"><a href="Swagger.html#cb485-6" tabindex="-1"></a><span class="kw">const</span> path <span class="op">=</span> <span class="pp">require</span>(<span class="st">&quot;path&quot;</span>)<span class="op">;</span></span>
<span id="cb485-7"><a href="Swagger.html#cb485-7" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb485-8"><a href="Swagger.html#cb485-8" tabindex="-1"></a><span class="co"> * Swagger and OpenAPI</span></span>
<span id="cb485-9"><a href="Swagger.html#cb485-9" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb485-10"><a href="Swagger.html#cb485-10" tabindex="-1"></a><span class="kw">const</span> swaggerJsDoc <span class="op">=</span> <span class="pp">require</span>(<span class="st">&quot;swagger-jsdoc&quot;</span>)<span class="op">;</span></span>
<span id="cb485-11"><a href="Swagger.html#cb485-11" tabindex="-1"></a><span class="kw">const</span> swaggerUi <span class="op">=</span> <span class="pp">require</span>(<span class="st">&quot;swagger-ui-express&quot;</span>)<span class="op">;</span></span>
<span id="cb485-12"><a href="Swagger.html#cb485-12" tabindex="-1"></a><span class="kw">const</span> swaggerDocument <span class="op">=</span> <span class="fu">swaggerJsDoc</span>({</span>
<span id="cb485-13"><a href="Swagger.html#cb485-13" tabindex="-1"></a>  <span class="dt">definition</span><span class="op">:</span> {</span>
<span id="cb485-14"><a href="Swagger.html#cb485-14" tabindex="-1"></a>    <span class="dt">openapi</span><span class="op">:</span> <span class="st">&quot;3.0.3&quot;</span><span class="op">,</span></span>
<span id="cb485-15"><a href="Swagger.html#cb485-15" tabindex="-1"></a>    <span class="dt">info</span><span class="op">:</span> {</span>
<span id="cb485-16"><a href="Swagger.html#cb485-16" tabindex="-1"></a>      <span class="dt">title</span><span class="op">:</span> <span class="st">&quot;Demo&quot;</span><span class="op">,</span></span>
<span id="cb485-17"><a href="Swagger.html#cb485-17" tabindex="-1"></a>      <span class="dt">version</span><span class="op">:</span> <span class="st">&quot;0.1.0&quot;</span><span class="op">,</span></span>
<span id="cb485-18"><a href="Swagger.html#cb485-18" tabindex="-1"></a>      <span class="dt">description</span><span class="op">:</span></span>
<span id="cb485-19"><a href="Swagger.html#cb485-19" tabindex="-1"></a>        <span class="st">&quot;Demo **REST API** used for [Web Programming](https://teaching.lavbic.net/SP) course at [Faculty of Computer and Information Science](https://www.fri.uni-lj.si/en), [University of Ljubljana](https://www.uni-lj.si/eng) given by [Associate Professor Dejan Lavbič](https://www.lavbic.net)!</span><span class="sc">\n\n</span><span class="st">The application supports:</span><span class="sc">\n</span><span class="st">* **filtering nearby** cultural herritage **locations**,</span><span class="sc">\n</span><span class="st">* **adding comments** to existing locations,</span><span class="sc">\n</span><span class="st">* and more.&quot;</span><span class="op">,</span></span>
<span id="cb485-20"><a href="Swagger.html#cb485-20" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb485-21"><a href="Swagger.html#cb485-21" tabindex="-1"></a>    <span class="dt">servers</span><span class="op">:</span> [</span>
<span id="cb485-22"><a href="Swagger.html#cb485-22" tabindex="-1"></a>      {</span>
<span id="cb485-23"><a href="Swagger.html#cb485-23" tabindex="-1"></a>        <span class="dt">url</span><span class="op">:</span> <span class="st">&quot;http://localhost:3000/api&quot;</span><span class="op">,</span></span>
<span id="cb485-24"><a href="Swagger.html#cb485-24" tabindex="-1"></a>        <span class="dt">description</span><span class="op">:</span> <span class="st">&quot;Development server for testing&quot;</span><span class="op">,</span></span>
<span id="cb485-25"><a href="Swagger.html#cb485-25" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb485-26"><a href="Swagger.html#cb485-26" tabindex="-1"></a>      {</span>
<span id="cb485-27"><a href="Swagger.html#cb485-27" tabindex="-1"></a>        <span class="dt">url</span><span class="op">:</span> <span class="st">&quot;https://sp-2023-2024.fly.dev/api&quot;</span><span class="op">,</span></span>
<span id="cb485-28"><a href="Swagger.html#cb485-28" tabindex="-1"></a>        <span class="dt">description</span><span class="op">:</span> <span class="st">&quot;Production server&quot;</span><span class="op">,</span></span>
<span id="cb485-29"><a href="Swagger.html#cb485-29" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb485-30"><a href="Swagger.html#cb485-30" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb485-31"><a href="Swagger.html#cb485-31" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb485-32"><a href="Swagger.html#cb485-32" tabindex="-1"></a>  <span class="dt">apis</span><span class="op">:</span> [<span class="st">&quot;./api/models/locations.js&quot;</span><span class="op">,</span> <span class="st">&quot;./api/controllers/*.js&quot;</span>]<span class="op">,</span></span>
<span id="cb485-33"><a href="Swagger.html#cb485-33" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb485-34"><a href="Swagger.html#cb485-34" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb485-35"><a href="Swagger.html#cb485-35" tabindex="-1"></a><span class="co"> * Database connection</span></span>
<span id="cb485-36"><a href="Swagger.html#cb485-36" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb485-37"><a href="Swagger.html#cb485-37" tabindex="-1"></a><span class="pp">require</span>(<span class="st">&quot;./api/models/db.js&quot;</span>)<span class="op">;</span></span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#dokumentiranje-rest-api-ja-z-openapi-specifikacijo code.bash:eq(0)").markRegExp(/npm install.+/, options_dodaj);
    $("#dokumentiranje-rest-api-ja-z-openapi-specifikacijo code.javascript:eq(0)").markRegExp(/\/\*\*[^L]+?Swagger[\s\S]+?}\);/, options_dodaj);
  });
</script>
<p>Nato omogočimo dostop do <strong>izvorne kode specifikacije</strong> v obliki <strong>Swagger datoteke</strong> na <code>/api/swagger.json</code> in <strong>pregled REST API dokumentacije</strong> na naslovu <code>/api/docs/</code>.</p>
<blockquote>
<p><strong>Opomba</strong>: Bodite pozorni, da poti opredelujemo na usmerjevalniku <code>indexApi</code>, ki ima predpono <code>/api</code>, zato poti zapisujemo relativno, in sicer <code>/docs</code> za pot <code>/api/docs</code>.</p>
</blockquote>
<p><code>server.js</code></p>
<div class="sourceCode" id="cb486"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb486-1"><a href="Swagger.html#cb486-1" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb486-2"><a href="Swagger.html#cb486-2" tabindex="-1"></a><span class="co"> * API routing</span></span>
<span id="cb486-3"><a href="Swagger.html#cb486-3" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb486-4"><a href="Swagger.html#cb486-4" tabindex="-1"></a>app<span class="op">.</span><span class="fu">use</span>(<span class="st">&quot;/api&quot;</span><span class="op">,</span> apiRouter)<span class="op">;</span></span>
<span id="cb486-5"><a href="Swagger.html#cb486-5" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb486-6"><a href="Swagger.html#cb486-6" tabindex="-1"></a><span class="co"> * Swagger file and explorer</span></span>
<span id="cb486-7"><a href="Swagger.html#cb486-7" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb486-8"><a href="Swagger.html#cb486-8" tabindex="-1"></a>apiRouter<span class="op">.</span><span class="fu">get</span>(<span class="st">&quot;/swagger.json&quot;</span><span class="op">,</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span></span>
<span id="cb486-9"><a href="Swagger.html#cb486-9" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">status</span>(<span class="dv">200</span>)<span class="op">.</span><span class="fu">json</span>(swaggerDocument)</span>
<span id="cb486-10"><a href="Swagger.html#cb486-10" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb486-11"><a href="Swagger.html#cb486-11" tabindex="-1"></a>apiRouter<span class="op">.</span><span class="fu">use</span>(</span>
<span id="cb486-12"><a href="Swagger.html#cb486-12" tabindex="-1"></a>  <span class="st">&quot;/docs&quot;</span><span class="op">,</span></span>
<span id="cb486-13"><a href="Swagger.html#cb486-13" tabindex="-1"></a>  swaggerUi<span class="op">.</span><span class="at">serve</span><span class="op">,</span></span>
<span id="cb486-14"><a href="Swagger.html#cb486-14" tabindex="-1"></a>  swaggerUi<span class="op">.</span><span class="fu">setup</span>(swaggerDocument<span class="op">,</span> {</span>
<span id="cb486-15"><a href="Swagger.html#cb486-15" tabindex="-1"></a>    <span class="dt">customCss</span><span class="op">:</span> <span class="st">&quot;.swagger-ui .topbar { display: none }&quot;</span><span class="op">,</span></span>
<span id="cb486-16"><a href="Swagger.html#cb486-16" tabindex="-1"></a>  })</span>
<span id="cb486-17"><a href="Swagger.html#cb486-17" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb486-18"><a href="Swagger.html#cb486-18" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb486-19"><a href="Swagger.html#cb486-19" tabindex="-1"></a><span class="co"> * Start server</span></span>
<span id="cb486-20"><a href="Swagger.html#cb486-20" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb486-21"><a href="Swagger.html#cb486-21" tabindex="-1"></a>app<span class="op">.</span><span class="fu">listen</span>(port<span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb486-22"><a href="Swagger.html#cb486-22" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(</span>
<span id="cb486-23"><a href="Swagger.html#cb486-23" tabindex="-1"></a>    <span class="vs">`Demo app started in &#39;</span><span class="sc">${</span></span>
<span id="cb486-24"><a href="Swagger.html#cb486-24" tabindex="-1"></a>      <span class="bu">process</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">NODE_ENV</span> <span class="op">||</span> <span class="st">&quot;development&quot;</span></span>
<span id="cb486-25"><a href="Swagger.html#cb486-25" tabindex="-1"></a>    <span class="sc">}</span><span class="vs"> mode&#39; listening on port </span><span class="sc">${</span>port<span class="sc">}</span><span class="vs">!`</span></span>
<span id="cb486-26"><a href="Swagger.html#cb486-26" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb486-27"><a href="Swagger.html#cb486-27" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#dokumentiranje-rest-api-ja-z-openapi-specifikacijo code.javascript:eq(1)").markRegExp(/\/\*\*[^A]+?Swagger file[\s\S]+?none[\s\S]+?\);/, options_dodaj);
  });
</script>
<p>Pri dokumentiranju metod REST API vmesnika je dobra praksa opredelitev skupnih vhodnih in izhodnih podatkov v obliki shem. Primerno mesto za dodajanje takšnih metapodatkov je v okviru opredelitve modela, saj imamo na tem mestu opredeljeno shemo podatkovne baze, do katere imajo uporabniki dostop preko REST API-ja.</p>
<p><a href="https://swagger.io/specification/"><i class="fa-solid fa-earth-europe"></i><strong>OpenAPI</strong> specifikacijo</a> lahko v izvorno kodo preprosto vključimo kar s pomočjo <strong>večvrstičnega JavaScript komentarja</strong>, ki ga začnemo z <strong><code>/**</code></strong> in končamo z <strong><code>*/</code></strong>. Da bo generiranje dokumentacije po OpenAPI specifikaciji potekalo nemoteno, JavaScript komentar začnemo z rezervirano besedo <strong><code>@openapi</code></strong>, nato v <a href="https://yaml.org"><i class="fa-solid fa-earth-europe"></i>YAML obliki</a> navedemo potrebne metapodatke. Pri opisovanju REST API dostopne točke si lahko pomagamo z obširno <a href="https://swagger.io/docs/specification/basic-structure"><i class="fa-solid fa-earth-europe"></i><strong>Swagger dokumentacijo</strong></a>.</p>
<blockquote>
<p><strong>Namig</strong>: Dokumentacijo lahko zajamemo tudi s pomočjo urejevalnika <a href="https://editor.swagger.io/"><i class="fa-solid fa-earth-europe"></i><strong>Swagger Editor</strong></a>, ki omogoča urejanje, uvoz in izvoz v JSON in YAML obliki.</p>
</blockquote>
<p>Nato za obe <a href="https://swagger.io/docs/specification/data-models/"><i class="fa-solid fa-earth-europe"></i><strong>shemi</strong></a> (<code>Comment</code> in <code>Location</code>) pripravimo potrebne vhodne in izhodne oblike podatkov v okviru okviru <code>components/schemas</code>. Za vsak podatek opredelimo <a href="https://swagger.io/docs/specification/data-models/data-types/"><i class="fa-solid fa-earth-europe"></i><strong>tip</strong> <code>type</code></a> (npr. <a href="https://swagger.io/docs/specification/data-models/data-types/#object"><i class="fa-solid fa-tag"></i><code>object</code></a>, <a href="https://swagger.io/docs/specification/data-models/data-types/#array"><i class="fa-solid fa-tag"></i><code>array</code></a>, <a href="https://swagger.io/docs/specification/data-models/data-types/#string"><i class="fa-solid fa-tag"></i><code>string</code></a>, <a href="https://swagger.io/docs/specification/data-models/data-types/#boolean"><span class="skupaj"><i class="fa-solid fa-tag"></i><code>boolean</code></span></a>, <a href="https://swagger.io/docs/specification/data-models/data-types/#numbers"><i class="fa-solid fa-tag"></i><code>number</code></a>, <a href="https://swagger.io/docs/specification/data-models/data-types/#numbers"><i class="fa-solid fa-tag"></i><code>integer</code></a> itd.), kateri izmed atributov so obvezni (<code>required</code>), navedemo pa lahko tudi testne primere. Kompleksne podatkovne tipe lahko enostavno medsebojno povezujemo s pomočjo <code>$ref</code>, podobno kot smo to implementirali tudi na ravni podatkovne baze MongoDB.</p>
<p><code>api/models/locations.js</code></p>
<div class="sourceCode" id="cb487"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb487-1"><a href="Swagger.html#cb487-1" tabindex="-1"></a><span class="kw">const</span> mongoose <span class="op">=</span> <span class="pp">require</span>(<span class="st">&quot;mongoose&quot;</span>)<span class="op">;</span></span>
<span id="cb487-2"><a href="Swagger.html#cb487-2" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb487-3"><a href="Swagger.html#cb487-3" tabindex="-1"></a><span class="co"> * </span><span class="an">@openapi</span></span>
<span id="cb487-4"><a href="Swagger.html#cb487-4" tabindex="-1"></a><span class="co"> * components:</span></span>
<span id="cb487-5"><a href="Swagger.html#cb487-5" tabindex="-1"></a><span class="co"> *  schemas:</span></span>
<span id="cb487-6"><a href="Swagger.html#cb487-6" tabindex="-1"></a><span class="co"> *   Comment:</span></span>
<span id="cb487-7"><a href="Swagger.html#cb487-7" tabindex="-1"></a><span class="co"> *    type: object</span></span>
<span id="cb487-8"><a href="Swagger.html#cb487-8" tabindex="-1"></a><span class="co"> *    description: Comment about cultural heritage location.</span></span>
<span id="cb487-9"><a href="Swagger.html#cb487-9" tabindex="-1"></a><span class="co"> *    properties:</span></span>
<span id="cb487-10"><a href="Swagger.html#cb487-10" tabindex="-1"></a><span class="co"> *     _id:</span></span>
<span id="cb487-11"><a href="Swagger.html#cb487-11" tabindex="-1"></a><span class="co"> *      type: string</span></span>
<span id="cb487-12"><a href="Swagger.html#cb487-12" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">unique identifier</span><span class="kw">&lt;/b&gt;</span><span class="co"> of comment</span></span>
<span id="cb487-13"><a href="Swagger.html#cb487-13" tabindex="-1"></a><span class="co"> *      example: 635a62f5dc5d7968e68464be</span></span>
<span id="cb487-14"><a href="Swagger.html#cb487-14" tabindex="-1"></a><span class="co"> *     author:</span></span>
<span id="cb487-15"><a href="Swagger.html#cb487-15" tabindex="-1"></a><span class="co"> *      type: string</span></span>
<span id="cb487-16"><a href="Swagger.html#cb487-16" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">name of the author</span><span class="kw">&lt;/b&gt;</span><span class="co"> of the comment</span></span>
<span id="cb487-17"><a href="Swagger.html#cb487-17" tabindex="-1"></a><span class="co"> *      example: Dejan Lavbič</span></span>
<span id="cb487-18"><a href="Swagger.html#cb487-18" tabindex="-1"></a><span class="co"> *     rating:</span></span>
<span id="cb487-19"><a href="Swagger.html#cb487-19" tabindex="-1"></a><span class="co"> *      type: integer</span></span>
<span id="cb487-20"><a href="Swagger.html#cb487-20" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">rating</span><span class="kw">&lt;/b&gt;</span><span class="co"> of the location</span></span>
<span id="cb487-21"><a href="Swagger.html#cb487-21" tabindex="-1"></a><span class="co"> *      minimum: 0</span></span>
<span id="cb487-22"><a href="Swagger.html#cb487-22" tabindex="-1"></a><span class="co"> *      maximum: 5</span></span>
<span id="cb487-23"><a href="Swagger.html#cb487-23" tabindex="-1"></a><span class="co"> *      example: 5</span></span>
<span id="cb487-24"><a href="Swagger.html#cb487-24" tabindex="-1"></a><span class="co"> *     comment:</span></span>
<span id="cb487-25"><a href="Swagger.html#cb487-25" tabindex="-1"></a><span class="co"> *      type: string</span></span>
<span id="cb487-26"><a href="Swagger.html#cb487-26" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">comment</span><span class="kw">&lt;/b&gt;</span><span class="co"> about the location</span></span>
<span id="cb487-27"><a href="Swagger.html#cb487-27" tabindex="-1"></a><span class="co"> *      example: Interesting location with only few tourists.</span></span>
<span id="cb487-28"><a href="Swagger.html#cb487-28" tabindex="-1"></a><span class="co"> *     createdOn:</span></span>
<span id="cb487-29"><a href="Swagger.html#cb487-29" tabindex="-1"></a><span class="co"> *      type: string</span></span>
<span id="cb487-30"><a href="Swagger.html#cb487-30" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">date</span><span class="kw">&lt;/b&gt;</span><span class="co"> of the comment </span><span class="kw">&lt;b&gt;</span><span class="co">creation</span><span class="kw">&lt;/b&gt;</span></span>
<span id="cb487-31"><a href="Swagger.html#cb487-31" tabindex="-1"></a><span class="co"> *      format: date-time</span></span>
<span id="cb487-32"><a href="Swagger.html#cb487-32" tabindex="-1"></a><span class="co"> *      example: 2020-12-25T17:43:00.000Z</span></span>
<span id="cb487-33"><a href="Swagger.html#cb487-33" tabindex="-1"></a><span class="co"> *    required:</span></span>
<span id="cb487-34"><a href="Swagger.html#cb487-34" tabindex="-1"></a><span class="co"> *     - _id</span></span>
<span id="cb487-35"><a href="Swagger.html#cb487-35" tabindex="-1"></a><span class="co"> *     - author</span></span>
<span id="cb487-36"><a href="Swagger.html#cb487-36" tabindex="-1"></a><span class="co"> *     - rating</span></span>
<span id="cb487-37"><a href="Swagger.html#cb487-37" tabindex="-1"></a><span class="co"> *     - comment</span></span>
<span id="cb487-38"><a href="Swagger.html#cb487-38" tabindex="-1"></a><span class="co"> *     - createdOn</span></span>
<span id="cb487-39"><a href="Swagger.html#cb487-39" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb487-40"><a href="Swagger.html#cb487-40" tabindex="-1"></a><span class="kw">const</span> commentSchema <span class="op">=</span> <span class="kw">new</span> mongoose<span class="op">.</span><span class="fu">Schema</span>({</span>
<span id="cb487-41"><a href="Swagger.html#cb487-41" tabindex="-1"></a>  <span class="dt">author</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="bu">String</span><span class="op">,</span> <span class="dt">required</span><span class="op">:</span> [<span class="kw">true</span><span class="op">,</span> <span class="st">&quot;Author is required!&quot;</span>] }<span class="op">,</span></span>
<span id="cb487-42"><a href="Swagger.html#cb487-42" tabindex="-1"></a>  <span class="dt">rating</span><span class="op">:</span> {</span>
<span id="cb487-43"><a href="Swagger.html#cb487-43" tabindex="-1"></a>    <span class="dt">type</span><span class="op">:</span> <span class="bu">Number</span><span class="op">,</span></span>
<span id="cb487-44"><a href="Swagger.html#cb487-44" tabindex="-1"></a>    <span class="dt">required</span><span class="op">:</span> [<span class="kw">true</span><span class="op">,</span> <span class="st">&quot;Rating is required!&quot;</span>]<span class="op">,</span></span>
<span id="cb487-45"><a href="Swagger.html#cb487-45" tabindex="-1"></a>    <span class="dt">min</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb487-46"><a href="Swagger.html#cb487-46" tabindex="-1"></a>    <span class="dt">max</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb487-47"><a href="Swagger.html#cb487-47" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb487-48"><a href="Swagger.html#cb487-48" tabindex="-1"></a>  <span class="dt">comment</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="bu">String</span><span class="op">,</span> <span class="dt">required</span><span class="op">:</span> [<span class="kw">true</span><span class="op">,</span> <span class="st">&quot;Comment is required!&quot;</span>] }<span class="op">,</span></span>
<span id="cb487-49"><a href="Swagger.html#cb487-49" tabindex="-1"></a>  <span class="dt">createdOn</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="bu">Date</span><span class="op">,</span> <span class="cf">default</span><span class="op">:</span> <span class="bu">Date</span><span class="op">.</span><span class="at">now</span> }<span class="op">,</span></span>
<span id="cb487-50"><a href="Swagger.html#cb487-50" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb487-51"><a href="Swagger.html#cb487-51" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb487-52"><a href="Swagger.html#cb487-52" tabindex="-1"></a><span class="co"> * </span><span class="an">@openapi</span></span>
<span id="cb487-53"><a href="Swagger.html#cb487-53" tabindex="-1"></a><span class="co"> * components:</span></span>
<span id="cb487-54"><a href="Swagger.html#cb487-54" tabindex="-1"></a><span class="co"> *  schemas:</span></span>
<span id="cb487-55"><a href="Swagger.html#cb487-55" tabindex="-1"></a><span class="co"> *   Location:</span></span>
<span id="cb487-56"><a href="Swagger.html#cb487-56" tabindex="-1"></a><span class="co"> *    type: object</span></span>
<span id="cb487-57"><a href="Swagger.html#cb487-57" tabindex="-1"></a><span class="co"> *    description: Cultural heritage </span><span class="kw">&lt;b&gt;</span><span class="co">location</span><span class="kw">&lt;/b&gt;</span><span class="co">.</span></span>
<span id="cb487-58"><a href="Swagger.html#cb487-58" tabindex="-1"></a><span class="co"> *    properties:</span></span>
<span id="cb487-59"><a href="Swagger.html#cb487-59" tabindex="-1"></a><span class="co"> *     _id:</span></span>
<span id="cb487-60"><a href="Swagger.html#cb487-60" tabindex="-1"></a><span class="co"> *      type: string</span></span>
<span id="cb487-61"><a href="Swagger.html#cb487-61" tabindex="-1"></a><span class="co"> *      description: unique identifier</span></span>
<span id="cb487-62"><a href="Swagger.html#cb487-62" tabindex="-1"></a><span class="co"> *     name:</span></span>
<span id="cb487-63"><a href="Swagger.html#cb487-63" tabindex="-1"></a><span class="co"> *      type: string</span></span>
<span id="cb487-64"><a href="Swagger.html#cb487-64" tabindex="-1"></a><span class="co"> *      description: name of the location</span></span>
<span id="cb487-65"><a href="Swagger.html#cb487-65" tabindex="-1"></a><span class="co"> *     category:</span></span>
<span id="cb487-66"><a href="Swagger.html#cb487-66" tabindex="-1"></a><span class="co"> *      type: string</span></span>
<span id="cb487-67"><a href="Swagger.html#cb487-67" tabindex="-1"></a><span class="co"> *      description: category of the location</span></span>
<span id="cb487-68"><a href="Swagger.html#cb487-68" tabindex="-1"></a><span class="co"> *     type:</span></span>
<span id="cb487-69"><a href="Swagger.html#cb487-69" tabindex="-1"></a><span class="co"> *      type: string</span></span>
<span id="cb487-70"><a href="Swagger.html#cb487-70" tabindex="-1"></a><span class="co"> *      description: type of the location</span></span>
<span id="cb487-71"><a href="Swagger.html#cb487-71" tabindex="-1"></a><span class="co"> *     keywords:</span></span>
<span id="cb487-72"><a href="Swagger.html#cb487-72" tabindex="-1"></a><span class="co"> *      type: array</span></span>
<span id="cb487-73"><a href="Swagger.html#cb487-73" tabindex="-1"></a><span class="co"> *      description: keywords describing the location</span></span>
<span id="cb487-74"><a href="Swagger.html#cb487-74" tabindex="-1"></a><span class="co"> *      items:</span></span>
<span id="cb487-75"><a href="Swagger.html#cb487-75" tabindex="-1"></a><span class="co"> *       type: string</span></span>
<span id="cb487-76"><a href="Swagger.html#cb487-76" tabindex="-1"></a><span class="co"> *      minItems: 1</span></span>
<span id="cb487-77"><a href="Swagger.html#cb487-77" tabindex="-1"></a><span class="co"> *     description:</span></span>
<span id="cb487-78"><a href="Swagger.html#cb487-78" tabindex="-1"></a><span class="co"> *      type: string</span></span>
<span id="cb487-79"><a href="Swagger.html#cb487-79" tabindex="-1"></a><span class="co"> *      description: description of the location</span></span>
<span id="cb487-80"><a href="Swagger.html#cb487-80" tabindex="-1"></a><span class="co"> *     location:</span></span>
<span id="cb487-81"><a href="Swagger.html#cb487-81" tabindex="-1"></a><span class="co"> *      type: string</span></span>
<span id="cb487-82"><a href="Swagger.html#cb487-82" tabindex="-1"></a><span class="co"> *      description: textual description of actual location</span></span>
<span id="cb487-83"><a href="Swagger.html#cb487-83" tabindex="-1"></a><span class="co"> *     institution:</span></span>
<span id="cb487-84"><a href="Swagger.html#cb487-84" tabindex="-1"></a><span class="co"> *      type: string</span></span>
<span id="cb487-85"><a href="Swagger.html#cb487-85" tabindex="-1"></a><span class="co"> *      description: institution responsible for the location</span></span>
<span id="cb487-86"><a href="Swagger.html#cb487-86" tabindex="-1"></a><span class="co"> *     heritage:</span></span>
<span id="cb487-87"><a href="Swagger.html#cb487-87" tabindex="-1"></a><span class="co"> *      type: string</span></span>
<span id="cb487-88"><a href="Swagger.html#cb487-88" tabindex="-1"></a><span class="co"> *      description: heritage of the location</span></span>
<span id="cb487-89"><a href="Swagger.html#cb487-89" tabindex="-1"></a><span class="co"> *     municipality:</span></span>
<span id="cb487-90"><a href="Swagger.html#cb487-90" tabindex="-1"></a><span class="co"> *      type: string</span></span>
<span id="cb487-91"><a href="Swagger.html#cb487-91" tabindex="-1"></a><span class="co"> *      description: municipality of the location</span></span>
<span id="cb487-92"><a href="Swagger.html#cb487-92" tabindex="-1"></a><span class="co"> *     coordinates:</span></span>
<span id="cb487-93"><a href="Swagger.html#cb487-93" tabindex="-1"></a><span class="co"> *      type: array</span></span>
<span id="cb487-94"><a href="Swagger.html#cb487-94" tabindex="-1"></a><span class="co"> *      items:</span></span>
<span id="cb487-95"><a href="Swagger.html#cb487-95" tabindex="-1"></a><span class="co"> *       type: number</span></span>
<span id="cb487-96"><a href="Swagger.html#cb487-96" tabindex="-1"></a><span class="co"> *      minItems: 2</span></span>
<span id="cb487-97"><a href="Swagger.html#cb487-97" tabindex="-1"></a><span class="co"> *      maxItems: 2</span></span>
<span id="cb487-98"><a href="Swagger.html#cb487-98" tabindex="-1"></a><span class="co"> *      description: GPS coordinates of the location</span></span>
<span id="cb487-99"><a href="Swagger.html#cb487-99" tabindex="-1"></a><span class="co"> *     synonyms:</span></span>
<span id="cb487-100"><a href="Swagger.html#cb487-100" tabindex="-1"></a><span class="co"> *      type: array</span></span>
<span id="cb487-101"><a href="Swagger.html#cb487-101" tabindex="-1"></a><span class="co"> *      items:</span></span>
<span id="cb487-102"><a href="Swagger.html#cb487-102" tabindex="-1"></a><span class="co"> *       type: string</span></span>
<span id="cb487-103"><a href="Swagger.html#cb487-103" tabindex="-1"></a><span class="co"> *      description: synonyms of the location</span></span>
<span id="cb487-104"><a href="Swagger.html#cb487-104" tabindex="-1"></a><span class="co"> *      minItems: 1</span></span>
<span id="cb487-105"><a href="Swagger.html#cb487-105" tabindex="-1"></a><span class="co"> *     datation:</span></span>
<span id="cb487-106"><a href="Swagger.html#cb487-106" tabindex="-1"></a><span class="co"> *      type: string</span></span>
<span id="cb487-107"><a href="Swagger.html#cb487-107" tabindex="-1"></a><span class="co"> *      description: datation of the location</span></span>
<span id="cb487-108"><a href="Swagger.html#cb487-108" tabindex="-1"></a><span class="co"> *     authors:</span></span>
<span id="cb487-109"><a href="Swagger.html#cb487-109" tabindex="-1"></a><span class="co"> *      type: string</span></span>
<span id="cb487-110"><a href="Swagger.html#cb487-110" tabindex="-1"></a><span class="co"> *      description: authors of the cultural heritage</span></span>
<span id="cb487-111"><a href="Swagger.html#cb487-111" tabindex="-1"></a><span class="co"> *     fields:</span></span>
<span id="cb487-112"><a href="Swagger.html#cb487-112" tabindex="-1"></a><span class="co"> *      type: array</span></span>
<span id="cb487-113"><a href="Swagger.html#cb487-113" tabindex="-1"></a><span class="co"> *      items:</span></span>
<span id="cb487-114"><a href="Swagger.html#cb487-114" tabindex="-1"></a><span class="co"> *       type: string</span></span>
<span id="cb487-115"><a href="Swagger.html#cb487-115" tabindex="-1"></a><span class="co"> *      description: fields of the cultural heritage</span></span>
<span id="cb487-116"><a href="Swagger.html#cb487-116" tabindex="-1"></a><span class="co"> *      minItems: 1</span></span>
<span id="cb487-117"><a href="Swagger.html#cb487-117" tabindex="-1"></a><span class="co"> *     distance:</span></span>
<span id="cb487-118"><a href="Swagger.html#cb487-118" tabindex="-1"></a><span class="co"> *      type: number</span></span>
<span id="cb487-119"><a href="Swagger.html#cb487-119" tabindex="-1"></a><span class="co"> *      description: distance from the given location</span></span>
<span id="cb487-120"><a href="Swagger.html#cb487-120" tabindex="-1"></a><span class="co"> *      minimum: 0</span></span>
<span id="cb487-121"><a href="Swagger.html#cb487-121" tabindex="-1"></a><span class="co"> *     rating:</span></span>
<span id="cb487-122"><a href="Swagger.html#cb487-122" tabindex="-1"></a><span class="co"> *      type: integer</span></span>
<span id="cb487-123"><a href="Swagger.html#cb487-123" tabindex="-1"></a><span class="co"> *      description: average rating of the location</span></span>
<span id="cb487-124"><a href="Swagger.html#cb487-124" tabindex="-1"></a><span class="co"> *      minimum: 0</span></span>
<span id="cb487-125"><a href="Swagger.html#cb487-125" tabindex="-1"></a><span class="co"> *      maximum: 5</span></span>
<span id="cb487-126"><a href="Swagger.html#cb487-126" tabindex="-1"></a><span class="co"> *     comments:</span></span>
<span id="cb487-127"><a href="Swagger.html#cb487-127" tabindex="-1"></a><span class="co"> *      type: array</span></span>
<span id="cb487-128"><a href="Swagger.html#cb487-128" tabindex="-1"></a><span class="co"> *      items:</span></span>
<span id="cb487-129"><a href="Swagger.html#cb487-129" tabindex="-1"></a><span class="co"> *       $ref: &#39;#/components/schemas/Comment&#39;</span></span>
<span id="cb487-130"><a href="Swagger.html#cb487-130" tabindex="-1"></a><span class="co"> *    required:</span></span>
<span id="cb487-131"><a href="Swagger.html#cb487-131" tabindex="-1"></a><span class="co"> *     - _id</span></span>
<span id="cb487-132"><a href="Swagger.html#cb487-132" tabindex="-1"></a><span class="co"> *     - name</span></span>
<span id="cb487-133"><a href="Swagger.html#cb487-133" tabindex="-1"></a><span class="co"> *     - category</span></span>
<span id="cb487-134"><a href="Swagger.html#cb487-134" tabindex="-1"></a><span class="co"> *     - type</span></span>
<span id="cb487-135"><a href="Swagger.html#cb487-135" tabindex="-1"></a><span class="co"> *     - keywords</span></span>
<span id="cb487-136"><a href="Swagger.html#cb487-136" tabindex="-1"></a><span class="co"> *     - description</span></span>
<span id="cb487-137"><a href="Swagger.html#cb487-137" tabindex="-1"></a><span class="co"> *     - location</span></span>
<span id="cb487-138"><a href="Swagger.html#cb487-138" tabindex="-1"></a><span class="co"> *     - institution</span></span>
<span id="cb487-139"><a href="Swagger.html#cb487-139" tabindex="-1"></a><span class="co"> *     - heritage</span></span>
<span id="cb487-140"><a href="Swagger.html#cb487-140" tabindex="-1"></a><span class="co"> *     - municipality</span></span>
<span id="cb487-141"><a href="Swagger.html#cb487-141" tabindex="-1"></a><span class="co"> *     - coordinates</span></span>
<span id="cb487-142"><a href="Swagger.html#cb487-142" tabindex="-1"></a><span class="co"> *     - fields</span></span>
<span id="cb487-143"><a href="Swagger.html#cb487-143" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb487-144"><a href="Swagger.html#cb487-144" tabindex="-1"></a><span class="kw">const</span> locationSchema <span class="op">=</span> mongoose<span class="op">.</span><span class="fu">Schema</span>({</span>
<span id="cb487-145"><a href="Swagger.html#cb487-145" tabindex="-1"></a>  <span class="dt">id</span><span class="op">:</span> {</span>
<span id="cb487-146"><a href="Swagger.html#cb487-146" tabindex="-1"></a>    <span class="dt">type</span><span class="op">:</span> <span class="bu">Number</span><span class="op">,</span></span>
<span id="cb487-147"><a href="Swagger.html#cb487-147" tabindex="-1"></a>    <span class="dt">required</span><span class="op">:</span> [<span class="kw">true</span><span class="op">,</span> <span class="st">&quot;Unique identifier is required!&quot;</span>]<span class="op">,</span></span>
<span id="cb487-148"><a href="Swagger.html#cb487-148" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb487-149"><a href="Swagger.html#cb487-149" tabindex="-1"></a>  <span class="dt">name</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="bu">String</span><span class="op">,</span> <span class="dt">required</span><span class="op">:</span> [<span class="kw">true</span><span class="op">,</span> <span class="st">&quot;Name is required!&quot;</span>] }<span class="op">,</span></span>
<span id="cb487-150"><a href="Swagger.html#cb487-150" tabindex="-1"></a>  <span class="dt">synonyms</span><span class="op">:</span> {</span>
<span id="cb487-151"><a href="Swagger.html#cb487-151" tabindex="-1"></a>    <span class="dt">type</span><span class="op">:</span> [<span class="bu">String</span>]<span class="op">,</span></span>
<span id="cb487-152"><a href="Swagger.html#cb487-152" tabindex="-1"></a>    <span class="dt">validate</span><span class="op">:</span> {</span>
<span id="cb487-153"><a href="Swagger.html#cb487-153" tabindex="-1"></a>      <span class="dt">validator</span><span class="op">:</span> (v) <span class="kw">=&gt;</span> v <span class="op">==</span> <span class="kw">undefined</span> <span class="op">||</span> (<span class="bu">Array</span><span class="op">.</span><span class="fu">isArray</span>(v) <span class="op">&amp;&amp;</span> v<span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span>)<span class="op">,</span></span>
<span id="cb487-154"><a href="Swagger.html#cb487-154" tabindex="-1"></a>      <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;If synonyms are provided, they must be an array of strings!&quot;</span><span class="op">,</span></span>
<span id="cb487-155"><a href="Swagger.html#cb487-155" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb487-156"><a href="Swagger.html#cb487-156" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb487-157"><a href="Swagger.html#cb487-157" tabindex="-1"></a>  <span class="dt">category</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="bu">String</span><span class="op">,</span> <span class="dt">required</span><span class="op">:</span> [<span class="kw">true</span><span class="op">,</span> <span class="st">&quot;Category is required!&quot;</span>] }<span class="op">,</span></span>
<span id="cb487-158"><a href="Swagger.html#cb487-158" tabindex="-1"></a>  <span class="dt">type</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="bu">String</span><span class="op">,</span> <span class="dt">required</span><span class="op">:</span> [<span class="kw">true</span><span class="op">,</span> <span class="st">&quot;Type is required!&quot;</span>] }<span class="op">,</span></span>
<span id="cb487-159"><a href="Swagger.html#cb487-159" tabindex="-1"></a>  <span class="dt">keywords</span><span class="op">:</span> {</span>
<span id="cb487-160"><a href="Swagger.html#cb487-160" tabindex="-1"></a>    <span class="dt">type</span><span class="op">:</span> [<span class="bu">String</span>]<span class="op">,</span></span>
<span id="cb487-161"><a href="Swagger.html#cb487-161" tabindex="-1"></a>    <span class="dt">validate</span><span class="op">:</span> {</span>
<span id="cb487-162"><a href="Swagger.html#cb487-162" tabindex="-1"></a>      <span class="dt">validator</span><span class="op">:</span> (v) <span class="kw">=&gt;</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">isArray</span>(v) <span class="op">&amp;&amp;</span> v<span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb487-163"><a href="Swagger.html#cb487-163" tabindex="-1"></a>      <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;At least one keyword is required!&quot;</span><span class="op">,</span></span>
<span id="cb487-164"><a href="Swagger.html#cb487-164" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb487-165"><a href="Swagger.html#cb487-165" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb487-166"><a href="Swagger.html#cb487-166" tabindex="-1"></a>  <span class="dt">description</span><span class="op">:</span> {</span>
<span id="cb487-167"><a href="Swagger.html#cb487-167" tabindex="-1"></a>    <span class="dt">type</span><span class="op">:</span> <span class="bu">String</span><span class="op">,</span></span>
<span id="cb487-168"><a href="Swagger.html#cb487-168" tabindex="-1"></a>    <span class="dt">required</span><span class="op">:</span> [<span class="kw">true</span><span class="op">,</span> <span class="st">&quot;Description is required!&quot;</span>]<span class="op">,</span></span>
<span id="cb487-169"><a href="Swagger.html#cb487-169" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb487-170"><a href="Swagger.html#cb487-170" tabindex="-1"></a>  <span class="dt">datation</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="bu">String</span><span class="op">,</span> <span class="dt">required</span><span class="op">:</span> <span class="kw">false</span> }<span class="op">,</span></span>
<span id="cb487-171"><a href="Swagger.html#cb487-171" tabindex="-1"></a>  <span class="dt">authors</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="bu">String</span><span class="op">,</span> <span class="dt">required</span><span class="op">:</span> <span class="kw">false</span> }<span class="op">,</span></span>
<span id="cb487-172"><a href="Swagger.html#cb487-172" tabindex="-1"></a>  <span class="dt">location</span><span class="op">:</span> {</span>
<span id="cb487-173"><a href="Swagger.html#cb487-173" tabindex="-1"></a>    <span class="dt">type</span><span class="op">:</span> <span class="bu">String</span><span class="op">,</span></span>
<span id="cb487-174"><a href="Swagger.html#cb487-174" tabindex="-1"></a>    <span class="dt">required</span><span class="op">:</span> [<span class="kw">true</span><span class="op">,</span> <span class="st">&quot;Location description is required!&quot;</span>]<span class="op">,</span></span>
<span id="cb487-175"><a href="Swagger.html#cb487-175" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb487-176"><a href="Swagger.html#cb487-176" tabindex="-1"></a>  <span class="dt">fields</span><span class="op">:</span> {</span>
<span id="cb487-177"><a href="Swagger.html#cb487-177" tabindex="-1"></a>    <span class="dt">type</span><span class="op">:</span> [<span class="bu">String</span>]<span class="op">,</span></span>
<span id="cb487-178"><a href="Swagger.html#cb487-178" tabindex="-1"></a>    <span class="dt">validate</span><span class="op">:</span> {</span>
<span id="cb487-179"><a href="Swagger.html#cb487-179" tabindex="-1"></a>      <span class="dt">validator</span><span class="op">:</span> (v) <span class="kw">=&gt;</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">isArray</span>(v) <span class="op">&amp;&amp;</span> v<span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb487-180"><a href="Swagger.html#cb487-180" tabindex="-1"></a>      <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;At least one field is required!&quot;</span><span class="op">,</span></span>
<span id="cb487-181"><a href="Swagger.html#cb487-181" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb487-182"><a href="Swagger.html#cb487-182" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb487-183"><a href="Swagger.html#cb487-183" tabindex="-1"></a>  <span class="dt">institution</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="bu">String</span><span class="op">,</span> <span class="dt">required</span><span class="op">:</span> [<span class="kw">true</span><span class="op">,</span> <span class="st">&quot;Institution is required!&quot;</span>] }<span class="op">,</span></span>
<span id="cb487-184"><a href="Swagger.html#cb487-184" tabindex="-1"></a>  <span class="dt">heritage</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="bu">String</span><span class="op">,</span> <span class="dt">required</span><span class="op">:</span> [<span class="kw">true</span><span class="op">,</span> <span class="st">&quot;Heritage is required!&quot;</span>] }<span class="op">,</span></span>
<span id="cb487-185"><a href="Swagger.html#cb487-185" tabindex="-1"></a>  <span class="dt">municipality</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="bu">String</span><span class="op">,</span> <span class="dt">required</span><span class="op">:</span> [<span class="kw">true</span><span class="op">,</span> <span class="st">&quot;Municipality is required!&quot;</span>] }<span class="op">,</span></span>
<span id="cb487-186"><a href="Swagger.html#cb487-186" tabindex="-1"></a>  <span class="dt">coordinates</span><span class="op">:</span> {</span>
<span id="cb487-187"><a href="Swagger.html#cb487-187" tabindex="-1"></a>    <span class="dt">type</span><span class="op">:</span> [<span class="bu">Number</span>]<span class="op">,</span></span>
<span id="cb487-188"><a href="Swagger.html#cb487-188" tabindex="-1"></a>    <span class="dt">validate</span><span class="op">:</span> {</span>
<span id="cb487-189"><a href="Swagger.html#cb487-189" tabindex="-1"></a>      <span class="dt">validator</span><span class="op">:</span> (v) <span class="kw">=&gt;</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">isArray</span>(v) <span class="op">&amp;&amp;</span> v<span class="op">.</span><span class="at">length</span> <span class="op">==</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb487-190"><a href="Swagger.html#cb487-190" tabindex="-1"></a>      <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;Coordinates must be an array of two numbers!&quot;</span><span class="op">,</span></span>
<span id="cb487-191"><a href="Swagger.html#cb487-191" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb487-192"><a href="Swagger.html#cb487-192" tabindex="-1"></a>    <span class="dt">index</span><span class="op">:</span> <span class="st">&quot;2dsphere&quot;</span><span class="op">,</span></span>
<span id="cb487-193"><a href="Swagger.html#cb487-193" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb487-194"><a href="Swagger.html#cb487-194" tabindex="-1"></a>  <span class="dt">rating</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="bu">Number</span><span class="op">,</span> <span class="cf">default</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">min</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">max</span><span class="op">:</span> <span class="dv">5</span> }<span class="op">,</span></span>
<span id="cb487-195"><a href="Swagger.html#cb487-195" tabindex="-1"></a>  <span class="dt">comments</span><span class="op">:</span> {</span>
<span id="cb487-196"><a href="Swagger.html#cb487-196" tabindex="-1"></a>    <span class="dt">type</span><span class="op">:</span> [commentSchema]<span class="op">,</span></span>
<span id="cb487-197"><a href="Swagger.html#cb487-197" tabindex="-1"></a>    <span class="dt">validate</span><span class="op">:</span> {</span>
<span id="cb487-198"><a href="Swagger.html#cb487-198" tabindex="-1"></a>      <span class="dt">validator</span><span class="op">:</span> (v) <span class="kw">=&gt;</span> v <span class="op">==</span> <span class="kw">undefined</span> <span class="op">||</span> (<span class="bu">Array</span><span class="op">.</span><span class="fu">isArray</span>(v) <span class="op">&amp;&amp;</span> v<span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span>)<span class="op">,</span></span>
<span id="cb487-199"><a href="Swagger.html#cb487-199" tabindex="-1"></a>      <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;If comments are provided, they must be an array of comments!&quot;</span><span class="op">,</span></span>
<span id="cb487-200"><a href="Swagger.html#cb487-200" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb487-201"><a href="Swagger.html#cb487-201" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb487-202"><a href="Swagger.html#cb487-202" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb487-203"><a href="Swagger.html#cb487-203" tabindex="-1"></a>mongoose<span class="op">.</span><span class="fu">model</span>(<span class="st">&quot;Location&quot;</span><span class="op">,</span> locationSchema<span class="op">,</span> <span class="st">&quot;Locations&quot;</span>)<span class="op">;</span></span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#dokumentiranje-rest-api-ja-z-openapi-specifikacijo code.javascript:eq(2)").markRegExp(/\/\*\*[\s\S]+?\*\//, options_dodaj);
  });
</script>
<p>Poleg shem <code>Location</code> in <code>Comment</code> pa bomo potrebovali še <strong>podporni shemi</strong> <code>Codelist</code> in <code>ErrorMessage</code>, kjer prva opredeljuje dovoljene vrednosti šifrantov, druga pa strukturo sporočila o napaki. Ti shemi bomo dodali kar v začetno opredelitev Swagger dokumenta.</p>
<p><code>server.js</code></p>
<div class="sourceCode" id="cb488"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb488-1"><a href="Swagger.html#cb488-1" tabindex="-1"></a><span class="kw">const</span> swaggerJsDoc <span class="op">=</span> <span class="pp">require</span>(<span class="st">&quot;swagger-jsdoc&quot;</span>)<span class="op">;</span></span>
<span id="cb488-2"><a href="Swagger.html#cb488-2" tabindex="-1"></a><span class="kw">const</span> swaggerUi <span class="op">=</span> <span class="pp">require</span>(<span class="st">&quot;swagger-ui-express&quot;</span>)<span class="op">;</span></span>
<span id="cb488-3"><a href="Swagger.html#cb488-3" tabindex="-1"></a><span class="kw">const</span> swaggerDocument <span class="op">=</span> <span class="fu">swaggerJsDoc</span>({</span>
<span id="cb488-4"><a href="Swagger.html#cb488-4" tabindex="-1"></a>  <span class="dt">definition</span><span class="op">:</span> {</span>
<span id="cb488-5"><a href="Swagger.html#cb488-5" tabindex="-1"></a>    <span class="dt">openapi</span><span class="op">:</span> <span class="st">&quot;3.1.0&quot;</span><span class="op">,</span></span>
<span id="cb488-6"><a href="Swagger.html#cb488-6" tabindex="-1"></a>    <span class="dt">info</span><span class="op">:</span> {</span>
<span id="cb488-7"><a href="Swagger.html#cb488-7" tabindex="-1"></a>      <span class="op">...</span></span>
<span id="cb488-8"><a href="Swagger.html#cb488-8" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb488-9"><a href="Swagger.html#cb488-9" tabindex="-1"></a>    <span class="dt">servers</span><span class="op">:</span> [</span>
<span id="cb488-10"><a href="Swagger.html#cb488-10" tabindex="-1"></a>      <span class="op">...</span></span>
<span id="cb488-11"><a href="Swagger.html#cb488-11" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb488-12"><a href="Swagger.html#cb488-12" tabindex="-1"></a>    <span class="dt">components</span><span class="op">:</span> {</span>
<span id="cb488-13"><a href="Swagger.html#cb488-13" tabindex="-1"></a>      <span class="dt">schemas</span><span class="op">:</span> {</span>
<span id="cb488-14"><a href="Swagger.html#cb488-14" tabindex="-1"></a>        <span class="dt">Codelist</span><span class="op">:</span> {</span>
<span id="cb488-15"><a href="Swagger.html#cb488-15" tabindex="-1"></a>          <span class="dt">type</span><span class="op">:</span> <span class="st">&quot;string&quot;</span><span class="op">,</span></span>
<span id="cb488-16"><a href="Swagger.html#cb488-16" tabindex="-1"></a>          <span class="dt">description</span><span class="op">:</span></span>
<span id="cb488-17"><a href="Swagger.html#cb488-17" tabindex="-1"></a>            <span class="st">&quot;Allowed values for the codelist used in filtering locations.&quot;</span><span class="op">,</span></span>
<span id="cb488-18"><a href="Swagger.html#cb488-18" tabindex="-1"></a>          <span class="dt">enum</span><span class="op">:</span> [</span>
<span id="cb488-19"><a href="Swagger.html#cb488-19" tabindex="-1"></a>            <span class="st">&quot;category&quot;</span><span class="op">,</span></span>
<span id="cb488-20"><a href="Swagger.html#cb488-20" tabindex="-1"></a>            <span class="st">&quot;type&quot;</span><span class="op">,</span></span>
<span id="cb488-21"><a href="Swagger.html#cb488-21" tabindex="-1"></a>            <span class="st">&quot;keywords&quot;</span><span class="op">,</span></span>
<span id="cb488-22"><a href="Swagger.html#cb488-22" tabindex="-1"></a>            <span class="st">&quot;institution&quot;</span><span class="op">,</span></span>
<span id="cb488-23"><a href="Swagger.html#cb488-23" tabindex="-1"></a>            <span class="st">&quot;municipality&quot;</span><span class="op">,</span></span>
<span id="cb488-24"><a href="Swagger.html#cb488-24" tabindex="-1"></a>            <span class="st">&quot;fields&quot;</span><span class="op">,</span></span>
<span id="cb488-25"><a href="Swagger.html#cb488-25" tabindex="-1"></a>          ]<span class="op">,</span></span>
<span id="cb488-26"><a href="Swagger.html#cb488-26" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb488-27"><a href="Swagger.html#cb488-27" tabindex="-1"></a>        <span class="dt">ErrorMessage</span><span class="op">:</span> {</span>
<span id="cb488-28"><a href="Swagger.html#cb488-28" tabindex="-1"></a>          <span class="dt">type</span><span class="op">:</span> <span class="st">&quot;object&quot;</span><span class="op">,</span></span>
<span id="cb488-29"><a href="Swagger.html#cb488-29" tabindex="-1"></a>          <span class="dt">properties</span><span class="op">:</span> {</span>
<span id="cb488-30"><a href="Swagger.html#cb488-30" tabindex="-1"></a>            <span class="dt">message</span><span class="op">:</span> {</span>
<span id="cb488-31"><a href="Swagger.html#cb488-31" tabindex="-1"></a>              <span class="dt">type</span><span class="op">:</span> <span class="st">&quot;string&quot;</span><span class="op">,</span></span>
<span id="cb488-32"><a href="Swagger.html#cb488-32" tabindex="-1"></a>              <span class="dt">description</span><span class="op">:</span> <span class="st">&quot;Message describing the error.&quot;</span><span class="op">,</span></span>
<span id="cb488-33"><a href="Swagger.html#cb488-33" tabindex="-1"></a>            }<span class="op">,</span></span>
<span id="cb488-34"><a href="Swagger.html#cb488-34" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb488-35"><a href="Swagger.html#cb488-35" tabindex="-1"></a>          <span class="dt">required</span><span class="op">:</span> [<span class="st">&quot;message&quot;</span>]<span class="op">,</span></span>
<span id="cb488-36"><a href="Swagger.html#cb488-36" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb488-37"><a href="Swagger.html#cb488-37" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb488-38"><a href="Swagger.html#cb488-38" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb488-39"><a href="Swagger.html#cb488-39" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb488-40"><a href="Swagger.html#cb488-40" tabindex="-1"></a>  <span class="dt">apis</span><span class="op">:</span> [<span class="st">&quot;./api/models/locations.js&quot;</span><span class="op">,</span> <span class="st">&quot;./api/controllers/*.js&quot;</span>]<span class="op">,</span></span>
<span id="cb488-41"><a href="Swagger.html#cb488-41" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#dokumentiranje-rest-api-ja-z-openapi-specifikacijo code.javascript:eq(3)").markRegExp(/\s+?components:[\s\S]+?error[^\}]+?\},[^\}]+?\},[^\}]+?\},[^\}]+?\},[^\}]+?\},/, options_dodaj);
  });
</script>
<p>Zaradi večjega števila metod, ki jih ponuja REST API strežnik, je s pomočjo <a href="https://swagger.io/docs/specification/grouping-operations-with-tags/"><i class="fa-solid fa-tag"></i><code>tags</code></a> smiselno <strong>opredeliti kategorije</strong> oz. oznake, kamor lahko kasneje <strong>uvrstimo posamezne funkcionalnosti</strong>. To opredelitev naših vsebinskih sklopov lokacij in komentarjev bomo dodali v začetno opredelitev Swagger dokumenta v datoteki <code>server.js</code></p>
<p><code>server.js</code></p>
<div class="sourceCode" id="cb489"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb489-1"><a href="Swagger.html#cb489-1" tabindex="-1"></a><span class="kw">const</span> swaggerJsDoc <span class="op">=</span> <span class="pp">require</span>(<span class="st">&quot;swagger-jsdoc&quot;</span>)<span class="op">;</span></span>
<span id="cb489-2"><a href="Swagger.html#cb489-2" tabindex="-1"></a><span class="kw">const</span> swaggerUi <span class="op">=</span> <span class="pp">require</span>(<span class="st">&quot;swagger-ui-express&quot;</span>)<span class="op">;</span></span>
<span id="cb489-3"><a href="Swagger.html#cb489-3" tabindex="-1"></a><span class="kw">const</span> swaggerDocument <span class="op">=</span> <span class="fu">swaggerJsDoc</span>({</span>
<span id="cb489-4"><a href="Swagger.html#cb489-4" tabindex="-1"></a>  <span class="dt">definition</span><span class="op">:</span> {</span>
<span id="cb489-5"><a href="Swagger.html#cb489-5" tabindex="-1"></a>    <span class="dt">openapi</span><span class="op">:</span> <span class="st">&quot;3.1.0&quot;</span><span class="op">,</span></span>
<span id="cb489-6"><a href="Swagger.html#cb489-6" tabindex="-1"></a>    <span class="dt">info</span><span class="op">:</span> {</span>
<span id="cb489-7"><a href="Swagger.html#cb489-7" tabindex="-1"></a>      <span class="op">...</span></span>
<span id="cb489-8"><a href="Swagger.html#cb489-8" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb489-9"><a href="Swagger.html#cb489-9" tabindex="-1"></a>    <span class="dt">tags</span><span class="op">:</span> [</span>
<span id="cb489-10"><a href="Swagger.html#cb489-10" tabindex="-1"></a>      {</span>
<span id="cb489-11"><a href="Swagger.html#cb489-11" tabindex="-1"></a>        <span class="dt">name</span><span class="op">:</span> <span class="st">&quot;Locations&quot;</span><span class="op">,</span></span>
<span id="cb489-12"><a href="Swagger.html#cb489-12" tabindex="-1"></a>        <span class="dt">description</span><span class="op">:</span> <span class="st">&quot;Cultural heritage &lt;b&gt;locations&lt;/b&gt; in Slovenia.&quot;</span><span class="op">,</span></span>
<span id="cb489-13"><a href="Swagger.html#cb489-13" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb489-14"><a href="Swagger.html#cb489-14" tabindex="-1"></a>      {</span>
<span id="cb489-15"><a href="Swagger.html#cb489-15" tabindex="-1"></a>        <span class="dt">name</span><span class="op">:</span> <span class="st">&quot;Comments&quot;</span><span class="op">,</span></span>
<span id="cb489-16"><a href="Swagger.html#cb489-16" tabindex="-1"></a>        <span class="dt">description</span><span class="op">:</span> <span class="st">&quot;&lt;b&gt;Comments&lt;/b&gt; for cultural heritage locations in Slovenia.&quot;</span><span class="op">,</span></span>
<span id="cb489-17"><a href="Swagger.html#cb489-17" tabindex="-1"></a>      }</span>
<span id="cb489-18"><a href="Swagger.html#cb489-18" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb489-19"><a href="Swagger.html#cb489-19" tabindex="-1"></a>    <span class="dt">servers</span><span class="op">:</span> [</span>
<span id="cb489-20"><a href="Swagger.html#cb489-20" tabindex="-1"></a>      <span class="op">...</span></span>
<span id="cb489-21"><a href="Swagger.html#cb489-21" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb489-22"><a href="Swagger.html#cb489-22" tabindex="-1"></a>    <span class="dt">components</span><span class="op">:</span> {</span>
<span id="cb489-23"><a href="Swagger.html#cb489-23" tabindex="-1"></a>      <span class="dt">schemas</span><span class="op">:</span> {</span>
<span id="cb489-24"><a href="Swagger.html#cb489-24" tabindex="-1"></a>        <span class="op">...</span></span>
<span id="cb489-25"><a href="Swagger.html#cb489-25" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb489-26"><a href="Swagger.html#cb489-26" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb489-27"><a href="Swagger.html#cb489-27" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb489-28"><a href="Swagger.html#cb489-28" tabindex="-1"></a>  <span class="dt">apis</span><span class="op">:</span> [<span class="st">&quot;./api/models/locations.js&quot;</span><span class="op">,</span> <span class="st">&quot;./api/controllers/*.js&quot;</span>]<span class="op">,</span></span>
<span id="cb489-29"><a href="Swagger.html#cb489-29" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#dokumentiranje-rest-api-ja-z-openapi-specifikacijo code.javascript:eq(4)").markRegExp(/\s+?tags[\s\S]+?\],/, options_dodaj);
  });
</script>
<p>Najbolj pomemben del je <strong>dokumentacija posameznih REST API metod</strong>, kjer za vsako izmed njih navedemo <a href="https://swagger.io/docs/specification/paths-and-operations/"><i class="fa-solid fa-earth-europe"></i><strong>pot</strong></a> (npr. <code>/locations</code>), <a href="https://swagger.io/docs/specification/paths-and-operations/"><i class="fa-solid fa-earth-europe"></i><strong>HTTP metodo</strong></a> (npr. <code>GET</code>, <code>POST</code>, <code>PUT</code> ali <code>DELETE</code>), <a href="https://swagger.io/docs/specification/describing-parameters/"><i class="fa-solid fa-earth-europe"></i><strong>parametre</strong></a> (npr. <a href="https://swagger.io/docs/specification/describing-parameters/#query-parameters"><i class="fa-solid fa-tag"></i><code>query</code></a> (npr. <code>/locations/distance?nResults=2</code>), <a href="https://swagger.io/docs/specification/describing-parameters/#path-parameters"><i class="fa-solid fa-tag"></i><code>path</code></a> (npr. <code>/locations/{locationId}</code>), <a href="https://swagger.io/docs/specification/describing-parameters/#header-parameters"><i class="fa-solid fa-tag"></i><code>header</code></a>, <a href="https://swagger.io/docs/specification/describing-parameters/#cookie-parameters"><i class="fa-solid fa-tag"></i><code>cookie</code></a>), <a href="https://swagger.io/docs/specification/describing-responses/"><span class="skupaj"><i class="fa-solid fa-earth-europe"></i><strong>statuse</strong></span> <strong>odgovorov</strong></a> (npr. <code>200</code>, <code>204</code>, <code>400</code>, <code>404</code>, <code>500</code> itd.) in <a href="https://swagger.io/docs/specification/media-types/"><i class="fa-solid fa-earth-europe"></i><strong>formate odgovorov</strong></a> (npr. <code>application/json</code>).</p>
<p>Pri opisovanju metod bomo opredelili tudi omejitve, ki izhajajo iz sheme v podatkovni bazi MongoDB. Zaloge vrednosti lahko omejimo z intervalom, kjer opredelimo <i class="fa-solid fa-tag"></i><code>minimum</code> in <i class="fa-solid fa-tag"></i><code>maximum</code> ali <a href="https://swagger.io/docs/specification/data-models/enums/"><i class="fa-solid fa-tag"></i><code>enum</code></a>.</p>
<p><code>api/controllers/locations.js</code></p>
<div class="sourceCode" id="cb490"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb490-1"><a href="Swagger.html#cb490-1" tabindex="-1"></a><span class="kw">const</span> mongoose <span class="op">=</span> <span class="pp">require</span>(<span class="st">&quot;mongoose&quot;</span>)<span class="op">;</span></span>
<span id="cb490-2"><a href="Swagger.html#cb490-2" tabindex="-1"></a><span class="kw">const</span> <span class="bu">Location</span> <span class="op">=</span> mongoose<span class="op">.</span><span class="fu">model</span>(<span class="st">&quot;Location&quot;</span>)<span class="op">;</span></span>
<span id="cb490-3"><a href="Swagger.html#cb490-3" tabindex="-1"></a><span class="kw">const</span> allowedCodelists <span class="op">=</span> [</span>
<span id="cb490-4"><a href="Swagger.html#cb490-4" tabindex="-1"></a>  <span class="st">&quot;category&quot;</span><span class="op">,</span></span>
<span id="cb490-5"><a href="Swagger.html#cb490-5" tabindex="-1"></a>  <span class="st">&quot;type&quot;</span><span class="op">,</span></span>
<span id="cb490-6"><a href="Swagger.html#cb490-6" tabindex="-1"></a>  <span class="st">&quot;keywords&quot;</span><span class="op">,</span></span>
<span id="cb490-7"><a href="Swagger.html#cb490-7" tabindex="-1"></a>  <span class="st">&quot;institution&quot;</span><span class="op">,</span></span>
<span id="cb490-8"><a href="Swagger.html#cb490-8" tabindex="-1"></a>  <span class="st">&quot;municipality&quot;</span><span class="op">,</span></span>
<span id="cb490-9"><a href="Swagger.html#cb490-9" tabindex="-1"></a>  <span class="st">&quot;fields&quot;</span><span class="op">,</span></span>
<span id="cb490-10"><a href="Swagger.html#cb490-10" tabindex="-1"></a>]<span class="op">;</span></span>
<span id="cb490-11"><a href="Swagger.html#cb490-11" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb490-12"><a href="Swagger.html#cb490-12" tabindex="-1"></a><span class="co"> * </span><span class="an">@openapi</span></span>
<span id="cb490-13"><a href="Swagger.html#cb490-13" tabindex="-1"></a><span class="co"> *  /locations/distance:</span></span>
<span id="cb490-14"><a href="Swagger.html#cb490-14" tabindex="-1"></a><span class="co"> *   get:</span></span>
<span id="cb490-15"><a href="Swagger.html#cb490-15" tabindex="-1"></a><span class="co"> *    summary: Retrieve locations within a given distance.</span></span>
<span id="cb490-16"><a href="Swagger.html#cb490-16" tabindex="-1"></a><span class="co"> *    description: Retrieve **cultural heritages within a given distance** from a given location.</span></span>
<span id="cb490-17"><a href="Swagger.html#cb490-17" tabindex="-1"></a><span class="co"> *    tags: [Locations]</span></span>
<span id="cb490-18"><a href="Swagger.html#cb490-18" tabindex="-1"></a><span class="co"> *    parameters:</span></span>
<span id="cb490-19"><a href="Swagger.html#cb490-19" tabindex="-1"></a><span class="co"> *     - name: lat</span></span>
<span id="cb490-20"><a href="Swagger.html#cb490-20" tabindex="-1"></a><span class="co"> *       in: query</span></span>
<span id="cb490-21"><a href="Swagger.html#cb490-21" tabindex="-1"></a><span class="co"> *       required: true</span></span>
<span id="cb490-22"><a href="Swagger.html#cb490-22" tabindex="-1"></a><span class="co"> *       description: </span><span class="kw">&lt;b&gt;</span><span class="co">latitude</span><span class="kw">&lt;/b&gt;</span><span class="co"> of the location</span></span>
<span id="cb490-23"><a href="Swagger.html#cb490-23" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb490-24"><a href="Swagger.html#cb490-24" tabindex="-1"></a><span class="co"> *        type: number</span></span>
<span id="cb490-25"><a href="Swagger.html#cb490-25" tabindex="-1"></a><span class="co"> *        minimum: -180</span></span>
<span id="cb490-26"><a href="Swagger.html#cb490-26" tabindex="-1"></a><span class="co"> *        maximum: 180</span></span>
<span id="cb490-27"><a href="Swagger.html#cb490-27" tabindex="-1"></a><span class="co"> *       example: 46.050129</span></span>
<span id="cb490-28"><a href="Swagger.html#cb490-28" tabindex="-1"></a><span class="co"> *     - name: lng</span></span>
<span id="cb490-29"><a href="Swagger.html#cb490-29" tabindex="-1"></a><span class="co"> *       in: query</span></span>
<span id="cb490-30"><a href="Swagger.html#cb490-30" tabindex="-1"></a><span class="co"> *       required: true</span></span>
<span id="cb490-31"><a href="Swagger.html#cb490-31" tabindex="-1"></a><span class="co"> *       description: </span><span class="kw">&lt;b&gt;</span><span class="co">longitude</span><span class="kw">&lt;/b&gt;</span><span class="co"> of the location</span></span>
<span id="cb490-32"><a href="Swagger.html#cb490-32" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb490-33"><a href="Swagger.html#cb490-33" tabindex="-1"></a><span class="co"> *        type: number</span></span>
<span id="cb490-34"><a href="Swagger.html#cb490-34" tabindex="-1"></a><span class="co"> *        minimum: -90</span></span>
<span id="cb490-35"><a href="Swagger.html#cb490-35" tabindex="-1"></a><span class="co"> *        maximum: 90</span></span>
<span id="cb490-36"><a href="Swagger.html#cb490-36" tabindex="-1"></a><span class="co"> *       example: 14.469027</span></span>
<span id="cb490-37"><a href="Swagger.html#cb490-37" tabindex="-1"></a><span class="co"> *     - name: distance</span></span>
<span id="cb490-38"><a href="Swagger.html#cb490-38" tabindex="-1"></a><span class="co"> *       in: query</span></span>
<span id="cb490-39"><a href="Swagger.html#cb490-39" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb490-40"><a href="Swagger.html#cb490-40" tabindex="-1"></a><span class="co"> *        type: number</span></span>
<span id="cb490-41"><a href="Swagger.html#cb490-41" tabindex="-1"></a><span class="co"> *        minimum: 0</span></span>
<span id="cb490-42"><a href="Swagger.html#cb490-42" tabindex="-1"></a><span class="co"> *        default: 5</span></span>
<span id="cb490-43"><a href="Swagger.html#cb490-43" tabindex="-1"></a><span class="co"> *       description: maximum </span><span class="kw">&lt;b&gt;</span><span class="co">distance</span><span class="kw">&lt;/b&gt;</span><span class="co"> in kilometers</span></span>
<span id="cb490-44"><a href="Swagger.html#cb490-44" tabindex="-1"></a><span class="co"> *     - name: nResults</span></span>
<span id="cb490-45"><a href="Swagger.html#cb490-45" tabindex="-1"></a><span class="co"> *       in: query</span></span>
<span id="cb490-46"><a href="Swagger.html#cb490-46" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb490-47"><a href="Swagger.html#cb490-47" tabindex="-1"></a><span class="co"> *        type: integer</span></span>
<span id="cb490-48"><a href="Swagger.html#cb490-48" tabindex="-1"></a><span class="co"> *        minimum: 1</span></span>
<span id="cb490-49"><a href="Swagger.html#cb490-49" tabindex="-1"></a><span class="co"> *        default: 10</span></span>
<span id="cb490-50"><a href="Swagger.html#cb490-50" tabindex="-1"></a><span class="co"> *       description: maximum </span><span class="kw">&lt;b&gt;</span><span class="co">number of results</span><span class="kw">&lt;/b&gt;</span></span>
<span id="cb490-51"><a href="Swagger.html#cb490-51" tabindex="-1"></a><span class="co"> *    responses:</span></span>
<span id="cb490-52"><a href="Swagger.html#cb490-52" tabindex="-1"></a><span class="co"> *     &#39;200&#39;:</span></span>
<span id="cb490-53"><a href="Swagger.html#cb490-53" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">OK</span><span class="kw">&lt;/b&gt;</span><span class="co">, with list of locations.</span></span>
<span id="cb490-54"><a href="Swagger.html#cb490-54" tabindex="-1"></a><span class="co"> *      content:</span></span>
<span id="cb490-55"><a href="Swagger.html#cb490-55" tabindex="-1"></a><span class="co"> *       application/json:</span></span>
<span id="cb490-56"><a href="Swagger.html#cb490-56" tabindex="-1"></a><span class="co"> *        schema:</span></span>
<span id="cb490-57"><a href="Swagger.html#cb490-57" tabindex="-1"></a><span class="co"> *         $ref: &#39;#/components/schemas/Location&#39;</span></span>
<span id="cb490-58"><a href="Swagger.html#cb490-58" tabindex="-1"></a><span class="co"> *        example:</span></span>
<span id="cb490-59"><a href="Swagger.html#cb490-59" tabindex="-1"></a><span class="co"> *         - _id: 635a62f5dc5d7968e68467e3</span></span>
<span id="cb490-60"><a href="Swagger.html#cb490-60" tabindex="-1"></a><span class="co"> *           name: Ljubljana - Cankarjeva spominska soba na Rožniku</span></span>
<span id="cb490-61"><a href="Swagger.html#cb490-61" tabindex="-1"></a><span class="co"> *           category: spominski objekti in kraji</span></span>
<span id="cb490-62"><a href="Swagger.html#cb490-62" tabindex="-1"></a><span class="co"> *           type: memorialna dediščina</span></span>
<span id="cb490-63"><a href="Swagger.html#cb490-63" tabindex="-1"></a><span class="co"> *           keywords: spominska soba</span></span>
<span id="cb490-64"><a href="Swagger.html#cb490-64" tabindex="-1"></a><span class="co"> *           description: Spominska soba, posvečena Ivanu Cankarju, je bila urejena leta 1948 in prenovljena v letih 1965 in 1998. Pisatelj je na Rožniku živel v letih 1910 - 1917, muzejsko postavitev je pripravil Mestni muzej Ljubljana.</span></span>
<span id="cb490-65"><a href="Swagger.html#cb490-65" tabindex="-1"></a><span class="co"> *           location: Spominska soba je urejena v stavbi, ki stoji nasproti gostilne Rožnik, na Cankarjevem vrhu (Rožnik).</span></span>
<span id="cb490-66"><a href="Swagger.html#cb490-66" tabindex="-1"></a><span class="co"> *           institution: ZVKD Ljubljana</span></span>
<span id="cb490-67"><a href="Swagger.html#cb490-67" tabindex="-1"></a><span class="co"> *           heritage: neznano</span></span>
<span id="cb490-68"><a href="Swagger.html#cb490-68" tabindex="-1"></a><span class="co"> *           municipality: LJUBLJANA</span></span>
<span id="cb490-69"><a href="Swagger.html#cb490-69" tabindex="-1"></a><span class="co"> *           coordinates: [14.4765778196, 46.0557820208]</span></span>
<span id="cb490-70"><a href="Swagger.html#cb490-70" tabindex="-1"></a><span class="co"> *           synonyms: [Cankarjev vrh]</span></span>
<span id="cb490-71"><a href="Swagger.html#cb490-71" tabindex="-1"></a><span class="co"> *           datation: 20. stol., 1948, 1965, 1998</span></span>
<span id="cb490-72"><a href="Swagger.html#cb490-72" tabindex="-1"></a><span class="co"> *           authors: Mestni muzej Ljubljana (arhitekt; 1948)</span></span>
<span id="cb490-73"><a href="Swagger.html#cb490-73" tabindex="-1"></a><span class="co"> *           fields: [zgodovina]</span></span>
<span id="cb490-74"><a href="Swagger.html#cb490-74" tabindex="-1"></a><span class="co"> *           distance: 858.0692052049162</span></span>
<span id="cb490-75"><a href="Swagger.html#cb490-75" tabindex="-1"></a><span class="co"> *     &#39;400&#39;:</span></span>
<span id="cb490-76"><a href="Swagger.html#cb490-76" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">Bad Request</span><span class="kw">&lt;/b&gt;</span><span class="co">, with error message.</span></span>
<span id="cb490-77"><a href="Swagger.html#cb490-77" tabindex="-1"></a><span class="co"> *      content:</span></span>
<span id="cb490-78"><a href="Swagger.html#cb490-78" tabindex="-1"></a><span class="co"> *       application/json:</span></span>
<span id="cb490-79"><a href="Swagger.html#cb490-79" tabindex="-1"></a><span class="co"> *        schema:</span></span>
<span id="cb490-80"><a href="Swagger.html#cb490-80" tabindex="-1"></a><span class="co"> *         $ref: &#39;#/components/schemas/ErrorMessage&#39;</span></span>
<span id="cb490-81"><a href="Swagger.html#cb490-81" tabindex="-1"></a><span class="co"> *        example:</span></span>
<span id="cb490-82"><a href="Swagger.html#cb490-82" tabindex="-1"></a><span class="co"> *         message: &quot;Query parameters &#39;lng&#39; and &#39;lat&#39; are required&quot;</span></span>
<span id="cb490-83"><a href="Swagger.html#cb490-83" tabindex="-1"></a><span class="co"> *     &#39;404&#39;:</span></span>
<span id="cb490-84"><a href="Swagger.html#cb490-84" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">Not Found</span><span class="kw">&lt;/b&gt;</span><span class="co">, with error message.</span></span>
<span id="cb490-85"><a href="Swagger.html#cb490-85" tabindex="-1"></a><span class="co"> *      content:</span></span>
<span id="cb490-86"><a href="Swagger.html#cb490-86" tabindex="-1"></a><span class="co"> *       application/json:</span></span>
<span id="cb490-87"><a href="Swagger.html#cb490-87" tabindex="-1"></a><span class="co"> *        schema:</span></span>
<span id="cb490-88"><a href="Swagger.html#cb490-88" tabindex="-1"></a><span class="co"> *         $ref: &#39;#/components/schemas/ErrorMessage&#39;</span></span>
<span id="cb490-89"><a href="Swagger.html#cb490-89" tabindex="-1"></a><span class="co"> *        example:</span></span>
<span id="cb490-90"><a href="Swagger.html#cb490-90" tabindex="-1"></a><span class="co"> *         message: &quot;No locations found.&quot;</span></span>
<span id="cb490-91"><a href="Swagger.html#cb490-91" tabindex="-1"></a><span class="co"> *     &#39;500&#39;:</span></span>
<span id="cb490-92"><a href="Swagger.html#cb490-92" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">Internal Server Error</span><span class="kw">&lt;/b&gt;</span><span class="co">, with error message.</span></span>
<span id="cb490-93"><a href="Swagger.html#cb490-93" tabindex="-1"></a><span class="co"> *      content:</span></span>
<span id="cb490-94"><a href="Swagger.html#cb490-94" tabindex="-1"></a><span class="co"> *       application/json:</span></span>
<span id="cb490-95"><a href="Swagger.html#cb490-95" tabindex="-1"></a><span class="co"> *        schema:</span></span>
<span id="cb490-96"><a href="Swagger.html#cb490-96" tabindex="-1"></a><span class="co"> *         $ref: &#39;#/components/schemas/ErrorMessage&#39;</span></span>
<span id="cb490-97"><a href="Swagger.html#cb490-97" tabindex="-1"></a><span class="co"> *        example:</span></span>
<span id="cb490-98"><a href="Swagger.html#cb490-98" tabindex="-1"></a><span class="co"> *         message: &quot;geo near accepts just one argument when querying for a GeoJSON point. Extra field found: $maxDistance: 5000.0&quot;</span></span>
<span id="cb490-99"><a href="Swagger.html#cb490-99" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb490-100"><a href="Swagger.html#cb490-100" tabindex="-1"></a><span class="kw">const</span> locationsListByDistance <span class="op">=</span> <span class="kw">async</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb490-101"><a href="Swagger.html#cb490-101" tabindex="-1"></a>  <span class="kw">let</span> lng <span class="op">=</span> <span class="pp">parseFloat</span>(req<span class="op">.</span><span class="at">query</span><span class="op">.</span><span class="at">lng</span>)<span class="op">;</span></span>
<span id="cb490-102"><a href="Swagger.html#cb490-102" tabindex="-1"></a>  <span class="kw">let</span> lat <span class="op">=</span> <span class="pp">parseFloat</span>(req<span class="op">.</span><span class="at">query</span><span class="op">.</span><span class="at">lat</span>)<span class="op">;</span></span>
<span id="cb490-103"><a href="Swagger.html#cb490-103" tabindex="-1"></a>  <span class="kw">let</span> distance <span class="op">=</span> <span class="pp">parseFloat</span>(req<span class="op">.</span><span class="at">query</span><span class="op">.</span><span class="at">maxDistance</span>)<span class="op">;</span></span>
<span id="cb490-104"><a href="Swagger.html#cb490-104" tabindex="-1"></a>  distance <span class="op">=</span> <span class="dv">1000</span> <span class="op">*</span> (<span class="pp">isNaN</span>(distance) <span class="op">?</span> <span class="dv">5</span> <span class="op">:</span> distance)<span class="op">;</span></span>
<span id="cb490-105"><a href="Swagger.html#cb490-105" tabindex="-1"></a>  <span class="kw">let</span> nResults <span class="op">=</span> <span class="pp">parseInt</span>(req<span class="op">.</span><span class="at">query</span><span class="op">.</span><span class="at">nResults</span>)<span class="op">;</span></span>
<span id="cb490-106"><a href="Swagger.html#cb490-106" tabindex="-1"></a>  nResults <span class="op">=</span> <span class="pp">isNaN</span>(nResults) <span class="op">?</span> <span class="dv">10</span> <span class="op">:</span> nResults<span class="op">;</span></span>
<span id="cb490-107"><a href="Swagger.html#cb490-107" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span>lng <span class="op">||</span> <span class="op">!</span>lat)</span>
<span id="cb490-108"><a href="Swagger.html#cb490-108" tabindex="-1"></a>    res</span>
<span id="cb490-109"><a href="Swagger.html#cb490-109" tabindex="-1"></a>      <span class="op">.</span><span class="fu">status</span>(<span class="dv">400</span>)</span>
<span id="cb490-110"><a href="Swagger.html#cb490-110" tabindex="-1"></a>      <span class="op">.</span><span class="fu">json</span>({ <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;Query parameters &#39;lng&#39; and &#39;lat&#39; are required.&quot;</span> })<span class="op">;</span></span>
<span id="cb490-111"><a href="Swagger.html#cb490-111" tabindex="-1"></a>  <span class="cf">else</span> {</span>
<span id="cb490-112"><a href="Swagger.html#cb490-112" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb490-113"><a href="Swagger.html#cb490-113" tabindex="-1"></a>      <span class="kw">let</span> locations <span class="op">=</span> <span class="cf">await</span> <span class="bu">Location</span><span class="op">.</span><span class="fu">aggregate</span>([</span>
<span id="cb490-114"><a href="Swagger.html#cb490-114" tabindex="-1"></a>        {</span>
<span id="cb490-115"><a href="Swagger.html#cb490-115" tabindex="-1"></a>          <span class="dt">$geoNear</span><span class="op">:</span> {</span>
<span id="cb490-116"><a href="Swagger.html#cb490-116" tabindex="-1"></a>            <span class="dt">near</span><span class="op">:</span> {</span>
<span id="cb490-117"><a href="Swagger.html#cb490-117" tabindex="-1"></a>              <span class="dt">type</span><span class="op">:</span> <span class="st">&quot;Point&quot;</span><span class="op">,</span></span>
<span id="cb490-118"><a href="Swagger.html#cb490-118" tabindex="-1"></a>              <span class="dt">coordinates</span><span class="op">:</span> [lng<span class="op">,</span> lat]<span class="op">,</span></span>
<span id="cb490-119"><a href="Swagger.html#cb490-119" tabindex="-1"></a>            }<span class="op">,</span></span>
<span id="cb490-120"><a href="Swagger.html#cb490-120" tabindex="-1"></a>            <span class="dt">distanceField</span><span class="op">:</span> <span class="st">&quot;distance&quot;</span><span class="op">,</span></span>
<span id="cb490-121"><a href="Swagger.html#cb490-121" tabindex="-1"></a>            <span class="dt">spherical</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb490-122"><a href="Swagger.html#cb490-122" tabindex="-1"></a>            <span class="dt">maxDistance</span><span class="op">:</span> distance<span class="op">,</span></span>
<span id="cb490-123"><a href="Swagger.html#cb490-123" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb490-124"><a href="Swagger.html#cb490-124" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb490-125"><a href="Swagger.html#cb490-125" tabindex="-1"></a>        { <span class="dt">$project</span><span class="op">:</span> { <span class="dt">comments</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">id</span><span class="op">:</span> <span class="kw">false</span> } }<span class="op">,</span></span>
<span id="cb490-126"><a href="Swagger.html#cb490-126" tabindex="-1"></a>        { <span class="dt">$limit</span><span class="op">:</span> nResults }<span class="op">,</span></span>
<span id="cb490-127"><a href="Swagger.html#cb490-127" tabindex="-1"></a>      ])<span class="op">;</span></span>
<span id="cb490-128"><a href="Swagger.html#cb490-128" tabindex="-1"></a>      <span class="cf">if</span> (<span class="op">!</span>locations <span class="op">||</span> locations<span class="op">.</span><span class="at">length</span> <span class="op">==</span> <span class="dv">0</span>)</span>
<span id="cb490-129"><a href="Swagger.html#cb490-129" tabindex="-1"></a>        res<span class="op">.</span><span class="fu">status</span>(<span class="dv">404</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;No locations found.&quot;</span> })<span class="op">;</span></span>
<span id="cb490-130"><a href="Swagger.html#cb490-130" tabindex="-1"></a>      <span class="cf">else</span> res<span class="op">.</span><span class="fu">status</span>(<span class="dv">200</span>)<span class="op">.</span><span class="fu">json</span>(locations)<span class="op">;</span></span>
<span id="cb490-131"><a href="Swagger.html#cb490-131" tabindex="-1"></a>    } <span class="cf">catch</span> (err) {</span>
<span id="cb490-132"><a href="Swagger.html#cb490-132" tabindex="-1"></a>      res<span class="op">.</span><span class="fu">status</span>(<span class="dv">500</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">message</span><span class="op">:</span> err<span class="op">.</span><span class="at">message</span> })<span class="op">;</span></span>
<span id="cb490-133"><a href="Swagger.html#cb490-133" tabindex="-1"></a>    }</span>
<span id="cb490-134"><a href="Swagger.html#cb490-134" tabindex="-1"></a>  }</span>
<span id="cb490-135"><a href="Swagger.html#cb490-135" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb490-136"><a href="Swagger.html#cb490-136" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb490-137"><a href="Swagger.html#cb490-137" tabindex="-1"></a><span class="co"> * </span><span class="an">@openapi</span></span>
<span id="cb490-138"><a href="Swagger.html#cb490-138" tabindex="-1"></a><span class="co"> * /locations/search:</span></span>
<span id="cb490-139"><a href="Swagger.html#cb490-139" tabindex="-1"></a><span class="co"> *   get:</span></span>
<span id="cb490-140"><a href="Swagger.html#cb490-140" tabindex="-1"></a><span class="co"> *    summary: Retrieve locations filtered by codelist values.</span></span>
<span id="cb490-141"><a href="Swagger.html#cb490-141" tabindex="-1"></a><span class="co"> *    description: Retrieve **cultural heritages limited with** selected **codelist&#39;s values**.</span></span>
<span id="cb490-142"><a href="Swagger.html#cb490-142" tabindex="-1"></a><span class="co"> *    tags: [Locations]</span></span>
<span id="cb490-143"><a href="Swagger.html#cb490-143" tabindex="-1"></a><span class="co"> *    parameters:</span></span>
<span id="cb490-144"><a href="Swagger.html#cb490-144" tabindex="-1"></a><span class="co"> *     - name: category</span></span>
<span id="cb490-145"><a href="Swagger.html#cb490-145" tabindex="-1"></a><span class="co"> *       in: query</span></span>
<span id="cb490-146"><a href="Swagger.html#cb490-146" tabindex="-1"></a><span class="co"> *       description: </span><span class="kw">&lt;b&gt;</span><span class="co">category</span><span class="kw">&lt;/b&gt;</span><span class="co"> of the location</span></span>
<span id="cb490-147"><a href="Swagger.html#cb490-147" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb490-148"><a href="Swagger.html#cb490-148" tabindex="-1"></a><span class="co"> *        type: string</span></span>
<span id="cb490-149"><a href="Swagger.html#cb490-149" tabindex="-1"></a><span class="co"> *        enum:</span></span>
<span id="cb490-150"><a href="Swagger.html#cb490-150" tabindex="-1"></a><span class="co"> *         - arheološka najdišča</span></span>
<span id="cb490-151"><a href="Swagger.html#cb490-151" tabindex="-1"></a><span class="co"> *         - drugi objekti in naprave</span></span>
<span id="cb490-152"><a href="Swagger.html#cb490-152" tabindex="-1"></a><span class="co"> *         - kulturna krajina</span></span>
<span id="cb490-153"><a href="Swagger.html#cb490-153" tabindex="-1"></a><span class="co"> *         - naselja in njihovi deli</span></span>
<span id="cb490-154"><a href="Swagger.html#cb490-154" tabindex="-1"></a><span class="co"> *         - ostalo,parki in vrtovi</span></span>
<span id="cb490-155"><a href="Swagger.html#cb490-155" tabindex="-1"></a><span class="co"> *         - spominski objekti in kraji</span></span>
<span id="cb490-156"><a href="Swagger.html#cb490-156" tabindex="-1"></a><span class="co"> *         - stavbe,stavbe s parki ali z vrtovi</span></span>
<span id="cb490-157"><a href="Swagger.html#cb490-157" tabindex="-1"></a><span class="co"> *     - name: type</span></span>
<span id="cb490-158"><a href="Swagger.html#cb490-158" tabindex="-1"></a><span class="co"> *       in: query</span></span>
<span id="cb490-159"><a href="Swagger.html#cb490-159" tabindex="-1"></a><span class="co"> *       description: </span><span class="kw">&lt;b&gt;</span><span class="co">type</span><span class="kw">&lt;/b&gt;</span><span class="co"> of the location</span></span>
<span id="cb490-160"><a href="Swagger.html#cb490-160" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb490-161"><a href="Swagger.html#cb490-161" tabindex="-1"></a><span class="co"> *        type: string</span></span>
<span id="cb490-162"><a href="Swagger.html#cb490-162" tabindex="-1"></a><span class="co"> *        enum:</span></span>
<span id="cb490-163"><a href="Swagger.html#cb490-163" tabindex="-1"></a><span class="co"> *         - arheološka dediščina</span></span>
<span id="cb490-164"><a href="Swagger.html#cb490-164" tabindex="-1"></a><span class="co"> *         - kulturna krajina</span></span>
<span id="cb490-165"><a href="Swagger.html#cb490-165" tabindex="-1"></a><span class="co"> *         - memorialna dediščina</span></span>
<span id="cb490-166"><a href="Swagger.html#cb490-166" tabindex="-1"></a><span class="co"> *         - naselbinska dediščina</span></span>
<span id="cb490-167"><a href="Swagger.html#cb490-167" tabindex="-1"></a><span class="co"> *         - ostalo,profana stavbna dediščina</span></span>
<span id="cb490-168"><a href="Swagger.html#cb490-168" tabindex="-1"></a><span class="co"> *         - sakralna stavbna dediščina</span></span>
<span id="cb490-169"><a href="Swagger.html#cb490-169" tabindex="-1"></a><span class="co"> *         - sakralno profana stavbna ded.</span></span>
<span id="cb490-170"><a href="Swagger.html#cb490-170" tabindex="-1"></a><span class="co"> *         - vrtnoarhitekturna dediščina</span></span>
<span id="cb490-171"><a href="Swagger.html#cb490-171" tabindex="-1"></a><span class="co"> *         - zgodovinska krajina</span></span>
<span id="cb490-172"><a href="Swagger.html#cb490-172" tabindex="-1"></a><span class="co"> *     - name: keywords</span></span>
<span id="cb490-173"><a href="Swagger.html#cb490-173" tabindex="-1"></a><span class="co"> *       in: query</span></span>
<span id="cb490-174"><a href="Swagger.html#cb490-174" tabindex="-1"></a><span class="co"> *       description: </span><span class="kw">&lt;b&gt;</span><span class="co">keywords</span><span class="kw">&lt;/b&gt;</span><span class="co"> of the location</span></span>
<span id="cb490-175"><a href="Swagger.html#cb490-175" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb490-176"><a href="Swagger.html#cb490-176" tabindex="-1"></a><span class="co"> *        type: string</span></span>
<span id="cb490-177"><a href="Swagger.html#cb490-177" tabindex="-1"></a><span class="co"> *        enum:</span></span>
<span id="cb490-178"><a href="Swagger.html#cb490-178" tabindex="-1"></a><span class="co"> *         - Božji grob</span></span>
<span id="cb490-179"><a href="Swagger.html#cb490-179" tabindex="-1"></a><span class="co"> *         - Brezmadežno spočetje Device Marije</span></span>
<span id="cb490-180"><a href="Swagger.html#cb490-180" tabindex="-1"></a><span class="co"> *         - Devica Marija</span></span>
<span id="cb490-181"><a href="Swagger.html#cb490-181" tabindex="-1"></a><span class="co"> *         - Devica Marija na Pesku</span></span>
<span id="cb490-182"><a href="Swagger.html#cb490-182" tabindex="-1"></a><span class="co"> *         - Devica Marija pomočnica</span></span>
<span id="cb490-183"><a href="Swagger.html#cb490-183" tabindex="-1"></a><span class="co"> *         - Devica Marija v Britofu</span></span>
<span id="cb490-184"><a href="Swagger.html#cb490-184" tabindex="-1"></a><span class="co"> *         - Ecce homo</span></span>
<span id="cb490-185"><a href="Swagger.html#cb490-185" tabindex="-1"></a><span class="co"> *         - Gospodov vnebohod</span></span>
<span id="cb490-186"><a href="Swagger.html#cb490-186" tabindex="-1"></a><span class="co"> *         - Ime Marijino</span></span>
<span id="cb490-187"><a href="Swagger.html#cb490-187" tabindex="-1"></a><span class="co"> *         - Kancianila in Prot</span></span>
<span id="cb490-188"><a href="Swagger.html#cb490-188" tabindex="-1"></a><span class="co"> *         - Kancijan</span></span>
<span id="cb490-189"><a href="Swagger.html#cb490-189" tabindex="-1"></a><span class="co"> *         - Karmelska Mati božja</span></span>
<span id="cb490-190"><a href="Swagger.html#cb490-190" tabindex="-1"></a><span class="co"> *         - Kristusovo učlovečenje</span></span>
<span id="cb490-191"><a href="Swagger.html#cb490-191" tabindex="-1"></a><span class="co"> *         - Lurška Mati božja</span></span>
<span id="cb490-192"><a href="Swagger.html#cb490-192" tabindex="-1"></a><span class="co"> *         - Marija Alietska</span></span>
<span id="cb490-193"><a href="Swagger.html#cb490-193" tabindex="-1"></a><span class="co"> *         - Marija Devica Tolažnica žalostnih</span></span>
<span id="cb490-194"><a href="Swagger.html#cb490-194" tabindex="-1"></a><span class="co"> *         - Marija Pomočnica</span></span>
<span id="cb490-195"><a href="Swagger.html#cb490-195" tabindex="-1"></a><span class="co"> *         - Marija Snežna</span></span>
<span id="cb490-196"><a href="Swagger.html#cb490-196" tabindex="-1"></a><span class="co"> *         - Marija sedem žalosti</span></span>
<span id="cb490-197"><a href="Swagger.html#cb490-197" tabindex="-1"></a><span class="co"> *         - Marija vnebovzeta</span></span>
<span id="cb490-198"><a href="Swagger.html#cb490-198" tabindex="-1"></a><span class="co"> *         - Marijino Vnebovzetje</span></span>
<span id="cb490-199"><a href="Swagger.html#cb490-199" tabindex="-1"></a><span class="co"> *         - Marijino obiskanje</span></span>
<span id="cb490-200"><a href="Swagger.html#cb490-200" tabindex="-1"></a><span class="co"> *         - Marijino obiskovanje</span></span>
<span id="cb490-201"><a href="Swagger.html#cb490-201" tabindex="-1"></a><span class="co"> *         - Marijino oznanjenje</span></span>
<span id="cb490-202"><a href="Swagger.html#cb490-202" tabindex="-1"></a><span class="co"> *         - Marijino prikazovanje</span></span>
<span id="cb490-203"><a href="Swagger.html#cb490-203" tabindex="-1"></a><span class="co"> *         - Marijino rojstvo</span></span>
<span id="cb490-204"><a href="Swagger.html#cb490-204" tabindex="-1"></a><span class="co"> *         - Marijino vnebovzetje</span></span>
<span id="cb490-205"><a href="Swagger.html#cb490-205" tabindex="-1"></a><span class="co"> *         - Mati božja</span></span>
<span id="cb490-206"><a href="Swagger.html#cb490-206" tabindex="-1"></a><span class="co"> *         - Mati božja Tolažnica žalostnih</span></span>
<span id="cb490-207"><a href="Swagger.html#cb490-207" tabindex="-1"></a><span class="co"> *         - Mati božja dobrega sveta</span></span>
<span id="cb490-208"><a href="Swagger.html#cb490-208" tabindex="-1"></a><span class="co"> *         - Poveličanje sv. Križa</span></span>
<span id="cb490-209"><a href="Swagger.html#cb490-209" tabindex="-1"></a><span class="co"> *         - Rojstvo Device Marije</span></span>
<span id="cb490-210"><a href="Swagger.html#cb490-210" tabindex="-1"></a><span class="co"> *         - Rožnovenska Mati božja</span></span>
<span id="cb490-211"><a href="Swagger.html#cb490-211" tabindex="-1"></a><span class="co"> *         - Srce Jezusovo</span></span>
<span id="cb490-212"><a href="Swagger.html#cb490-212" tabindex="-1"></a><span class="co"> *         - Vsi svetniki</span></span>
<span id="cb490-213"><a href="Swagger.html#cb490-213" tabindex="-1"></a><span class="co"> *         - alpinetum</span></span>
<span id="cb490-214"><a href="Swagger.html#cb490-214" tabindex="-1"></a><span class="co"> *         - ambient</span></span>
<span id="cb490-215"><a href="Swagger.html#cb490-215" tabindex="-1"></a><span class="co"> *         - apnenica</span></span>
<span id="cb490-216"><a href="Swagger.html#cb490-216" tabindex="-1"></a><span class="co"> *         - arboretum</span></span>
<span id="cb490-217"><a href="Swagger.html#cb490-217" tabindex="-1"></a><span class="co"> *         - arheološki park</span></span>
<span id="cb490-218"><a href="Swagger.html#cb490-218" tabindex="-1"></a><span class="co"> *         - arheološko najdišče</span></span>
<span id="cb490-219"><a href="Swagger.html#cb490-219" tabindex="-1"></a><span class="co"> *         - arheološko območje</span></span>
<span id="cb490-220"><a href="Swagger.html#cb490-220" tabindex="-1"></a><span class="co"> *         - arhitekturna plastika</span></span>
<span id="cb490-221"><a href="Swagger.html#cb490-221" tabindex="-1"></a><span class="co"> *         - arkade</span></span>
<span id="cb490-222"><a href="Swagger.html#cb490-222" tabindex="-1"></a><span class="co"> *         - arkadno dvorišče</span></span>
<span id="cb490-223"><a href="Swagger.html#cb490-223" tabindex="-1"></a><span class="co"> *         - bajta</span></span>
<span id="cb490-224"><a href="Swagger.html#cb490-224" tabindex="-1"></a><span class="co"> *         - baldahin</span></span>
<span id="cb490-225"><a href="Swagger.html#cb490-225" tabindex="-1"></a><span class="co"> *         - banka</span></span>
<span id="cb490-226"><a href="Swagger.html#cb490-226" tabindex="-1"></a><span class="co"> *         - baraka</span></span>
<span id="cb490-227"><a href="Swagger.html#cb490-227" tabindex="-1"></a><span class="co"> *         - bazen</span></span>
<span id="cb490-228"><a href="Swagger.html#cb490-228" tabindex="-1"></a><span class="co"> *         - bencinska črpalka</span></span>
<span id="cb490-229"><a href="Swagger.html#cb490-229" tabindex="-1"></a><span class="co"> *         - bolnišnica</span></span>
<span id="cb490-230"><a href="Swagger.html#cb490-230" tabindex="-1"></a><span class="co"> *         - botanični vrt</span></span>
<span id="cb490-231"><a href="Swagger.html#cb490-231" tabindex="-1"></a><span class="co"> *         - brežina</span></span>
<span id="cb490-232"><a href="Swagger.html#cb490-232" tabindex="-1"></a><span class="co"> *         - brunarica</span></span>
<span id="cb490-233"><a href="Swagger.html#cb490-233" tabindex="-1"></a><span class="co"> *         - bunker</span></span>
<span id="cb490-234"><a href="Swagger.html#cb490-234" tabindex="-1"></a><span class="co"> *         - castra</span></span>
<span id="cb490-235"><a href="Swagger.html#cb490-235" tabindex="-1"></a><span class="co"> *         - cerkev</span></span>
<span id="cb490-236"><a href="Swagger.html#cb490-236" tabindex="-1"></a><span class="co"> *         - cesta</span></span>
<span id="cb490-237"><a href="Swagger.html#cb490-237" tabindex="-1"></a><span class="co"> *         - cisterna</span></span>
<span id="cb490-238"><a href="Swagger.html#cb490-238" tabindex="-1"></a><span class="co"> *         - deblak</span></span>
<span id="cb490-239"><a href="Swagger.html#cb490-239" tabindex="-1"></a><span class="co"> *         - delavska hiša</span></span>
<span id="cb490-240"><a href="Swagger.html#cb490-240" tabindex="-1"></a><span class="co"> *         - delavska kolonija</span></span>
<span id="cb490-241"><a href="Swagger.html#cb490-241" tabindex="-1"></a><span class="co"> *         - delavski dom</span></span>
<span id="cb490-242"><a href="Swagger.html#cb490-242" tabindex="-1"></a><span class="co"> *         - depandansa</span></span>
<span id="cb490-243"><a href="Swagger.html#cb490-243" tabindex="-1"></a><span class="co"> *         - dimnica</span></span>
<span id="cb490-244"><a href="Swagger.html#cb490-244" tabindex="-1"></a><span class="co"> *         - dimnik</span></span>
<span id="cb490-245"><a href="Swagger.html#cb490-245" tabindex="-1"></a><span class="co"> *         - divji kostanj</span></span>
<span id="cb490-246"><a href="Swagger.html#cb490-246" tabindex="-1"></a><span class="co"> *         - dom pomembne osebnosti</span></span>
<span id="cb490-247"><a href="Swagger.html#cb490-247" tabindex="-1"></a><span class="co"> *         - dom za onemogle</span></span>
<span id="cb490-248"><a href="Swagger.html#cb490-248" tabindex="-1"></a><span class="co"> *         - domačija</span></span>
<span id="cb490-249"><a href="Swagger.html#cb490-249" tabindex="-1"></a><span class="co"> *         - domačija na ključ</span></span>
<span id="cb490-250"><a href="Swagger.html#cb490-250" tabindex="-1"></a><span class="co"> *         - domačija na vogel</span></span>
<span id="cb490-251"><a href="Swagger.html#cb490-251" tabindex="-1"></a><span class="co"> *         - donžon</span></span>
<span id="cb490-252"><a href="Swagger.html#cb490-252" tabindex="-1"></a><span class="co"> *         - doprsje</span></span>
<span id="cb490-253"><a href="Swagger.html#cb490-253" tabindex="-1"></a><span class="co"> *         - drevo</span></span>
<span id="cb490-254"><a href="Swagger.html#cb490-254" tabindex="-1"></a><span class="co"> *         - drevored</span></span>
<span id="cb490-255"><a href="Swagger.html#cb490-255" tabindex="-1"></a><span class="co"> *         - drvarnica</span></span>
<span id="cb490-256"><a href="Swagger.html#cb490-256" tabindex="-1"></a><span class="co"> *         - dvigalo</span></span>
<span id="cb490-257"><a href="Swagger.html#cb490-257" tabindex="-1"></a><span class="co"> *         - dvojni kozolec</span></span>
<span id="cb490-258"><a href="Swagger.html#cb490-258" tabindex="-1"></a><span class="co"> *         - dvojni kozolec*</span></span>
<span id="cb490-259"><a href="Swagger.html#cb490-259" tabindex="-1"></a><span class="co"> *         - dvor</span></span>
<span id="cb490-260"><a href="Swagger.html#cb490-260" tabindex="-1"></a><span class="co"> *         - dvorana</span></span>
<span id="cb490-261"><a href="Swagger.html#cb490-261" tabindex="-1"></a><span class="co"> *         - dvorec</span></span>
<span id="cb490-262"><a href="Swagger.html#cb490-262" tabindex="-1"></a><span class="co"> *         - dvorec s parkom</span></span>
<span id="cb490-263"><a href="Swagger.html#cb490-263" tabindex="-1"></a><span class="co"> *         - dvorec z vrtom</span></span>
<span id="cb490-264"><a href="Swagger.html#cb490-264" tabindex="-1"></a><span class="co"> *         - dvorišče</span></span>
<span id="cb490-265"><a href="Swagger.html#cb490-265" tabindex="-1"></a><span class="co"> *         - dvorišče</span></span>
<span id="cb490-266"><a href="Swagger.html#cb490-266" tabindex="-1"></a><span class="co"> *         - elektrarna</span></span>
<span id="cb490-267"><a href="Swagger.html#cb490-267" tabindex="-1"></a><span class="co"> *         - enojni kozolec</span></span>
<span id="cb490-268"><a href="Swagger.html#cb490-268" tabindex="-1"></a><span class="co"> *         - evangeličanska cerkev</span></span>
<span id="cb490-269"><a href="Swagger.html#cb490-269" tabindex="-1"></a><span class="co"> *         - faladur</span></span>
<span id="cb490-270"><a href="Swagger.html#cb490-270" tabindex="-1"></a><span class="co"> *         - figuralno znamenje</span></span>
<span id="cb490-271"><a href="Swagger.html#cb490-271" tabindex="-1"></a><span class="co"> *         - fotoatelje</span></span>
<span id="cb490-272"><a href="Swagger.html#cb490-272" tabindex="-1"></a><span class="co"> *         - frančiškanski samostan</span></span>
<span id="cb490-273"><a href="Swagger.html#cb490-273" tabindex="-1"></a><span class="co"> *         - freska</span></span>
<span id="cb490-274"><a href="Swagger.html#cb490-274" tabindex="-1"></a><span class="co"> *         - furmanska gostilna</span></span>
<span id="cb490-275"><a href="Swagger.html#cb490-275" tabindex="-1"></a><span class="co"> *         - fužinarska hiša</span></span>
<span id="cb490-276"><a href="Swagger.html#cb490-276" tabindex="-1"></a><span class="co"> *         - fužinarsko naselje</span></span>
<span id="cb490-277"><a href="Swagger.html#cb490-277" tabindex="-1"></a><span class="co"> *         - gaj</span></span>
<span id="cb490-278"><a href="Swagger.html#cb490-278" tabindex="-1"></a><span class="co"> *         - galerija</span></span>
<span id="cb490-279"><a href="Swagger.html#cb490-279" tabindex="-1"></a><span class="co"> *         - galerija na prostem</span></span>
<span id="cb490-280"><a href="Swagger.html#cb490-280" tabindex="-1"></a><span class="co"> *         - gank</span></span>
<span id="cb490-281"><a href="Swagger.html#cb490-281" tabindex="-1"></a><span class="co"> *         - garaža</span></span>
<span id="cb490-282"><a href="Swagger.html#cb490-282" tabindex="-1"></a><span class="co"> *         - garderoba</span></span>
<span id="cb490-283"><a href="Swagger.html#cb490-283" tabindex="-1"></a><span class="co"> *         - gartlc</span></span>
<span id="cb490-284"><a href="Swagger.html#cb490-284" tabindex="-1"></a><span class="co"> *         - gledališče</span></span>
<span id="cb490-285"><a href="Swagger.html#cb490-285" tabindex="-1"></a><span class="co"> *         - golobnjak</span></span>
<span id="cb490-286"><a href="Swagger.html#cb490-286" tabindex="-1"></a><span class="co"> *         - gomila</span></span>
<span id="cb490-287"><a href="Swagger.html#cb490-287" tabindex="-1"></a><span class="co"> *         - gomilno grobišče</span></span>
<span id="cb490-288"><a href="Swagger.html#cb490-288" tabindex="-1"></a><span class="co"> *         - gospodarsko poslopje</span></span>
<span id="cb490-289"><a href="Swagger.html#cb490-289" tabindex="-1"></a><span class="co"> *         - gostilna</span></span>
<span id="cb490-290"><a href="Swagger.html#cb490-290" tabindex="-1"></a><span class="co"> *         - gostinski vrt</span></span>
<span id="cb490-291"><a href="Swagger.html#cb490-291" tabindex="-1"></a><span class="co"> *         - gozdarska žičnica</span></span>
<span id="cb490-292"><a href="Swagger.html#cb490-292" tabindex="-1"></a><span class="co"> *         - grad</span></span>
<span id="cb490-293"><a href="Swagger.html#cb490-293" tabindex="-1"></a><span class="co"> *         - grad s parkom</span></span>
<span id="cb490-294"><a href="Swagger.html#cb490-294" tabindex="-1"></a><span class="co"> *         - grad z vrtom</span></span>
<span id="cb490-295"><a href="Swagger.html#cb490-295" tabindex="-1"></a><span class="co"> *         - gradišče</span></span>
<span id="cb490-296"><a href="Swagger.html#cb490-296" tabindex="-1"></a><span class="co"> *         - grajska kapela</span></span>
<span id="cb490-297"><a href="Swagger.html#cb490-297" tabindex="-1"></a><span class="co"> *         - grajska pristava</span></span>
<span id="cb490-298"><a href="Swagger.html#cb490-298" tabindex="-1"></a><span class="co"> *         - grajski vrt</span></span>
<span id="cb490-299"><a href="Swagger.html#cb490-299" tabindex="-1"></a><span class="co"> *         - graščina</span></span>
<span id="cb490-300"><a href="Swagger.html#cb490-300" tabindex="-1"></a><span class="co"> *         - grob</span></span>
<span id="cb490-301"><a href="Swagger.html#cb490-301" tabindex="-1"></a><span class="co"> *         - grob pomembne osebnosti</span></span>
<span id="cb490-302"><a href="Swagger.html#cb490-302" tabindex="-1"></a><span class="co"> *         - grobišče</span></span>
<span id="cb490-303"><a href="Swagger.html#cb490-303" tabindex="-1"></a><span class="co"> *         - grobna kapela</span></span>
<span id="cb490-304"><a href="Swagger.html#cb490-304" tabindex="-1"></a><span class="co"> *         - grobni oltar</span></span>
<span id="cb490-305"><a href="Swagger.html#cb490-305" tabindex="-1"></a><span class="co"> *         - grobnica</span></span>
<span id="cb490-306"><a href="Swagger.html#cb490-306" tabindex="-1"></a><span class="co"> *         - gručasta domačija</span></span>
<span id="cb490-307"><a href="Swagger.html#cb490-307" tabindex="-1"></a><span class="co"> *         - gručasta vas</span></span>
<span id="cb490-308"><a href="Swagger.html#cb490-308" tabindex="-1"></a><span class="co"> *         - hidroelektrarna</span></span>
<span id="cb490-309"><a href="Swagger.html#cb490-309" tabindex="-1"></a><span class="co"> *         - hiša</span></span>
<span id="cb490-310"><a href="Swagger.html#cb490-310" tabindex="-1"></a><span class="co"> *         - hišno drevo</span></span>
<span id="cb490-311"><a href="Swagger.html#cb490-311" tabindex="-1"></a><span class="co"> *         - hlev</span></span>
<span id="cb490-312"><a href="Swagger.html#cb490-312" tabindex="-1"></a><span class="co"> *         - hospic</span></span>
<span id="cb490-313"><a href="Swagger.html#cb490-313" tabindex="-1"></a><span class="co"> *         - hotel</span></span>
<span id="cb490-314"><a href="Swagger.html#cb490-314" tabindex="-1"></a><span class="co"> *         - hram</span></span>
<span id="cb490-315"><a href="Swagger.html#cb490-315" tabindex="-1"></a><span class="co"> *         - internat</span></span>
<span id="cb490-316"><a href="Swagger.html#cb490-316" tabindex="-1"></a><span class="co"> *         - inštitut</span></span>
<span id="cb490-317"><a href="Swagger.html#cb490-317" tabindex="-1"></a><span class="co"> *         - izvir</span></span>
<span id="cb490-318"><a href="Swagger.html#cb490-318" tabindex="-1"></a><span class="co"> *         - jahalnica</span></span>
<span id="cb490-319"><a href="Swagger.html#cb490-319" tabindex="-1"></a><span class="co"> *         - jama</span></span>
<span id="cb490-320"><a href="Swagger.html#cb490-320" tabindex="-1"></a><span class="co"> *         - jamska postojanka</span></span>
<span id="cb490-321"><a href="Swagger.html#cb490-321" tabindex="-1"></a><span class="co"> *         - jamsko najdišče</span></span>
<span id="cb490-322"><a href="Swagger.html#cb490-322" tabindex="-1"></a><span class="co"> *         - javni spomenik</span></span>
<span id="cb490-323"><a href="Swagger.html#cb490-323" tabindex="-1"></a><span class="co"> *         - javni vodnjak</span></span>
<span id="cb490-324"><a href="Swagger.html#cb490-324" tabindex="-1"></a><span class="co"> *         - jašek</span></span>
<span id="cb490-325"><a href="Swagger.html#cb490-325" tabindex="-1"></a><span class="co"> *         - jez</span></span>
<span id="cb490-326"><a href="Swagger.html#cb490-326" tabindex="-1"></a><span class="co"> *         - kajža</span></span>
<span id="cb490-327"><a href="Swagger.html#cb490-327" tabindex="-1"></a><span class="co"> *         - kal</span></span>
<span id="cb490-328"><a href="Swagger.html#cb490-328" tabindex="-1"></a><span class="co"> *         - kalvarija</span></span>
<span id="cb490-329"><a href="Swagger.html#cb490-329" tabindex="-1"></a><span class="co"> *         - kamnit most</span></span>
<span id="cb490-330"><a href="Swagger.html#cb490-330" tabindex="-1"></a><span class="co"> *         - kamniti križ</span></span>
<span id="cb490-331"><a href="Swagger.html#cb490-331" tabindex="-1"></a><span class="co"> *         - kamniti most</span></span>
<span id="cb490-332"><a href="Swagger.html#cb490-332" tabindex="-1"></a><span class="co"> *         - kamnolom</span></span>
<span id="cb490-333"><a href="Swagger.html#cb490-333" tabindex="-1"></a><span class="co"> *         - kanoniška hiša</span></span>
<span id="cb490-334"><a href="Swagger.html#cb490-334" tabindex="-1"></a><span class="co"> *         - kapela</span></span>
<span id="cb490-335"><a href="Swagger.html#cb490-335" tabindex="-1"></a><span class="co"> *         - kapelica</span></span>
<span id="cb490-336"><a href="Swagger.html#cb490-336" tabindex="-1"></a><span class="co"> *         - kaplanija</span></span>
<span id="cb490-337"><a href="Swagger.html#cb490-337" tabindex="-1"></a><span class="co"> *         - kartuzijanski samostan</span></span>
<span id="cb490-338"><a href="Swagger.html#cb490-338" tabindex="-1"></a><span class="co"> *         - kastel</span></span>
<span id="cb490-339"><a href="Swagger.html#cb490-339" tabindex="-1"></a><span class="co"> *         - kavarna</span></span>
<span id="cb490-340"><a href="Swagger.html#cb490-340" tabindex="-1"></a><span class="co"> *         - kaverna</span></span>
<span id="cb490-341"><a href="Swagger.html#cb490-341" tabindex="-1"></a><span class="co"> *         - kašča</span></span>
<span id="cb490-342"><a href="Swagger.html#cb490-342" tabindex="-1"></a><span class="co"> *         - kegljišče</span></span>
<span id="cb490-343"><a href="Swagger.html#cb490-343" tabindex="-1"></a><span class="co"> *         - kenotaf</span></span>
<span id="cb490-344"><a href="Swagger.html#cb490-344" tabindex="-1"></a><span class="co"> *         - kino</span></span>
<span id="cb490-345"><a href="Swagger.html#cb490-345" tabindex="-1"></a><span class="co"> *         - kip</span></span>
<span id="cb490-346"><a href="Swagger.html#cb490-346" tabindex="-1"></a><span class="co"> *         - klavnica</span></span>
<span id="cb490-347"><a href="Swagger.html#cb490-347" tabindex="-1"></a><span class="co"> *         - klet</span></span>
<span id="cb490-348"><a href="Swagger.html#cb490-348" tabindex="-1"></a><span class="co"> *         - kmetija</span></span>
<span id="cb490-349"><a href="Swagger.html#cb490-349" tabindex="-1"></a><span class="co"> *         - kmečka hiša</span></span>
<span id="cb490-350"><a href="Swagger.html#cb490-350" tabindex="-1"></a><span class="co"> *         - kmečki dvorec</span></span>
<span id="cb490-351"><a href="Swagger.html#cb490-351" tabindex="-1"></a><span class="co"> *         - knjižnica</span></span>
<span id="cb490-352"><a href="Swagger.html#cb490-352" tabindex="-1"></a><span class="co"> *         - kobilarna</span></span>
<span id="cb490-353"><a href="Swagger.html#cb490-353" tabindex="-1"></a><span class="co"> *         - kolišče</span></span>
<span id="cb490-354"><a href="Swagger.html#cb490-354" tabindex="-1"></a><span class="co"> *         - komenda</span></span>
<span id="cb490-355"><a href="Swagger.html#cb490-355" tabindex="-1"></a><span class="co"> *         - komunska kašča</span></span>
<span id="cb490-356"><a href="Swagger.html#cb490-356" tabindex="-1"></a><span class="co"> *         - komunski vodnjak</span></span>
<span id="cb490-357"><a href="Swagger.html#cb490-357" tabindex="-1"></a><span class="co"> *         - koncentracijsko taborišče</span></span>
<span id="cb490-358"><a href="Swagger.html#cb490-358" tabindex="-1"></a><span class="co"> *         - kondenzator</span></span>
<span id="cb490-359"><a href="Swagger.html#cb490-359" tabindex="-1"></a><span class="co"> *         - konjušnica</span></span>
<span id="cb490-360"><a href="Swagger.html#cb490-360" tabindex="-1"></a><span class="co"> *         - kopališče</span></span>
<span id="cb490-361"><a href="Swagger.html#cb490-361" tabindex="-1"></a><span class="co"> *         - koruznjak</span></span>
<span id="cb490-362"><a href="Swagger.html#cb490-362" tabindex="-1"></a><span class="co"> *         - kostnica</span></span>
<span id="cb490-363"><a href="Swagger.html#cb490-363" tabindex="-1"></a><span class="co"> *         - kovačija</span></span>
<span id="cb490-364"><a href="Swagger.html#cb490-364" tabindex="-1"></a><span class="co"> *         - kovnica</span></span>
<span id="cb490-365"><a href="Swagger.html#cb490-365" tabindex="-1"></a><span class="co"> *         - kozolec</span></span>
<span id="cb490-366"><a href="Swagger.html#cb490-366" tabindex="-1"></a><span class="co"> *         - kozolec na psa</span></span>
<span id="cb490-367"><a href="Swagger.html#cb490-367" tabindex="-1"></a><span class="co"> *         - kozolec s plaščem</span></span>
<span id="cb490-368"><a href="Swagger.html#cb490-368" tabindex="-1"></a><span class="co"> *         - koča</span></span>
<span id="cb490-369"><a href="Swagger.html#cb490-369" tabindex="-1"></a><span class="co"> *         - kraj zgodovinskega dogodka</span></span>
<span id="cb490-370"><a href="Swagger.html#cb490-370" tabindex="-1"></a><span class="co"> *         - kripta</span></span>
<span id="cb490-371"><a href="Swagger.html#cb490-371" tabindex="-1"></a><span class="co"> *         - križev pot</span></span>
<span id="cb490-372"><a href="Swagger.html#cb490-372" tabindex="-1"></a><span class="co"> *         - krstilnica</span></span>
<span id="cb490-373"><a href="Swagger.html#cb490-373" tabindex="-1"></a><span class="co"> *         - kuhinja z ognjiščem</span></span>
<span id="cb490-374"><a href="Swagger.html#cb490-374" tabindex="-1"></a><span class="co"> *         - kulturna krajina</span></span>
<span id="cb490-375"><a href="Swagger.html#cb490-375" tabindex="-1"></a><span class="co"> *         - kulturni dom</span></span>
<span id="cb490-376"><a href="Swagger.html#cb490-376" tabindex="-1"></a><span class="co"> *         - kužno znamenje</span></span>
<span id="cb490-377"><a href="Swagger.html#cb490-377" tabindex="-1"></a><span class="co"> *         - laboratorij</span></span>
<span id="cb490-378"><a href="Swagger.html#cb490-378" tabindex="-1"></a><span class="co"> *         - ladja</span></span>
<span id="cb490-379"><a href="Swagger.html#cb490-379" tabindex="-1"></a><span class="co"> *         - lapidarij</span></span>
<span id="cb490-380"><a href="Swagger.html#cb490-380" tabindex="-1"></a><span class="co"> *         - ledenica</span></span>
<span id="cb490-381"><a href="Swagger.html#cb490-381" tabindex="-1"></a><span class="co"> *         - lekarna</span></span>
<span id="cb490-382"><a href="Swagger.html#cb490-382" tabindex="-1"></a><span class="co"> *         - leseni zvonik</span></span>
<span id="cb490-383"><a href="Swagger.html#cb490-383" tabindex="-1"></a><span class="co"> *         - letalo</span></span>
<span id="cb490-384"><a href="Swagger.html#cb490-384" tabindex="-1"></a><span class="co"> *         - letni dvorec</span></span>
<span id="cb490-385"><a href="Swagger.html#cb490-385" tabindex="-1"></a><span class="co"> *         - letno gledališče</span></span>
<span id="cb490-386"><a href="Swagger.html#cb490-386" tabindex="-1"></a><span class="co"> *         - lipa</span></span>
<span id="cb490-387"><a href="Swagger.html#cb490-387" tabindex="-1"></a><span class="co"> *         - logarnica</span></span>
<span id="cb490-388"><a href="Swagger.html#cb490-388" tabindex="-1"></a><span class="co"> *         - lokacija</span></span>
<span id="cb490-389"><a href="Swagger.html#cb490-389" tabindex="-1"></a><span class="co"> *         - lopa</span></span>
<span id="cb490-390"><a href="Swagger.html#cb490-390" tabindex="-1"></a><span class="co"> *         - lovska postaja</span></span>
<span id="cb490-391"><a href="Swagger.html#cb490-391" tabindex="-1"></a><span class="co"> *         - lovski dvorec</span></span>
<span id="cb490-392"><a href="Swagger.html#cb490-392" tabindex="-1"></a><span class="co"> *         - loža</span></span>
<span id="cb490-393"><a href="Swagger.html#cb490-393" tabindex="-1"></a><span class="co"> *         - marof</span></span>
<span id="cb490-394"><a href="Swagger.html#cb490-394" tabindex="-1"></a><span class="co"> *         - mavzolej</span></span>
<span id="cb490-395"><a href="Swagger.html#cb490-395" tabindex="-1"></a><span class="co"> *         - mejnik</span></span>
<span id="cb490-396"><a href="Swagger.html#cb490-396" tabindex="-1"></a><span class="co"> *         - mestna hiša</span></span>
<span id="cb490-397"><a href="Swagger.html#cb490-397" tabindex="-1"></a><span class="co"> *         - mestna kašča</span></span>
<span id="cb490-398"><a href="Swagger.html#cb490-398" tabindex="-1"></a><span class="co"> *         - mestna palača</span></span>
<span id="cb490-399"><a href="Swagger.html#cb490-399" tabindex="-1"></a><span class="co"> *         - mestna vrata</span></span>
<span id="cb490-400"><a href="Swagger.html#cb490-400" tabindex="-1"></a><span class="co"> *         - mestna četrt</span></span>
<span id="cb490-401"><a href="Swagger.html#cb490-401" tabindex="-1"></a><span class="co"> *         - mestni grad</span></span>
<span id="cb490-402"><a href="Swagger.html#cb490-402" tabindex="-1"></a><span class="co"> *         - mestni park</span></span>
<span id="cb490-403"><a href="Swagger.html#cb490-403" tabindex="-1"></a><span class="co"> *         - mestno jedro</span></span>
<span id="cb490-404"><a href="Swagger.html#cb490-404" tabindex="-1"></a><span class="co"> *         - mestno obzidje</span></span>
<span id="cb490-405"><a href="Swagger.html#cb490-405" tabindex="-1"></a><span class="co"> *         - meščanska hiša</span></span>
<span id="cb490-406"><a href="Swagger.html#cb490-406" tabindex="-1"></a><span class="co"> *         - meščanska palača</span></span>
<span id="cb490-407"><a href="Swagger.html#cb490-407" tabindex="-1"></a><span class="co"> *         - mežnarija</span></span>
<span id="cb490-408"><a href="Swagger.html#cb490-408" tabindex="-1"></a><span class="co"> *         - miljnik</span></span>
<span id="cb490-409"><a href="Swagger.html#cb490-409" tabindex="-1"></a><span class="co"> *         - minoritski samostan</span></span>
<span id="cb490-410"><a href="Swagger.html#cb490-410" tabindex="-1"></a><span class="co"> *         - mitnica</span></span>
<span id="cb490-411"><a href="Swagger.html#cb490-411" tabindex="-1"></a><span class="co"> *         - mitrej</span></span>
<span id="cb490-412"><a href="Swagger.html#cb490-412" tabindex="-1"></a><span class="co"> *         - mizarska delavnica</span></span>
<span id="cb490-413"><a href="Swagger.html#cb490-413" tabindex="-1"></a><span class="co"> *         - mlin</span></span>
<span id="cb490-414"><a href="Swagger.html#cb490-414" tabindex="-1"></a><span class="co"> *         - mlinska hiša</span></span>
<span id="cb490-415"><a href="Swagger.html#cb490-415" tabindex="-1"></a><span class="co"> *         - mlinščica</span></span>
<span id="cb490-416"><a href="Swagger.html#cb490-416" tabindex="-1"></a><span class="co"> *         - molilnica</span></span>
<span id="cb490-417"><a href="Swagger.html#cb490-417" tabindex="-1"></a><span class="co"> *         - most</span></span>
<span id="cb490-418"><a href="Swagger.html#cb490-418" tabindex="-1"></a><span class="co"> *         - mostovž</span></span>
<span id="cb490-419"><a href="Swagger.html#cb490-419" tabindex="-1"></a><span class="co"> *         - mozaik</span></span>
<span id="cb490-420"><a href="Swagger.html#cb490-420" tabindex="-1"></a><span class="co"> *         - mrliška vežica</span></span>
<span id="cb490-421"><a href="Swagger.html#cb490-421" tabindex="-1"></a><span class="co"> *         - mulatiera</span></span>
<span id="cb490-422"><a href="Swagger.html#cb490-422" tabindex="-1"></a><span class="co"> *         - muzej</span></span>
<span id="cb490-423"><a href="Swagger.html#cb490-423" tabindex="-1"></a><span class="co"> *         - muzej na prostem</span></span>
<span id="cb490-424"><a href="Swagger.html#cb490-424" tabindex="-1"></a><span class="co"> *         - nagrobna plošča</span></span>
<span id="cb490-425"><a href="Swagger.html#cb490-425" tabindex="-1"></a><span class="co"> *         - nagrobnik</span></span>
<span id="cb490-426"><a href="Swagger.html#cb490-426" tabindex="-1"></a><span class="co"> *         - napajalno korito</span></span>
<span id="cb490-427"><a href="Swagger.html#cb490-427" tabindex="-1"></a><span class="co"> *         - narodni dom</span></span>
<span id="cb490-428"><a href="Swagger.html#cb490-428" tabindex="-1"></a><span class="co"> *         - naselbina</span></span>
<span id="cb490-429"><a href="Swagger.html#cb490-429" tabindex="-1"></a><span class="co"> *         - naselje</span></span>
<span id="cb490-430"><a href="Swagger.html#cb490-430" tabindex="-1"></a><span class="co"> *         - nekropola</span></span>
<span id="cb490-431"><a href="Swagger.html#cb490-431" tabindex="-1"></a><span class="co"> *         - nizki kozolec</span></span>
<span id="cb490-432"><a href="Swagger.html#cb490-432" tabindex="-1"></a><span class="co"> *         - niša</span></span>
<span id="cb490-433"><a href="Swagger.html#cb490-433" tabindex="-1"></a><span class="co"> *         - njiva</span></span>
<span id="cb490-434"><a href="Swagger.html#cb490-434" tabindex="-1"></a><span class="co"> *         - obcestna postaja</span></span>
<span id="cb490-435"><a href="Swagger.html#cb490-435" tabindex="-1"></a><span class="co"> *         - obcestna vas</span></span>
<span id="cb490-436"><a href="Swagger.html#cb490-436" tabindex="-1"></a><span class="co"> *         - obloženi grob</span></span>
<span id="cb490-437"><a href="Swagger.html#cb490-437" tabindex="-1"></a><span class="co"> *         - obrambni stolp</span></span>
<span id="cb490-438"><a href="Swagger.html#cb490-438" tabindex="-1"></a><span class="co"> *         - obrambni zid</span></span>
<span id="cb490-439"><a href="Swagger.html#cb490-439" tabindex="-1"></a><span class="co"> *         - obredni depo</span></span>
<span id="cb490-440"><a href="Swagger.html#cb490-440" tabindex="-1"></a><span class="co"> *         - obrtniška hiša</span></span>
<span id="cb490-441"><a href="Swagger.html#cb490-441" tabindex="-1"></a><span class="co"> *         - obzidje</span></span>
<span id="cb490-442"><a href="Swagger.html#cb490-442" tabindex="-1"></a><span class="co"> *         - ograja</span></span>
<span id="cb490-443"><a href="Swagger.html#cb490-443" tabindex="-1"></a><span class="co"> *         - oktogon</span></span>
<span id="cb490-444"><a href="Swagger.html#cb490-444" tabindex="-1"></a><span class="co"> *         - oljarna</span></span>
<span id="cb490-445"><a href="Swagger.html#cb490-445" tabindex="-1"></a><span class="co"> *         - oltar</span></span>
<span id="cb490-446"><a href="Swagger.html#cb490-446" tabindex="-1"></a><span class="co"> *         - opekarna</span></span>
<span id="cb490-447"><a href="Swagger.html#cb490-447" tabindex="-1"></a><span class="co"> *         - orgle</span></span>
<span id="cb490-448"><a href="Swagger.html#cb490-448" tabindex="-1"></a><span class="co"> *         - ovčja planina</span></span>
<span id="cb490-449"><a href="Swagger.html#cb490-449" tabindex="-1"></a><span class="co"> *         - palača</span></span>
<span id="cb490-450"><a href="Swagger.html#cb490-450" tabindex="-1"></a><span class="co"> *         - park</span></span>
<span id="cb490-451"><a href="Swagger.html#cb490-451" tabindex="-1"></a><span class="co"> *         - parkovna plastika</span></span>
<span id="cb490-452"><a href="Swagger.html#cb490-452" tabindex="-1"></a><span class="co"> *         - partizanska bolnišnica</span></span>
<span id="cb490-453"><a href="Swagger.html#cb490-453" tabindex="-1"></a><span class="co"> *         - partizanska tiskarna</span></span>
<span id="cb490-454"><a href="Swagger.html#cb490-454" tabindex="-1"></a><span class="co"> *         - pastirska bajta</span></span>
<span id="cb490-455"><a href="Swagger.html#cb490-455" tabindex="-1"></a><span class="co"> *         - paviljon</span></span>
<span id="cb490-456"><a href="Swagger.html#cb490-456" tabindex="-1"></a><span class="co"> *         - pašnik</span></span>
<span id="cb490-457"><a href="Swagger.html#cb490-457" tabindex="-1"></a><span class="co"> *         - pepelnica</span></span>
<span id="cb490-458"><a href="Swagger.html#cb490-458" tabindex="-1"></a><span class="co"> *         - perišče</span></span>
<span id="cb490-459"><a href="Swagger.html#cb490-459" tabindex="-1"></a><span class="co"> *         - peč</span></span>
<span id="cb490-460"><a href="Swagger.html#cb490-460" tabindex="-1"></a><span class="co"> *         - pil</span></span>
<span id="cb490-461"><a href="Swagger.html#cb490-461" tabindex="-1"></a><span class="co"> *         - pivovarna</span></span>
<span id="cb490-462"><a href="Swagger.html#cb490-462" tabindex="-1"></a><span class="co"> *         - planina</span></span>
<span id="cb490-463"><a href="Swagger.html#cb490-463" tabindex="-1"></a><span class="co"> *         - planinski dom</span></span>
<span id="cb490-464"><a href="Swagger.html#cb490-464" tabindex="-1"></a><span class="co"> *         - plano grobišče</span></span>
<span id="cb490-465"><a href="Swagger.html#cb490-465" tabindex="-1"></a><span class="co"> *         - planšarsko naselje</span></span>
<span id="cb490-466"><a href="Swagger.html#cb490-466" tabindex="-1"></a><span class="co"> *         - plavž</span></span>
<span id="cb490-467"><a href="Swagger.html#cb490-467" tabindex="-1"></a><span class="co"> *         - pod</span></span>
<span id="cb490-468"><a href="Swagger.html#cb490-468" tabindex="-1"></a><span class="co"> *         - podružnična cerkev</span></span>
<span id="cb490-469"><a href="Swagger.html#cb490-469" tabindex="-1"></a><span class="co"> *         - pokopališka cerkev</span></span>
<span id="cb490-470"><a href="Swagger.html#cb490-470" tabindex="-1"></a><span class="co"> *         - pokopališka kapela</span></span>
<span id="cb490-471"><a href="Swagger.html#cb490-471" tabindex="-1"></a><span class="co"> *         - pokopališki zid</span></span>
<span id="cb490-472"><a href="Swagger.html#cb490-472" tabindex="-1"></a><span class="co"> *         - pokopališče</span></span>
<span id="cb490-473"><a href="Swagger.html#cb490-473" tabindex="-1"></a><span class="co"> *         - portal</span></span>
<span id="cb490-474"><a href="Swagger.html#cb490-474" tabindex="-1"></a><span class="co"> *         - posamična najdba</span></span>
<span id="cb490-475"><a href="Swagger.html#cb490-475" tabindex="-1"></a><span class="co"> *         - poslikava</span></span>
<span id="cb490-476"><a href="Swagger.html#cb490-476" tabindex="-1"></a><span class="co"> *         - poslovna stavba</span></span>
<span id="cb490-477"><a href="Swagger.html#cb490-477" tabindex="-1"></a><span class="co"> *         - postaja</span></span>
<span id="cb490-478"><a href="Swagger.html#cb490-478" tabindex="-1"></a><span class="co"> *         - pot</span></span>
<span id="cb490-479"><a href="Swagger.html#cb490-479" tabindex="-1"></a><span class="co"> *         - počivališče</span></span>
<span id="cb490-480"><a href="Swagger.html#cb490-480" tabindex="-1"></a><span class="co"> *         - poštna postaja</span></span>
<span id="cb490-481"><a href="Swagger.html#cb490-481" tabindex="-1"></a><span class="co"> *         - pravoslavna cerkev</span></span>
<span id="cb490-482"><a href="Swagger.html#cb490-482" tabindex="-1"></a><span class="co"> *         - predmestje</span></span>
<span id="cb490-483"><a href="Swagger.html#cb490-483" tabindex="-1"></a><span class="co"> *         - predmestna hiša</span></span>
<span id="cb490-484"><a href="Swagger.html#cb490-484" tabindex="-1"></a><span class="co"> *         - predor</span></span>
<span id="cb490-485"><a href="Swagger.html#cb490-485" tabindex="-1"></a><span class="co"> *         - preužitkarska hiša</span></span>
<span id="cb490-486"><a href="Swagger.html#cb490-486" tabindex="-1"></a><span class="co"> *         - preša</span></span>
<span id="cb490-487"><a href="Swagger.html#cb490-487" tabindex="-1"></a><span class="co"> *         - pristanišče</span></span>
<span id="cb490-488"><a href="Swagger.html#cb490-488" tabindex="-1"></a><span class="co"> *         - pristava</span></span>
<span id="cb490-489"><a href="Swagger.html#cb490-489" tabindex="-1"></a><span class="co"> *         - proštija</span></span>
<span id="cb490-490"><a href="Swagger.html#cb490-490" tabindex="-1"></a><span class="co"> *         - rake</span></span>
<span id="cb490-491"><a href="Swagger.html#cb490-491" tabindex="-1"></a><span class="co"> *         - rastlinjak</span></span>
<span id="cb490-492"><a href="Swagger.html#cb490-492" tabindex="-1"></a><span class="co"> *         - razgledni stolp</span></span>
<span id="cb490-493"><a href="Swagger.html#cb490-493" tabindex="-1"></a><span class="co"> *         - razložena vas</span></span>
<span id="cb490-494"><a href="Swagger.html#cb490-494" tabindex="-1"></a><span class="co"> *         - razpelo</span></span>
<span id="cb490-495"><a href="Swagger.html#cb490-495" tabindex="-1"></a><span class="co"> *         - razstavišče</span></span>
<span id="cb490-496"><a href="Swagger.html#cb490-496" tabindex="-1"></a><span class="co"> *         - razvalina</span></span>
<span id="cb490-497"><a href="Swagger.html#cb490-497" tabindex="-1"></a><span class="co"> *         - refugij</span></span>
<span id="cb490-498"><a href="Swagger.html#cb490-498" tabindex="-1"></a><span class="co"> *         - relief</span></span>
<span id="cb490-499"><a href="Swagger.html#cb490-499" tabindex="-1"></a><span class="co"> *         - repnica</span></span>
<span id="cb490-500"><a href="Swagger.html#cb490-500" tabindex="-1"></a><span class="co"> *         - restavracija</span></span>
<span id="cb490-501"><a href="Swagger.html#cb490-501" tabindex="-1"></a><span class="co"> *         - ribnik</span></span>
<span id="cb490-502"><a href="Swagger.html#cb490-502" tabindex="-1"></a><span class="co"> *         - romarska cerkev</span></span>
<span id="cb490-503"><a href="Swagger.html#cb490-503" tabindex="-1"></a><span class="co"> *         - romarska hiša</span></span>
<span id="cb490-504"><a href="Swagger.html#cb490-504" tabindex="-1"></a><span class="co"> *         - romarsko središče</span></span>
<span id="cb490-505"><a href="Swagger.html#cb490-505" tabindex="-1"></a><span class="co"> *         - rotunda</span></span>
<span id="cb490-506"><a href="Swagger.html#cb490-506" tabindex="-1"></a><span class="co"> *         - rudarska hiša</span></span>
<span id="cb490-507"><a href="Swagger.html#cb490-507" tabindex="-1"></a><span class="co"> *         - rudnik</span></span>
<span id="cb490-508"><a href="Swagger.html#cb490-508" tabindex="-1"></a><span class="co"> *         - rudniška kapela</span></span>
<span id="cb490-509"><a href="Swagger.html#cb490-509" tabindex="-1"></a><span class="co"> *         - ruševina</span></span>
<span id="cb490-510"><a href="Swagger.html#cb490-510" tabindex="-1"></a><span class="co"> *         - sadovnjak</span></span>
<span id="cb490-511"><a href="Swagger.html#cb490-511" tabindex="-1"></a><span class="co"> *         - samostan</span></span>
<span id="cb490-512"><a href="Swagger.html#cb490-512" tabindex="-1"></a><span class="co"> *         - samostanska cerkev</span></span>
<span id="cb490-513"><a href="Swagger.html#cb490-513" tabindex="-1"></a><span class="co"> *         - samostanski vrt</span></span>
<span id="cb490-514"><a href="Swagger.html#cb490-514" tabindex="-1"></a><span class="co"> *         - sarkofag</span></span>
<span id="cb490-515"><a href="Swagger.html#cb490-515" tabindex="-1"></a><span class="co"> *         - senik</span></span>
<span id="cb490-516"><a href="Swagger.html#cb490-516" tabindex="-1"></a><span class="co"> *         - shramba</span></span>
<span id="cb490-517"><a href="Swagger.html#cb490-517" tabindex="-1"></a><span class="co"> *         - silos</span></span>
<span id="cb490-518"><a href="Swagger.html#cb490-518" tabindex="-1"></a><span class="co"> *         - sinagoga</span></span>
<span id="cb490-519"><a href="Swagger.html#cb490-519" tabindex="-1"></a><span class="co"> *         - sirarna</span></span>
<span id="cb490-520"><a href="Swagger.html#cb490-520" tabindex="-1"></a><span class="co"> *         - skedenj</span></span>
<span id="cb490-521"><a href="Swagger.html#cb490-521" tabindex="-1"></a><span class="co"> *         - skeletni pokop</span></span>
<span id="cb490-522"><a href="Swagger.html#cb490-522" tabindex="-1"></a><span class="co"> *         - skladišče</span></span>
<span id="cb490-523"><a href="Swagger.html#cb490-523" tabindex="-1"></a><span class="co"> *         - skrivni bunker</span></span>
<span id="cb490-524"><a href="Swagger.html#cb490-524" tabindex="-1"></a><span class="co"> *         - slopno znamenje</span></span>
<span id="cb490-525"><a href="Swagger.html#cb490-525" tabindex="-1"></a><span class="co"> *         - sodišče</span></span>
<span id="cb490-526"><a href="Swagger.html#cb490-526" tabindex="-1"></a><span class="co"> *         - sokolski dom</span></span>
<span id="cb490-527"><a href="Swagger.html#cb490-527" tabindex="-1"></a><span class="co"> *         - soline</span></span>
<span id="cb490-528"><a href="Swagger.html#cb490-528" tabindex="-1"></a><span class="co"> *         - solinska hiša</span></span>
<span id="cb490-529"><a href="Swagger.html#cb490-529" tabindex="-1"></a><span class="co"> *         - sončna ura</span></span>
<span id="cb490-530"><a href="Swagger.html#cb490-530" tabindex="-1"></a><span class="co"> *         - spahnjenca</span></span>
<span id="cb490-531"><a href="Swagger.html#cb490-531" tabindex="-1"></a><span class="co"> *         - spahnjenica</span></span>
<span id="cb490-532"><a href="Swagger.html#cb490-532" tabindex="-1"></a><span class="co"> *         - spominska hiša</span></span>
<span id="cb490-533"><a href="Swagger.html#cb490-533" tabindex="-1"></a><span class="co"> *         - spominska plošča</span></span>
<span id="cb490-534"><a href="Swagger.html#cb490-534" tabindex="-1"></a><span class="co"> *         - spominska soba</span></span>
<span id="cb490-535"><a href="Swagger.html#cb490-535" tabindex="-1"></a><span class="co"> *         - spominska tabla</span></span>
<span id="cb490-536"><a href="Swagger.html#cb490-536" tabindex="-1"></a><span class="co"> *         - spominski park</span></span>
<span id="cb490-537"><a href="Swagger.html#cb490-537" tabindex="-1"></a><span class="co"> *         - spominsko znamenje</span></span>
<span id="cb490-538"><a href="Swagger.html#cb490-538" tabindex="-1"></a><span class="co"> *         - sprehajalna pot</span></span>
<span id="cb490-539"><a href="Swagger.html#cb490-539" tabindex="-1"></a><span class="co"> *         - sramotilni steber</span></span>
<span id="cb490-540"><a href="Swagger.html#cb490-540" tabindex="-1"></a><span class="co"> *         - srednjeveško mesto</span></span>
<span id="cb490-541"><a href="Swagger.html#cb490-541" tabindex="-1"></a><span class="co"> *         - stadion</span></span>
<span id="cb490-542"><a href="Swagger.html#cb490-542" tabindex="-1"></a><span class="co"> *         - staja</span></span>
<span id="cb490-543"><a href="Swagger.html#cb490-543" tabindex="-1"></a><span class="co"> *         - stan</span></span>
<span id="cb490-544"><a href="Swagger.html#cb490-544" tabindex="-1"></a><span class="co"> *         - stanovanjska četrt</span></span>
<span id="cb490-545"><a href="Swagger.html#cb490-545" tabindex="-1"></a><span class="co"> *         - stanovanjski blok</span></span>
<span id="cb490-546"><a href="Swagger.html#cb490-546" tabindex="-1"></a><span class="co"> *         - stavba</span></span>
<span id="cb490-547"><a href="Swagger.html#cb490-547" tabindex="-1"></a><span class="co"> *         - steber</span></span>
<span id="cb490-548"><a href="Swagger.html#cb490-548" tabindex="-1"></a><span class="co"> *         - stebrno znamenje</span></span>
<span id="cb490-549"><a href="Swagger.html#cb490-549" tabindex="-1"></a><span class="co"> *         - stegnjena domačija</span></span>
<span id="cb490-550"><a href="Swagger.html#cb490-550" tabindex="-1"></a><span class="co"> *         - steklarska peč</span></span>
<span id="cb490-551"><a href="Swagger.html#cb490-551" tabindex="-1"></a><span class="co"> *         - steljnik</span></span>
<span id="cb490-552"><a href="Swagger.html#cb490-552" tabindex="-1"></a><span class="co"> *         - stolnica</span></span>
<span id="cb490-553"><a href="Swagger.html#cb490-553" tabindex="-1"></a><span class="co"> *         - stolp</span></span>
<span id="cb490-554"><a href="Swagger.html#cb490-554" tabindex="-1"></a><span class="co"> *         - stolpna ura</span></span>
<span id="cb490-555"><a href="Swagger.html#cb490-555" tabindex="-1"></a><span class="co"> *         - stolpnica</span></span>
<span id="cb490-556"><a href="Swagger.html#cb490-556" tabindex="-1"></a><span class="co"> *         - stopnišče</span></span>
<span id="cb490-557"><a href="Swagger.html#cb490-557" tabindex="-1"></a><span class="co"> *         - stražni stolp</span></span>
<span id="cb490-558"><a href="Swagger.html#cb490-558" tabindex="-1"></a><span class="co"> *         - strelišče</span></span>
<span id="cb490-559"><a href="Swagger.html#cb490-559" tabindex="-1"></a><span class="co"> *         - strelski jarek</span></span>
<span id="cb490-560"><a href="Swagger.html#cb490-560" tabindex="-1"></a><span class="co"> *         - stroj</span></span>
<span id="cb490-561"><a href="Swagger.html#cb490-561" tabindex="-1"></a><span class="co"> *         - strojnica</span></span>
<span id="cb490-562"><a href="Swagger.html#cb490-562" tabindex="-1"></a><span class="co"> *         - struga</span></span>
<span id="cb490-563"><a href="Swagger.html#cb490-563" tabindex="-1"></a><span class="co"> *         - suho stranišče</span></span>
<span id="cb490-564"><a href="Swagger.html#cb490-564" tabindex="-1"></a><span class="co"> *         - sušilnica</span></span>
<span id="cb490-565"><a href="Swagger.html#cb490-565" tabindex="-1"></a><span class="co"> *         - sušilnica za sadje</span></span>
<span id="cb490-566"><a href="Swagger.html#cb490-566" tabindex="-1"></a><span class="co"> *         - sv. Ahac</span></span>
<span id="cb490-567"><a href="Swagger.html#cb490-567" tabindex="-1"></a><span class="co"> *         - sv. Alojzij</span></span>
<span id="cb490-568"><a href="Swagger.html#cb490-568" tabindex="-1"></a><span class="co"> *         - sv. Ambrož</span></span>
<span id="cb490-569"><a href="Swagger.html#cb490-569" tabindex="-1"></a><span class="co"> *         - sv. Ana</span></span>
<span id="cb490-570"><a href="Swagger.html#cb490-570" tabindex="-1"></a><span class="co"> *         - sv. Andrej</span></span>
<span id="cb490-571"><a href="Swagger.html#cb490-571" tabindex="-1"></a><span class="co"> *         - sv. Anton Padovanski</span></span>
<span id="cb490-572"><a href="Swagger.html#cb490-572" tabindex="-1"></a><span class="co"> *         - sv. Avguštin</span></span>
<span id="cb490-573"><a href="Swagger.html#cb490-573" tabindex="-1"></a><span class="co"> *         - sv. Barbara</span></span>
<span id="cb490-574"><a href="Swagger.html#cb490-574" tabindex="-1"></a><span class="co"> *         - sv. Benedikt</span></span>
<span id="cb490-575"><a href="Swagger.html#cb490-575" tabindex="-1"></a><span class="co"> *         - sv. Bolfenk</span></span>
<span id="cb490-576"><a href="Swagger.html#cb490-576" tabindex="-1"></a><span class="co"> *         - sv. Boštjan</span></span>
<span id="cb490-577"><a href="Swagger.html#cb490-577" tabindex="-1"></a><span class="co"> *         - sv. Brikcij</span></span>
<span id="cb490-578"><a href="Swagger.html#cb490-578" tabindex="-1"></a><span class="co"> *         - sv. Ciril in Metod</span></span>
<span id="cb490-579"><a href="Swagger.html#cb490-579" tabindex="-1"></a><span class="co"> *         - sv. Danijel</span></span>
<span id="cb490-580"><a href="Swagger.html#cb490-580" tabindex="-1"></a><span class="co"> *         - sv. Donat</span></span>
<span id="cb490-581"><a href="Swagger.html#cb490-581" tabindex="-1"></a><span class="co"> *         - sv. Doroteja</span></span>
<span id="cb490-582"><a href="Swagger.html#cb490-582" tabindex="-1"></a><span class="co"> *         - sv. Družina</span></span>
<span id="cb490-583"><a href="Swagger.html#cb490-583" tabindex="-1"></a><span class="co"> *         - sv. Duh</span></span>
<span id="cb490-584"><a href="Swagger.html#cb490-584" tabindex="-1"></a><span class="co"> *         - sv. Egidij</span></span>
<span id="cb490-585"><a href="Swagger.html#cb490-585" tabindex="-1"></a><span class="co"> *         - sv. Elizabeta</span></span>
<span id="cb490-586"><a href="Swagger.html#cb490-586" tabindex="-1"></a><span class="co"> *         - sv. Fabijan</span></span>
<span id="cb490-587"><a href="Swagger.html#cb490-587" tabindex="-1"></a><span class="co"> *         - sv. Fabijan in Sebastijan</span></span>
<span id="cb490-588"><a href="Swagger.html#cb490-588" tabindex="-1"></a><span class="co"> *         - sv. Filip in Jakob</span></span>
<span id="cb490-589"><a href="Swagger.html#cb490-589" tabindex="-1"></a><span class="co"> *         - sv. Florijan</span></span>
<span id="cb490-590"><a href="Swagger.html#cb490-590" tabindex="-1"></a><span class="co"> *         - sv. Frančišek Asiški</span></span>
<span id="cb490-591"><a href="Swagger.html#cb490-591" tabindex="-1"></a><span class="co"> *         - sv. Frančišek Ksaverij</span></span>
<span id="cb490-592"><a href="Swagger.html#cb490-592" tabindex="-1"></a><span class="co"> *         - sv. Gervazij in Protazij</span></span>
<span id="cb490-593"><a href="Swagger.html#cb490-593" tabindex="-1"></a><span class="co"> *         - sv. Helena</span></span>
<span id="cb490-594"><a href="Swagger.html#cb490-594" tabindex="-1"></a><span class="co"> *         - sv. Ingenuin in Albuin</span></span>
<span id="cb490-595"><a href="Swagger.html#cb490-595" tabindex="-1"></a><span class="co"> *         - sv. Jakob</span></span>
<span id="cb490-596"><a href="Swagger.html#cb490-596" tabindex="-1"></a><span class="co"> *         - sv. Jakob starejši</span></span>
<span id="cb490-597"><a href="Swagger.html#cb490-597" tabindex="-1"></a><span class="co"> *         - sv. Janez Krstnik</span></span>
<span id="cb490-598"><a href="Swagger.html#cb490-598" tabindex="-1"></a><span class="co"> *         - sv. Janez Nepomuk</span></span>
<span id="cb490-599"><a href="Swagger.html#cb490-599" tabindex="-1"></a><span class="co"> *         - sv. Jedrt</span></span>
<span id="cb490-600"><a href="Swagger.html#cb490-600" tabindex="-1"></a><span class="co"> *         - sv. Jernej</span></span>
<span id="cb490-601"><a href="Swagger.html#cb490-601" tabindex="-1"></a><span class="co"> *         - sv. Jošt</span></span>
<span id="cb490-602"><a href="Swagger.html#cb490-602" tabindex="-1"></a><span class="co"> *         - sv. Jožef</span></span>
<span id="cb490-603"><a href="Swagger.html#cb490-603" tabindex="-1"></a><span class="co"> *         - sv. Jurij</span></span>
<span id="cb490-604"><a href="Swagger.html#cb490-604" tabindex="-1"></a><span class="co"> *         - sv. Just</span></span>
<span id="cb490-605"><a href="Swagger.html#cb490-605" tabindex="-1"></a><span class="co"> *         - sv. Kancij</span></span>
<span id="cb490-606"><a href="Swagger.html#cb490-606" tabindex="-1"></a><span class="co"> *         - sv. Kancijan</span></span>
<span id="cb490-607"><a href="Swagger.html#cb490-607" tabindex="-1"></a><span class="co"> *         - sv. Katarina</span></span>
<span id="cb490-608"><a href="Swagger.html#cb490-608" tabindex="-1"></a><span class="co"> *         - sv. Kozma in Damijan</span></span>
<span id="cb490-609"><a href="Swagger.html#cb490-609" tabindex="-1"></a><span class="co"> *         - sv. Križ</span></span>
<span id="cb490-610"><a href="Swagger.html#cb490-610" tabindex="-1"></a><span class="co"> *         - sv. Ladislav</span></span>
<span id="cb490-611"><a href="Swagger.html#cb490-611" tabindex="-1"></a><span class="co"> *         - sv. Lenart</span></span>
<span id="cb490-612"><a href="Swagger.html#cb490-612" tabindex="-1"></a><span class="co"> *         - sv. Lenart in sv. Rok</span></span>
<span id="cb490-613"><a href="Swagger.html#cb490-613" tabindex="-1"></a><span class="co"> *         - sv. Lovrenc</span></span>
<span id="cb490-614"><a href="Swagger.html#cb490-614" tabindex="-1"></a><span class="co"> *         - sv. Lucija</span></span>
<span id="cb490-615"><a href="Swagger.html#cb490-615" tabindex="-1"></a><span class="co"> *         - sv. Luka</span></span>
<span id="cb490-616"><a href="Swagger.html#cb490-616" tabindex="-1"></a><span class="co"> *         - sv. Marija</span></span>
<span id="cb490-617"><a href="Swagger.html#cb490-617" tabindex="-1"></a><span class="co"> *         - sv. Marija Zvezda</span></span>
<span id="cb490-618"><a href="Swagger.html#cb490-618" tabindex="-1"></a><span class="co"> *         - sv. Marjeta</span></span>
<span id="cb490-619"><a href="Swagger.html#cb490-619" tabindex="-1"></a><span class="co"> *         - sv. Marko</span></span>
<span id="cb490-620"><a href="Swagger.html#cb490-620" tabindex="-1"></a><span class="co"> *         - sv. Martin</span></span>
<span id="cb490-621"><a href="Swagger.html#cb490-621" tabindex="-1"></a><span class="co"> *         - sv. Matevž</span></span>
<span id="cb490-622"><a href="Swagger.html#cb490-622" tabindex="-1"></a><span class="co"> *         - sv. Matija</span></span>
<span id="cb490-623"><a href="Swagger.html#cb490-623" tabindex="-1"></a><span class="co"> *         - sv. Maver</span></span>
<span id="cb490-624"><a href="Swagger.html#cb490-624" tabindex="-1"></a><span class="co"> *         - sv. Mavricij</span></span>
<span id="cb490-625"><a href="Swagger.html#cb490-625" tabindex="-1"></a><span class="co"> *         - sv. Mihael</span></span>
<span id="cb490-626"><a href="Swagger.html#cb490-626" tabindex="-1"></a><span class="co"> *         - sv. Miklavž</span></span>
<span id="cb490-627"><a href="Swagger.html#cb490-627" tabindex="-1"></a><span class="co"> *         - sv. Mohor in Fortunat</span></span>
<span id="cb490-628"><a href="Swagger.html#cb490-628" tabindex="-1"></a><span class="co"> *         - sv. Neža</span></span>
<span id="cb490-629"><a href="Swagger.html#cb490-629" tabindex="-1"></a><span class="co"> *         - sv. Nikolaj</span></span>
<span id="cb490-630"><a href="Swagger.html#cb490-630" tabindex="-1"></a><span class="co"> *         - sv. Ožbolt</span></span>
<span id="cb490-631"><a href="Swagger.html#cb490-631" tabindex="-1"></a><span class="co"> *         - sv. Pavel</span></span>
<span id="cb490-632"><a href="Swagger.html#cb490-632" tabindex="-1"></a><span class="co"> *         - sv. Peter</span></span>
<span id="cb490-633"><a href="Swagger.html#cb490-633" tabindex="-1"></a><span class="co"> *         - sv. Peter in Pavel</span></span>
<span id="cb490-634"><a href="Swagger.html#cb490-634" tabindex="-1"></a><span class="co"> *         - sv. Primož</span></span>
<span id="cb490-635"><a href="Swagger.html#cb490-635" tabindex="-1"></a><span class="co"> *         - sv. Primož in Felicijan</span></span>
<span id="cb490-636"><a href="Swagger.html#cb490-636" tabindex="-1"></a><span class="co"> *         - sv. Radegunda</span></span>
<span id="cb490-637"><a href="Swagger.html#cb490-637" tabindex="-1"></a><span class="co"> *         - sv. Rok</span></span>
<span id="cb490-638"><a href="Swagger.html#cb490-638" tabindex="-1"></a><span class="co"> *         - sv. Rok in Sebastijan</span></span>
<span id="cb490-639"><a href="Swagger.html#cb490-639" tabindex="-1"></a><span class="co"> *         - sv. Rozalija</span></span>
<span id="cb490-640"><a href="Swagger.html#cb490-640" tabindex="-1"></a><span class="co"> *         - sv. Rupert</span></span>
<span id="cb490-641"><a href="Swagger.html#cb490-641" tabindex="-1"></a><span class="co"> *         - sv. Silvester</span></span>
<span id="cb490-642"><a href="Swagger.html#cb490-642" tabindex="-1"></a><span class="co"> *         - sv. Simon in Juda</span></span>
<span id="cb490-643"><a href="Swagger.html#cb490-643" tabindex="-1"></a><span class="co"> *         - sv. Simon in Juda Tadej</span></span>
<span id="cb490-644"><a href="Swagger.html#cb490-644" tabindex="-1"></a><span class="co"> *         - sv. Tilen</span></span>
<span id="cb490-645"><a href="Swagger.html#cb490-645" tabindex="-1"></a><span class="co"> *         - sv. Tomaž</span></span>
<span id="cb490-646"><a href="Swagger.html#cb490-646" tabindex="-1"></a><span class="co"> *         - sv. Trije kralji</span></span>
<span id="cb490-647"><a href="Swagger.html#cb490-647" tabindex="-1"></a><span class="co"> *         - sv. Trojica</span></span>
<span id="cb490-648"><a href="Swagger.html#cb490-648" tabindex="-1"></a><span class="co"> *         - sv. Urban</span></span>
<span id="cb490-649"><a href="Swagger.html#cb490-649" tabindex="-1"></a><span class="co"> *         - sv. Urh</span></span>
<span id="cb490-650"><a href="Swagger.html#cb490-650" tabindex="-1"></a><span class="co"> *         - sv. Uršula</span></span>
<span id="cb490-651"><a href="Swagger.html#cb490-651" tabindex="-1"></a><span class="co"> *         - sv. Valentin</span></span>
<span id="cb490-652"><a href="Swagger.html#cb490-652" tabindex="-1"></a><span class="co"> *         - sv. Vid</span></span>
<span id="cb490-653"><a href="Swagger.html#cb490-653" tabindex="-1"></a><span class="co"> *         - sv. Vladimir</span></span>
<span id="cb490-654"><a href="Swagger.html#cb490-654" tabindex="-1"></a><span class="co"> *         - sv. Volbenk</span></span>
<span id="cb490-655"><a href="Swagger.html#cb490-655" tabindex="-1"></a><span class="co"> *         - sv. Štefan</span></span>
<span id="cb490-656"><a href="Swagger.html#cb490-656" tabindex="-1"></a><span class="co"> *         - svete stopnice</span></span>
<span id="cb490-657"><a href="Swagger.html#cb490-657" tabindex="-1"></a><span class="co"> *         - svetišče</span></span>
<span id="cb490-658"><a href="Swagger.html#cb490-658" tabindex="-1"></a><span class="co"> *         - svinjak</span></span>
<span id="cb490-659"><a href="Swagger.html#cb490-659" tabindex="-1"></a><span class="co"> *         - tabor</span></span>
<span id="cb490-660"><a href="Swagger.html#cb490-660" tabindex="-1"></a><span class="co"> *         - talilna peč</span></span>
<span id="cb490-661"><a href="Swagger.html#cb490-661" tabindex="-1"></a><span class="co"> *         - talilnica</span></span>
<span id="cb490-662"><a href="Swagger.html#cb490-662" tabindex="-1"></a><span class="co"> *         - telovadnica</span></span>
<span id="cb490-663"><a href="Swagger.html#cb490-663" tabindex="-1"></a><span class="co"> *         - tempelj</span></span>
<span id="cb490-664"><a href="Swagger.html#cb490-664" tabindex="-1"></a><span class="co"> *         - terase</span></span>
<span id="cb490-665"><a href="Swagger.html#cb490-665" tabindex="-1"></a><span class="co"> *         - terme</span></span>
<span id="cb490-666"><a href="Swagger.html#cb490-666" tabindex="-1"></a><span class="co"> *         - termoelektrarna</span></span>
<span id="cb490-667"><a href="Swagger.html#cb490-667" tabindex="-1"></a><span class="co"> *         - tiskarna</span></span>
<span id="cb490-668"><a href="Swagger.html#cb490-668" tabindex="-1"></a><span class="co"> *         - toplar</span></span>
<span id="cb490-669"><a href="Swagger.html#cb490-669" tabindex="-1"></a><span class="co"> *         - tovarna</span></span>
<span id="cb490-670"><a href="Swagger.html#cb490-670" tabindex="-1"></a><span class="co"> *         - trafika</span></span>
<span id="cb490-671"><a href="Swagger.html#cb490-671" tabindex="-1"></a><span class="co"> *         - transformatorska postaja</span></span>
<span id="cb490-672"><a href="Swagger.html#cb490-672" tabindex="-1"></a><span class="co"> *         - travnik</span></span>
<span id="cb490-673"><a href="Swagger.html#cb490-673" tabindex="-1"></a><span class="co"> *         - trg</span></span>
<span id="cb490-674"><a href="Swagger.html#cb490-674" tabindex="-1"></a><span class="co"> *         - trgovina</span></span>
<span id="cb490-675"><a href="Swagger.html#cb490-675" tabindex="-1"></a><span class="co"> *         - trška hiša</span></span>
<span id="cb490-676"><a href="Swagger.html#cb490-676" tabindex="-1"></a><span class="co"> *         - trško jedro</span></span>
<span id="cb490-677"><a href="Swagger.html#cb490-677" tabindex="-1"></a><span class="co"> *         - trško naselje</span></span>
<span id="cb490-678"><a href="Swagger.html#cb490-678" tabindex="-1"></a><span class="co"> *         - tržnica</span></span>
<span id="cb490-679"><a href="Swagger.html#cb490-679" tabindex="-1"></a><span class="co"> *         - ulica</span></span>
<span id="cb490-680"><a href="Swagger.html#cb490-680" tabindex="-1"></a><span class="co"> *         - ulični otok</span></span>
<span id="cb490-681"><a href="Swagger.html#cb490-681" tabindex="-1"></a><span class="co"> *         - uta</span></span>
<span id="cb490-682"><a href="Swagger.html#cb490-682" tabindex="-1"></a><span class="co"> *         - utrdba</span></span>
<span id="cb490-683"><a href="Swagger.html#cb490-683" tabindex="-1"></a><span class="co"> *         - vas</span></span>
<span id="cb490-684"><a href="Swagger.html#cb490-684" tabindex="-1"></a><span class="co"> *         - vaško jedro</span></span>
<span id="cb490-685"><a href="Swagger.html#cb490-685" tabindex="-1"></a><span class="co"> *         - veleblagovnica</span></span>
<span id="cb490-686"><a href="Swagger.html#cb490-686" tabindex="-1"></a><span class="co"> *         - vila</span></span>
<span id="cb490-687"><a href="Swagger.html#cb490-687" tabindex="-1"></a><span class="co"> *         - villa rustica</span></span>
<span id="cb490-688"><a href="Swagger.html#cb490-688" tabindex="-1"></a><span class="co"> *         - viničarija</span></span>
<span id="cb490-689"><a href="Swagger.html#cb490-689" tabindex="-1"></a><span class="co"> *         - vinogradniški dvorec</span></span>
<span id="cb490-690"><a href="Swagger.html#cb490-690" tabindex="-1"></a><span class="co"> *         - vinogradniški zaselek</span></span>
<span id="cb490-691"><a href="Swagger.html#cb490-691" tabindex="-1"></a><span class="co"> *         - vinska klet</span></span>
<span id="cb490-692"><a href="Swagger.html#cb490-692" tabindex="-1"></a><span class="co"> *         - vislice</span></span>
<span id="cb490-693"><a href="Swagger.html#cb490-693" tabindex="-1"></a><span class="co"> *         - viteški nagrobnik</span></span>
<span id="cb490-694"><a href="Swagger.html#cb490-694" tabindex="-1"></a><span class="co"> *         - vodna žaga</span></span>
<span id="cb490-695"><a href="Swagger.html#cb490-695" tabindex="-1"></a><span class="co"> *         - vodni grad</span></span>
<span id="cb490-696"><a href="Swagger.html#cb490-696" tabindex="-1"></a><span class="co"> *         - vodni mlin</span></span>
<span id="cb490-697"><a href="Swagger.html#cb490-697" tabindex="-1"></a><span class="co"> *         - vodni stolp</span></span>
<span id="cb490-698"><a href="Swagger.html#cb490-698" tabindex="-1"></a><span class="co"> *         - vodni zbiralnik</span></span>
<span id="cb490-699"><a href="Swagger.html#cb490-699" tabindex="-1"></a><span class="co"> *         - vodnjak</span></span>
<span id="cb490-700"><a href="Swagger.html#cb490-700" tabindex="-1"></a><span class="co"> *         - vodomet</span></span>
<span id="cb490-701"><a href="Swagger.html#cb490-701" tabindex="-1"></a><span class="co"> *         - vojaški tabor</span></span>
<span id="cb490-702"><a href="Swagger.html#cb490-702" tabindex="-1"></a><span class="co"> *         - vojaško pokopališče</span></span>
<span id="cb490-703"><a href="Swagger.html#cb490-703" tabindex="-1"></a><span class="co"> *         - vojašnica</span></span>
<span id="cb490-704"><a href="Swagger.html#cb490-704" tabindex="-1"></a><span class="co"> *         - vratarnica</span></span>
<span id="cb490-705"><a href="Swagger.html#cb490-705" tabindex="-1"></a><span class="co"> *         - vrhhlevna hiša</span></span>
<span id="cb490-706"><a href="Swagger.html#cb490-706" tabindex="-1"></a><span class="co"> *         - vrhkletna hiša</span></span>
<span id="cb490-707"><a href="Swagger.html#cb490-707" tabindex="-1"></a><span class="co"> *         - vrt</span></span>
<span id="cb490-708"><a href="Swagger.html#cb490-708" tabindex="-1"></a><span class="co"> *         - vrtec</span></span>
<span id="cb490-709"><a href="Swagger.html#cb490-709" tabindex="-1"></a><span class="co"> *         - vrtna plastika</span></span>
<span id="cb490-710"><a href="Swagger.html#cb490-710" tabindex="-1"></a><span class="co"> *         - vrtnarija</span></span>
<span id="cb490-711"><a href="Swagger.html#cb490-711" tabindex="-1"></a><span class="co"> *         - vrtni rondo</span></span>
<span id="cb490-712"><a href="Swagger.html#cb490-712" tabindex="-1"></a><span class="co"> *         - vzporedna domačija</span></span>
<span id="cb490-713"><a href="Swagger.html#cb490-713" tabindex="-1"></a><span class="co"> *         - vzporedni kozolec</span></span>
<span id="cb490-714"><a href="Swagger.html#cb490-714" tabindex="-1"></a><span class="co"> *         - zaledna postojanka</span></span>
<span id="cb490-715"><a href="Swagger.html#cb490-715" tabindex="-1"></a><span class="co"> *         - zapor</span></span>
<span id="cb490-716"><a href="Swagger.html#cb490-716" tabindex="-1"></a><span class="co"> *         - zaporni zid</span></span>
<span id="cb490-717"><a href="Swagger.html#cb490-717" tabindex="-1"></a><span class="co"> *         - zapornica</span></span>
<span id="cb490-718"><a href="Swagger.html#cb490-718" tabindex="-1"></a><span class="co"> *         - zaprta domačija</span></span>
<span id="cb490-719"><a href="Swagger.html#cb490-719" tabindex="-1"></a><span class="co"> *         - zaselek</span></span>
<span id="cb490-720"><a href="Swagger.html#cb490-720" tabindex="-1"></a><span class="co"> *         - zbirka predmetov</span></span>
<span id="cb490-721"><a href="Swagger.html#cb490-721" tabindex="-1"></a><span class="co"> *         - zdraviliški objekt</span></span>
<span id="cb490-722"><a href="Swagger.html#cb490-722" tabindex="-1"></a><span class="co"> *         - zdraviliški park</span></span>
<span id="cb490-723"><a href="Swagger.html#cb490-723" tabindex="-1"></a><span class="co"> *         - zdravilišče</span></span>
<span id="cb490-724"><a href="Swagger.html#cb490-724" tabindex="-1"></a><span class="co"> *         - zidanica</span></span>
<span id="cb490-725"><a href="Swagger.html#cb490-725" tabindex="-1"></a><span class="co"> *         - zlati oltar</span></span>
<span id="cb490-726"><a href="Swagger.html#cb490-726" tabindex="-1"></a><span class="co"> *         - znamenje</span></span>
<span id="cb490-727"><a href="Swagger.html#cb490-727" tabindex="-1"></a><span class="co"> *         - znamenje z nišo</span></span>
<span id="cb490-728"><a href="Swagger.html#cb490-728" tabindex="-1"></a><span class="co"> *         - zvonik</span></span>
<span id="cb490-729"><a href="Swagger.html#cb490-729" tabindex="-1"></a><span class="co"> *         - zvončnica</span></span>
<span id="cb490-730"><a href="Swagger.html#cb490-730" tabindex="-1"></a><span class="co"> *         - čebelnjak</span></span>
<span id="cb490-731"><a href="Swagger.html#cb490-731" tabindex="-1"></a><span class="co"> *         - čolnarna</span></span>
<span id="cb490-732"><a href="Swagger.html#cb490-732" tabindex="-1"></a><span class="co"> *         - črna kuhinja</span></span>
<span id="cb490-733"><a href="Swagger.html#cb490-733" tabindex="-1"></a><span class="co"> *         - čuvajnica</span></span>
<span id="cb490-734"><a href="Swagger.html#cb490-734" tabindex="-1"></a><span class="co"> *         - šola</span></span>
<span id="cb490-735"><a href="Swagger.html#cb490-735" tabindex="-1"></a><span class="co"> *         - špital</span></span>
<span id="cb490-736"><a href="Swagger.html#cb490-736" tabindex="-1"></a><span class="co"> *         - Žalostna Mati božja</span></span>
<span id="cb490-737"><a href="Swagger.html#cb490-737" tabindex="-1"></a><span class="co"> *         - žaga</span></span>
<span id="cb490-738"><a href="Swagger.html#cb490-738" tabindex="-1"></a><span class="co"> *         - žara</span></span>
<span id="cb490-739"><a href="Swagger.html#cb490-739" tabindex="-1"></a><span class="co"> *         - železarna</span></span>
<span id="cb490-740"><a href="Swagger.html#cb490-740" tabindex="-1"></a><span class="co"> *         - železniška postaja</span></span>
<span id="cb490-741"><a href="Swagger.html#cb490-741" tabindex="-1"></a><span class="co"> *         - železniška proga</span></span>
<span id="cb490-742"><a href="Swagger.html#cb490-742" tabindex="-1"></a><span class="co"> *         - železobetonski most</span></span>
<span id="cb490-743"><a href="Swagger.html#cb490-743" tabindex="-1"></a><span class="co"> *         - žgani pokop</span></span>
<span id="cb490-744"><a href="Swagger.html#cb490-744" tabindex="-1"></a><span class="co"> *         - žitnica</span></span>
<span id="cb490-745"><a href="Swagger.html#cb490-745" tabindex="-1"></a><span class="co"> *         - živica</span></span>
<span id="cb490-746"><a href="Swagger.html#cb490-746" tabindex="-1"></a><span class="co"> *         - žičnica</span></span>
<span id="cb490-747"><a href="Swagger.html#cb490-747" tabindex="-1"></a><span class="co"> *         - župnijska cerkev</span></span>
<span id="cb490-748"><a href="Swagger.html#cb490-748" tabindex="-1"></a><span class="co"> *         - župnijsko središče</span></span>
<span id="cb490-749"><a href="Swagger.html#cb490-749" tabindex="-1"></a><span class="co"> *         - župnišče</span></span>
<span id="cb490-750"><a href="Swagger.html#cb490-750" tabindex="-1"></a><span class="co"> *     - name: institution</span></span>
<span id="cb490-751"><a href="Swagger.html#cb490-751" tabindex="-1"></a><span class="co"> *       in: query</span></span>
<span id="cb490-752"><a href="Swagger.html#cb490-752" tabindex="-1"></a><span class="co"> *       description: </span><span class="kw">&lt;b&gt;</span><span class="co">institution</span><span class="kw">&lt;/b&gt;</span><span class="co"> of the location</span></span>
<span id="cb490-753"><a href="Swagger.html#cb490-753" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb490-754"><a href="Swagger.html#cb490-754" tabindex="-1"></a><span class="co"> *        type: string</span></span>
<span id="cb490-755"><a href="Swagger.html#cb490-755" tabindex="-1"></a><span class="co"> *        enum:</span></span>
<span id="cb490-756"><a href="Swagger.html#cb490-756" tabindex="-1"></a><span class="co"> *         - ZVKD Celje</span></span>
<span id="cb490-757"><a href="Swagger.html#cb490-757" tabindex="-1"></a><span class="co"> *         - ZVKD Kranj</span></span>
<span id="cb490-758"><a href="Swagger.html#cb490-758" tabindex="-1"></a><span class="co"> *         - ZVKD Ljubljana</span></span>
<span id="cb490-759"><a href="Swagger.html#cb490-759" tabindex="-1"></a><span class="co"> *         - ZVKD Maribor</span></span>
<span id="cb490-760"><a href="Swagger.html#cb490-760" tabindex="-1"></a><span class="co"> *         - ZVKD Nova Gorica</span></span>
<span id="cb490-761"><a href="Swagger.html#cb490-761" tabindex="-1"></a><span class="co"> *         - ZVKD Novo mesto</span></span>
<span id="cb490-762"><a href="Swagger.html#cb490-762" tabindex="-1"></a><span class="co"> *         - ZVKD Piran</span></span>
<span id="cb490-763"><a href="Swagger.html#cb490-763" tabindex="-1"></a><span class="co"> *     - name: municipality</span></span>
<span id="cb490-764"><a href="Swagger.html#cb490-764" tabindex="-1"></a><span class="co"> *       in: query</span></span>
<span id="cb490-765"><a href="Swagger.html#cb490-765" tabindex="-1"></a><span class="co"> *       description: </span><span class="kw">&lt;b&gt;</span><span class="co">municipality</span><span class="kw">&lt;/b&gt;</span><span class="co"> of the location</span></span>
<span id="cb490-766"><a href="Swagger.html#cb490-766" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb490-767"><a href="Swagger.html#cb490-767" tabindex="-1"></a><span class="co"> *        type: string</span></span>
<span id="cb490-768"><a href="Swagger.html#cb490-768" tabindex="-1"></a><span class="co"> *        enum:</span></span>
<span id="cb490-769"><a href="Swagger.html#cb490-769" tabindex="-1"></a><span class="co"> *         - AJDOVŠČINA</span></span>
<span id="cb490-770"><a href="Swagger.html#cb490-770" tabindex="-1"></a><span class="co"> *         - ANKARAN</span></span>
<span id="cb490-771"><a href="Swagger.html#cb490-771" tabindex="-1"></a><span class="co"> *         - APAČE</span></span>
<span id="cb490-772"><a href="Swagger.html#cb490-772" tabindex="-1"></a><span class="co"> *         - BELTINCI</span></span>
<span id="cb490-773"><a href="Swagger.html#cb490-773" tabindex="-1"></a><span class="co"> *         - BENEDIKT</span></span>
<span id="cb490-774"><a href="Swagger.html#cb490-774" tabindex="-1"></a><span class="co"> *         - BISTRICA OB SOTLI</span></span>
<span id="cb490-775"><a href="Swagger.html#cb490-775" tabindex="-1"></a><span class="co"> *         - BLED</span></span>
<span id="cb490-776"><a href="Swagger.html#cb490-776" tabindex="-1"></a><span class="co"> *         - BOHINJ</span></span>
<span id="cb490-777"><a href="Swagger.html#cb490-777" tabindex="-1"></a><span class="co"> *         - BOROVNICA</span></span>
<span id="cb490-778"><a href="Swagger.html#cb490-778" tabindex="-1"></a><span class="co"> *         - BOVEC</span></span>
<span id="cb490-779"><a href="Swagger.html#cb490-779" tabindex="-1"></a><span class="co"> *         - BRASLOVČE</span></span>
<span id="cb490-780"><a href="Swagger.html#cb490-780" tabindex="-1"></a><span class="co"> *         - BRDA</span></span>
<span id="cb490-781"><a href="Swagger.html#cb490-781" tabindex="-1"></a><span class="co"> *         - BREZOVICA</span></span>
<span id="cb490-782"><a href="Swagger.html#cb490-782" tabindex="-1"></a><span class="co"> *         - BREŽICE</span></span>
<span id="cb490-783"><a href="Swagger.html#cb490-783" tabindex="-1"></a><span class="co"> *         - CANKOVA</span></span>
<span id="cb490-784"><a href="Swagger.html#cb490-784" tabindex="-1"></a><span class="co"> *         - CELJE</span></span>
<span id="cb490-785"><a href="Swagger.html#cb490-785" tabindex="-1"></a><span class="co"> *         - CERKLJE NA GORENJSKEM</span></span>
<span id="cb490-786"><a href="Swagger.html#cb490-786" tabindex="-1"></a><span class="co"> *         - CERKNICA</span></span>
<span id="cb490-787"><a href="Swagger.html#cb490-787" tabindex="-1"></a><span class="co"> *         - CERKNO</span></span>
<span id="cb490-788"><a href="Swagger.html#cb490-788" tabindex="-1"></a><span class="co"> *         - CERKVENJAK</span></span>
<span id="cb490-789"><a href="Swagger.html#cb490-789" tabindex="-1"></a><span class="co"> *         - CIRKULANE</span></span>
<span id="cb490-790"><a href="Swagger.html#cb490-790" tabindex="-1"></a><span class="co"> *         - DESTRNIK</span></span>
<span id="cb490-791"><a href="Swagger.html#cb490-791" tabindex="-1"></a><span class="co"> *         - DIVAČA</span></span>
<span id="cb490-792"><a href="Swagger.html#cb490-792" tabindex="-1"></a><span class="co"> *         - DOBJE</span></span>
<span id="cb490-793"><a href="Swagger.html#cb490-793" tabindex="-1"></a><span class="co"> *         - DOBREPOLJE</span></span>
<span id="cb490-794"><a href="Swagger.html#cb490-794" tabindex="-1"></a><span class="co"> *         - DOBRNA</span></span>
<span id="cb490-795"><a href="Swagger.html#cb490-795" tabindex="-1"></a><span class="co"> *         - DOBROVA-POLHOV GRADEC</span></span>
<span id="cb490-796"><a href="Swagger.html#cb490-796" tabindex="-1"></a><span class="co"> *         - DOBROVNIK</span></span>
<span id="cb490-797"><a href="Swagger.html#cb490-797" tabindex="-1"></a><span class="co"> *         - DOL PRI LJUBLJANI</span></span>
<span id="cb490-798"><a href="Swagger.html#cb490-798" tabindex="-1"></a><span class="co"> *         - DOLENJSKE TOPLICE</span></span>
<span id="cb490-799"><a href="Swagger.html#cb490-799" tabindex="-1"></a><span class="co"> *         - DOMŽALE</span></span>
<span id="cb490-800"><a href="Swagger.html#cb490-800" tabindex="-1"></a><span class="co"> *         - DORNAVA</span></span>
<span id="cb490-801"><a href="Swagger.html#cb490-801" tabindex="-1"></a><span class="co"> *         - DRAVOGRAD</span></span>
<span id="cb490-802"><a href="Swagger.html#cb490-802" tabindex="-1"></a><span class="co"> *         - DUPLEK</span></span>
<span id="cb490-803"><a href="Swagger.html#cb490-803" tabindex="-1"></a><span class="co"> *         - GORENJA VAS-POLJANE</span></span>
<span id="cb490-804"><a href="Swagger.html#cb490-804" tabindex="-1"></a><span class="co"> *         - GORIŠNICA</span></span>
<span id="cb490-805"><a href="Swagger.html#cb490-805" tabindex="-1"></a><span class="co"> *         - GORJE</span></span>
<span id="cb490-806"><a href="Swagger.html#cb490-806" tabindex="-1"></a><span class="co"> *         - GORNJA RADGONA</span></span>
<span id="cb490-807"><a href="Swagger.html#cb490-807" tabindex="-1"></a><span class="co"> *         - GORNJI GRAD</span></span>
<span id="cb490-808"><a href="Swagger.html#cb490-808" tabindex="-1"></a><span class="co"> *         - GORNJI PETROVCI</span></span>
<span id="cb490-809"><a href="Swagger.html#cb490-809" tabindex="-1"></a><span class="co"> *         - GRAD</span></span>
<span id="cb490-810"><a href="Swagger.html#cb490-810" tabindex="-1"></a><span class="co"> *         - GROSUPLJE</span></span>
<span id="cb490-811"><a href="Swagger.html#cb490-811" tabindex="-1"></a><span class="co"> *         - HAJDINA</span></span>
<span id="cb490-812"><a href="Swagger.html#cb490-812" tabindex="-1"></a><span class="co"> *         - HORJUL</span></span>
<span id="cb490-813"><a href="Swagger.html#cb490-813" tabindex="-1"></a><span class="co"> *         - HOČE-SLIVNICA</span></span>
<span id="cb490-814"><a href="Swagger.html#cb490-814" tabindex="-1"></a><span class="co"> *         - HRASTNIK</span></span>
<span id="cb490-815"><a href="Swagger.html#cb490-815" tabindex="-1"></a><span class="co"> *         - HRPELJE-KOZINA</span></span>
<span id="cb490-816"><a href="Swagger.html#cb490-816" tabindex="-1"></a><span class="co"> *         - IDRIJA</span></span>
<span id="cb490-817"><a href="Swagger.html#cb490-817" tabindex="-1"></a><span class="co"> *         - IG</span></span>
<span id="cb490-818"><a href="Swagger.html#cb490-818" tabindex="-1"></a><span class="co"> *         - ILIRSKA BISTRICA</span></span>
<span id="cb490-819"><a href="Swagger.html#cb490-819" tabindex="-1"></a><span class="co"> *         - IVANČNA GORICA</span></span>
<span id="cb490-820"><a href="Swagger.html#cb490-820" tabindex="-1"></a><span class="co"> *         - IZOLA</span></span>
<span id="cb490-821"><a href="Swagger.html#cb490-821" tabindex="-1"></a><span class="co"> *         - JESENICE</span></span>
<span id="cb490-822"><a href="Swagger.html#cb490-822" tabindex="-1"></a><span class="co"> *         - JEZERSKO</span></span>
<span id="cb490-823"><a href="Swagger.html#cb490-823" tabindex="-1"></a><span class="co"> *         - JURŠINCI</span></span>
<span id="cb490-824"><a href="Swagger.html#cb490-824" tabindex="-1"></a><span class="co"> *         - KAMNIK</span></span>
<span id="cb490-825"><a href="Swagger.html#cb490-825" tabindex="-1"></a><span class="co"> *         - KANAL</span></span>
<span id="cb490-826"><a href="Swagger.html#cb490-826" tabindex="-1"></a><span class="co"> *         - KIDRIČEVO</span></span>
<span id="cb490-827"><a href="Swagger.html#cb490-827" tabindex="-1"></a><span class="co"> *         - KOBARID</span></span>
<span id="cb490-828"><a href="Swagger.html#cb490-828" tabindex="-1"></a><span class="co"> *         - KOBILJE</span></span>
<span id="cb490-829"><a href="Swagger.html#cb490-829" tabindex="-1"></a><span class="co"> *         - KOMEN</span></span>
<span id="cb490-830"><a href="Swagger.html#cb490-830" tabindex="-1"></a><span class="co"> *         - KOMENDA</span></span>
<span id="cb490-831"><a href="Swagger.html#cb490-831" tabindex="-1"></a><span class="co"> *         - KOPER</span></span>
<span id="cb490-832"><a href="Swagger.html#cb490-832" tabindex="-1"></a><span class="co"> *         - KOSTANJEVICA NA KRKI</span></span>
<span id="cb490-833"><a href="Swagger.html#cb490-833" tabindex="-1"></a><span class="co"> *         - KOSTEL</span></span>
<span id="cb490-834"><a href="Swagger.html#cb490-834" tabindex="-1"></a><span class="co"> *         - KOZJE</span></span>
<span id="cb490-835"><a href="Swagger.html#cb490-835" tabindex="-1"></a><span class="co"> *         - KOČEVJE</span></span>
<span id="cb490-836"><a href="Swagger.html#cb490-836" tabindex="-1"></a><span class="co"> *         - KRANJ</span></span>
<span id="cb490-837"><a href="Swagger.html#cb490-837" tabindex="-1"></a><span class="co"> *         - KRANJSKA GORA</span></span>
<span id="cb490-838"><a href="Swagger.html#cb490-838" tabindex="-1"></a><span class="co"> *         - KRIŽEVCI</span></span>
<span id="cb490-839"><a href="Swagger.html#cb490-839" tabindex="-1"></a><span class="co"> *         - KRŠKO</span></span>
<span id="cb490-840"><a href="Swagger.html#cb490-840" tabindex="-1"></a><span class="co"> *         - KUNGOTA</span></span>
<span id="cb490-841"><a href="Swagger.html#cb490-841" tabindex="-1"></a><span class="co"> *         - KUZMA</span></span>
<span id="cb490-842"><a href="Swagger.html#cb490-842" tabindex="-1"></a><span class="co"> *         - LAŠKO</span></span>
<span id="cb490-843"><a href="Swagger.html#cb490-843" tabindex="-1"></a><span class="co"> *         - LENART</span></span>
<span id="cb490-844"><a href="Swagger.html#cb490-844" tabindex="-1"></a><span class="co"> *         - LENDAVA</span></span>
<span id="cb490-845"><a href="Swagger.html#cb490-845" tabindex="-1"></a><span class="co"> *         - LITIJA</span></span>
<span id="cb490-846"><a href="Swagger.html#cb490-846" tabindex="-1"></a><span class="co"> *         - LJUBLJANA</span></span>
<span id="cb490-847"><a href="Swagger.html#cb490-847" tabindex="-1"></a><span class="co"> *         - LJUBNO</span></span>
<span id="cb490-848"><a href="Swagger.html#cb490-848" tabindex="-1"></a><span class="co"> *         - LJUTOMER</span></span>
<span id="cb490-849"><a href="Swagger.html#cb490-849" tabindex="-1"></a><span class="co"> *         - LOGATEC</span></span>
<span id="cb490-850"><a href="Swagger.html#cb490-850" tabindex="-1"></a><span class="co"> *         - LOVRENC NA POHORJU</span></span>
<span id="cb490-851"><a href="Swagger.html#cb490-851" tabindex="-1"></a><span class="co"> *         - LOŠKA DOLINA</span></span>
<span id="cb490-852"><a href="Swagger.html#cb490-852" tabindex="-1"></a><span class="co"> *         - LOŠKI POTOK</span></span>
<span id="cb490-853"><a href="Swagger.html#cb490-853" tabindex="-1"></a><span class="co"> *         - LUKOVICA</span></span>
<span id="cb490-854"><a href="Swagger.html#cb490-854" tabindex="-1"></a><span class="co"> *         - LUČE</span></span>
<span id="cb490-855"><a href="Swagger.html#cb490-855" tabindex="-1"></a><span class="co"> *         - MAJŠPERK</span></span>
<span id="cb490-856"><a href="Swagger.html#cb490-856" tabindex="-1"></a><span class="co"> *         - MAKOLE</span></span>
<span id="cb490-857"><a href="Swagger.html#cb490-857" tabindex="-1"></a><span class="co"> *         - MARIBOR</span></span>
<span id="cb490-858"><a href="Swagger.html#cb490-858" tabindex="-1"></a><span class="co"> *         - MEDVODE</span></span>
<span id="cb490-859"><a href="Swagger.html#cb490-859" tabindex="-1"></a><span class="co"> *         - MENGEŠ</span></span>
<span id="cb490-860"><a href="Swagger.html#cb490-860" tabindex="-1"></a><span class="co"> *         - METLIKA</span></span>
<span id="cb490-861"><a href="Swagger.html#cb490-861" tabindex="-1"></a><span class="co"> *         - MEŽICA</span></span>
<span id="cb490-862"><a href="Swagger.html#cb490-862" tabindex="-1"></a><span class="co"> *         - MIKLAVŽ NA DRAVSKEM POLJU</span></span>
<span id="cb490-863"><a href="Swagger.html#cb490-863" tabindex="-1"></a><span class="co"> *         - MIREN-KOSTANJEVICA</span></span>
<span id="cb490-864"><a href="Swagger.html#cb490-864" tabindex="-1"></a><span class="co"> *         - MIRNA</span></span>
<span id="cb490-865"><a href="Swagger.html#cb490-865" tabindex="-1"></a><span class="co"> *         - MIRNA PEČ</span></span>
<span id="cb490-866"><a href="Swagger.html#cb490-866" tabindex="-1"></a><span class="co"> *         - MISLINJA</span></span>
<span id="cb490-867"><a href="Swagger.html#cb490-867" tabindex="-1"></a><span class="co"> *         - MOKRONOG-TREBELNO</span></span>
<span id="cb490-868"><a href="Swagger.html#cb490-868" tabindex="-1"></a><span class="co"> *         - MORAVSKE TOPLICE</span></span>
<span id="cb490-869"><a href="Swagger.html#cb490-869" tabindex="-1"></a><span class="co"> *         - MORAVČE</span></span>
<span id="cb490-870"><a href="Swagger.html#cb490-870" tabindex="-1"></a><span class="co"> *         - MOZIRJE</span></span>
<span id="cb490-871"><a href="Swagger.html#cb490-871" tabindex="-1"></a><span class="co"> *         - MURSKA SOBOTA</span></span>
<span id="cb490-872"><a href="Swagger.html#cb490-872" tabindex="-1"></a><span class="co"> *         - MUTA</span></span>
<span id="cb490-873"><a href="Swagger.html#cb490-873" tabindex="-1"></a><span class="co"> *         - NAKLO</span></span>
<span id="cb490-874"><a href="Swagger.html#cb490-874" tabindex="-1"></a><span class="co"> *         - NAZARJE</span></span>
<span id="cb490-875"><a href="Swagger.html#cb490-875" tabindex="-1"></a><span class="co"> *         - NOVA GORICA</span></span>
<span id="cb490-876"><a href="Swagger.html#cb490-876" tabindex="-1"></a><span class="co"> *         - NOVO MESTO</span></span>
<span id="cb490-877"><a href="Swagger.html#cb490-877" tabindex="-1"></a><span class="co"> *         - OPLOTNICA</span></span>
<span id="cb490-878"><a href="Swagger.html#cb490-878" tabindex="-1"></a><span class="co"> *         - ORMOŽ</span></span>
<span id="cb490-879"><a href="Swagger.html#cb490-879" tabindex="-1"></a><span class="co"> *         - OSILNICA</span></span>
<span id="cb490-880"><a href="Swagger.html#cb490-880" tabindex="-1"></a><span class="co"> *         - PESNICA</span></span>
<span id="cb490-881"><a href="Swagger.html#cb490-881" tabindex="-1"></a><span class="co"> *         - PIRAN</span></span>
<span id="cb490-882"><a href="Swagger.html#cb490-882" tabindex="-1"></a><span class="co"> *         - PIVKA</span></span>
<span id="cb490-883"><a href="Swagger.html#cb490-883" tabindex="-1"></a><span class="co"> *         - PODLEHNIK</span></span>
<span id="cb490-884"><a href="Swagger.html#cb490-884" tabindex="-1"></a><span class="co"> *         - PODVELKA</span></span>
<span id="cb490-885"><a href="Swagger.html#cb490-885" tabindex="-1"></a><span class="co"> *         - PODČETRTEK</span></span>
<span id="cb490-886"><a href="Swagger.html#cb490-886" tabindex="-1"></a><span class="co"> *         - POLJČANE</span></span>
<span id="cb490-887"><a href="Swagger.html#cb490-887" tabindex="-1"></a><span class="co"> *         - POLZELA</span></span>
<span id="cb490-888"><a href="Swagger.html#cb490-888" tabindex="-1"></a><span class="co"> *         - POSTOJNA</span></span>
<span id="cb490-889"><a href="Swagger.html#cb490-889" tabindex="-1"></a><span class="co"> *         - PREBOLD</span></span>
<span id="cb490-890"><a href="Swagger.html#cb490-890" tabindex="-1"></a><span class="co"> *         - PREDDVOR</span></span>
<span id="cb490-891"><a href="Swagger.html#cb490-891" tabindex="-1"></a><span class="co"> *         - PREVALJE</span></span>
<span id="cb490-892"><a href="Swagger.html#cb490-892" tabindex="-1"></a><span class="co"> *         - PTUJ</span></span>
<span id="cb490-893"><a href="Swagger.html#cb490-893" tabindex="-1"></a><span class="co"> *         - PUCONCI</span></span>
<span id="cb490-894"><a href="Swagger.html#cb490-894" tabindex="-1"></a><span class="co"> *         - RADENCI</span></span>
<span id="cb490-895"><a href="Swagger.html#cb490-895" tabindex="-1"></a><span class="co"> *         - RADEČE</span></span>
<span id="cb490-896"><a href="Swagger.html#cb490-896" tabindex="-1"></a><span class="co"> *         - RADLJE OB DRAVI</span></span>
<span id="cb490-897"><a href="Swagger.html#cb490-897" tabindex="-1"></a><span class="co"> *         - RADOVLJICA</span></span>
<span id="cb490-898"><a href="Swagger.html#cb490-898" tabindex="-1"></a><span class="co"> *         - RAVNE NA KOROŠKEM</span></span>
<span id="cb490-899"><a href="Swagger.html#cb490-899" tabindex="-1"></a><span class="co"> *         - RAZKRIŽJE</span></span>
<span id="cb490-900"><a href="Swagger.html#cb490-900" tabindex="-1"></a><span class="co"> *         - RAČE-FRAM</span></span>
<span id="cb490-901"><a href="Swagger.html#cb490-901" tabindex="-1"></a><span class="co"> *         - RENČE-VOGRSKO</span></span>
<span id="cb490-902"><a href="Swagger.html#cb490-902" tabindex="-1"></a><span class="co"> *         - REČICA OB SAVINJI</span></span>
<span id="cb490-903"><a href="Swagger.html#cb490-903" tabindex="-1"></a><span class="co"> *         - RIBNICA</span></span>
<span id="cb490-904"><a href="Swagger.html#cb490-904" tabindex="-1"></a><span class="co"> *         - RIBNICA NA POHORJU</span></span>
<span id="cb490-905"><a href="Swagger.html#cb490-905" tabindex="-1"></a><span class="co"> *         - ROGATEC</span></span>
<span id="cb490-906"><a href="Swagger.html#cb490-906" tabindex="-1"></a><span class="co"> *         - ROGAŠKA SLATINA</span></span>
<span id="cb490-907"><a href="Swagger.html#cb490-907" tabindex="-1"></a><span class="co"> *         - ROGAŠOVCI</span></span>
<span id="cb490-908"><a href="Swagger.html#cb490-908" tabindex="-1"></a><span class="co"> *         - RUŠE</span></span>
<span id="cb490-909"><a href="Swagger.html#cb490-909" tabindex="-1"></a><span class="co"> *         - SELNICA OB DRAVI</span></span>
<span id="cb490-910"><a href="Swagger.html#cb490-910" tabindex="-1"></a><span class="co"> *         - SEMIČ</span></span>
<span id="cb490-911"><a href="Swagger.html#cb490-911" tabindex="-1"></a><span class="co"> *         - SEVNICA</span></span>
<span id="cb490-912"><a href="Swagger.html#cb490-912" tabindex="-1"></a><span class="co"> *         - SEŽANA</span></span>
<span id="cb490-913"><a href="Swagger.html#cb490-913" tabindex="-1"></a><span class="co"> *         - SLOVENJ GRADEC</span></span>
<span id="cb490-914"><a href="Swagger.html#cb490-914" tabindex="-1"></a><span class="co"> *         - SLOVENSKA BISTRICA</span></span>
<span id="cb490-915"><a href="Swagger.html#cb490-915" tabindex="-1"></a><span class="co"> *         - SLOVENSKE KONJICE</span></span>
<span id="cb490-916"><a href="Swagger.html#cb490-916" tabindex="-1"></a><span class="co"> *         - SOLČAVA</span></span>
<span id="cb490-917"><a href="Swagger.html#cb490-917" tabindex="-1"></a><span class="co"> *         - SREDIŠČE OB DRAVI</span></span>
<span id="cb490-918"><a href="Swagger.html#cb490-918" tabindex="-1"></a><span class="co"> *         - STRAŽA</span></span>
<span id="cb490-919"><a href="Swagger.html#cb490-919" tabindex="-1"></a><span class="co"> *         - SV. TROJICA V SLOV. GORICAH</span></span>
<span id="cb490-920"><a href="Swagger.html#cb490-920" tabindex="-1"></a><span class="co"> *         - SVETA ANA</span></span>
<span id="cb490-921"><a href="Swagger.html#cb490-921" tabindex="-1"></a><span class="co"> *         - SVETI ANDRAŽ V SLOV. GORICAH</span></span>
<span id="cb490-922"><a href="Swagger.html#cb490-922" tabindex="-1"></a><span class="co"> *         - SVETI JURIJ OB ŠČAVNICI</span></span>
<span id="cb490-923"><a href="Swagger.html#cb490-923" tabindex="-1"></a><span class="co"> *         - SVETI JURIJ V SLOV. GORICAH</span></span>
<span id="cb490-924"><a href="Swagger.html#cb490-924" tabindex="-1"></a><span class="co"> *         - SVETI TOMAŽ</span></span>
<span id="cb490-925"><a href="Swagger.html#cb490-925" tabindex="-1"></a><span class="co"> *         - TIŠINA</span></span>
<span id="cb490-926"><a href="Swagger.html#cb490-926" tabindex="-1"></a><span class="co"> *         - TOLMIN</span></span>
<span id="cb490-927"><a href="Swagger.html#cb490-927" tabindex="-1"></a><span class="co"> *         - TRBOVLJE</span></span>
<span id="cb490-928"><a href="Swagger.html#cb490-928" tabindex="-1"></a><span class="co"> *         - TREBNJE</span></span>
<span id="cb490-929"><a href="Swagger.html#cb490-929" tabindex="-1"></a><span class="co"> *         - TRŽIČ</span></span>
<span id="cb490-930"><a href="Swagger.html#cb490-930" tabindex="-1"></a><span class="co"> *         - TURNIŠČE</span></span>
<span id="cb490-931"><a href="Swagger.html#cb490-931" tabindex="-1"></a><span class="co"> *         - VELENJE</span></span>
<span id="cb490-932"><a href="Swagger.html#cb490-932" tabindex="-1"></a><span class="co"> *         - VELIKE LAŠČE</span></span>
<span id="cb490-933"><a href="Swagger.html#cb490-933" tabindex="-1"></a><span class="co"> *         - VERŽEJ</span></span>
<span id="cb490-934"><a href="Swagger.html#cb490-934" tabindex="-1"></a><span class="co"> *         - VIDEM</span></span>
<span id="cb490-935"><a href="Swagger.html#cb490-935" tabindex="-1"></a><span class="co"> *         - VIPAVA</span></span>
<span id="cb490-936"><a href="Swagger.html#cb490-936" tabindex="-1"></a><span class="co"> *         - VITANJE</span></span>
<span id="cb490-937"><a href="Swagger.html#cb490-937" tabindex="-1"></a><span class="co"> *         - VODICE</span></span>
<span id="cb490-938"><a href="Swagger.html#cb490-938" tabindex="-1"></a><span class="co"> *         - VOJNIK</span></span>
<span id="cb490-939"><a href="Swagger.html#cb490-939" tabindex="-1"></a><span class="co"> *         - VRANSKO</span></span>
<span id="cb490-940"><a href="Swagger.html#cb490-940" tabindex="-1"></a><span class="co"> *         - VRHNIKA</span></span>
<span id="cb490-941"><a href="Swagger.html#cb490-941" tabindex="-1"></a><span class="co"> *         - VUZENICA</span></span>
<span id="cb490-942"><a href="Swagger.html#cb490-942" tabindex="-1"></a><span class="co"> *         - ZAGORJE OB SAVI</span></span>
<span id="cb490-943"><a href="Swagger.html#cb490-943" tabindex="-1"></a><span class="co"> *         - ZREČE</span></span>
<span id="cb490-944"><a href="Swagger.html#cb490-944" tabindex="-1"></a><span class="co"> *         - ČRENŠOVCI</span></span>
<span id="cb490-945"><a href="Swagger.html#cb490-945" tabindex="-1"></a><span class="co"> *         - ČRNA NA KOROŠKEM</span></span>
<span id="cb490-946"><a href="Swagger.html#cb490-946" tabindex="-1"></a><span class="co"> *         - ČRNOMELJ</span></span>
<span id="cb490-947"><a href="Swagger.html#cb490-947" tabindex="-1"></a><span class="co"> *         - ŠALOVCI</span></span>
<span id="cb490-948"><a href="Swagger.html#cb490-948" tabindex="-1"></a><span class="co"> *         - ŠEMPETER-VRTOJBA</span></span>
<span id="cb490-949"><a href="Swagger.html#cb490-949" tabindex="-1"></a><span class="co"> *         - ŠENTILJ</span></span>
<span id="cb490-950"><a href="Swagger.html#cb490-950" tabindex="-1"></a><span class="co"> *         - ŠENTJERNEJ</span></span>
<span id="cb490-951"><a href="Swagger.html#cb490-951" tabindex="-1"></a><span class="co"> *         - ŠENTJUR</span></span>
<span id="cb490-952"><a href="Swagger.html#cb490-952" tabindex="-1"></a><span class="co"> *         - ŠENTRUPERT</span></span>
<span id="cb490-953"><a href="Swagger.html#cb490-953" tabindex="-1"></a><span class="co"> *         - ŠENČUR</span></span>
<span id="cb490-954"><a href="Swagger.html#cb490-954" tabindex="-1"></a><span class="co"> *         - ŠKOCJAN</span></span>
<span id="cb490-955"><a href="Swagger.html#cb490-955" tabindex="-1"></a><span class="co"> *         - ŠKOFJA LOKA</span></span>
<span id="cb490-956"><a href="Swagger.html#cb490-956" tabindex="-1"></a><span class="co"> *         - ŠMARJE PRI JELŠAH</span></span>
<span id="cb490-957"><a href="Swagger.html#cb490-957" tabindex="-1"></a><span class="co"> *         - ŠMARJEŠKE TOPLICE</span></span>
<span id="cb490-958"><a href="Swagger.html#cb490-958" tabindex="-1"></a><span class="co"> *         - ŠMARTNO OB PAKI</span></span>
<span id="cb490-959"><a href="Swagger.html#cb490-959" tabindex="-1"></a><span class="co"> *         - ŠMARTNO PRI LITIJI</span></span>
<span id="cb490-960"><a href="Swagger.html#cb490-960" tabindex="-1"></a><span class="co"> *         - ŠOŠTANJ</span></span>
<span id="cb490-961"><a href="Swagger.html#cb490-961" tabindex="-1"></a><span class="co"> *         - ŠTORE</span></span>
<span id="cb490-962"><a href="Swagger.html#cb490-962" tabindex="-1"></a><span class="co"> *         - ŽALEC</span></span>
<span id="cb490-963"><a href="Swagger.html#cb490-963" tabindex="-1"></a><span class="co"> *         - ŽELEZNIKI</span></span>
<span id="cb490-964"><a href="Swagger.html#cb490-964" tabindex="-1"></a><span class="co"> *         - ŽETALE</span></span>
<span id="cb490-965"><a href="Swagger.html#cb490-965" tabindex="-1"></a><span class="co"> *         - ŽIRI</span></span>
<span id="cb490-966"><a href="Swagger.html#cb490-966" tabindex="-1"></a><span class="co"> *         - ŽIROVNICA</span></span>
<span id="cb490-967"><a href="Swagger.html#cb490-967" tabindex="-1"></a><span class="co"> *         - ŽUŽEMBERK</span></span>
<span id="cb490-968"><a href="Swagger.html#cb490-968" tabindex="-1"></a><span class="co"> *     - name: fields</span></span>
<span id="cb490-969"><a href="Swagger.html#cb490-969" tabindex="-1"></a><span class="co"> *       in: query</span></span>
<span id="cb490-970"><a href="Swagger.html#cb490-970" tabindex="-1"></a><span class="co"> *       description: </span><span class="kw">&lt;b&gt;</span><span class="co">fields</span><span class="kw">&lt;/b&gt;</span><span class="co"> of the location</span></span>
<span id="cb490-971"><a href="Swagger.html#cb490-971" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb490-972"><a href="Swagger.html#cb490-972" tabindex="-1"></a><span class="co"> *        type: string</span></span>
<span id="cb490-973"><a href="Swagger.html#cb490-973" tabindex="-1"></a><span class="co"> *        enum:</span></span>
<span id="cb490-974"><a href="Swagger.html#cb490-974" tabindex="-1"></a><span class="co"> *         - arheologija</span></span>
<span id="cb490-975"><a href="Swagger.html#cb490-975" tabindex="-1"></a><span class="co"> *         - dendrologija</span></span>
<span id="cb490-976"><a href="Swagger.html#cb490-976" tabindex="-1"></a><span class="co"> *         - etnologija</span></span>
<span id="cb490-977"><a href="Swagger.html#cb490-977" tabindex="-1"></a><span class="co"> *         - geomorfologija</span></span>
<span id="cb490-978"><a href="Swagger.html#cb490-978" tabindex="-1"></a><span class="co"> *         - gozdarstvo</span></span>
<span id="cb490-979"><a href="Swagger.html#cb490-979" tabindex="-1"></a><span class="co"> *         - krajinska arhitektura</span></span>
<span id="cb490-980"><a href="Swagger.html#cb490-980" tabindex="-1"></a><span class="co"> *         - tehniška zgodovina</span></span>
<span id="cb490-981"><a href="Swagger.html#cb490-981" tabindex="-1"></a><span class="co"> *         - tehniška zgodovina,</span></span>
<span id="cb490-982"><a href="Swagger.html#cb490-982" tabindex="-1"></a><span class="co"> *         - umetnostna zgodovina</span></span>
<span id="cb490-983"><a href="Swagger.html#cb490-983" tabindex="-1"></a><span class="co"> *         - urbanistična zgodovina</span></span>
<span id="cb490-984"><a href="Swagger.html#cb490-984" tabindex="-1"></a><span class="co"> *         - zgodovina</span></span>
<span id="cb490-985"><a href="Swagger.html#cb490-985" tabindex="-1"></a><span class="co"> *     - name: nResults</span></span>
<span id="cb490-986"><a href="Swagger.html#cb490-986" tabindex="-1"></a><span class="co"> *       in: query</span></span>
<span id="cb490-987"><a href="Swagger.html#cb490-987" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb490-988"><a href="Swagger.html#cb490-988" tabindex="-1"></a><span class="co"> *        type: integer</span></span>
<span id="cb490-989"><a href="Swagger.html#cb490-989" tabindex="-1"></a><span class="co"> *        minimum: 1</span></span>
<span id="cb490-990"><a href="Swagger.html#cb490-990" tabindex="-1"></a><span class="co"> *        default: 10</span></span>
<span id="cb490-991"><a href="Swagger.html#cb490-991" tabindex="-1"></a><span class="co"> *       description: maximum </span><span class="kw">&lt;b&gt;</span><span class="co">number of results</span><span class="kw">&lt;/b&gt;</span></span>
<span id="cb490-992"><a href="Swagger.html#cb490-992" tabindex="-1"></a><span class="co"> *    responses:</span></span>
<span id="cb490-993"><a href="Swagger.html#cb490-993" tabindex="-1"></a><span class="co"> *     &#39;200&#39;:</span></span>
<span id="cb490-994"><a href="Swagger.html#cb490-994" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">OK</span><span class="kw">&lt;/b&gt;</span><span class="co">, with list of locations.</span></span>
<span id="cb490-995"><a href="Swagger.html#cb490-995" tabindex="-1"></a><span class="co"> *      content:</span></span>
<span id="cb490-996"><a href="Swagger.html#cb490-996" tabindex="-1"></a><span class="co"> *       application/json:</span></span>
<span id="cb490-997"><a href="Swagger.html#cb490-997" tabindex="-1"></a><span class="co"> *        schema:</span></span>
<span id="cb490-998"><a href="Swagger.html#cb490-998" tabindex="-1"></a><span class="co"> *         $ref: &#39;#/components/schemas/Location&#39;</span></span>
<span id="cb490-999"><a href="Swagger.html#cb490-999" tabindex="-1"></a><span class="co"> *        example:</span></span>
<span id="cb490-1000"><a href="Swagger.html#cb490-1000" tabindex="-1"></a><span class="co"> *         - _id: 635a62f5dc5d7968e68467e3</span></span>
<span id="cb490-1001"><a href="Swagger.html#cb490-1001" tabindex="-1"></a><span class="co"> *           name: Ljubljana - Cankarjeva spominska soba na Rožniku</span></span>
<span id="cb490-1002"><a href="Swagger.html#cb490-1002" tabindex="-1"></a><span class="co"> *           category: spominski objekti in kraji</span></span>
<span id="cb490-1003"><a href="Swagger.html#cb490-1003" tabindex="-1"></a><span class="co"> *           type: memorialna dediščina</span></span>
<span id="cb490-1004"><a href="Swagger.html#cb490-1004" tabindex="-1"></a><span class="co"> *           keywords: spominska soba</span></span>
<span id="cb490-1005"><a href="Swagger.html#cb490-1005" tabindex="-1"></a><span class="co"> *           description: Spominska soba, posvečena Ivanu Cankarju, je bila urejena leta 1948 in prenovljena v letih 1965 in 1998. Pisatelj je na Rožniku živel v letih 1910 - 1917, muzejsko postavitev je pripravil Mestni muzej Ljubljana.</span></span>
<span id="cb490-1006"><a href="Swagger.html#cb490-1006" tabindex="-1"></a><span class="co"> *           location: Spominska soba je urejena v stavbi, ki stoji nasproti gostilne Rožnik, na Cankarjevem vrhu (Rožnik).</span></span>
<span id="cb490-1007"><a href="Swagger.html#cb490-1007" tabindex="-1"></a><span class="co"> *           institution: ZVKD Ljubljana</span></span>
<span id="cb490-1008"><a href="Swagger.html#cb490-1008" tabindex="-1"></a><span class="co"> *           heritage: neznano</span></span>
<span id="cb490-1009"><a href="Swagger.html#cb490-1009" tabindex="-1"></a><span class="co"> *           municipality: LJUBLJANA</span></span>
<span id="cb490-1010"><a href="Swagger.html#cb490-1010" tabindex="-1"></a><span class="co"> *           coordinates: [14.4765778196, 46.0557820208]</span></span>
<span id="cb490-1011"><a href="Swagger.html#cb490-1011" tabindex="-1"></a><span class="co"> *           synonyms: [Cankarjev vrh]</span></span>
<span id="cb490-1012"><a href="Swagger.html#cb490-1012" tabindex="-1"></a><span class="co"> *           datation: 20. stol., 1948, 1965, 1998</span></span>
<span id="cb490-1013"><a href="Swagger.html#cb490-1013" tabindex="-1"></a><span class="co"> *           authors: Mestni muzej Ljubljana (arhitekt; 1948)</span></span>
<span id="cb490-1014"><a href="Swagger.html#cb490-1014" tabindex="-1"></a><span class="co"> *           fields: [zgodovina]</span></span>
<span id="cb490-1015"><a href="Swagger.html#cb490-1015" tabindex="-1"></a><span class="co"> *     &#39;404&#39;:</span></span>
<span id="cb490-1016"><a href="Swagger.html#cb490-1016" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">Not Found</span><span class="kw">&lt;/b&gt;</span><span class="co">, with error message.</span></span>
<span id="cb490-1017"><a href="Swagger.html#cb490-1017" tabindex="-1"></a><span class="co"> *      content:</span></span>
<span id="cb490-1018"><a href="Swagger.html#cb490-1018" tabindex="-1"></a><span class="co"> *       application/json:</span></span>
<span id="cb490-1019"><a href="Swagger.html#cb490-1019" tabindex="-1"></a><span class="co"> *        schema:</span></span>
<span id="cb490-1020"><a href="Swagger.html#cb490-1020" tabindex="-1"></a><span class="co"> *         $ref: &#39;#/components/schemas/ErrorMessage&#39;</span></span>
<span id="cb490-1021"><a href="Swagger.html#cb490-1021" tabindex="-1"></a><span class="co"> *        example:</span></span>
<span id="cb490-1022"><a href="Swagger.html#cb490-1022" tabindex="-1"></a><span class="co"> *         message: &quot;No locations found.&quot;</span></span>
<span id="cb490-1023"><a href="Swagger.html#cb490-1023" tabindex="-1"></a><span class="co"> *     &#39;500&#39;:</span></span>
<span id="cb490-1024"><a href="Swagger.html#cb490-1024" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">Internal Server Error</span><span class="kw">&lt;/b&gt;</span><span class="co">, with error message.</span></span>
<span id="cb490-1025"><a href="Swagger.html#cb490-1025" tabindex="-1"></a><span class="co"> *      content:</span></span>
<span id="cb490-1026"><a href="Swagger.html#cb490-1026" tabindex="-1"></a><span class="co"> *       application/json:</span></span>
<span id="cb490-1027"><a href="Swagger.html#cb490-1027" tabindex="-1"></a><span class="co"> *        schema:</span></span>
<span id="cb490-1028"><a href="Swagger.html#cb490-1028" tabindex="-1"></a><span class="co"> *         $ref: &#39;#/components/schemas/ErrorMessage&#39;</span></span>
<span id="cb490-1029"><a href="Swagger.html#cb490-1029" tabindex="-1"></a><span class="co"> *        example:</span></span>
<span id="cb490-1030"><a href="Swagger.html#cb490-1030" tabindex="-1"></a><span class="co"> *         message: &quot;geo near accepts just one argument when querying for a GeoJSON point. Extra field found: $maxDistance: 5000.0&quot;</span></span>
<span id="cb490-1031"><a href="Swagger.html#cb490-1031" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb490-1032"><a href="Swagger.html#cb490-1032" tabindex="-1"></a><span class="kw">const</span> locationsListByMultiFilter <span class="op">=</span> <span class="kw">async</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb490-1033"><a href="Swagger.html#cb490-1033" tabindex="-1"></a>  <span class="kw">let</span> filter <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb490-1034"><a href="Swagger.html#cb490-1034" tabindex="-1"></a>  <span class="co">// Exclude fields</span></span>
<span id="cb490-1035"><a href="Swagger.html#cb490-1035" tabindex="-1"></a>  filter<span class="op">.</span><span class="fu">push</span>({ <span class="dt">$project</span><span class="op">:</span> { <span class="dt">comments</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">id</span><span class="op">:</span> <span class="kw">false</span> } })<span class="op">;</span></span>
<span id="cb490-1036"><a href="Swagger.html#cb490-1036" tabindex="-1"></a>  <span class="co">// Filter by codelist if provided</span></span>
<span id="cb490-1037"><a href="Swagger.html#cb490-1037" tabindex="-1"></a>  allowedCodelists<span class="op">.</span><span class="fu">forEach</span>((codelist) <span class="kw">=&gt;</span> {</span>
<span id="cb490-1038"><a href="Swagger.html#cb490-1038" tabindex="-1"></a>    <span class="kw">let</span> value <span class="op">=</span> req<span class="op">.</span><span class="at">query</span>[codelist]<span class="op">;</span></span>
<span id="cb490-1039"><a href="Swagger.html#cb490-1039" tabindex="-1"></a>    <span class="cf">if</span> (value) filter<span class="op">.</span><span class="fu">push</span>({ <span class="dt">$match</span><span class="op">:</span> { [codelist]<span class="op">:</span> value } })<span class="op">;</span></span>
<span id="cb490-1040"><a href="Swagger.html#cb490-1040" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb490-1041"><a href="Swagger.html#cb490-1041" tabindex="-1"></a>  <span class="co">// Maximum number of results</span></span>
<span id="cb490-1042"><a href="Swagger.html#cb490-1042" tabindex="-1"></a>  <span class="kw">let</span> nResults <span class="op">=</span> <span class="pp">parseInt</span>(req<span class="op">.</span><span class="at">query</span><span class="op">.</span><span class="at">nResults</span>)<span class="op">;</span></span>
<span id="cb490-1043"><a href="Swagger.html#cb490-1043" tabindex="-1"></a>  nResults <span class="op">=</span> <span class="pp">isNaN</span>(nResults) <span class="op">?</span> <span class="dv">10</span> <span class="op">:</span> nResults<span class="op">;</span></span>
<span id="cb490-1044"><a href="Swagger.html#cb490-1044" tabindex="-1"></a>  filter<span class="op">.</span><span class="fu">push</span>({ <span class="dt">$limit</span><span class="op">:</span> nResults })<span class="op">;</span></span>
<span id="cb490-1045"><a href="Swagger.html#cb490-1045" tabindex="-1"></a>  <span class="co">// Perform database search and return results</span></span>
<span id="cb490-1046"><a href="Swagger.html#cb490-1046" tabindex="-1"></a>  <span class="cf">try</span> {</span>
<span id="cb490-1047"><a href="Swagger.html#cb490-1047" tabindex="-1"></a>    <span class="kw">let</span> locations <span class="op">=</span> <span class="cf">await</span> <span class="bu">Location</span><span class="op">.</span><span class="fu">aggregate</span>(filter)<span class="op">.</span><span class="fu">exec</span>()<span class="op">;</span></span>
<span id="cb490-1048"><a href="Swagger.html#cb490-1048" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>locations <span class="op">||</span> locations<span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">0</span>)</span>
<span id="cb490-1049"><a href="Swagger.html#cb490-1049" tabindex="-1"></a>      res<span class="op">.</span><span class="fu">status</span>(<span class="dv">404</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;No locations found.&quot;</span> })<span class="op">;</span></span>
<span id="cb490-1050"><a href="Swagger.html#cb490-1050" tabindex="-1"></a>    <span class="cf">else</span> res<span class="op">.</span><span class="fu">status</span>(<span class="dv">200</span>)<span class="op">.</span><span class="fu">json</span>(locations)<span class="op">;</span></span>
<span id="cb490-1051"><a href="Swagger.html#cb490-1051" tabindex="-1"></a>  } <span class="cf">catch</span> (err) {</span>
<span id="cb490-1052"><a href="Swagger.html#cb490-1052" tabindex="-1"></a>    res<span class="op">.</span><span class="fu">status</span>(<span class="dv">500</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">message</span><span class="op">:</span> err<span class="op">.</span><span class="at">message</span> })<span class="op">;</span></span>
<span id="cb490-1053"><a href="Swagger.html#cb490-1053" tabindex="-1"></a>  }</span>
<span id="cb490-1054"><a href="Swagger.html#cb490-1054" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb490-1055"><a href="Swagger.html#cb490-1055" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb490-1056"><a href="Swagger.html#cb490-1056" tabindex="-1"></a><span class="co"> * </span><span class="an">@openapi</span></span>
<span id="cb490-1057"><a href="Swagger.html#cb490-1057" tabindex="-1"></a><span class="co"> * /locations/codelist/{codelist}:</span></span>
<span id="cb490-1058"><a href="Swagger.html#cb490-1058" tabindex="-1"></a><span class="co"> *  get:</span></span>
<span id="cb490-1059"><a href="Swagger.html#cb490-1059" tabindex="-1"></a><span class="co"> *   summary: Retrieve codelist values.</span></span>
<span id="cb490-1060"><a href="Swagger.html#cb490-1060" tabindex="-1"></a><span class="co"> *   description: Allowed **codelist values** for given codelist name.</span></span>
<span id="cb490-1061"><a href="Swagger.html#cb490-1061" tabindex="-1"></a><span class="co"> *   tags: [Locations]</span></span>
<span id="cb490-1062"><a href="Swagger.html#cb490-1062" tabindex="-1"></a><span class="co"> *   parameters:</span></span>
<span id="cb490-1063"><a href="Swagger.html#cb490-1063" tabindex="-1"></a><span class="co"> *    - name: codelist</span></span>
<span id="cb490-1064"><a href="Swagger.html#cb490-1064" tabindex="-1"></a><span class="co"> *      in: path</span></span>
<span id="cb490-1065"><a href="Swagger.html#cb490-1065" tabindex="-1"></a><span class="co"> *      required: true</span></span>
<span id="cb490-1066"><a href="Swagger.html#cb490-1066" tabindex="-1"></a><span class="co"> *      description: codelist </span><span class="kw">&lt;b&gt;</span><span class="co">name</span><span class="kw">&lt;/b&gt;</span></span>
<span id="cb490-1067"><a href="Swagger.html#cb490-1067" tabindex="-1"></a><span class="co"> *      schema:</span></span>
<span id="cb490-1068"><a href="Swagger.html#cb490-1068" tabindex="-1"></a><span class="co"> *       $ref: &#39;#/components/schemas/Codelist&#39;</span></span>
<span id="cb490-1069"><a href="Swagger.html#cb490-1069" tabindex="-1"></a><span class="co"> *      example: category</span></span>
<span id="cb490-1070"><a href="Swagger.html#cb490-1070" tabindex="-1"></a><span class="co"> *   responses:</span></span>
<span id="cb490-1071"><a href="Swagger.html#cb490-1071" tabindex="-1"></a><span class="co"> *    &#39;200&#39;:</span></span>
<span id="cb490-1072"><a href="Swagger.html#cb490-1072" tabindex="-1"></a><span class="co"> *     description: </span><span class="kw">&lt;b&gt;</span><span class="co">OK</span><span class="kw">&lt;/b&gt;</span><span class="co">, with codelist values.</span></span>
<span id="cb490-1073"><a href="Swagger.html#cb490-1073" tabindex="-1"></a><span class="co"> *     content:</span></span>
<span id="cb490-1074"><a href="Swagger.html#cb490-1074" tabindex="-1"></a><span class="co"> *      application/json:</span></span>
<span id="cb490-1075"><a href="Swagger.html#cb490-1075" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb490-1076"><a href="Swagger.html#cb490-1076" tabindex="-1"></a><span class="co"> *        type: array</span></span>
<span id="cb490-1077"><a href="Swagger.html#cb490-1077" tabindex="-1"></a><span class="co"> *        items:</span></span>
<span id="cb490-1078"><a href="Swagger.html#cb490-1078" tabindex="-1"></a><span class="co"> *         type: string</span></span>
<span id="cb490-1079"><a href="Swagger.html#cb490-1079" tabindex="-1"></a><span class="co"> *       example: [&quot;arheološka najdišča&quot;,&quot;drugi objekti in naprave&quot;,&quot;kulturna krajina&quot;,&quot;naselja in njihovi deli&quot;,&quot;ostalo&quot;,&quot;parki in vrtovi&quot;,&quot;spominski objekti in kraji&quot;,&quot;stavbe&quot;,&quot;stavbe s parki ali z vrtovi&quot;]</span></span>
<span id="cb490-1080"><a href="Swagger.html#cb490-1080" tabindex="-1"></a><span class="co"> *    &#39;400&#39;:</span></span>
<span id="cb490-1081"><a href="Swagger.html#cb490-1081" tabindex="-1"></a><span class="co"> *     description: </span><span class="kw">&lt;b&gt;</span><span class="co">Bad Request</span><span class="kw">&lt;/b&gt;</span><span class="co">, with error message.</span></span>
<span id="cb490-1082"><a href="Swagger.html#cb490-1082" tabindex="-1"></a><span class="co"> *     content:</span></span>
<span id="cb490-1083"><a href="Swagger.html#cb490-1083" tabindex="-1"></a><span class="co"> *      application/json:</span></span>
<span id="cb490-1084"><a href="Swagger.html#cb490-1084" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb490-1085"><a href="Swagger.html#cb490-1085" tabindex="-1"></a><span class="co"> *        $ref: &#39;#/components/schemas/ErrorMessage&#39;</span></span>
<span id="cb490-1086"><a href="Swagger.html#cb490-1086" tabindex="-1"></a><span class="co"> *       examples:</span></span>
<span id="cb490-1087"><a href="Swagger.html#cb490-1087" tabindex="-1"></a><span class="co"> *        codelist not found:</span></span>
<span id="cb490-1088"><a href="Swagger.html#cb490-1088" tabindex="-1"></a><span class="co"> *         value:</span></span>
<span id="cb490-1089"><a href="Swagger.html#cb490-1089" tabindex="-1"></a><span class="co"> *          message: &quot;No codelist found for &#39;custom category&#39;.&quot;</span></span>
<span id="cb490-1090"><a href="Swagger.html#cb490-1090" tabindex="-1"></a><span class="co"> *        codelist not allowed:</span></span>
<span id="cb490-1091"><a href="Swagger.html#cb490-1091" tabindex="-1"></a><span class="co"> *         value:</span></span>
<span id="cb490-1092"><a href="Swagger.html#cb490-1092" tabindex="-1"></a><span class="co"> *          message: &quot;Parameter &#39;codelist must be one of: category, type, keywords, institution, municipality, fields.&#39;&quot;</span></span>
<span id="cb490-1093"><a href="Swagger.html#cb490-1093" tabindex="-1"></a><span class="co"> *    &#39;500&#39;:</span></span>
<span id="cb490-1094"><a href="Swagger.html#cb490-1094" tabindex="-1"></a><span class="co"> *     description: </span><span class="kw">&lt;b&gt;</span><span class="co">Internal Server Error</span><span class="kw">&lt;/b&gt;</span><span class="co">, with error message.</span></span>
<span id="cb490-1095"><a href="Swagger.html#cb490-1095" tabindex="-1"></a><span class="co"> *     content:</span></span>
<span id="cb490-1096"><a href="Swagger.html#cb490-1096" tabindex="-1"></a><span class="co"> *      application/json:</span></span>
<span id="cb490-1097"><a href="Swagger.html#cb490-1097" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb490-1098"><a href="Swagger.html#cb490-1098" tabindex="-1"></a><span class="co"> *        $ref: &#39;#/components/schemas/ErrorMessage&#39;</span></span>
<span id="cb490-1099"><a href="Swagger.html#cb490-1099" tabindex="-1"></a><span class="co"> *       example:</span></span>
<span id="cb490-1100"><a href="Swagger.html#cb490-1100" tabindex="-1"></a><span class="co"> *        message: Database not available.</span></span>
<span id="cb490-1101"><a href="Swagger.html#cb490-1101" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb490-1102"><a href="Swagger.html#cb490-1102" tabindex="-1"></a><span class="kw">const</span> locationsListCodelist <span class="op">=</span> <span class="kw">async</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb490-1103"><a href="Swagger.html#cb490-1103" tabindex="-1"></a>  <span class="kw">let</span> codelist <span class="op">=</span> req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">codelist</span><span class="op">;</span></span>
<span id="cb490-1104"><a href="Swagger.html#cb490-1104" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span>allowedCodelists<span class="op">.</span><span class="fu">includes</span>(codelist))</span>
<span id="cb490-1105"><a href="Swagger.html#cb490-1105" tabindex="-1"></a>    res<span class="op">.</span><span class="fu">status</span>(<span class="dv">400</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb490-1106"><a href="Swagger.html#cb490-1106" tabindex="-1"></a>      <span class="dt">message</span><span class="op">:</span> <span class="vs">`Parameter &#39;codelist&#39; must be one of: </span><span class="sc">${</span>allowedCodelists<span class="op">.</span><span class="fu">join</span>(</span>
<span id="cb490-1107"><a href="Swagger.html#cb490-1107" tabindex="-1"></a>        <span class="st">&quot;, &quot;</span></span>
<span id="cb490-1108"><a href="Swagger.html#cb490-1108" tabindex="-1"></a>      )<span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb490-1109"><a href="Swagger.html#cb490-1109" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb490-1110"><a href="Swagger.html#cb490-1110" tabindex="-1"></a>  <span class="cf">else</span> {</span>
<span id="cb490-1111"><a href="Swagger.html#cb490-1111" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb490-1112"><a href="Swagger.html#cb490-1112" tabindex="-1"></a>      <span class="kw">let</span> codeListValues <span class="op">=</span> <span class="cf">await</span> <span class="bu">Location</span><span class="op">.</span><span class="fu">distinct</span>(codelist)<span class="op">.</span><span class="fu">exec</span>()<span class="op">;</span></span>
<span id="cb490-1113"><a href="Swagger.html#cb490-1113" tabindex="-1"></a>      <span class="cf">if</span> (<span class="op">!</span>codeListValues <span class="op">||</span> codeListValues<span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">0</span>)</span>
<span id="cb490-1114"><a href="Swagger.html#cb490-1114" tabindex="-1"></a>        res</span>
<span id="cb490-1115"><a href="Swagger.html#cb490-1115" tabindex="-1"></a>          <span class="op">.</span><span class="fu">status</span>(<span class="dv">404</span>)</span>
<span id="cb490-1116"><a href="Swagger.html#cb490-1116" tabindex="-1"></a>          <span class="op">.</span><span class="fu">json</span>({ <span class="dt">message</span><span class="op">:</span> <span class="vs">`No codelist found for &#39;</span><span class="sc">${</span>codelist<span class="sc">}</span><span class="vs">.&#39;`</span> })<span class="op">;</span></span>
<span id="cb490-1117"><a href="Swagger.html#cb490-1117" tabindex="-1"></a>      <span class="cf">else</span> res<span class="op">.</span><span class="fu">status</span>(<span class="dv">200</span>)<span class="op">.</span><span class="fu">json</span>(codeListValues)<span class="op">;</span></span>
<span id="cb490-1118"><a href="Swagger.html#cb490-1118" tabindex="-1"></a>    } <span class="cf">catch</span> (err) {</span>
<span id="cb490-1119"><a href="Swagger.html#cb490-1119" tabindex="-1"></a>      res<span class="op">.</span><span class="fu">status</span>(<span class="dv">500</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">message</span><span class="op">:</span> err<span class="op">.</span><span class="at">message</span> })<span class="op">;</span></span>
<span id="cb490-1120"><a href="Swagger.html#cb490-1120" tabindex="-1"></a>    }</span>
<span id="cb490-1121"><a href="Swagger.html#cb490-1121" tabindex="-1"></a>  }</span>
<span id="cb490-1122"><a href="Swagger.html#cb490-1122" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb490-1123"><a href="Swagger.html#cb490-1123" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb490-1124"><a href="Swagger.html#cb490-1124" tabindex="-1"></a><span class="co"> * </span><span class="an">@openapi</span></span>
<span id="cb490-1125"><a href="Swagger.html#cb490-1125" tabindex="-1"></a><span class="co"> * /locations/{locationId}:</span></span>
<span id="cb490-1126"><a href="Swagger.html#cb490-1126" tabindex="-1"></a><span class="co"> *   get:</span></span>
<span id="cb490-1127"><a href="Swagger.html#cb490-1127" tabindex="-1"></a><span class="co"> *    summary: Retrieve details of a given location.</span></span>
<span id="cb490-1128"><a href="Swagger.html#cb490-1128" tabindex="-1"></a><span class="co"> *    description: Retrieve **cultural heritage details** for a given location.</span></span>
<span id="cb490-1129"><a href="Swagger.html#cb490-1129" tabindex="-1"></a><span class="co"> *    tags: [Locations]</span></span>
<span id="cb490-1130"><a href="Swagger.html#cb490-1130" tabindex="-1"></a><span class="co"> *    parameters:</span></span>
<span id="cb490-1131"><a href="Swagger.html#cb490-1131" tabindex="-1"></a><span class="co"> *    - name: locationId</span></span>
<span id="cb490-1132"><a href="Swagger.html#cb490-1132" tabindex="-1"></a><span class="co"> *      in: path</span></span>
<span id="cb490-1133"><a href="Swagger.html#cb490-1133" tabindex="-1"></a><span class="co"> *      required: true</span></span>
<span id="cb490-1134"><a href="Swagger.html#cb490-1134" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">unique identifier</span><span class="kw">&lt;/b&gt;</span><span class="co"> of location</span></span>
<span id="cb490-1135"><a href="Swagger.html#cb490-1135" tabindex="-1"></a><span class="co"> *      schema:</span></span>
<span id="cb490-1136"><a href="Swagger.html#cb490-1136" tabindex="-1"></a><span class="co"> *       type: string</span></span>
<span id="cb490-1137"><a href="Swagger.html#cb490-1137" tabindex="-1"></a><span class="co"> *       pattern: &#39;^[a-fA-F</span><span class="an">\d]{24}$&#39;</span></span>
<span id="cb490-1138"><a href="Swagger.html#cb490-1138" tabindex="-1"></a><span class="co"> *      example: 635a62f5dc5d7968e68464c1</span></span>
<span id="cb490-1139"><a href="Swagger.html#cb490-1139" tabindex="-1"></a><span class="co"> *    responses:</span></span>
<span id="cb490-1140"><a href="Swagger.html#cb490-1140" tabindex="-1"></a><span class="co"> *     &#39;200&#39;:</span></span>
<span id="cb490-1141"><a href="Swagger.html#cb490-1141" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">OK</span><span class="kw">&lt;/b&gt;</span><span class="co">, with location details.</span></span>
<span id="cb490-1142"><a href="Swagger.html#cb490-1142" tabindex="-1"></a><span class="co"> *      content:</span></span>
<span id="cb490-1143"><a href="Swagger.html#cb490-1143" tabindex="-1"></a><span class="co"> *       application/json:</span></span>
<span id="cb490-1144"><a href="Swagger.html#cb490-1144" tabindex="-1"></a><span class="co"> *        schema:</span></span>
<span id="cb490-1145"><a href="Swagger.html#cb490-1145" tabindex="-1"></a><span class="co"> *         $ref: &#39;#/components/schemas/Location&#39;</span></span>
<span id="cb490-1146"><a href="Swagger.html#cb490-1146" tabindex="-1"></a><span class="co"> *        example:</span></span>
<span id="cb490-1147"><a href="Swagger.html#cb490-1147" tabindex="-1"></a><span class="co"> *         _id: 635a62f5dc5d7968e68464c1</span></span>
<span id="cb490-1148"><a href="Swagger.html#cb490-1148" tabindex="-1"></a><span class="co"> *         name: Šentrupert na Dolenjskem - Muzej na prostem</span></span>
<span id="cb490-1149"><a href="Swagger.html#cb490-1149" tabindex="-1"></a><span class="co"> *         category: stavbe</span></span>
<span id="cb490-1150"><a href="Swagger.html#cb490-1150" tabindex="-1"></a><span class="co"> *         type: profana stavbna dediščina</span></span>
<span id="cb490-1151"><a href="Swagger.html#cb490-1151" tabindex="-1"></a><span class="co"> *         keywords: [muzej na prostem,kozolec na psa,kozolec s plaščem,enojni kozolec,nizki kozolec,toplar,vzporedni kozolec]</span></span>
<span id="cb490-1152"><a href="Swagger.html#cb490-1152" tabindex="-1"></a><span class="co"> *         description: Muzej na prostem sestavljajo skupina 17 kozolcev različnih tipov in dve enostavni sušilni napravi (belokranjska ostrv in ribniški kozouček). Postavitev iz 2012 prikazuje genezo kozolca na Slovenskem in raznolikost kozolcev v Mirnski dolini.</span></span>
<span id="cb490-1153"><a href="Swagger.html#cb490-1153" tabindex="-1"></a><span class="co"> *         location: Muzej na prostem je urejen na južnem obrobju Šentruperta na Dolenjskem.</span></span>
<span id="cb490-1154"><a href="Swagger.html#cb490-1154" tabindex="-1"></a><span class="co"> *         institution: ZVKD Novo mesto</span></span>
<span id="cb490-1155"><a href="Swagger.html#cb490-1155" tabindex="-1"></a><span class="co"> *         heritage: spomenik lokalnega pomena</span></span>
<span id="cb490-1156"><a href="Swagger.html#cb490-1156" tabindex="-1"></a><span class="co"> *         municipality: ŠENTRUPERT</span></span>
<span id="cb490-1157"><a href="Swagger.html#cb490-1157" tabindex="-1"></a><span class="co"> *         coordinates: [15.0914351743,45.9748324693]</span></span>
<span id="cb490-1158"><a href="Swagger.html#cb490-1158" tabindex="-1"></a><span class="co"> *         datation: zadnja četrtina 18. stol., 19. stol., prva polovica 20. stol., prva četrtina 21. stol., 2012</span></span>
<span id="cb490-1159"><a href="Swagger.html#cb490-1159" tabindex="-1"></a><span class="co"> *         fields: [etnologija,krajinska arhitektura,tehniška zgodovina]</span></span>
<span id="cb490-1160"><a href="Swagger.html#cb490-1160" tabindex="-1"></a><span class="co"> *         comments: []</span></span>
<span id="cb490-1161"><a href="Swagger.html#cb490-1161" tabindex="-1"></a><span class="co"> *     &#39;404&#39;:</span></span>
<span id="cb490-1162"><a href="Swagger.html#cb490-1162" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">Not Found</span><span class="kw">&lt;/b&gt;</span><span class="co">, with error message.</span></span>
<span id="cb490-1163"><a href="Swagger.html#cb490-1163" tabindex="-1"></a><span class="co"> *      content:</span></span>
<span id="cb490-1164"><a href="Swagger.html#cb490-1164" tabindex="-1"></a><span class="co"> *       application/json:</span></span>
<span id="cb490-1165"><a href="Swagger.html#cb490-1165" tabindex="-1"></a><span class="co"> *        schema:</span></span>
<span id="cb490-1166"><a href="Swagger.html#cb490-1166" tabindex="-1"></a><span class="co"> *         $ref: &#39;#/components/schemas/ErrorMessage&#39;</span></span>
<span id="cb490-1167"><a href="Swagger.html#cb490-1167" tabindex="-1"></a><span class="co"> *        example:</span></span>
<span id="cb490-1168"><a href="Swagger.html#cb490-1168" tabindex="-1"></a><span class="co"> *         message: &quot;Location with id &#39;735a62f5dc5d7968e68464c1&#39; not found.&quot;</span></span>
<span id="cb490-1169"><a href="Swagger.html#cb490-1169" tabindex="-1"></a><span class="co"> *     &#39;500&#39;:</span></span>
<span id="cb490-1170"><a href="Swagger.html#cb490-1170" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">Internal Server Error</span><span class="kw">&lt;/b&gt;</span><span class="co">, with error message.</span></span>
<span id="cb490-1171"><a href="Swagger.html#cb490-1171" tabindex="-1"></a><span class="co"> *      content:</span></span>
<span id="cb490-1172"><a href="Swagger.html#cb490-1172" tabindex="-1"></a><span class="co"> *       application/json:</span></span>
<span id="cb490-1173"><a href="Swagger.html#cb490-1173" tabindex="-1"></a><span class="co"> *        schema:</span></span>
<span id="cb490-1174"><a href="Swagger.html#cb490-1174" tabindex="-1"></a><span class="co"> *         $ref: &#39;#/components/schemas/ErrorMessage&#39;</span></span>
<span id="cb490-1175"><a href="Swagger.html#cb490-1175" tabindex="-1"></a><span class="co"> *        example:</span></span>
<span id="cb490-1176"><a href="Swagger.html#cb490-1176" tabindex="-1"></a><span class="co"> *         message: &quot;Cast to ObjectId failed for value </span><span class="sc">\&quot;</span><span class="co">1</span><span class="sc">\&quot;</span><span class="co"> (type string) at path </span><span class="sc">\&quot;</span><span class="co">_id</span><span class="sc">\&quot;</span><span class="co"> for model </span><span class="sc">\&quot;</span><span class="co">Location</span><span class="sc">\&quot;</span><span class="co">&quot;</span></span>
<span id="cb490-1177"><a href="Swagger.html#cb490-1177" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb490-1178"><a href="Swagger.html#cb490-1178" tabindex="-1"></a><span class="kw">const</span> locationsReadOne <span class="op">=</span> <span class="kw">async</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb490-1179"><a href="Swagger.html#cb490-1179" tabindex="-1"></a>  <span class="cf">try</span> {</span>
<span id="cb490-1180"><a href="Swagger.html#cb490-1180" tabindex="-1"></a>    <span class="kw">let</span> location <span class="op">=</span> <span class="cf">await</span> <span class="bu">Location</span><span class="op">.</span><span class="fu">findById</span>(req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">locationId</span>)</span>
<span id="cb490-1181"><a href="Swagger.html#cb490-1181" tabindex="-1"></a>      <span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;-id&quot;</span>)</span>
<span id="cb490-1182"><a href="Swagger.html#cb490-1182" tabindex="-1"></a>      <span class="op">.</span><span class="fu">exec</span>()<span class="op">;</span></span>
<span id="cb490-1183"><a href="Swagger.html#cb490-1183" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>location)</span>
<span id="cb490-1184"><a href="Swagger.html#cb490-1184" tabindex="-1"></a>      res<span class="op">.</span><span class="fu">status</span>(<span class="dv">404</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb490-1185"><a href="Swagger.html#cb490-1185" tabindex="-1"></a>        <span class="dt">message</span><span class="op">:</span> <span class="vs">`Location with id &#39;</span><span class="sc">${</span>req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">locationId</span><span class="sc">}</span><span class="vs">&#39; not found`</span><span class="op">,</span></span>
<span id="cb490-1186"><a href="Swagger.html#cb490-1186" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb490-1187"><a href="Swagger.html#cb490-1187" tabindex="-1"></a>    <span class="cf">else</span> res<span class="op">.</span><span class="fu">status</span>(<span class="dv">200</span>)<span class="op">.</span><span class="fu">json</span>(location)<span class="op">;</span></span>
<span id="cb490-1188"><a href="Swagger.html#cb490-1188" tabindex="-1"></a>  } <span class="cf">catch</span> (err) {</span>
<span id="cb490-1189"><a href="Swagger.html#cb490-1189" tabindex="-1"></a>    res<span class="op">.</span><span class="fu">status</span>(<span class="dv">500</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">message</span><span class="op">:</span> err<span class="op">.</span><span class="at">message</span> })<span class="op">;</span></span>
<span id="cb490-1190"><a href="Swagger.html#cb490-1190" tabindex="-1"></a>  }</span>
<span id="cb490-1191"><a href="Swagger.html#cb490-1191" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb490-1192"><a href="Swagger.html#cb490-1192" tabindex="-1"></a><span class="kw">const</span> locationsUpdateOne <span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb490-1193"><a href="Swagger.html#cb490-1193" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">status</span>(<span class="dv">200</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">status</span><span class="op">:</span> <span class="st">&quot;OK&quot;</span> })<span class="op">;</span></span>
<span id="cb490-1194"><a href="Swagger.html#cb490-1194" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb490-1195"><a href="Swagger.html#cb490-1195" tabindex="-1"></a><span class="kw">const</span> locationsDeleteOne <span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb490-1196"><a href="Swagger.html#cb490-1196" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">status</span>(<span class="dv">204</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">status</span><span class="op">:</span> <span class="st">&quot;OK&quot;</span> })<span class="op">;</span></span>
<span id="cb490-1197"><a href="Swagger.html#cb490-1197" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb490-1198"><a href="Swagger.html#cb490-1198" tabindex="-1"></a>module<span class="op">.</span><span class="at">exports</span> <span class="op">=</span> {</span>
<span id="cb490-1199"><a href="Swagger.html#cb490-1199" tabindex="-1"></a>  locationsListByDistance<span class="op">,</span></span>
<span id="cb490-1200"><a href="Swagger.html#cb490-1200" tabindex="-1"></a>  locationsListByMultiFilter<span class="op">,</span></span>
<span id="cb490-1201"><a href="Swagger.html#cb490-1201" tabindex="-1"></a>  locationsListCodelist<span class="op">,</span></span>
<span id="cb490-1202"><a href="Swagger.html#cb490-1202" tabindex="-1"></a>  locationsReadOne<span class="op">,</span></span>
<span id="cb490-1203"><a href="Swagger.html#cb490-1203" tabindex="-1"></a>  locationsUpdateOne<span class="op">,</span></span>
<span id="cb490-1204"><a href="Swagger.html#cb490-1204" tabindex="-1"></a>  locationsDeleteOne<span class="op">,</span></span>
<span id="cb490-1205"><a href="Swagger.html#cb490-1205" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#dokumentiranje-rest-api-ja-z-openapi-specifikacijo code.javascript:eq(5)").markRegExp(/\/\*\*[^\*]+?\* \@openapi[\s\S]+?\*\//, options_dodaj);
  });
</script>
<p><code>api/controllers/comments.js</code></p>
<div class="sourceCode" id="cb491"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb491-1"><a href="Swagger.html#cb491-1" tabindex="-1"></a><span class="kw">const</span> mongoose <span class="op">=</span> <span class="pp">require</span>(<span class="st">&quot;mongoose&quot;</span>)<span class="op">;</span></span>
<span id="cb491-2"><a href="Swagger.html#cb491-2" tabindex="-1"></a><span class="kw">const</span> <span class="bu">Location</span> <span class="op">=</span> mongoose<span class="op">.</span><span class="fu">model</span>(<span class="st">&quot;Location&quot;</span>)<span class="op">;</span></span>
<span id="cb491-3"><a href="Swagger.html#cb491-3" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb491-4"><a href="Swagger.html#cb491-4" tabindex="-1"></a><span class="co"> * </span><span class="an">@openapi</span></span>
<span id="cb491-5"><a href="Swagger.html#cb491-5" tabindex="-1"></a><span class="co"> * /locations/{locationId}/comments/{commentId}:</span></span>
<span id="cb491-6"><a href="Swagger.html#cb491-6" tabindex="-1"></a><span class="co"> *  get:</span></span>
<span id="cb491-7"><a href="Swagger.html#cb491-7" tabindex="-1"></a><span class="co"> *   summary: Retrieve a specific comment of a given location.</span></span>
<span id="cb491-8"><a href="Swagger.html#cb491-8" tabindex="-1"></a><span class="co"> *   description: Retrieve details of a **comment** of a given cultural heritage.</span></span>
<span id="cb491-9"><a href="Swagger.html#cb491-9" tabindex="-1"></a><span class="co"> *   tags: [Comments]</span></span>
<span id="cb491-10"><a href="Swagger.html#cb491-10" tabindex="-1"></a><span class="co"> *   parameters:</span></span>
<span id="cb491-11"><a href="Swagger.html#cb491-11" tabindex="-1"></a><span class="co"> *    - name: locationId</span></span>
<span id="cb491-12"><a href="Swagger.html#cb491-12" tabindex="-1"></a><span class="co"> *      in: path</span></span>
<span id="cb491-13"><a href="Swagger.html#cb491-13" tabindex="-1"></a><span class="co"> *      schema:</span></span>
<span id="cb491-14"><a href="Swagger.html#cb491-14" tabindex="-1"></a><span class="co"> *       type: string</span></span>
<span id="cb491-15"><a href="Swagger.html#cb491-15" tabindex="-1"></a><span class="co"> *       pattern: &#39;^[a-fA-F</span><span class="an">\d]{24}$&#39;</span></span>
<span id="cb491-16"><a href="Swagger.html#cb491-16" tabindex="-1"></a><span class="co"> *      required: true</span></span>
<span id="cb491-17"><a href="Swagger.html#cb491-17" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">unique identifier</span><span class="kw">&lt;/b&gt;</span><span class="co"> of location</span></span>
<span id="cb491-18"><a href="Swagger.html#cb491-18" tabindex="-1"></a><span class="co"> *      example: 635a62f5dc5d7968e6846574</span></span>
<span id="cb491-19"><a href="Swagger.html#cb491-19" tabindex="-1"></a><span class="co"> *    - name: commentId</span></span>
<span id="cb491-20"><a href="Swagger.html#cb491-20" tabindex="-1"></a><span class="co"> *      in: path</span></span>
<span id="cb491-21"><a href="Swagger.html#cb491-21" tabindex="-1"></a><span class="co"> *      schema:</span></span>
<span id="cb491-22"><a href="Swagger.html#cb491-22" tabindex="-1"></a><span class="co"> *       type: string</span></span>
<span id="cb491-23"><a href="Swagger.html#cb491-23" tabindex="-1"></a><span class="co"> *       pattern: &#39;^[a-fA-F</span><span class="an">\d]{24}$&#39;</span></span>
<span id="cb491-24"><a href="Swagger.html#cb491-24" tabindex="-1"></a><span class="co"> *      required: true</span></span>
<span id="cb491-25"><a href="Swagger.html#cb491-25" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">unique identifier</span><span class="kw">&lt;/b&gt;</span><span class="co"> of comment</span></span>
<span id="cb491-26"><a href="Swagger.html#cb491-26" tabindex="-1"></a><span class="co"> *      example: 635a62f5dc5d7968e68464be</span></span>
<span id="cb491-27"><a href="Swagger.html#cb491-27" tabindex="-1"></a><span class="co"> *   responses:</span></span>
<span id="cb491-28"><a href="Swagger.html#cb491-28" tabindex="-1"></a><span class="co"> *    &#39;200&#39;:</span></span>
<span id="cb491-29"><a href="Swagger.html#cb491-29" tabindex="-1"></a><span class="co"> *     description: </span><span class="kw">&lt;b&gt;</span><span class="co">OK</span><span class="kw">&lt;/b&gt;</span><span class="co">, with location details.</span></span>
<span id="cb491-30"><a href="Swagger.html#cb491-30" tabindex="-1"></a><span class="co"> *     content:</span></span>
<span id="cb491-31"><a href="Swagger.html#cb491-31" tabindex="-1"></a><span class="co"> *      application/json:</span></span>
<span id="cb491-32"><a href="Swagger.html#cb491-32" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb491-33"><a href="Swagger.html#cb491-33" tabindex="-1"></a><span class="co"> *        type: object</span></span>
<span id="cb491-34"><a href="Swagger.html#cb491-34" tabindex="-1"></a><span class="co"> *        properties:</span></span>
<span id="cb491-35"><a href="Swagger.html#cb491-35" tabindex="-1"></a><span class="co"> *         location:</span></span>
<span id="cb491-36"><a href="Swagger.html#cb491-36" tabindex="-1"></a><span class="co"> *          type: object</span></span>
<span id="cb491-37"><a href="Swagger.html#cb491-37" tabindex="-1"></a><span class="co"> *          properties:</span></span>
<span id="cb491-38"><a href="Swagger.html#cb491-38" tabindex="-1"></a><span class="co"> *           _id:</span></span>
<span id="cb491-39"><a href="Swagger.html#cb491-39" tabindex="-1"></a><span class="co"> *            type: string</span></span>
<span id="cb491-40"><a href="Swagger.html#cb491-40" tabindex="-1"></a><span class="co"> *            description: </span><span class="kw">&lt;b&gt;</span><span class="co">unique identifier</span><span class="kw">&lt;/b&gt;</span><span class="co"> of location</span></span>
<span id="cb491-41"><a href="Swagger.html#cb491-41" tabindex="-1"></a><span class="co"> *            example: 635a62f5dc5d7968e6846574</span></span>
<span id="cb491-42"><a href="Swagger.html#cb491-42" tabindex="-1"></a><span class="co"> *           name:</span></span>
<span id="cb491-43"><a href="Swagger.html#cb491-43" tabindex="-1"></a><span class="co"> *            type: string</span></span>
<span id="cb491-44"><a href="Swagger.html#cb491-44" tabindex="-1"></a><span class="co"> *            description: </span><span class="kw">&lt;b&gt;</span><span class="co">name</span><span class="kw">&lt;/b&gt;</span><span class="co"> of the location</span></span>
<span id="cb491-45"><a href="Swagger.html#cb491-45" tabindex="-1"></a><span class="co"> *            example: Celje - Celjski grad</span></span>
<span id="cb491-46"><a href="Swagger.html#cb491-46" tabindex="-1"></a><span class="co"> *         comment:</span></span>
<span id="cb491-47"><a href="Swagger.html#cb491-47" tabindex="-1"></a><span class="co"> *          $ref: &#39;#/components/schemas/Comment&#39;</span></span>
<span id="cb491-48"><a href="Swagger.html#cb491-48" tabindex="-1"></a><span class="co"> *    &#39;404&#39;:</span></span>
<span id="cb491-49"><a href="Swagger.html#cb491-49" tabindex="-1"></a><span class="co"> *     description: </span><span class="kw">&lt;b&gt;</span><span class="co">Not Found</span><span class="kw">&lt;/b&gt;</span><span class="co">, with error message.</span></span>
<span id="cb491-50"><a href="Swagger.html#cb491-50" tabindex="-1"></a><span class="co"> *     content:</span></span>
<span id="cb491-51"><a href="Swagger.html#cb491-51" tabindex="-1"></a><span class="co"> *      application/json:</span></span>
<span id="cb491-52"><a href="Swagger.html#cb491-52" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb491-53"><a href="Swagger.html#cb491-53" tabindex="-1"></a><span class="co"> *        $ref: &#39;#/components/schemas/ErrorMessage&#39;</span></span>
<span id="cb491-54"><a href="Swagger.html#cb491-54" tabindex="-1"></a><span class="co"> *       examples:</span></span>
<span id="cb491-55"><a href="Swagger.html#cb491-55" tabindex="-1"></a><span class="co"> *        location not found:</span></span>
<span id="cb491-56"><a href="Swagger.html#cb491-56" tabindex="-1"></a><span class="co"> *         value:</span></span>
<span id="cb491-57"><a href="Swagger.html#cb491-57" tabindex="-1"></a><span class="co"> *          message: &quot;Location with id &#39;73512fc5022f6bd9e0dfe53e&#39; not found.&quot;</span></span>
<span id="cb491-58"><a href="Swagger.html#cb491-58" tabindex="-1"></a><span class="co"> *        comment not found:</span></span>
<span id="cb491-59"><a href="Swagger.html#cb491-59" tabindex="-1"></a><span class="co"> *         value:</span></span>
<span id="cb491-60"><a href="Swagger.html#cb491-60" tabindex="-1"></a><span class="co"> *          message: &quot;Comment with id &#39;1&#39; not found.&quot;</span></span>
<span id="cb491-61"><a href="Swagger.html#cb491-61" tabindex="-1"></a><span class="co"> *        no comments found:</span></span>
<span id="cb491-62"><a href="Swagger.html#cb491-62" tabindex="-1"></a><span class="co"> *         value:</span></span>
<span id="cb491-63"><a href="Swagger.html#cb491-63" tabindex="-1"></a><span class="co"> *          message: &quot;No comments found.&quot;</span></span>
<span id="cb491-64"><a href="Swagger.html#cb491-64" tabindex="-1"></a><span class="co"> *    &#39;500&#39;:</span></span>
<span id="cb491-65"><a href="Swagger.html#cb491-65" tabindex="-1"></a><span class="co"> *     description: </span><span class="kw">&lt;b&gt;</span><span class="co">Internal Server Error</span><span class="kw">&lt;/b&gt;</span><span class="co">, with error message.</span></span>
<span id="cb491-66"><a href="Swagger.html#cb491-66" tabindex="-1"></a><span class="co"> *     content:</span></span>
<span id="cb491-67"><a href="Swagger.html#cb491-67" tabindex="-1"></a><span class="co"> *      application/json:</span></span>
<span id="cb491-68"><a href="Swagger.html#cb491-68" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb491-69"><a href="Swagger.html#cb491-69" tabindex="-1"></a><span class="co"> *        $ref: &#39;#/components/schemas/ErrorMessage&#39;</span></span>
<span id="cb491-70"><a href="Swagger.html#cb491-70" tabindex="-1"></a><span class="co"> *       example:</span></span>
<span id="cb491-71"><a href="Swagger.html#cb491-71" tabindex="-1"></a><span class="co"> *        message: Database not available.</span></span>
<span id="cb491-72"><a href="Swagger.html#cb491-72" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb491-73"><a href="Swagger.html#cb491-73" tabindex="-1"></a><span class="kw">const</span> commentsReadOne <span class="op">=</span> <span class="kw">async</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb491-74"><a href="Swagger.html#cb491-74" tabindex="-1"></a>  <span class="cf">try</span> {</span>
<span id="cb491-75"><a href="Swagger.html#cb491-75" tabindex="-1"></a>    <span class="kw">let</span> location <span class="op">=</span> <span class="cf">await</span> <span class="bu">Location</span><span class="op">.</span><span class="fu">findById</span>(req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">locationId</span>)</span>
<span id="cb491-76"><a href="Swagger.html#cb491-76" tabindex="-1"></a>      <span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;name comments&quot;</span>)</span>
<span id="cb491-77"><a href="Swagger.html#cb491-77" tabindex="-1"></a>      <span class="op">.</span><span class="fu">exec</span>()<span class="op">;</span></span>
<span id="cb491-78"><a href="Swagger.html#cb491-78" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>location)</span>
<span id="cb491-79"><a href="Swagger.html#cb491-79" tabindex="-1"></a>      res<span class="op">.</span><span class="fu">status</span>(<span class="dv">404</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb491-80"><a href="Swagger.html#cb491-80" tabindex="-1"></a>        <span class="dt">message</span><span class="op">:</span> <span class="vs">`Location with id &#39;</span><span class="sc">${</span>req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">locationId</span><span class="sc">}</span><span class="vs">&#39; not found`</span><span class="op">,</span></span>
<span id="cb491-81"><a href="Swagger.html#cb491-81" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb491-82"><a href="Swagger.html#cb491-82" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> (<span class="op">!</span>location<span class="op">.</span><span class="at">comments</span> <span class="op">||</span> location<span class="op">.</span><span class="at">comments</span><span class="op">.</span><span class="at">length</span> <span class="op">==</span> <span class="dv">0</span>)</span>
<span id="cb491-83"><a href="Swagger.html#cb491-83" tabindex="-1"></a>      res<span class="op">.</span><span class="fu">status</span>(<span class="dv">404</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;No comments found.&quot;</span> })<span class="op">;</span></span>
<span id="cb491-84"><a href="Swagger.html#cb491-84" tabindex="-1"></a>    <span class="cf">else</span> {</span>
<span id="cb491-85"><a href="Swagger.html#cb491-85" tabindex="-1"></a>      <span class="kw">let</span> comment <span class="op">=</span> location<span class="op">.</span><span class="at">comments</span><span class="op">.</span><span class="fu">id</span>(req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">commentId</span>)<span class="op">;</span></span>
<span id="cb491-86"><a href="Swagger.html#cb491-86" tabindex="-1"></a>      <span class="cf">if</span> (<span class="op">!</span>comment)</span>
<span id="cb491-87"><a href="Swagger.html#cb491-87" tabindex="-1"></a>        res<span class="op">.</span><span class="fu">status</span>(<span class="dv">404</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb491-88"><a href="Swagger.html#cb491-88" tabindex="-1"></a>          <span class="dt">message</span><span class="op">:</span> <span class="vs">`Comment with id &#39;</span><span class="sc">${</span>req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">commentId</span><span class="sc">}</span><span class="vs">&#39; not found.`</span><span class="op">,</span></span>
<span id="cb491-89"><a href="Swagger.html#cb491-89" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb491-90"><a href="Swagger.html#cb491-90" tabindex="-1"></a>      <span class="cf">else</span> {</span>
<span id="cb491-91"><a href="Swagger.html#cb491-91" tabindex="-1"></a>        res<span class="op">.</span><span class="fu">status</span>(<span class="dv">200</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb491-92"><a href="Swagger.html#cb491-92" tabindex="-1"></a>          <span class="dt">location</span><span class="op">:</span> {</span>
<span id="cb491-93"><a href="Swagger.html#cb491-93" tabindex="-1"></a>            <span class="dt">_id</span><span class="op">:</span> req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">locationId</span><span class="op">,</span></span>
<span id="cb491-94"><a href="Swagger.html#cb491-94" tabindex="-1"></a>            <span class="dt">name</span><span class="op">:</span> location<span class="op">.</span><span class="at">name</span><span class="op">,</span></span>
<span id="cb491-95"><a href="Swagger.html#cb491-95" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb491-96"><a href="Swagger.html#cb491-96" tabindex="-1"></a>          comment<span class="op">,</span></span>
<span id="cb491-97"><a href="Swagger.html#cb491-97" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb491-98"><a href="Swagger.html#cb491-98" tabindex="-1"></a>      }</span>
<span id="cb491-99"><a href="Swagger.html#cb491-99" tabindex="-1"></a>    }</span>
<span id="cb491-100"><a href="Swagger.html#cb491-100" tabindex="-1"></a>  } <span class="cf">catch</span> (err) {</span>
<span id="cb491-101"><a href="Swagger.html#cb491-101" tabindex="-1"></a>    res<span class="op">.</span><span class="fu">status</span>(<span class="dv">500</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">message</span><span class="op">:</span> err<span class="op">.</span><span class="at">message</span> })<span class="op">;</span></span>
<span id="cb491-102"><a href="Swagger.html#cb491-102" tabindex="-1"></a>  }</span>
<span id="cb491-103"><a href="Swagger.html#cb491-103" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb491-104"><a href="Swagger.html#cb491-104" tabindex="-1"></a><span class="kw">const</span> commentsCreate <span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb491-105"><a href="Swagger.html#cb491-105" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">status</span>(<span class="dv">201</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">status</span><span class="op">:</span> <span class="st">&quot;OK&quot;</span> })<span class="op">;</span></span>
<span id="cb491-106"><a href="Swagger.html#cb491-106" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb491-107"><a href="Swagger.html#cb491-107" tabindex="-1"></a><span class="kw">const</span> commentsUpdateOne <span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb491-108"><a href="Swagger.html#cb491-108" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">status</span>(<span class="dv">200</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">status</span><span class="op">:</span> <span class="st">&quot;OK&quot;</span> })<span class="op">;</span></span>
<span id="cb491-109"><a href="Swagger.html#cb491-109" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb491-110"><a href="Swagger.html#cb491-110" tabindex="-1"></a><span class="kw">const</span> commentsDeleteOne <span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb491-111"><a href="Swagger.html#cb491-111" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">status</span>(<span class="dv">204</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">status</span><span class="op">:</span> <span class="st">&quot;OK&quot;</span> })<span class="op">;</span></span>
<span id="cb491-112"><a href="Swagger.html#cb491-112" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb491-113"><a href="Swagger.html#cb491-113" tabindex="-1"></a>module<span class="op">.</span><span class="at">exports</span> <span class="op">=</span> {</span>
<span id="cb491-114"><a href="Swagger.html#cb491-114" tabindex="-1"></a>  commentsCreate<span class="op">,</span></span>
<span id="cb491-115"><a href="Swagger.html#cb491-115" tabindex="-1"></a>  commentsReadOne<span class="op">,</span></span>
<span id="cb491-116"><a href="Swagger.html#cb491-116" tabindex="-1"></a>  commentsUpdateOne<span class="op">,</span></span>
<span id="cb491-117"><a href="Swagger.html#cb491-117" tabindex="-1"></a>  commentsDeleteOne<span class="op">,</span></span>
<span id="cb491-118"><a href="Swagger.html#cb491-118" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#dokumentiranje-rest-api-ja-z-openapi-specifikacijo code.javascript:eq(6)").markRegExp(/\/\*\*[^\*]+?\* \@openapi[\s\S]+?\*\//, options_dodaj);
  });
</script>
<p>Rezultat dodanih metapodatkov v okviru dokumentiranja REST API strežnika je prikazan na sliki <a href="Swagger.html#fig:slika-Swagger-UI">7.1</a>, ki se generira samodejno in je na voljo na <code>/api/docs</code>. V spodnjem delu slike je prikazan seznam shem oz. opredelitev vhodov in izhodov metod, ki so na voljo uporabnikom. Nato so v okviru <strong>kategorij</strong> (Locations in Comments) na voljo posamezne metode.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-Swagger-UI"></span>
<img src="assets/img/Swagger_UI.png" alt="Uporabniški vmesnik Swagger UI za testiranje REST API-ja" width="500" />
<p class="caption">
Slika 7.1: Uporabniški vmesnik Swagger UI za testiranje REST API-ja
</p>
</div>
<p>Če izberemo metodo <strong><code>/locations/{locationId}</code></strong> iz kategorije Locations na sliki <a href="Swagger.html#fig:slika-Swagger-UI">7.1</a>, se prikažejo podrobnosti, ki so prikazane na sliki <a href="Swagger.html#fig:slika-Swagger-UI-metoda">7.2</a>. V spodnjem delu slike so na voljo vsi možni rezultati klica metode (t.j. <code>200</code>, <code>404</code> in <code>500</code>), skupaj s primeri odgovorov. Če želimo metodo poklicati, moramo zgolj vnesti vrednost parametra <code>locationId</code> ter potrditi s klikom na gumb <code>Try it out</code> in rezultat zahteve se prikaže v okviru testnega odjemalca na sliki <a href="Swagger.html#fig:slika-Swagger-UI-metoda">7.2</a>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-Swagger-UI-metoda"></span>
<img src="assets/img/Swagger_UI_metoda.png" alt="Primer testiranja metode `/locations/{locationId}` v okviru uporabniškega vmesnika Swagger UI" width="500" />
<p class="caption">
Slika 7.2: Primer testiranja metode <code>/locations/{locationId}</code> v okviru uporabniškega vmesnika Swagger UI
</p>
</div>
</div>
<div id="post-metode-za-dodajanje-podatkov-v-mongodb" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> POST metode za dodajanje podatkov v MongoDB<a href="Swagger.html#post-metode-za-dodajanje-podatkov-v-mongodb" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Za dodajanje podatkov v MongoDB podatkovno bazo bomo uporabljali <a href="https://en.wikipedia.org/wiki/POST_(HTTP)"><i class="fa-brands fa-wikipedia-w"></i><strong>POST</strong> metode</a>, ki v odgovoru vrnejo dodan dokument. V našem usmerjevalniku za REST API imamo opredeljeni 2 metodi, ki sta podrobneje povzeti v tabeli <a href="Swagger.html#tab:tabela-REST-POST-metode">7.1</a>.</p>
<p>Ker v okviru naše aplikacije seznam lokacij vedno uvozimo iz registra kulturne dediščine, dodajanja novih lokacij preko REST API-ja ne bomo podprli, zato omenjene reference odstranimo, obdržimo zgolj <strong>metodo za dodajanje komentarjev</strong>.</p>
<p><code>api/routes/api.js</code></p>
<div class="sourceCode" id="cb492"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb492-1"><a href="Swagger.html#cb492-1" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb492-2"><a href="Swagger.html#cb492-2" tabindex="-1"></a><span class="co"> * Locations</span></span>
<span id="cb492-3"><a href="Swagger.html#cb492-3" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb492-4"><a href="Swagger.html#cb492-4" tabindex="-1"></a>router<span class="op">.</span><span class="fu">get</span>(<span class="st">&quot;/locations/distance&quot;</span><span class="op">,</span> ctrlLocations<span class="op">.</span><span class="at">locationsListByDistance</span>)<span class="op">;</span></span>
<span id="cb492-5"><a href="Swagger.html#cb492-5" tabindex="-1"></a>router<span class="op">.</span><span class="fu">get</span>(<span class="st">&quot;/locations/search&quot;</span><span class="op">,</span> ctrlLocations<span class="op">.</span><span class="at">locationsListByMultiFilter</span>)<span class="op">;</span></span>
<span id="cb492-6"><a href="Swagger.html#cb492-6" tabindex="-1"></a>router<span class="op">.</span><span class="fu">get</span>(</span>
<span id="cb492-7"><a href="Swagger.html#cb492-7" tabindex="-1"></a>  <span class="st">&quot;/locations/codelist/:codelist&quot;</span><span class="op">,</span></span>
<span id="cb492-8"><a href="Swagger.html#cb492-8" tabindex="-1"></a>  ctrlLocations<span class="op">.</span><span class="at">locationsListCodelist</span></span>
<span id="cb492-9"><a href="Swagger.html#cb492-9" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb492-10"><a href="Swagger.html#cb492-10" tabindex="-1"></a>router<span class="op">.</span><span class="fu">post</span>(<span class="st">&quot;/locations&quot;</span><span class="op">,</span> ctrlLocations<span class="op">.</span><span class="at">locationsCreate</span>)<span class="op">;</span></span>
<span id="cb492-11"><a href="Swagger.html#cb492-11" tabindex="-1"></a>router<span class="op">.</span><span class="fu">get</span>(<span class="st">&quot;/locations/:locationId&quot;</span><span class="op">,</span> ctrlLocations<span class="op">.</span><span class="at">locationsReadOne</span>)<span class="op">;</span></span>
<span id="cb492-12"><a href="Swagger.html#cb492-12" tabindex="-1"></a>router<span class="op">.</span><span class="fu">put</span>(<span class="st">&quot;/locations/:locationId&quot;</span><span class="op">,</span> ctrlLocations<span class="op">.</span><span class="at">locationsUpdateOne</span>)<span class="op">;</span></span>
<span id="cb492-13"><a href="Swagger.html#cb492-13" tabindex="-1"></a>router<span class="op">.</span><span class="fu">delete</span>(<span class="st">&quot;/locations/:locationId&quot;</span><span class="op">,</span> ctrlLocations<span class="op">.</span><span class="at">locationsDeleteOne</span>)<span class="op">;</span></span>
<span id="cb492-14"><a href="Swagger.html#cb492-14" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb492-15"><a href="Swagger.html#cb492-15" tabindex="-1"></a><span class="co"> * Comments</span></span>
<span id="cb492-16"><a href="Swagger.html#cb492-16" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb492-17"><a href="Swagger.html#cb492-17" tabindex="-1"></a>router<span class="op">.</span><span class="fu">post</span>(<span class="st">&quot;/locations/:locationId/comments&quot;</span><span class="op">,</span> ctrlComments<span class="op">.</span><span class="at">commentsCreate</span>)<span class="op">;</span></span>
<span id="cb492-18"><a href="Swagger.html#cb492-18" tabindex="-1"></a>router<span class="op">.</span><span class="fu">get</span>(</span>
<span id="cb492-19"><a href="Swagger.html#cb492-19" tabindex="-1"></a>  <span class="st">&quot;/locations/:locationId/comments/:commentId&quot;</span><span class="op">,</span></span>
<span id="cb492-20"><a href="Swagger.html#cb492-20" tabindex="-1"></a>  ctrlComments<span class="op">.</span><span class="at">commentsReadOne</span></span>
<span id="cb492-21"><a href="Swagger.html#cb492-21" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb492-22"><a href="Swagger.html#cb492-22" tabindex="-1"></a>router<span class="op">.</span><span class="fu">put</span>(</span>
<span id="cb492-23"><a href="Swagger.html#cb492-23" tabindex="-1"></a>  <span class="st">&quot;/locations/:locationId/comments/:commentId&quot;</span><span class="op">,</span></span>
<span id="cb492-24"><a href="Swagger.html#cb492-24" tabindex="-1"></a>  ctrlComments<span class="op">.</span><span class="at">commentsUpdateOne</span></span>
<span id="cb492-25"><a href="Swagger.html#cb492-25" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb492-26"><a href="Swagger.html#cb492-26" tabindex="-1"></a>router<span class="op">.</span><span class="fu">delete</span>(</span>
<span id="cb492-27"><a href="Swagger.html#cb492-27" tabindex="-1"></a>  <span class="st">&quot;/locations/:locationId/comments/:commentId&quot;</span><span class="op">,</span></span>
<span id="cb492-28"><a href="Swagger.html#cb492-28" tabindex="-1"></a>  ctrlComments<span class="op">.</span><span class="at">commentsDeleteOne</span></span>
<span id="cb492-29"><a href="Swagger.html#cb492-29" tabindex="-1"></a>)<span class="op">;</span></span></code></pre></div>
<p><code>api/controllers/location.js</code></p>
<div class="sourceCode" id="cb493"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb493-1"><a href="Swagger.html#cb493-1" tabindex="-1"></a><span class="kw">const</span> locationsListCodelist <span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb493-2"><a href="Swagger.html#cb493-2" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb493-3"><a href="Swagger.html#cb493-3" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb493-4"><a href="Swagger.html#cb493-4" tabindex="-1"></a><span class="kw">const</span> locationsCreate <span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb493-5"><a href="Swagger.html#cb493-5" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">status</span>(<span class="dv">201</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">status</span><span class="op">:</span> <span class="st">&quot;OK&quot;</span> })<span class="op">;</span></span>
<span id="cb493-6"><a href="Swagger.html#cb493-6" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb493-7"><a href="Swagger.html#cb493-7" tabindex="-1"></a><span class="op">...</span></span>
<span id="cb493-8"><a href="Swagger.html#cb493-8" tabindex="-1"></a><span class="kw">const</span> locationsReadOne <span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb493-9"><a href="Swagger.html#cb493-9" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb493-10"><a href="Swagger.html#cb493-10" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb493-11"><a href="Swagger.html#cb493-11" tabindex="-1"></a><span class="kw">const</span> locationsUpdateOne <span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb493-12"><a href="Swagger.html#cb493-12" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">status</span>(<span class="dv">200</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">status</span><span class="op">:</span> <span class="st">&quot;OK&quot;</span> })<span class="op">;</span></span>
<span id="cb493-13"><a href="Swagger.html#cb493-13" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb493-14"><a href="Swagger.html#cb493-14" tabindex="-1"></a><span class="kw">const</span> locationsDeleteOne <span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb493-15"><a href="Swagger.html#cb493-15" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">status</span>(<span class="dv">204</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">status</span><span class="op">:</span> <span class="st">&quot;OK&quot;</span> })<span class="op">;</span></span>
<span id="cb493-16"><a href="Swagger.html#cb493-16" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb493-17"><a href="Swagger.html#cb493-17" tabindex="-1"></a>module<span class="op">.</span><span class="at">exports</span> <span class="op">=</span> {</span>
<span id="cb493-18"><a href="Swagger.html#cb493-18" tabindex="-1"></a>  locationsListByDistance<span class="op">,</span></span>
<span id="cb493-19"><a href="Swagger.html#cb493-19" tabindex="-1"></a>  locationsListByMultiFilter<span class="op">,</span></span>
<span id="cb493-20"><a href="Swagger.html#cb493-20" tabindex="-1"></a>  locationsListCodelist<span class="op">,</span></span>
<span id="cb493-21"><a href="Swagger.html#cb493-21" tabindex="-1"></a>  locationsCreate<span class="op">,</span></span>
<span id="cb493-22"><a href="Swagger.html#cb493-22" tabindex="-1"></a>  locationsReadOne<span class="op">,</span></span>
<span id="cb493-23"><a href="Swagger.html#cb493-23" tabindex="-1"></a>  locationsUpdateOne<span class="op">,</span></span>
<span id="cb493-24"><a href="Swagger.html#cb493-24" tabindex="-1"></a>  locationsDeleteOne<span class="op">,</span></span>
<span id="cb493-25"><a href="Swagger.html#cb493-25" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<table class="tabela-manjsa">
<caption>
<span id="tab:tabela-REST-POST-metode">Tabela 7.1: </span><strong>POST metode</strong> v okviru demo aplikacije
</caption>
<thead>
<tr>
<th style="text-align:left;">
Akcija
</th>
<th style="text-align:left;">
Metoda
</th>
<th style="text-align:left;">
URL naslov
</th>
<th style="text-align:left;">
Parametri
</th>
<th style="text-align:left;">
Primer
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<izbrisi>Kreiranje nove lokacije</izbrisi>
</td>
<td style="text-align:left;">
<izbrisi><code>POST</code></izbrisi>
</td>
<td style="text-align:left;">
<izbrisi><code>/locations</code></izbrisi>
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
<izbrisi><code>http://&lt;server&gt;/api/locations</code></izbrisi>
</td>
</tr>
<tr>
<td style="text-align:left;">
<b>Kreiranje novega komentarja</b><br>(glej poglavje <a href="Swagger.html#dodajanje-odvisnih-dokumentov-v-mongodb">7.2.2</a>)
</td>
<td style="text-align:left;">
<code>POST</code>
</td>
<td style="text-align:left;">
<code>/locations/:locationId/comments</code>
</td>
<td style="text-align:left;">
<code>locationId</code>
</td>
<td style="text-align:left;">
<code>http://&lt;server&gt;/api/</code><br><code>locations/123/comments</code>
</td>
</tr>
</tbody>
</table>
<p>POST metoda pri svojem delovanju uporabi posredovane podatke iz obrazca in jih shrani v podatkovno bazo. V izvorni kodi podobno, kot dostopamo do URL parametrov z <a href="https://expressjs.com/en/api.html#req.params"><i class="fa-solid fa-tag"></i><code>req.params</code></a> in do parametrov poizvedbe z <a href="https://expressjs.com/en/api.html#req.query"><i class="fa-solid fa-tag"></i><code>req.query</code></a>, dostopamo do posredovanih podatkov z <a href="https://expressjs.com/en/api.html#req.body"><i class="fa-solid fa-tag"></i><code>req.body</code></a>.</p>
<p>Podporo obvladovanju podatkov v telesu zahteve, ki jih strežniku preko spletnega obrazca (<code>application/x-www-form-urlencoded</code>) posredujemo v <code>req.body</code>, moramo v našo aplikacijo dodatno vključiti. Za ta namen bomo uporabili knjižnico <a href="https://www.npmjs.com/package/body-parser"><i class="fa-brands fa-node-js"></i><strong><code>body-parser</code></strong></a>.</p>
<div class="sourceCode" id="cb494"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb494-1"><a href="Swagger.html#cb494-1" tabindex="-1"></a><span class="ex">$</span> npm install body-parser</span></code></pre></div>
<p><code>server.js</code></p>
<div class="sourceCode" id="cb495"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb495-1"><a href="Swagger.html#cb495-1" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb495-2"><a href="Swagger.html#cb495-2" tabindex="-1"></a><span class="co"> * Load environment variables</span></span>
<span id="cb495-3"><a href="Swagger.html#cb495-3" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb495-4"><a href="Swagger.html#cb495-4" tabindex="-1"></a><span class="pp">require</span>(<span class="st">&quot;dotenv&quot;</span>)<span class="op">.</span><span class="fu">config</span>()<span class="op">;</span></span>
<span id="cb495-5"><a href="Swagger.html#cb495-5" tabindex="-1"></a><span class="kw">const</span> express <span class="op">=</span> <span class="pp">require</span>(<span class="st">&quot;express&quot;</span>)<span class="op">;</span></span>
<span id="cb495-6"><a href="Swagger.html#cb495-6" tabindex="-1"></a><span class="kw">const</span> path <span class="op">=</span> <span class="pp">require</span>(<span class="st">&quot;path&quot;</span>)<span class="op">;</span></span>
<span id="cb495-7"><a href="Swagger.html#cb495-7" tabindex="-1"></a><span class="kw">const</span> bodyParser <span class="op">=</span> <span class="pp">require</span>(<span class="st">&quot;body-parser&quot;</span>)<span class="op">;</span></span>
<span id="cb495-8"><a href="Swagger.html#cb495-8" tabindex="-1"></a><span class="op">...</span></span>
<span id="cb495-9"><a href="Swagger.html#cb495-9" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb495-10"><a href="Swagger.html#cb495-10" tabindex="-1"></a><span class="co"> * Static pages</span></span>
<span id="cb495-11"><a href="Swagger.html#cb495-11" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb495-12"><a href="Swagger.html#cb495-12" tabindex="-1"></a>app<span class="op">.</span><span class="fu">use</span>(express<span class="op">.</span><span class="fu">static</span>(path<span class="op">.</span><span class="fu">join</span>(<span class="bu">__dirname</span><span class="op">,</span> <span class="st">&quot;public&quot;</span>)))<span class="op">;</span></span>
<span id="cb495-13"><a href="Swagger.html#cb495-13" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb495-14"><a href="Swagger.html#cb495-14" tabindex="-1"></a><span class="co"> * Body parser (application/x-www-form-urlencoded)</span></span>
<span id="cb495-15"><a href="Swagger.html#cb495-15" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb495-16"><a href="Swagger.html#cb495-16" tabindex="-1"></a>app<span class="op">.</span><span class="fu">use</span>(bodyParser<span class="op">.</span><span class="fu">urlencoded</span>({ <span class="dt">extended</span><span class="op">:</span> <span class="kw">false</span> }))<span class="op">;</span></span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#post-metode-za-dodajanje-podatkov-v-mongodb code.javascript:eq(0)").markRegExp(/router\.post\([^\"]*?"\/locations"[\s\S]+?\);/, options_izbrisi);
    $("#post-metode-za-dodajanje-podatkov-v-mongodb code.javascript:eq(0)").markRegExp(/router\.post\([^\"]*?"\/locations\/:[\s\S]+?\);/, options_dodaj);
    $("#post-metode-za-dodajanje-podatkov-v-mongodb code.javascript:eq(1)").markRegExp(/const locationsCreate[\s\S]+?};/, options_izbrisi);
    $("#post-metode-za-dodajanje-podatkov-v-mongodb code.javascript:eq(1)").markRegExp(/\s+?locationsCreate,/, options_izbrisi);
    $("#post-metode-za-dodajanje-podatkov-v-mongodb code.bash:eq(0)").markRegExp(/npm.+/, options_dodaj);
    $("#post-metode-za-dodajanje-podatkov-v-mongodb code.javascript:eq(2)").markRegExp(/const bodyParser.+/, options_dodaj);
    $("#post-metode-za-dodajanje-podatkov-v-mongodb code.javascript:eq(2)").markRegExp(/\/\*\*[^\/]+?Body parser[\s\S]+?\}\)\);/, options_dodaj);
  });
</script>
<div id="dodajanje-novih-dokumentov-v-mongodb" class="section level3 hasAnchor" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> Dodajanje novih dokumentov v MongoDB<a href="Swagger.html#dodajanje-novih-dokumentov-v-mongodb" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Pri dodajanju novih dokumentov moramo najprej dostopati do posredovanih podatkov in jih pretvoriti v ustrezen JavaScript objekt, ki ustreza shemi dokumenta (glej opredelitev sheme v datoteki <code>api/models/locations.js</code>).</p>
<p>Za dodajanje uporabimo metodo <a href="https://mongoosejs.com/docs/models.html#constructing-documents"><i class="fa-solid fa-database"></i><strong><code>create</code></strong></a>, ki je na voljo na izbranem modelu. Po uspešnem dodajanju dokumenta v podatkovno bazo pa odjemalcu v povratnem klicu vrnemo ravnokar dodan dokument oz. sporočilo o napaki, če dodajanje ni bilo uspešno.</p>
<p>V našem primeru ne bomo neposredno dodajali novih dokumentov, saj ne bomo omogočili kreiranja novih lokacij, kot je zapisano v začetku poglavja <a href="Swagger.html#post-metode-za-dodajanje-podatkov-v-mongodb">7.2</a>, ampak si bomo v naslednjem poglavju <a href="Swagger.html#dodajanje-odvisnih-dokumentov-v-mongodb">7.2.2</a> podrobneje pogledali dodajanje odvisnega dokumenta že obstoječemu dokumentu.</p>
</div>
<div id="dodajanje-odvisnih-dokumentov-v-mongodb" class="section level3 hasAnchor" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> Dodajanje odvisnih dokumentov v MongoDB<a href="Swagger.html#dodajanje-odvisnih-dokumentov-v-mongodb" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Pri naši demo aplikaciji so odvisni dokumenti komentarji, ki jih shranimo v okviru nadrejenega dokumenta, tj. lokacija. Postopek dodajanja odvisnih dokumentov je naslednji:</p>
<ol style="list-style-type: decimal">
<li>iskanje ustreznega nadrejenega dokumenta, ki predstavlja lokacijo,</li>
<li>dodajanje novega odvisnega dokumenta s komentarjem in</li>
<li>shranjevanje nadrejenega dokumenta z lokacijo, ki vsebuje tudi komentar.</li>
</ol>
<p>Iskanje ustreznega nadrejenega dokumenta je preprosto z uporabo metode <a href="https://mongoosejs.com/docs/api.html#model_Model-findById"><i class="fa-solid fa-database"></i><strong><code>findById</code></strong></a>, nato s <a href="https://mongoosejs.com/docs/api.html#query_Query-select"><i class="fa-solid fa-database"></i><strong><code>select</code></strong></a> izberemo zgolj komentarje in v primeru uspešnega odgovora podatkovne baze pokličemo funkcijo <code>dodajKomentar</code>.</p>
<p><code>app_api/controllers/comments.js</code></p>
<div class="sourceCode" id="cb496"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb496-1"><a href="Swagger.html#cb496-1" tabindex="-1"></a><span class="kw">const</span> commentsCreate <span class="op">=</span> <span class="kw">async</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb496-2"><a href="Swagger.html#cb496-2" tabindex="-1"></a>  <span class="kw">const</span> { locationId } <span class="op">=</span> req<span class="op">.</span><span class="at">params</span><span class="op">;</span></span>
<span id="cb496-3"><a href="Swagger.html#cb496-3" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span>locationId)</span>
<span id="cb496-4"><a href="Swagger.html#cb496-4" tabindex="-1"></a>    res</span>
<span id="cb496-5"><a href="Swagger.html#cb496-5" tabindex="-1"></a>      <span class="op">.</span><span class="fu">status</span>(<span class="dv">400</span>)</span>
<span id="cb496-6"><a href="Swagger.html#cb496-6" tabindex="-1"></a>      <span class="op">.</span><span class="fu">json</span>({ <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;Path parameter &#39;locationId&#39; is required.&quot;</span> })<span class="op">;</span></span>
<span id="cb496-7"><a href="Swagger.html#cb496-7" tabindex="-1"></a>  <span class="cf">else</span> {</span>
<span id="cb496-8"><a href="Swagger.html#cb496-8" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb496-9"><a href="Swagger.html#cb496-9" tabindex="-1"></a>      <span class="kw">let</span> location <span class="op">=</span> <span class="cf">await</span> <span class="bu">Location</span><span class="op">.</span><span class="fu">findById</span>(locationId)</span>
<span id="cb496-10"><a href="Swagger.html#cb496-10" tabindex="-1"></a>        <span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;comments&quot;</span>)</span>
<span id="cb496-11"><a href="Swagger.html#cb496-11" tabindex="-1"></a>        <span class="op">.</span><span class="fu">exec</span>()<span class="op">;</span></span>
<span id="cb496-12"><a href="Swagger.html#cb496-12" tabindex="-1"></a>      <span class="fu">doAddComment</span>(req<span class="op">,</span> res<span class="op">,</span> location)<span class="op">;</span></span>
<span id="cb496-13"><a href="Swagger.html#cb496-13" tabindex="-1"></a>      res<span class="op">.</span><span class="fu">status</span>(<span class="dv">201</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">status</span><span class="op">:</span> <span class="st">&quot;OK&quot;</span> })<span class="op">;</span></span>
<span id="cb496-14"><a href="Swagger.html#cb496-14" tabindex="-1"></a>    } <span class="cf">catch</span> (err) {</span>
<span id="cb496-15"><a href="Swagger.html#cb496-15" tabindex="-1"></a>      res<span class="op">.</span><span class="fu">status</span>(<span class="dv">500</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">message</span><span class="op">:</span> err<span class="op">.</span><span class="at">message</span> })<span class="op">;</span></span>
<span id="cb496-16"><a href="Swagger.html#cb496-16" tabindex="-1"></a>    }</span>
<span id="cb496-17"><a href="Swagger.html#cb496-17" tabindex="-1"></a>  }</span>
<span id="cb496-18"><a href="Swagger.html#cb496-18" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<p>Pri dejanskem dodajanju komentarja za lokacijo uporabimo metodo <code>doAddComment</code>, ki jo moramo še implementirati glede na shemo podatkov komentarja v modelu <code>api/models/locations.js</code> in imena vnosnih polj na obrazcu, ki ga bomo uporabili za vnos komentarjev.</p>
<p><code>api/models/locations.js</code></p>
<div class="sourceCode" id="cb497"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb497-1"><a href="Swagger.html#cb497-1" tabindex="-1"></a><span class="kw">const</span> commentSchema <span class="op">=</span> <span class="kw">new</span> mongoose<span class="op">.</span><span class="fu">Schema</span>({</span>
<span id="cb497-2"><a href="Swagger.html#cb497-2" tabindex="-1"></a>  <span class="dt">author</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="bu">String</span><span class="op">,</span> <span class="dt">required</span><span class="op">:</span> [<span class="kw">true</span><span class="op">,</span> <span class="st">&quot;Author is required!&quot;</span>] }<span class="op">,</span></span>
<span id="cb497-3"><a href="Swagger.html#cb497-3" tabindex="-1"></a>  <span class="dt">rating</span><span class="op">:</span> {</span>
<span id="cb497-4"><a href="Swagger.html#cb497-4" tabindex="-1"></a>    <span class="dt">type</span><span class="op">:</span> <span class="bu">Number</span><span class="op">,</span></span>
<span id="cb497-5"><a href="Swagger.html#cb497-5" tabindex="-1"></a>    <span class="dt">required</span><span class="op">:</span> [<span class="kw">true</span><span class="op">,</span> <span class="st">&quot;Rating is required!&quot;</span>]<span class="op">,</span></span>
<span id="cb497-6"><a href="Swagger.html#cb497-6" tabindex="-1"></a>    <span class="dt">min</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb497-7"><a href="Swagger.html#cb497-7" tabindex="-1"></a>    <span class="dt">max</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb497-8"><a href="Swagger.html#cb497-8" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb497-9"><a href="Swagger.html#cb497-9" tabindex="-1"></a>  <span class="dt">comment</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="bu">String</span><span class="op">,</span> <span class="dt">required</span><span class="op">:</span> [<span class="kw">true</span><span class="op">,</span> <span class="st">&quot;Comment is required!&quot;</span>] }<span class="op">,</span></span>
<span id="cb497-10"><a href="Swagger.html#cb497-10" tabindex="-1"></a>  <span class="dt">createdOn</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="bu">Date</span><span class="op">,</span> <span class="cf">default</span><span class="op">:</span> <span class="bu">Date</span><span class="op">.</span><span class="at">now</span> }<span class="op">,</span></span>
<span id="cb497-11"><a href="Swagger.html#cb497-11" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#dodajanje-odvisnih-dokumentov-v-mongodb code.javascript:eq(0)").markRegExp(/async /, options_dodaj);
    $("#dodajanje-odvisnih-dokumentov-v-mongodb code.javascript:eq(0)").markRegExp(/\s+?const[\s\S]+?doAddComment.+/, options_dodaj);
    $("#dodajanje-odvisnih-dokumentov-v-mongodb code.javascript:eq(0)").markRegExp(/\s+?res\.status\(201\).+/, options_izbrisi);
    $("#dodajanje-odvisnih-dokumentov-v-mongodb code.javascript:eq(0)").markRegExp(/\s+?} catch[\s\S]+?}[\s\S]+?}/, options_dodaj);
    $("#dodajanje-odvisnih-dokumentov-v-mongodb code.javascript:eq(0)").markRegExp(/^\s{2}}$/m, options_dodaj);
    $("#dodajanje-odvisnih-dokumentov-v-mongodb code.javascript:eq(0)").markRegExp(/^\s{2}} else {[\s\S]+?\s{2}}$/m, options_dodaj);
    $("#dodajanje-odvisnih-dokumentov-v-mongodb code.javascript:eq(1)").markRegExp(/(author|rating|comment):/, options_dodaj);
  });
</script>
<div id="dodajanje-komentarja" class="section level4 hasAnchor" number="7.2.2.1">
<h4><span class="header-section-number">7.2.2.1</span> Dodajanje komentarja<a href="Swagger.html#dodajanje-komentarja" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Pri dodajanju komentarja najprej pripravimo JavaScript objekt komentarja, ki je skladen s shemo, kjer podatki prihajajo iz vnosnega obrazca. Komentarje dodamo na konec polja <code>comments</code> obstoječemu dokumentu <code>location</code> z metodo <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/push"><i class="fa-brands fa-node-js"></i><code>push</code></a>. Nato lokacijo shranimo v podatkovno bazo, kjer moramo še najprej poskrbeti za posodobitev povprečne ocene lokacije in vračanje ravno dodanega komentarja (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice"><i class="fa-brands fa-node-js" style="padding-left:2px"></i><code>slice(-1)</code></a> vrne zadnji element in <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/pop"><i class="fa-brands fa-node-js"></i><code>pop()</code></a> element odstrani ter ga vrne) v odgovoru zahteve.</p>
<p><code>api/controllers/comments.js</code></p>
<div class="sourceCode" id="cb498"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb498-1"><a href="Swagger.html#cb498-1" tabindex="-1"></a><span class="kw">const</span> doAddComment <span class="op">=</span> <span class="kw">async</span> (req<span class="op">,</span> res<span class="op">,</span> location) <span class="kw">=&gt;</span> {</span>
<span id="cb498-2"><a href="Swagger.html#cb498-2" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span>location)</span>
<span id="cb498-3"><a href="Swagger.html#cb498-3" tabindex="-1"></a>    res<span class="op">.</span><span class="fu">status</span>(<span class="dv">404</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb498-4"><a href="Swagger.html#cb498-4" tabindex="-1"></a>      <span class="dt">message</span><span class="op">:</span> <span class="vs">`Location with id &#39;</span><span class="sc">${</span>req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">locationId</span><span class="sc">}</span><span class="vs">&#39; not found.`</span><span class="op">,</span></span>
<span id="cb498-5"><a href="Swagger.html#cb498-5" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb498-6"><a href="Swagger.html#cb498-6" tabindex="-1"></a>  <span class="cf">else</span> <span class="cf">if</span> (<span class="op">!</span>req<span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">author</span> <span class="op">||</span> <span class="op">!</span>req<span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">rating</span> <span class="op">||</span> <span class="op">!</span>req<span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">comment</span>)</span>
<span id="cb498-7"><a href="Swagger.html#cb498-7" tabindex="-1"></a>    res<span class="op">.</span><span class="fu">status</span>(<span class="dv">400</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb498-8"><a href="Swagger.html#cb498-8" tabindex="-1"></a>      <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;Body parameters &#39;author&#39;, &#39;rating&#39; and &#39;comment&#39; are required.&quot;</span><span class="op">,</span></span>
<span id="cb498-9"><a href="Swagger.html#cb498-9" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb498-10"><a href="Swagger.html#cb498-10" tabindex="-1"></a>  <span class="cf">else</span> {</span>
<span id="cb498-11"><a href="Swagger.html#cb498-11" tabindex="-1"></a>    location<span class="op">.</span><span class="at">comments</span><span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb498-12"><a href="Swagger.html#cb498-12" tabindex="-1"></a>      <span class="dt">author</span><span class="op">:</span> req<span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">author</span><span class="op">,</span></span>
<span id="cb498-13"><a href="Swagger.html#cb498-13" tabindex="-1"></a>      <span class="dt">rating</span><span class="op">:</span> req<span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">rating</span><span class="op">,</span></span>
<span id="cb498-14"><a href="Swagger.html#cb498-14" tabindex="-1"></a>      <span class="dt">comment</span><span class="op">:</span> req<span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">comment</span><span class="op">,</span></span>
<span id="cb498-15"><a href="Swagger.html#cb498-15" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb498-16"><a href="Swagger.html#cb498-16" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb498-17"><a href="Swagger.html#cb498-17" tabindex="-1"></a>      <span class="cf">await</span> location<span class="op">.</span><span class="fu">save</span>()<span class="op">;</span></span>
<span id="cb498-18"><a href="Swagger.html#cb498-18" tabindex="-1"></a>      <span class="cf">await</span> <span class="fu">updateAverageRating</span>(location<span class="op">.</span><span class="at">_id</span>)<span class="op">;</span></span>
<span id="cb498-19"><a href="Swagger.html#cb498-19" tabindex="-1"></a>      res<span class="op">.</span><span class="fu">status</span>(<span class="dv">201</span>)<span class="op">.</span><span class="fu">json</span>(location<span class="op">.</span><span class="at">comments</span><span class="op">.</span><span class="fu">slice</span>(<span class="op">-</span><span class="dv">1</span>)<span class="op">.</span><span class="fu">pop</span>())<span class="op">;</span></span>
<span id="cb498-20"><a href="Swagger.html#cb498-20" tabindex="-1"></a>    } <span class="cf">catch</span> (err) {</span>
<span id="cb498-21"><a href="Swagger.html#cb498-21" tabindex="-1"></a>      res<span class="op">.</span><span class="fu">status</span>(<span class="dv">500</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">message</span><span class="op">:</span> err<span class="op">.</span><span class="at">message</span> })<span class="op">;</span></span>
<span id="cb498-22"><a href="Swagger.html#cb498-22" tabindex="-1"></a>    }</span>
<span id="cb498-23"><a href="Swagger.html#cb498-23" tabindex="-1"></a>  }</span>
<span id="cb498-24"><a href="Swagger.html#cb498-24" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#dodajanje-komentarja code.javascript").markRegExp(/.+/, options_dodaj);
  });
</script>
</div>
<div id="posodobitev-povprečne-ocene-lokacije" class="section level4 hasAnchor" number="7.2.2.2">
<h4><span class="header-section-number">7.2.2.2</span> Posodobitev povprečne ocene lokacije<a href="Swagger.html#posodobitev-povprečne-ocene-lokacije" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Po vsakem dodajanju novega komentarja je treba na ravni lokacije posodobiti tudi povprečno oceno lokacije v okviru metode <code>updateAverageRating</code>, kjer najprej poiščemo ustrezno lokacijo, izberemo potrebne podatke in v primeru uspešnega odgovora podatkovne baze kličemo metodo <code>doSetAverageRating</code>, kjer bomo dejansko izvedli izračun povprečne ocene in jo shranili v podatkovno bazo.</p>
<p><code>api/controllers/comments.js</code></p>
<div class="sourceCode" id="cb499"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb499-1"><a href="Swagger.html#cb499-1" tabindex="-1"></a><span class="kw">const</span> updateAverageRating <span class="op">=</span> <span class="kw">async</span> (locationId) <span class="kw">=&gt;</span> {</span>
<span id="cb499-2"><a href="Swagger.html#cb499-2" tabindex="-1"></a>  <span class="cf">try</span> {</span>
<span id="cb499-3"><a href="Swagger.html#cb499-3" tabindex="-1"></a>    <span class="kw">let</span> location <span class="op">=</span> <span class="cf">await</span> <span class="bu">Location</span><span class="op">.</span><span class="fu">findById</span>(locationId)</span>
<span id="cb499-4"><a href="Swagger.html#cb499-4" tabindex="-1"></a>      <span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;rating comments&quot;</span>)</span>
<span id="cb499-5"><a href="Swagger.html#cb499-5" tabindex="-1"></a>      <span class="op">.</span><span class="fu">exec</span>()<span class="op">;</span></span>
<span id="cb499-6"><a href="Swagger.html#cb499-6" tabindex="-1"></a>    <span class="fu">doSetAverageRating</span>(location)<span class="op">;</span></span>
<span id="cb499-7"><a href="Swagger.html#cb499-7" tabindex="-1"></a>  } <span class="cf">catch</span> (err) {}</span>
<span id="cb499-8"><a href="Swagger.html#cb499-8" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<p>Pri izračunu povprečne ocene lokacije se sprehodimo čez vse komentarje, izračunamo povprečno oceno ter jo shranimo v nadrejeni dokument lokacije.</p>
<p><code>api/controllers/comments.js</code></p>
<div class="sourceCode" id="cb500"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb500-1"><a href="Swagger.html#cb500-1" tabindex="-1"></a><span class="kw">const</span> doSetAverageRating <span class="op">=</span> <span class="kw">async</span> (location) <span class="kw">=&gt;</span> {</span>
<span id="cb500-2"><a href="Swagger.html#cb500-2" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span>location<span class="op">.</span><span class="at">comments</span> <span class="op">||</span> location<span class="op">.</span><span class="at">comments</span><span class="op">.</span><span class="at">length</span> <span class="op">==</span> <span class="dv">0</span>) location<span class="op">.</span><span class="at">rating</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb500-3"><a href="Swagger.html#cb500-3" tabindex="-1"></a>  <span class="cf">else</span> {</span>
<span id="cb500-4"><a href="Swagger.html#cb500-4" tabindex="-1"></a>    <span class="kw">const</span> count <span class="op">=</span> location<span class="op">.</span><span class="at">comments</span><span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb500-5"><a href="Swagger.html#cb500-5" tabindex="-1"></a>    <span class="kw">const</span> total <span class="op">=</span> location<span class="op">.</span><span class="at">comments</span><span class="op">.</span><span class="fu">reduce</span>((acc<span class="op">,</span> { rating }) <span class="kw">=&gt;</span> {</span>
<span id="cb500-6"><a href="Swagger.html#cb500-6" tabindex="-1"></a>      <span class="cf">return</span> acc <span class="op">+</span> rating<span class="op">;</span></span>
<span id="cb500-7"><a href="Swagger.html#cb500-7" tabindex="-1"></a>    }<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb500-8"><a href="Swagger.html#cb500-8" tabindex="-1"></a>    location<span class="op">.</span><span class="at">rating</span> <span class="op">=</span> <span class="pp">parseInt</span>(total <span class="op">/</span> count<span class="op">,</span> <span class="dv">10</span>)<span class="op">;</span></span>
<span id="cb500-9"><a href="Swagger.html#cb500-9" tabindex="-1"></a>  }</span>
<span id="cb500-10"><a href="Swagger.html#cb500-10" tabindex="-1"></a>  <span class="cf">try</span> {</span>
<span id="cb500-11"><a href="Swagger.html#cb500-11" tabindex="-1"></a>    <span class="cf">await</span> location<span class="op">.</span><span class="fu">save</span>()<span class="op">;</span></span>
<span id="cb500-12"><a href="Swagger.html#cb500-12" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`Average rating updated to </span><span class="sc">${</span>location<span class="op">.</span><span class="at">rating</span><span class="sc">}</span><span class="vs">.`</span>)<span class="op">;</span></span>
<span id="cb500-13"><a href="Swagger.html#cb500-13" tabindex="-1"></a>  } <span class="cf">catch</span> (err) {</span>
<span id="cb500-14"><a href="Swagger.html#cb500-14" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(err)<span class="op">;</span></span>
<span id="cb500-15"><a href="Swagger.html#cb500-15" tabindex="-1"></a>  }</span>
<span id="cb500-16"><a href="Swagger.html#cb500-16" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<p>Opazimo lahko, da naša metoda <code>doSetAverageRating</code> ne vrača nobenega JSON odgovora, ker smo ga predhodno že poslali.</p>
<script>
  $(document).ready(function() {
    $("#posodobitev-povprečne-ocene-lokacije code.javascript").markRegExp(/.+/, options_dodaj);
  });
</script>
</div>
<div id="POST-OpenAPI" class="section level4 hasAnchor" number="7.2.2.3">
<h4><span class="header-section-number">7.2.2.3</span> OpenAPI dokumentacija<a href="Swagger.html#POST-OpenAPI" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Podobno, kot smo dodali OpenAPI dokumentacijo pri GET metodah, jo bomo tudi pri tej POST metodi, kjer je treba dodatno opredeliti še telo zahteve, ki ga pri GET zahtevah ni bilo.</p>
<p><code>api/controllers/comments.js</code></p>
<div class="sourceCode" id="cb501"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb501-1"><a href="Swagger.html#cb501-1" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb501-2"><a href="Swagger.html#cb501-2" tabindex="-1"></a><span class="co"> * </span><span class="an">@openapi</span></span>
<span id="cb501-3"><a href="Swagger.html#cb501-3" tabindex="-1"></a><span class="co"> * /locations/{locationId}/comments:</span></span>
<span id="cb501-4"><a href="Swagger.html#cb501-4" tabindex="-1"></a><span class="co"> *  post:</span></span>
<span id="cb501-5"><a href="Swagger.html#cb501-5" tabindex="-1"></a><span class="co"> *   summary: Add a new comment to a given location.</span></span>
<span id="cb501-6"><a href="Swagger.html#cb501-6" tabindex="-1"></a><span class="co"> *   description: Add a new **comment** with author&#39;s name, rating and comment&#39;s content to a location with given unique identifier.</span></span>
<span id="cb501-7"><a href="Swagger.html#cb501-7" tabindex="-1"></a><span class="co"> *   tags: [Comments]</span></span>
<span id="cb501-8"><a href="Swagger.html#cb501-8" tabindex="-1"></a><span class="co"> *   parameters:</span></span>
<span id="cb501-9"><a href="Swagger.html#cb501-9" tabindex="-1"></a><span class="co"> *    - name: locationId</span></span>
<span id="cb501-10"><a href="Swagger.html#cb501-10" tabindex="-1"></a><span class="co"> *      in: path</span></span>
<span id="cb501-11"><a href="Swagger.html#cb501-11" tabindex="-1"></a><span class="co"> *      schema:</span></span>
<span id="cb501-12"><a href="Swagger.html#cb501-12" tabindex="-1"></a><span class="co"> *       type: string</span></span>
<span id="cb501-13"><a href="Swagger.html#cb501-13" tabindex="-1"></a><span class="co"> *       pattern: &#39;^[a-fA-F</span><span class="an">\d]{24}$&#39;</span></span>
<span id="cb501-14"><a href="Swagger.html#cb501-14" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">unique identifier</span><span class="kw">&lt;/b&gt;</span><span class="co"> of location</span></span>
<span id="cb501-15"><a href="Swagger.html#cb501-15" tabindex="-1"></a><span class="co"> *      required: true</span></span>
<span id="cb501-16"><a href="Swagger.html#cb501-16" tabindex="-1"></a><span class="co"> *      example: 635a62f5dc5d7968e6846914</span></span>
<span id="cb501-17"><a href="Swagger.html#cb501-17" tabindex="-1"></a><span class="co"> *   requestBody:</span></span>
<span id="cb501-18"><a href="Swagger.html#cb501-18" tabindex="-1"></a><span class="co"> *    description: Comment&#39;s author, rating and content.</span></span>
<span id="cb501-19"><a href="Swagger.html#cb501-19" tabindex="-1"></a><span class="co"> *    required: true</span></span>
<span id="cb501-20"><a href="Swagger.html#cb501-20" tabindex="-1"></a><span class="co"> *    content:</span></span>
<span id="cb501-21"><a href="Swagger.html#cb501-21" tabindex="-1"></a><span class="co"> *     application/x-www-form-urlencoded:</span></span>
<span id="cb501-22"><a href="Swagger.html#cb501-22" tabindex="-1"></a><span class="co"> *      schema:</span></span>
<span id="cb501-23"><a href="Swagger.html#cb501-23" tabindex="-1"></a><span class="co"> *       type: object</span></span>
<span id="cb501-24"><a href="Swagger.html#cb501-24" tabindex="-1"></a><span class="co"> *       properties:</span></span>
<span id="cb501-25"><a href="Swagger.html#cb501-25" tabindex="-1"></a><span class="co"> *        author:</span></span>
<span id="cb501-26"><a href="Swagger.html#cb501-26" tabindex="-1"></a><span class="co"> *         type: string</span></span>
<span id="cb501-27"><a href="Swagger.html#cb501-27" tabindex="-1"></a><span class="co"> *         description: </span><span class="kw">&lt;b&gt;</span><span class="co">author</span><span class="kw">&lt;/b&gt;</span><span class="co"> of comment</span></span>
<span id="cb501-28"><a href="Swagger.html#cb501-28" tabindex="-1"></a><span class="co"> *         example: Dejan Lavbič</span></span>
<span id="cb501-29"><a href="Swagger.html#cb501-29" tabindex="-1"></a><span class="co"> *        rating:</span></span>
<span id="cb501-30"><a href="Swagger.html#cb501-30" tabindex="-1"></a><span class="co"> *         type: integer</span></span>
<span id="cb501-31"><a href="Swagger.html#cb501-31" tabindex="-1"></a><span class="co"> *         description: </span><span class="kw">&lt;b&gt;</span><span class="co">rating</span><span class="kw">&lt;/b&gt;</span><span class="co"> of comment</span></span>
<span id="cb501-32"><a href="Swagger.html#cb501-32" tabindex="-1"></a><span class="co"> *         minimum: 1</span></span>
<span id="cb501-33"><a href="Swagger.html#cb501-33" tabindex="-1"></a><span class="co"> *         maximum: 5</span></span>
<span id="cb501-34"><a href="Swagger.html#cb501-34" tabindex="-1"></a><span class="co"> *         enum: [1, 2, 3, 4, 5]</span></span>
<span id="cb501-35"><a href="Swagger.html#cb501-35" tabindex="-1"></a><span class="co"> *         example: 3</span></span>
<span id="cb501-36"><a href="Swagger.html#cb501-36" tabindex="-1"></a><span class="co"> *        comment:</span></span>
<span id="cb501-37"><a href="Swagger.html#cb501-37" tabindex="-1"></a><span class="co"> *         type: string</span></span>
<span id="cb501-38"><a href="Swagger.html#cb501-38" tabindex="-1"></a><span class="co"> *         description: </span><span class="kw">&lt;b&gt;</span><span class="co">content</span><span class="kw">&lt;/b&gt;</span><span class="co"> of comment</span></span>
<span id="cb501-39"><a href="Swagger.html#cb501-39" tabindex="-1"></a><span class="co"> *         example: Srednja žalost.</span></span>
<span id="cb501-40"><a href="Swagger.html#cb501-40" tabindex="-1"></a><span class="co"> *       required:</span></span>
<span id="cb501-41"><a href="Swagger.html#cb501-41" tabindex="-1"></a><span class="co"> *        - author</span></span>
<span id="cb501-42"><a href="Swagger.html#cb501-42" tabindex="-1"></a><span class="co"> *        - rating</span></span>
<span id="cb501-43"><a href="Swagger.html#cb501-43" tabindex="-1"></a><span class="co"> *        - comment</span></span>
<span id="cb501-44"><a href="Swagger.html#cb501-44" tabindex="-1"></a><span class="co"> *   responses:</span></span>
<span id="cb501-45"><a href="Swagger.html#cb501-45" tabindex="-1"></a><span class="co"> *    &#39;201&#39;:</span></span>
<span id="cb501-46"><a href="Swagger.html#cb501-46" tabindex="-1"></a><span class="co"> *     description: </span><span class="kw">&lt;b&gt;</span><span class="co">Created</span><span class="kw">&lt;/b&gt;</span><span class="co">, with comment details.</span></span>
<span id="cb501-47"><a href="Swagger.html#cb501-47" tabindex="-1"></a><span class="co"> *     content:</span></span>
<span id="cb501-48"><a href="Swagger.html#cb501-48" tabindex="-1"></a><span class="co"> *      application/json:</span></span>
<span id="cb501-49"><a href="Swagger.html#cb501-49" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb501-50"><a href="Swagger.html#cb501-50" tabindex="-1"></a><span class="co"> *        $ref: &#39;#/components/schemas/Comment&#39;</span></span>
<span id="cb501-51"><a href="Swagger.html#cb501-51" tabindex="-1"></a><span class="co"> *    &#39;400&#39;:</span></span>
<span id="cb501-52"><a href="Swagger.html#cb501-52" tabindex="-1"></a><span class="co"> *     description: </span><span class="kw">&lt;b&gt;</span><span class="co">Bad Request</span><span class="kw">&lt;/b&gt;</span><span class="co">, with error message.</span></span>
<span id="cb501-53"><a href="Swagger.html#cb501-53" tabindex="-1"></a><span class="co"> *     content:</span></span>
<span id="cb501-54"><a href="Swagger.html#cb501-54" tabindex="-1"></a><span class="co"> *      application/json:</span></span>
<span id="cb501-55"><a href="Swagger.html#cb501-55" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb501-56"><a href="Swagger.html#cb501-56" tabindex="-1"></a><span class="co"> *        $ref: &#39;#/components/schemas/ErrorMessage&#39;</span></span>
<span id="cb501-57"><a href="Swagger.html#cb501-57" tabindex="-1"></a><span class="co"> *       examples:</span></span>
<span id="cb501-58"><a href="Swagger.html#cb501-58" tabindex="-1"></a><span class="co"> *        locationId is required:</span></span>
<span id="cb501-59"><a href="Swagger.html#cb501-59" tabindex="-1"></a><span class="co"> *         value:</span></span>
<span id="cb501-60"><a href="Swagger.html#cb501-60" tabindex="-1"></a><span class="co"> *          message: Path parameter &#39;locationId&#39; is required.</span></span>
<span id="cb501-61"><a href="Swagger.html#cb501-61" tabindex="-1"></a><span class="co"> *        author, rating and comment are required:</span></span>
<span id="cb501-62"><a href="Swagger.html#cb501-62" tabindex="-1"></a><span class="co"> *         value:</span></span>
<span id="cb501-63"><a href="Swagger.html#cb501-63" tabindex="-1"></a><span class="co"> *          message: Body parameters &#39;author&#39;, &#39;rating&#39; and &#39;comment&#39; are required.</span></span>
<span id="cb501-64"><a href="Swagger.html#cb501-64" tabindex="-1"></a><span class="co"> *    &#39;404&#39;:</span></span>
<span id="cb501-65"><a href="Swagger.html#cb501-65" tabindex="-1"></a><span class="co"> *     description: </span><span class="kw">&lt;b&gt;</span><span class="co">Not Found</span><span class="kw">&lt;/b&gt;</span><span class="co">, with error message.</span></span>
<span id="cb501-66"><a href="Swagger.html#cb501-66" tabindex="-1"></a><span class="co"> *     content:</span></span>
<span id="cb501-67"><a href="Swagger.html#cb501-67" tabindex="-1"></a><span class="co"> *      application/json:</span></span>
<span id="cb501-68"><a href="Swagger.html#cb501-68" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb501-69"><a href="Swagger.html#cb501-69" tabindex="-1"></a><span class="co"> *        $ref: &#39;#/components/schemas/ErrorMessage&#39;</span></span>
<span id="cb501-70"><a href="Swagger.html#cb501-70" tabindex="-1"></a><span class="co"> *       example:</span></span>
<span id="cb501-71"><a href="Swagger.html#cb501-71" tabindex="-1"></a><span class="co"> *        message: Location with id &#39;735a62f5dc5d7968e68467e3&#39; not found.</span></span>
<span id="cb501-72"><a href="Swagger.html#cb501-72" tabindex="-1"></a><span class="co"> *    &#39;500&#39;:</span></span>
<span id="cb501-73"><a href="Swagger.html#cb501-73" tabindex="-1"></a><span class="co"> *     description: </span><span class="kw">&lt;b&gt;</span><span class="co">Internal Server Error</span><span class="kw">&lt;/b&gt;</span><span class="co">, with error message.</span></span>
<span id="cb501-74"><a href="Swagger.html#cb501-74" tabindex="-1"></a><span class="co"> *     content:</span></span>
<span id="cb501-75"><a href="Swagger.html#cb501-75" tabindex="-1"></a><span class="co"> *      application/json:</span></span>
<span id="cb501-76"><a href="Swagger.html#cb501-76" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb501-77"><a href="Swagger.html#cb501-77" tabindex="-1"></a><span class="co"> *        $ref: &#39;#/components/schemas/ErrorMessage&#39;</span></span>
<span id="cb501-78"><a href="Swagger.html#cb501-78" tabindex="-1"></a><span class="co"> *       example:</span></span>
<span id="cb501-79"><a href="Swagger.html#cb501-79" tabindex="-1"></a><span class="co"> *        message: Database not available.</span></span>
<span id="cb501-80"><a href="Swagger.html#cb501-80" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb501-81"><a href="Swagger.html#cb501-81" tabindex="-1"></a><span class="kw">const</span> commentsCreate <span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb501-82"><a href="Swagger.html#cb501-82" tabindex="-1"></a>  <span class="kw">const</span> locationId <span class="op">=</span> req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">locationId</span><span class="op">;</span></span>
<span id="cb501-83"><a href="Swagger.html#cb501-83" tabindex="-1"></a>  <span class="cf">if</span> (locationId) {</span>
<span id="cb501-84"><a href="Swagger.html#cb501-84" tabindex="-1"></a>    <span class="bu">Location</span><span class="op">.</span><span class="fu">findById</span>(locationId)</span>
<span id="cb501-85"><a href="Swagger.html#cb501-85" tabindex="-1"></a>      <span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;comments&quot;</span>)</span>
<span id="cb501-86"><a href="Swagger.html#cb501-86" tabindex="-1"></a>      <span class="op">.</span><span class="fu">exec</span>((err<span class="op">,</span> location) <span class="kw">=&gt;</span> {</span>
<span id="cb501-87"><a href="Swagger.html#cb501-87" tabindex="-1"></a>        <span class="cf">if</span> (err) res<span class="op">.</span><span class="fu">status</span>(<span class="dv">500</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">message</span><span class="op">:</span> err<span class="op">.</span><span class="at">message</span> })<span class="op">;</span></span>
<span id="cb501-88"><a href="Swagger.html#cb501-88" tabindex="-1"></a>        <span class="cf">else</span> <span class="fu">doAddComment</span>(req<span class="op">,</span> res<span class="op">,</span> location)<span class="op">;</span></span>
<span id="cb501-89"><a href="Swagger.html#cb501-89" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb501-90"><a href="Swagger.html#cb501-90" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb501-91"><a href="Swagger.html#cb501-91" tabindex="-1"></a>    res<span class="op">.</span><span class="fu">status</span>(<span class="dv">400</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb501-92"><a href="Swagger.html#cb501-92" tabindex="-1"></a>      <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;Path parameter &#39;locationId&#39; is required.&quot;</span><span class="op">,</span></span>
<span id="cb501-93"><a href="Swagger.html#cb501-93" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb501-94"><a href="Swagger.html#cb501-94" tabindex="-1"></a>  }</span>
<span id="cb501-95"><a href="Swagger.html#cb501-95" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#POST-OpenAPI code.javascript:eq(0)").markRegExp(/\/\*\*[\s\S]+?\*\//, options_dodaj);
  });
</script>
</div>
<div id="testiranje-dodajanja-novega-komentarja" class="section level4 hasAnchor" number="7.2.2.4">
<h4><span class="header-section-number">7.2.2.4</span> Testiranje dodajanja novega komentarja<a href="Swagger.html#testiranje-dodajanja-novega-komentarja" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Komentar bomo dodali obstoječi lokaciji <strong>Ljubljana - Viško pokopališče</strong>. Pred začetkom testiranja izbrišemo morebitne obstoječe komentarje omenjene lokacije in povprečno oceno lokacije ter nato dodamo nov komentar preko REST API klica.</p>
<p>Zaradi enostavnejšega testiranja bomo pridobili enolični identifikator zgoraj omenjene lokacije in ga shranili v okoljsko spremenljivko <code>LOCATION_ID</code>, saj ga bomo v nadaljevanju večkrat potrebovali.</p>
<blockquote>
<p><strong>Opomba</strong>: Pri klicu uporabimo <code>bash</code> ukaze za pridobitev ID-ja lokacije, ki v takšni obliki v okolju Windows ne delujejo, če nimate nameščene podpore za <a href="https://www.gnu.org/software/grep/manual/grep.html"><i class="fa-solid fa-terminal"></i><code>grep</code></a> in <a href="https://www.gnu.org/software/sed/manual/sed.html"><i class="fa-solid fa-terminal"></i><code>sed</code></a>. V vsakem primeru lahko spremenljivko <code>LOCATION_ID</code> nastavite tudi ročno.</p>
</blockquote>
<p><code>Odjemalec</code></p>
<div class="sourceCode" id="cb502"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb502-1"><a href="Swagger.html#cb502-1" tabindex="-1"></a><span class="ex">$</span> LOCATION_ID=<span class="va">$(</span><span class="ex">docker</span> exec <span class="at">-it</span> sp-mongo-db bash <span class="at">-c</span> <span class="st">&quot;mongosh Demo --eval </span><span class="dt">\</span></span>
<span id="cb502-2"><a href="Swagger.html#cb502-2" tabindex="-1"></a><span class="st">    &#39;db.Locations.findOne(</span><span class="dt">\</span></span>
<span id="cb502-3"><a href="Swagger.html#cb502-3" tabindex="-1"></a><span class="st">      {</span><span class="dt">\&quot;</span><span class="st">name</span><span class="dt">\&quot;</span><span class="st">: </span><span class="dt">\&quot;</span><span class="st">Ljubljana - Viško pokopališče</span><span class="dt">\&quot;</span><span class="st">}, { _id: 1 })&#39;&quot;</span><span class="dt">\</span></span>
<span id="cb502-4"><a href="Swagger.html#cb502-4" tabindex="-1"></a>    <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;ObjectId&#39;</span> <span class="dt">\</span></span>
<span id="cb502-5"><a href="Swagger.html#cb502-5" tabindex="-1"></a>    <span class="kw">|</span> <span class="fu">sed</span> <span class="st">&#39;s/.*&quot;\(.*\)&quot;.*/\1/&#39;</span><span class="va">)</span></span>
<span id="cb502-6"><a href="Swagger.html#cb502-6" tabindex="-1"></a><span class="ex">$</span> echo <span class="va">$LOCATION_ID</span></span>
<span id="cb502-7"><a href="Swagger.html#cb502-7" tabindex="-1"></a><span class="ex">635a62f5dc5d7968e6846914</span></span></code></pre></div>
<div class="sourceCode" id="cb503"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb503-1"><a href="Swagger.html#cb503-1" tabindex="-1"></a><span class="ex">$</span> docker exec <span class="at">-it</span> sp-mongo-db bash <span class="at">-c</span> <span class="st">&quot;mongosh Demo --eval </span><span class="dt">\</span></span>
<span id="cb503-2"><a href="Swagger.html#cb503-2" tabindex="-1"></a><span class="st">    &#39;db.Locations.updateOne(</span><span class="dt">\</span></span>
<span id="cb503-3"><a href="Swagger.html#cb503-3" tabindex="-1"></a><span class="st">      {</span><span class="dt">\&quot;</span><span class="st">name</span><span class="dt">\&quot;</span><span class="st">: </span><span class="dt">\&quot;</span><span class="st">Ljubljana - Viško pokopališče</span><span class="dt">\&quot;</span><span class="st">}, </span><span class="dt">\</span></span>
<span id="cb503-4"><a href="Swagger.html#cb503-4" tabindex="-1"></a><span class="st">      { </span><span class="dt">\$</span><span class="st">set: { comments: [] }, </span><span class="dt">\$</span><span class="st">unset: { rating: </span><span class="dt">\&quot;\&quot;</span><span class="st"> }} </span><span class="dt">\</span></span>
<span id="cb503-5"><a href="Swagger.html#cb503-5" tabindex="-1"></a><span class="st">    )&#39;&quot;</span></span>
<span id="cb503-6"><a href="Swagger.html#cb503-6" tabindex="-1"></a><span class="ex">$</span> curl <span class="at">-X</span> POST <span class="dt">\</span></span>
<span id="cb503-7"><a href="Swagger.html#cb503-7" tabindex="-1"></a>       <span class="st">&quot;http://localhost:3000/api/locations/</span><span class="va">${LOCATION_ID}</span><span class="st">/comments&quot;</span> <span class="dt">\</span></span>
<span id="cb503-8"><a href="Swagger.html#cb503-8" tabindex="-1"></a>       <span class="at">-H</span> <span class="st">&quot;Content-Type: application/x-www-form-urlencoded&quot;</span> <span class="dt">\</span></span>
<span id="cb503-9"><a href="Swagger.html#cb503-9" tabindex="-1"></a>       <span class="at">-d</span> <span class="st">&quot;author=Dejan%20Lavbi%C4%8D&amp;rating=3&amp;comment=Srednja%20%C5%BEalost.&quot;</span></span>
<span id="cb503-10"><a href="Swagger.html#cb503-10" tabindex="-1"></a><span class="kw">{</span></span>
<span id="cb503-11"><a href="Swagger.html#cb503-11" tabindex="-1"></a>  <span class="st">&quot;author&quot;</span><span class="ex">:</span> <span class="st">&quot;Dejan Lavbič&quot;</span>,</span>
<span id="cb503-12"><a href="Swagger.html#cb503-12" tabindex="-1"></a>  <span class="st">&quot;rating&quot;</span><span class="ex">:</span> 3,</span>
<span id="cb503-13"><a href="Swagger.html#cb503-13" tabindex="-1"></a>  <span class="st">&quot;comment&quot;</span><span class="ex">:</span> <span class="st">&quot;Srednja žalost.&quot;</span>,</span>
<span id="cb503-14"><a href="Swagger.html#cb503-14" tabindex="-1"></a>  <span class="st">&quot;_id&quot;</span><span class="ex">:</span> <span class="st">&quot;63629ef623624d18e30f3746&quot;</span>,</span>
<span id="cb503-15"><a href="Swagger.html#cb503-15" tabindex="-1"></a>  <span class="st">&quot;createdOn&quot;</span><span class="ex">:</span> <span class="st">&quot;2022-11-02T16:46:46.523Z&quot;</span></span>
<span id="cb503-16"><a href="Swagger.html#cb503-16" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<p>Ko dodamo 1. komentar z oceno <span class="math inline">\(3\)</span>, kot je prikazano v zgornjem primeru, je izračun povprečne ocene enostaven, saj povprečna ocena preprosto postane ocena ravno dodanega komentarja. V našem primeru je povprečna ocena lokacije v 1. koraku <span class="math inline">\(3\)</span>, kar se izpiše v konzoli strežnika.</p>
<p><code>Strežnik</code></p>
<div class="sourceCode" id="cb504"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb504-1"><a href="Swagger.html#cb504-1" tabindex="-1"></a><span class="ex">Average</span> rating updated to 3.</span></code></pre></div>
<p>Po <strong>dodajanju 2. komentarja</strong> z oceno <span class="math inline">\(5\)</span>, kot je prikazano v naslednjem primeru, se zopet izvede izračun povprečne ocene in rezultat <span class="math inline">\(4\)</span> se izpiše v konzoli strežnika.</p>
<p><code>Odjemalec</code></p>
<div class="sourceCode" id="cb505"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb505-1"><a href="Swagger.html#cb505-1" tabindex="-1"></a><span class="ex">$</span> curl <span class="at">-X</span> POST <span class="dt">\</span></span>
<span id="cb505-2"><a href="Swagger.html#cb505-2" tabindex="-1"></a>       <span class="st">&quot;http://localhost:3000/api/locations/</span><span class="va">${LOCATION_ID}</span><span class="st">/comments&quot;</span> <span class="dt">\</span></span>
<span id="cb505-3"><a href="Swagger.html#cb505-3" tabindex="-1"></a>       <span class="at">-H</span> <span class="st">&quot;Content-Type: application/x-www-form-urlencoded&quot;</span> <span class="dt">\</span></span>
<span id="cb505-4"><a href="Swagger.html#cb505-4" tabindex="-1"></a>       <span class="at">-d</span> <span class="st">&quot;author=Jack%20the%20Ripper&amp;rating=5&amp;comment=My%20kind%20of%20place.&quot;</span></span>
<span id="cb505-5"><a href="Swagger.html#cb505-5" tabindex="-1"></a><span class="kw">{</span></span>
<span id="cb505-6"><a href="Swagger.html#cb505-6" tabindex="-1"></a>  <span class="st">&quot;author&quot;</span><span class="ex">:</span> <span class="st">&quot;Jack the Ripper&quot;</span>,</span>
<span id="cb505-7"><a href="Swagger.html#cb505-7" tabindex="-1"></a>  <span class="st">&quot;rating&quot;</span><span class="ex">:</span> 5,</span>
<span id="cb505-8"><a href="Swagger.html#cb505-8" tabindex="-1"></a>  <span class="st">&quot;comment&quot;</span><span class="ex">:</span> <span class="st">&quot;My kind of place.&quot;</span>,</span>
<span id="cb505-9"><a href="Swagger.html#cb505-9" tabindex="-1"></a>  <span class="st">&quot;_id&quot;</span><span class="ex">:</span> <span class="st">&quot;6362a62623624d18e30f3765&quot;</span>,</span>
<span id="cb505-10"><a href="Swagger.html#cb505-10" tabindex="-1"></a>  <span class="st">&quot;createdOn&quot;</span><span class="ex">:</span> <span class="st">&quot;2022-11-02T17:17:26.473Z&quot;</span></span>
<span id="cb505-11"><a href="Swagger.html#cb505-11" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<p><code>Strežnik</code></p>
<div class="sourceCode" id="cb506"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb506-1"><a href="Swagger.html#cb506-1" tabindex="-1"></a><span class="ex">Average</span> rating updated to 3.</span>
<span id="cb506-2"><a href="Swagger.html#cb506-2" tabindex="-1"></a><span class="ex">Average</span> rating updated to 4.</span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#testiranje-dodajanja-novega-komentarja code.bash:eq(0)").markRegExp(/LOCATION_ID=[\s\S]+?'\)/, options_dodaj);
    $("#testiranje-dodajanja-novega-komentarja code.bash:eq(0)").markRegExp(/635.+/, options_dodaj);
    $("#testiranje-dodajanja-novega-komentarja code.bash:eq(1)").markRegExp(/curl[\s\S]+?\."/, options_dodaj);
    $("#testiranje-dodajanja-novega-komentarja code.bash:eq(2)").markRegExp(/.+/, options_dodaj);
    $("#testiranje-dodajanja-novega-komentarja code.bash:eq(3)").markRegExp(/curl[\s\S]+?\."/, options_dodaj);
    $("#testiranje-dodajanja-novega-komentarja code.bash:eq(4)").markRegExp(/.+?4.+/, options_dodaj);
  });
</script>
</div>
</div>
</div>
<div id="put-metode-za-ažuriranje-podatkov-v-mongodb" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> PUT metode za ažuriranje podatkov v MongoDB<a href="Swagger.html#put-metode-za-ažuriranje-podatkov-v-mongodb" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Za ažuriranje podatkov v MongoDB podatkovni bazi bomo uporabljali <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/PUT"><i class="fa-solid fa-earth-europe"></i><strong>PUT</strong> metode</a>, ki v odgovoru vrnejo spremenjen dokument. V našem usmerjevalniku za REST API imamo opredeljeni 2 metodi, ki sta podrobneje povzeti v tabeli <a href="Swagger.html#tab:tabela-REST-PUT-metode">7.2</a>.</p>
<p>Ker v okviru naše aplikacije seznam lokacij vedno uvozimo iz registra kulturne dediščine, spreminjanja obstoječih lokacij preko REST API-ja ne bomo podprli, zato omenjene reference odstranimo, obdržimo zgolj <strong>metodo za spreminjanje komentarjev</strong>:</p>
<p><code>api/routes/api.js</code></p>
<div class="sourceCode" id="cb507"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb507-1"><a href="Swagger.html#cb507-1" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb507-2"><a href="Swagger.html#cb507-2" tabindex="-1"></a><span class="co"> * Locations</span></span>
<span id="cb507-3"><a href="Swagger.html#cb507-3" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb507-4"><a href="Swagger.html#cb507-4" tabindex="-1"></a>router<span class="op">.</span><span class="fu">get</span>(<span class="st">&quot;/locations/distance&quot;</span><span class="op">,</span> ctrlLocations<span class="op">.</span><span class="at">locationsListByDistance</span>)<span class="op">;</span></span>
<span id="cb507-5"><a href="Swagger.html#cb507-5" tabindex="-1"></a>router<span class="op">.</span><span class="fu">get</span>(<span class="st">&quot;/locations/search&quot;</span><span class="op">,</span> ctrlLocations<span class="op">.</span><span class="at">locationsListByMultiFilter</span>)<span class="op">;</span></span>
<span id="cb507-6"><a href="Swagger.html#cb507-6" tabindex="-1"></a>router<span class="op">.</span><span class="fu">get</span>(</span>
<span id="cb507-7"><a href="Swagger.html#cb507-7" tabindex="-1"></a>  <span class="st">&quot;/locations/codelist/:codelist&quot;</span><span class="op">,</span></span>
<span id="cb507-8"><a href="Swagger.html#cb507-8" tabindex="-1"></a>  ctrlLocations<span class="op">.</span><span class="at">locationsListCodelist</span></span>
<span id="cb507-9"><a href="Swagger.html#cb507-9" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb507-10"><a href="Swagger.html#cb507-10" tabindex="-1"></a>router<span class="op">.</span><span class="fu">get</span>(<span class="st">&quot;/locations/:locationId&quot;</span><span class="op">,</span> ctrlLocations<span class="op">.</span><span class="at">locationsReadOne</span>)<span class="op">;</span></span>
<span id="cb507-11"><a href="Swagger.html#cb507-11" tabindex="-1"></a>router<span class="op">.</span><span class="fu">put</span>(<span class="st">&quot;/locations/:locationId&quot;</span><span class="op">,</span> ctrlLocations<span class="op">.</span><span class="at">locationsUpdateOne</span>)<span class="op">;</span></span>
<span id="cb507-12"><a href="Swagger.html#cb507-12" tabindex="-1"></a>router<span class="op">.</span><span class="fu">delete</span>(<span class="st">&quot;/locations/:locationId&quot;</span><span class="op">,</span> ctrlLocations<span class="op">.</span><span class="at">locationsDeleteOne</span>)<span class="op">;</span></span>
<span id="cb507-13"><a href="Swagger.html#cb507-13" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb507-14"><a href="Swagger.html#cb507-14" tabindex="-1"></a><span class="co"> * Comments</span></span>
<span id="cb507-15"><a href="Swagger.html#cb507-15" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb507-16"><a href="Swagger.html#cb507-16" tabindex="-1"></a>router<span class="op">.</span><span class="fu">post</span>(<span class="st">&quot;/locations/:locationId/comments&quot;</span><span class="op">,</span> ctrlComments<span class="op">.</span><span class="at">commentsCreate</span>)<span class="op">;</span></span>
<span id="cb507-17"><a href="Swagger.html#cb507-17" tabindex="-1"></a>router<span class="op">.</span><span class="fu">get</span>(</span>
<span id="cb507-18"><a href="Swagger.html#cb507-18" tabindex="-1"></a>  <span class="st">&quot;/locations/:locationId/comments/:commentId&quot;</span><span class="op">,</span></span>
<span id="cb507-19"><a href="Swagger.html#cb507-19" tabindex="-1"></a>  ctrlComments<span class="op">.</span><span class="at">commentsReadOne</span></span>
<span id="cb507-20"><a href="Swagger.html#cb507-20" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb507-21"><a href="Swagger.html#cb507-21" tabindex="-1"></a>router<span class="op">.</span><span class="fu">put</span>(</span>
<span id="cb507-22"><a href="Swagger.html#cb507-22" tabindex="-1"></a>  <span class="st">&quot;/locations/:locationId/comments/:commentId&quot;</span><span class="op">,</span></span>
<span id="cb507-23"><a href="Swagger.html#cb507-23" tabindex="-1"></a>  ctrlComments<span class="op">.</span><span class="at">commentsUpdateOne</span></span>
<span id="cb507-24"><a href="Swagger.html#cb507-24" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb507-25"><a href="Swagger.html#cb507-25" tabindex="-1"></a>router<span class="op">.</span><span class="fu">delete</span>(</span>
<span id="cb507-26"><a href="Swagger.html#cb507-26" tabindex="-1"></a>  <span class="st">&quot;/locations/:locationId/comments/:commentId&quot;</span><span class="op">,</span></span>
<span id="cb507-27"><a href="Swagger.html#cb507-27" tabindex="-1"></a>  ctrlComments<span class="op">.</span><span class="at">commentsDeleteOne</span></span>
<span id="cb507-28"><a href="Swagger.html#cb507-28" tabindex="-1"></a>)<span class="op">;</span></span></code></pre></div>
<p><code>api/controllers/locations.js</code></p>
<div class="sourceCode" id="cb508"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb508-1"><a href="Swagger.html#cb508-1" tabindex="-1"></a><span class="kw">const</span> locationsListByDistance <span class="op">=</span> <span class="kw">async</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb508-2"><a href="Swagger.html#cb508-2" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb508-3"><a href="Swagger.html#cb508-3" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb508-4"><a href="Swagger.html#cb508-4" tabindex="-1"></a><span class="op">...</span></span>
<span id="cb508-5"><a href="Swagger.html#cb508-5" tabindex="-1"></a><span class="kw">const</span> locationsListByMultiFilter <span class="op">=</span> <span class="kw">async</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb508-6"><a href="Swagger.html#cb508-6" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb508-7"><a href="Swagger.html#cb508-7" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb508-8"><a href="Swagger.html#cb508-8" tabindex="-1"></a><span class="op">...</span></span>
<span id="cb508-9"><a href="Swagger.html#cb508-9" tabindex="-1"></a><span class="kw">const</span> locationsListCodelist <span class="op">=</span> <span class="kw">async</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb508-10"><a href="Swagger.html#cb508-10" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb508-11"><a href="Swagger.html#cb508-11" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb508-12"><a href="Swagger.html#cb508-12" tabindex="-1"></a><span class="op">...</span></span>
<span id="cb508-13"><a href="Swagger.html#cb508-13" tabindex="-1"></a><span class="kw">const</span> locationsReadOne <span class="op">=</span> <span class="kw">async</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb508-14"><a href="Swagger.html#cb508-14" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb508-15"><a href="Swagger.html#cb508-15" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb508-16"><a href="Swagger.html#cb508-16" tabindex="-1"></a><span class="kw">const</span> locationsUpdateOne <span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb508-17"><a href="Swagger.html#cb508-17" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">status</span>(<span class="dv">200</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">status</span><span class="op">:</span> <span class="st">&quot;OK&quot;</span> })<span class="op">;</span></span>
<span id="cb508-18"><a href="Swagger.html#cb508-18" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb508-19"><a href="Swagger.html#cb508-19" tabindex="-1"></a><span class="kw">const</span> locationsDeleteOne <span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb508-20"><a href="Swagger.html#cb508-20" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">status</span>(<span class="dv">204</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">status</span><span class="op">:</span> <span class="st">&quot;OK&quot;</span> })<span class="op">;</span></span>
<span id="cb508-21"><a href="Swagger.html#cb508-21" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb508-22"><a href="Swagger.html#cb508-22" tabindex="-1"></a>module<span class="op">.</span><span class="at">exports</span> <span class="op">=</span> {</span>
<span id="cb508-23"><a href="Swagger.html#cb508-23" tabindex="-1"></a>  locationsListByDistance<span class="op">,</span></span>
<span id="cb508-24"><a href="Swagger.html#cb508-24" tabindex="-1"></a>  locationsListByMultiFilter<span class="op">,</span></span>
<span id="cb508-25"><a href="Swagger.html#cb508-25" tabindex="-1"></a>  locationsListCodelist<span class="op">,</span></span>
<span id="cb508-26"><a href="Swagger.html#cb508-26" tabindex="-1"></a>  locationsReadOne<span class="op">,</span></span>
<span id="cb508-27"><a href="Swagger.html#cb508-27" tabindex="-1"></a>  locationsUpdateOne<span class="op">,</span></span>
<span id="cb508-28"><a href="Swagger.html#cb508-28" tabindex="-1"></a>  locationsDeleteOne<span class="op">,</span></span>
<span id="cb508-29"><a href="Swagger.html#cb508-29" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<table class="tabela-manjsa">
<caption>
<span id="tab:tabela-REST-PUT-metode">Tabela 7.2: </span><strong>PUT metode</strong> v okviru demo aplikacije
</caption>
<thead>
<tr>
<th style="text-align:left;">
Akcija
</th>
<th style="text-align:left;">
Metoda
</th>
<th style="text-align:left;">
URL naslov
</th>
<th style="text-align:left;">
Parametri
</th>
<th style="text-align:left;">
Primer
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<izbrisi>Posodobitev določene lokacije&lt;/i<brisi>
</td>
<td style="text-align:left;">
<izbrisi><code>PUT</code></izbrisi>
</td>
<td style="text-align:left;">
<izbrisi><code>/locations/:locationId</code></izbrisi>
</td>
<td style="text-align:left;">
<izbrisi><code>locationId</code></izbrisi>
</td>
<td style="text-align:left;">
<izbrisi><code>http://&lt;server&gt;/api/</code><br><code>locations/123</code></izbrisi>
</td>
</tr>
<tr>
<td style="text-align:left;">
<strong>Posodobitev določenega komentarja</strong><br>(glej poglavje <a href="Swagger.html#PUT-odvisni-dokument">7.3.2</a>)
</td>
<td style="text-align:left;">
<code>PUT</code>
</td>
<td style="text-align:left;">
<code>/locations/:locationId/</code><br><code>comments/:commentId</code>
</td>
<td style="text-align:left;">
<code>locationId</code>, <code>commentId</code>
</td>
<td style="text-align:left;">
<code>http://&lt;server&gt;/api/</code><br><code>locations/123/comments/abc</code>
</td>
</tr>
</tbody>
</table>
<script>
  $(document).ready(function() {
    $("#put-metode-za-ažuriranje-podatkov-v-mongodb code.javascript:eq(0)").markRegExp(/router\.put\(".+?\);/, options_izbrisi);
    $("#put-metode-za-ažuriranje-podatkov-v-mongodb code.javascript:eq(0)").markRegExp(/router\.put\([^\)]+?".+?commentId[\s\S]+?\);/, options_dodaj);
    
    $("#put-metode-za-ažuriranje-podatkov-v-mongodb code.javascript:eq(1)").markRegExp(/const locationsUpdateOne[\s\S]+?\};/, options_izbrisi);
    $("#put-metode-za-ažuriranje-podatkov-v-mongodb code.javascript:eq(1)").markRegExp(/\s+?locationsUpdateOne,/, options_izbrisi);
  });
</script>
<div id="posodobitev-obstoječega-dokumenta-v-mongodb" class="section level3 hasAnchor" number="7.3.1">
<h3><span class="header-section-number">7.3.1</span> Posodobitev obstoječega dokumenta v MongoDB<a href="Swagger.html#posodobitev-obstoječega-dokumenta-v-mongodb" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Postopek za posodobitev obstoječega dokumenta je naslednji:</p>
<ol style="list-style-type: decimal">
<li>iskanje ustreznega dokumenta,</li>
<li>posodobitev dokumenta,</li>
<li>shranjevanje dokumenta in</li>
<li>posredovanje JSON odgovora.</li>
</ol>
<p>Pri posodabljanju dokumenta moramo podobno kot pri kreiranju novega dokumenta poskrbeti za skladnost s shemo dokumentov.</p>
<p>V našem primeru ne bomo neposredno spreminjali obstoječih dokumentov, ampak si bomo v naslednjem poglavju <a href="Swagger.html#PUT-odvisni-dokument">7.3.2</a> podrobneje pogledali spreminjanje odvisnega dokumenta v okviru obstoječega dokumenta.</p>
</div>
<div id="PUT-odvisni-dokument" class="section level3 hasAnchor" number="7.3.2">
<h3><span class="header-section-number">7.3.2</span> Posodobitev obstoječega odvisnega dokumenta v MongoDB<a href="Swagger.html#PUT-odvisni-dokument" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Pri posodobitvi obstoječega odvisnega dokumenta moramo tako kot pri kreiranju novega dokumenta upoštevati opredeljeno shemo dokumenta v modelu <code>api/models/locations.js</code>.</p>
<p><code>api/models/locations.js</code></p>
<div class="sourceCode" id="cb509"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb509-1"><a href="Swagger.html#cb509-1" tabindex="-1"></a><span class="kw">const</span> commentSchema <span class="op">=</span> <span class="kw">new</span> mongoose<span class="op">.</span><span class="fu">Schema</span>({</span>
<span id="cb509-2"><a href="Swagger.html#cb509-2" tabindex="-1"></a>  <span class="dt">author</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="bu">String</span><span class="op">,</span> <span class="dt">required</span><span class="op">:</span> [<span class="kw">true</span><span class="op">,</span> <span class="st">&quot;Author is required!&quot;</span>] }<span class="op">,</span></span>
<span id="cb509-3"><a href="Swagger.html#cb509-3" tabindex="-1"></a>  <span class="dt">rating</span><span class="op">:</span> {</span>
<span id="cb509-4"><a href="Swagger.html#cb509-4" tabindex="-1"></a>    <span class="dt">type</span><span class="op">:</span> <span class="bu">Number</span><span class="op">,</span></span>
<span id="cb509-5"><a href="Swagger.html#cb509-5" tabindex="-1"></a>    <span class="dt">required</span><span class="op">:</span> [<span class="kw">true</span><span class="op">,</span> <span class="st">&quot;Rating is required!&quot;</span>]<span class="op">,</span></span>
<span id="cb509-6"><a href="Swagger.html#cb509-6" tabindex="-1"></a>    <span class="dt">min</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb509-7"><a href="Swagger.html#cb509-7" tabindex="-1"></a>    <span class="dt">max</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb509-8"><a href="Swagger.html#cb509-8" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb509-9"><a href="Swagger.html#cb509-9" tabindex="-1"></a>  <span class="dt">comment</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="bu">String</span><span class="op">,</span> <span class="dt">required</span><span class="op">:</span> [<span class="kw">true</span><span class="op">,</span> <span class="st">&quot;Comment is required!&quot;</span>] }<span class="op">,</span></span>
<span id="cb509-10"><a href="Swagger.html#cb509-10" tabindex="-1"></a>  <span class="dt">createdOn</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="bu">Date</span><span class="op">,</span> <span class="cf">default</span><span class="op">:</span> <span class="bu">Date</span><span class="op">.</span><span class="at">now</span> }<span class="op">,</span></span>
<span id="cb509-11"><a href="Swagger.html#cb509-11" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>Najprej poiščemo nadrejeni dokument, nato posodobimo izbrane podatke, shranimo posodobljeno lokacijo, kjer v povratnem klicu poskrbimo tudi za ponoven izračun povprečne ocene lokacije, če je slučajno prišlo do spremembe ocene komentarja.</p>
<p><code>api/controllers/comments.js</code></p>
<div class="sourceCode" id="cb510"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb510-1"><a href="Swagger.html#cb510-1" tabindex="-1"></a><span class="kw">const</span> commentsUpdateOne <span class="op">=</span> <span class="kw">async</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb510-2"><a href="Swagger.html#cb510-2" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span>req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">locationId</span> <span class="op">||</span> <span class="op">!</span>req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">commentId</span>)</span>
<span id="cb510-3"><a href="Swagger.html#cb510-3" tabindex="-1"></a>    res<span class="op">.</span><span class="fu">status</span>(<span class="dv">400</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb510-4"><a href="Swagger.html#cb510-4" tabindex="-1"></a>      <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;Path parameters &#39;locationId&#39; and &#39;commentId&#39; are required.&quot;</span><span class="op">,</span></span>
<span id="cb510-5"><a href="Swagger.html#cb510-5" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb510-6"><a href="Swagger.html#cb510-6" tabindex="-1"></a>  <span class="cf">else</span> {</span>
<span id="cb510-7"><a href="Swagger.html#cb510-7" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb510-8"><a href="Swagger.html#cb510-8" tabindex="-1"></a>      <span class="kw">let</span> location <span class="op">=</span> <span class="cf">await</span> <span class="bu">Location</span><span class="op">.</span><span class="fu">findById</span>(req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">locationId</span>)</span>
<span id="cb510-9"><a href="Swagger.html#cb510-9" tabindex="-1"></a>        <span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;comments&quot;</span>)</span>
<span id="cb510-10"><a href="Swagger.html#cb510-10" tabindex="-1"></a>        <span class="op">.</span><span class="fu">exec</span>()<span class="op">;</span></span>
<span id="cb510-11"><a href="Swagger.html#cb510-11" tabindex="-1"></a>      <span class="cf">if</span> (<span class="op">!</span>location)</span>
<span id="cb510-12"><a href="Swagger.html#cb510-12" tabindex="-1"></a>        res<span class="op">.</span><span class="fu">status</span>(<span class="dv">404</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb510-13"><a href="Swagger.html#cb510-13" tabindex="-1"></a>          <span class="dt">message</span><span class="op">:</span> <span class="vs">`Location with id &#39;</span><span class="sc">${</span>req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">locationId</span><span class="sc">}</span><span class="vs">&#39; not found.`</span><span class="op">,</span></span>
<span id="cb510-14"><a href="Swagger.html#cb510-14" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb510-15"><a href="Swagger.html#cb510-15" tabindex="-1"></a>      <span class="cf">else</span> {</span>
<span id="cb510-16"><a href="Swagger.html#cb510-16" tabindex="-1"></a>        <span class="kw">const</span> comment <span class="op">=</span> location<span class="op">.</span><span class="at">comments</span><span class="op">.</span><span class="fu">id</span>(req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">commentId</span>)<span class="op">;</span></span>
<span id="cb510-17"><a href="Swagger.html#cb510-17" tabindex="-1"></a>        <span class="cf">if</span> (<span class="op">!</span>comment)</span>
<span id="cb510-18"><a href="Swagger.html#cb510-18" tabindex="-1"></a>          res<span class="op">.</span><span class="fu">status</span>(<span class="dv">404</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb510-19"><a href="Swagger.html#cb510-19" tabindex="-1"></a>            <span class="dt">message</span><span class="op">:</span></span>
<span id="cb510-20"><a href="Swagger.html#cb510-20" tabindex="-1"></a>              <span class="st">&quot;Comment with id &#39;&quot;</span> <span class="op">+</span> req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">commentId</span> <span class="op">+</span> <span class="st">&quot;&#39; not found.&quot;</span><span class="op">,</span></span>
<span id="cb510-21"><a href="Swagger.html#cb510-21" tabindex="-1"></a>          })<span class="op">;</span></span>
<span id="cb510-22"><a href="Swagger.html#cb510-22" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> (<span class="op">!</span>req<span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">rating</span> <span class="op">&amp;&amp;</span> <span class="op">!</span>req<span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">comment</span>) {</span>
<span id="cb510-23"><a href="Swagger.html#cb510-23" tabindex="-1"></a>          res<span class="op">.</span><span class="fu">status</span>(<span class="dv">400</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb510-24"><a href="Swagger.html#cb510-24" tabindex="-1"></a>            <span class="dt">message</span><span class="op">:</span></span>
<span id="cb510-25"><a href="Swagger.html#cb510-25" tabindex="-1"></a>              <span class="st">&quot;At least on of body parameters &#39;rating&#39; or &#39;comment&#39; is required.&quot;</span><span class="op">,</span></span>
<span id="cb510-26"><a href="Swagger.html#cb510-26" tabindex="-1"></a>          })<span class="op">;</span></span>
<span id="cb510-27"><a href="Swagger.html#cb510-27" tabindex="-1"></a>        } <span class="cf">else</span> {</span>
<span id="cb510-28"><a href="Swagger.html#cb510-28" tabindex="-1"></a>          <span class="cf">if</span> (req<span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">rating</span>) comment<span class="op">.</span><span class="at">rating</span> <span class="op">=</span> req<span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">rating</span><span class="op">;</span></span>
<span id="cb510-29"><a href="Swagger.html#cb510-29" tabindex="-1"></a>          <span class="cf">if</span> (req<span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">comment</span>) comment<span class="op">.</span><span class="at">comment</span> <span class="op">=</span> req<span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">comment</span><span class="op">;</span></span>
<span id="cb510-30"><a href="Swagger.html#cb510-30" tabindex="-1"></a>          <span class="cf">await</span> location<span class="op">.</span><span class="fu">save</span>()<span class="op">;</span></span>
<span id="cb510-31"><a href="Swagger.html#cb510-31" tabindex="-1"></a>          <span class="cf">await</span> <span class="fu">updateAverageRating</span>(location<span class="op">.</span><span class="at">_id</span>)<span class="op">;</span></span>
<span id="cb510-32"><a href="Swagger.html#cb510-32" tabindex="-1"></a>          res<span class="op">.</span><span class="fu">status</span>(<span class="dv">200</span>)<span class="op">.</span><span class="fu">json</span>(comment { <span class="dt">status</span><span class="op">:</span> <span class="st">&quot;OK&quot;</span> })<span class="op">;</span></span>
<span id="cb510-33"><a href="Swagger.html#cb510-33" tabindex="-1"></a>        }</span>
<span id="cb510-34"><a href="Swagger.html#cb510-34" tabindex="-1"></a>      }</span>
<span id="cb510-35"><a href="Swagger.html#cb510-35" tabindex="-1"></a>    } <span class="cf">catch</span> (err) {</span>
<span id="cb510-36"><a href="Swagger.html#cb510-36" tabindex="-1"></a>      res<span class="op">.</span><span class="fu">status</span>(<span class="dv">500</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">message</span><span class="op">:</span> err<span class="op">.</span><span class="at">message</span> })<span class="op">;</span></span>
<span id="cb510-37"><a href="Swagger.html#cb510-37" tabindex="-1"></a>    }</span>
<span id="cb510-38"><a href="Swagger.html#cb510-38" tabindex="-1"></a>  }</span>
<span id="cb510-39"><a href="Swagger.html#cb510-39" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#PUT-odvisni-dokument code.javascript:eq(0)").markRegExp(/(author|rating|comment):/, options_dodaj);
    $("#PUT-odvisni-dokument code.javascript:eq(1)").markRegExp(/async /, options_dodaj);
    $("#PUT-odvisni-dokument code.javascript:eq(1)").markRegExp(/\s+?if [\s\S]+?location\.\_id\);/, options_dodaj);
    $("#PUT-odvisni-dokument code.javascript:eq(1)").markRegExp(/comment /, options_dodaj);
    $("#PUT-odvisni-dokument code.javascript:eq(1)").markRegExp(/{ status: "OK" }/, options_izbrisi);
    $("#PUT-odvisni-dokument code.javascript:eq(1)").markRegExp(/^\s+}$/m, options_dodaj);
    $("#PUT-odvisni-dokument code.javascript:eq(1)").markRegExp(/\s+?} catch [\s\S]+?;/, options_dodaj);
  });
</script>
<div id="PUT-OpenAPI" class="section level4 hasAnchor" number="7.3.2.1">
<h4><span class="header-section-number">7.3.2.1</span> OpenAPI dokumentacija<a href="Swagger.html#PUT-OpenAPI" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Podobno, kot smo dodali OpenAPI dokumentacijo pri GET in POST metodah, jo bomo tudi pri tej PUT metodi.</p>
<p><code>api/controllers/comments.js</code></p>
<div class="sourceCode" id="cb511"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb511-1"><a href="Swagger.html#cb511-1" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb511-2"><a href="Swagger.html#cb511-2" tabindex="-1"></a><span class="co"> * </span><span class="an">@openapi</span></span>
<span id="cb511-3"><a href="Swagger.html#cb511-3" tabindex="-1"></a><span class="co"> * /locations/{locationId}/comments/{commentId}:</span></span>
<span id="cb511-4"><a href="Swagger.html#cb511-4" tabindex="-1"></a><span class="co"> *  put:</span></span>
<span id="cb511-5"><a href="Swagger.html#cb511-5" tabindex="-1"></a><span class="co"> *   summary: Change existing comment to a given location.</span></span>
<span id="cb511-6"><a href="Swagger.html#cb511-6" tabindex="-1"></a><span class="co"> *   description: Change existing **comment** with author&#39;s name, rating and comment&#39;s content (at least 1 value) to a location with given unique identifier.</span></span>
<span id="cb511-7"><a href="Swagger.html#cb511-7" tabindex="-1"></a><span class="co"> *   tags: [Comments]</span></span>
<span id="cb511-8"><a href="Swagger.html#cb511-8" tabindex="-1"></a><span class="co"> *   parameters:</span></span>
<span id="cb511-9"><a href="Swagger.html#cb511-9" tabindex="-1"></a><span class="co"> *    - name: locationId</span></span>
<span id="cb511-10"><a href="Swagger.html#cb511-10" tabindex="-1"></a><span class="co"> *      in: path</span></span>
<span id="cb511-11"><a href="Swagger.html#cb511-11" tabindex="-1"></a><span class="co"> *      schema:</span></span>
<span id="cb511-12"><a href="Swagger.html#cb511-12" tabindex="-1"></a><span class="co"> *       type: string</span></span>
<span id="cb511-13"><a href="Swagger.html#cb511-13" tabindex="-1"></a><span class="co"> *       pattern: &#39;^[a-fA-F</span><span class="an">\d]{24}$&#39;</span></span>
<span id="cb511-14"><a href="Swagger.html#cb511-14" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">unique identifier</span><span class="kw">&lt;/b&gt;</span><span class="co"> of location</span></span>
<span id="cb511-15"><a href="Swagger.html#cb511-15" tabindex="-1"></a><span class="co"> *      required: true</span></span>
<span id="cb511-16"><a href="Swagger.html#cb511-16" tabindex="-1"></a><span class="co"> *      example: 635a62f5dc5d7968e6846914</span></span>
<span id="cb511-17"><a href="Swagger.html#cb511-17" tabindex="-1"></a><span class="co"> *    - name: commentId</span></span>
<span id="cb511-18"><a href="Swagger.html#cb511-18" tabindex="-1"></a><span class="co"> *      in: path</span></span>
<span id="cb511-19"><a href="Swagger.html#cb511-19" tabindex="-1"></a><span class="co"> *      schema:</span></span>
<span id="cb511-20"><a href="Swagger.html#cb511-20" tabindex="-1"></a><span class="co"> *       type: string</span></span>
<span id="cb511-21"><a href="Swagger.html#cb511-21" tabindex="-1"></a><span class="co"> *       pattern: &#39;^[a-fA-F</span><span class="an">\d]{24}$&#39;</span></span>
<span id="cb511-22"><a href="Swagger.html#cb511-22" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">unique identifier</span><span class="kw">&lt;/b&gt;</span><span class="co"> of comment</span></span>
<span id="cb511-23"><a href="Swagger.html#cb511-23" tabindex="-1"></a><span class="co"> *      required: true</span></span>
<span id="cb511-24"><a href="Swagger.html#cb511-24" tabindex="-1"></a><span class="co"> *      example: 636346e7171e084ff4e4bbf9</span></span>
<span id="cb511-25"><a href="Swagger.html#cb511-25" tabindex="-1"></a><span class="co"> *   requestBody:</span></span>
<span id="cb511-26"><a href="Swagger.html#cb511-26" tabindex="-1"></a><span class="co"> *    description: Comment&#39;s author, rating and content.</span></span>
<span id="cb511-27"><a href="Swagger.html#cb511-27" tabindex="-1"></a><span class="co"> *    required: true</span></span>
<span id="cb511-28"><a href="Swagger.html#cb511-28" tabindex="-1"></a><span class="co"> *    content:</span></span>
<span id="cb511-29"><a href="Swagger.html#cb511-29" tabindex="-1"></a><span class="co"> *     application/x-www-form-urlencoded:</span></span>
<span id="cb511-30"><a href="Swagger.html#cb511-30" tabindex="-1"></a><span class="co"> *      schema:</span></span>
<span id="cb511-31"><a href="Swagger.html#cb511-31" tabindex="-1"></a><span class="co"> *       type: object</span></span>
<span id="cb511-32"><a href="Swagger.html#cb511-32" tabindex="-1"></a><span class="co"> *       properties:</span></span>
<span id="cb511-33"><a href="Swagger.html#cb511-33" tabindex="-1"></a><span class="co"> *        rating:</span></span>
<span id="cb511-34"><a href="Swagger.html#cb511-34" tabindex="-1"></a><span class="co"> *         type: integer</span></span>
<span id="cb511-35"><a href="Swagger.html#cb511-35" tabindex="-1"></a><span class="co"> *         description: </span><span class="kw">&lt;b&gt;</span><span class="co">rating</span><span class="kw">&lt;/b&gt;</span><span class="co"> of comment</span></span>
<span id="cb511-36"><a href="Swagger.html#cb511-36" tabindex="-1"></a><span class="co"> *         minimum: 1</span></span>
<span id="cb511-37"><a href="Swagger.html#cb511-37" tabindex="-1"></a><span class="co"> *         maximum: 5</span></span>
<span id="cb511-38"><a href="Swagger.html#cb511-38" tabindex="-1"></a><span class="co"> *         enum: [1, 2, 3, 4, 5]</span></span>
<span id="cb511-39"><a href="Swagger.html#cb511-39" tabindex="-1"></a><span class="co"> *         example: 3</span></span>
<span id="cb511-40"><a href="Swagger.html#cb511-40" tabindex="-1"></a><span class="co"> *        comment:</span></span>
<span id="cb511-41"><a href="Swagger.html#cb511-41" tabindex="-1"></a><span class="co"> *         type: string</span></span>
<span id="cb511-42"><a href="Swagger.html#cb511-42" tabindex="-1"></a><span class="co"> *         description: </span><span class="kw">&lt;b&gt;</span><span class="co">content</span><span class="kw">&lt;/b&gt;</span><span class="co"> of comment</span></span>
<span id="cb511-43"><a href="Swagger.html#cb511-43" tabindex="-1"></a><span class="co"> *         example: Srednja žalost.</span></span>
<span id="cb511-44"><a href="Swagger.html#cb511-44" tabindex="-1"></a><span class="co"> *   responses:</span></span>
<span id="cb511-45"><a href="Swagger.html#cb511-45" tabindex="-1"></a><span class="co"> *    &#39;200&#39;:</span></span>
<span id="cb511-46"><a href="Swagger.html#cb511-46" tabindex="-1"></a><span class="co"> *     description: </span><span class="kw">&lt;b&gt;</span><span class="co">OK</span><span class="kw">&lt;/b&gt;</span><span class="co">, with updated comment details.</span></span>
<span id="cb511-47"><a href="Swagger.html#cb511-47" tabindex="-1"></a><span class="co"> *     content:</span></span>
<span id="cb511-48"><a href="Swagger.html#cb511-48" tabindex="-1"></a><span class="co"> *      application/json:</span></span>
<span id="cb511-49"><a href="Swagger.html#cb511-49" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb511-50"><a href="Swagger.html#cb511-50" tabindex="-1"></a><span class="co"> *        $ref: &#39;#/components/schemas/Comment&#39;</span></span>
<span id="cb511-51"><a href="Swagger.html#cb511-51" tabindex="-1"></a><span class="co"> *    &#39;400&#39;:</span></span>
<span id="cb511-52"><a href="Swagger.html#cb511-52" tabindex="-1"></a><span class="co"> *     description: </span><span class="kw">&lt;b&gt;</span><span class="co">Bad Request</span><span class="kw">&lt;/b&gt;</span><span class="co">, with error message.</span></span>
<span id="cb511-53"><a href="Swagger.html#cb511-53" tabindex="-1"></a><span class="co"> *     content:</span></span>
<span id="cb511-54"><a href="Swagger.html#cb511-54" tabindex="-1"></a><span class="co"> *      application/json:</span></span>
<span id="cb511-55"><a href="Swagger.html#cb511-55" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb511-56"><a href="Swagger.html#cb511-56" tabindex="-1"></a><span class="co"> *        $ref: &#39;#/components/schemas/ErrorMessage&#39;</span></span>
<span id="cb511-57"><a href="Swagger.html#cb511-57" tabindex="-1"></a><span class="co"> *       examples:</span></span>
<span id="cb511-58"><a href="Swagger.html#cb511-58" tabindex="-1"></a><span class="co"> *        locationId and commentId are required:</span></span>
<span id="cb511-59"><a href="Swagger.html#cb511-59" tabindex="-1"></a><span class="co"> *         value:</span></span>
<span id="cb511-60"><a href="Swagger.html#cb511-60" tabindex="-1"></a><span class="co"> *          message: Path parameters &#39;locationId&#39; and &#39;commentId&#39; are required.</span></span>
<span id="cb511-61"><a href="Swagger.html#cb511-61" tabindex="-1"></a><span class="co"> *        rating or comment is required:</span></span>
<span id="cb511-62"><a href="Swagger.html#cb511-62" tabindex="-1"></a><span class="co"> *         value:</span></span>
<span id="cb511-63"><a href="Swagger.html#cb511-63" tabindex="-1"></a><span class="co"> *          message: At least on of body parameters &#39;rating&#39; or &#39;comment&#39; is required.</span></span>
<span id="cb511-64"><a href="Swagger.html#cb511-64" tabindex="-1"></a><span class="co"> *    &#39;404&#39;:</span></span>
<span id="cb511-65"><a href="Swagger.html#cb511-65" tabindex="-1"></a><span class="co"> *     description: </span><span class="kw">&lt;b&gt;</span><span class="co">Not Found</span><span class="kw">&lt;/b&gt;</span><span class="co">, with error message.</span></span>
<span id="cb511-66"><a href="Swagger.html#cb511-66" tabindex="-1"></a><span class="co"> *     content:</span></span>
<span id="cb511-67"><a href="Swagger.html#cb511-67" tabindex="-1"></a><span class="co"> *      application/json:</span></span>
<span id="cb511-68"><a href="Swagger.html#cb511-68" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb511-69"><a href="Swagger.html#cb511-69" tabindex="-1"></a><span class="co"> *        $ref: &#39;#/components/schemas/ErrorMessage&#39;</span></span>
<span id="cb511-70"><a href="Swagger.html#cb511-70" tabindex="-1"></a><span class="co"> *       examples:</span></span>
<span id="cb511-71"><a href="Swagger.html#cb511-71" tabindex="-1"></a><span class="co"> *        location not found:</span></span>
<span id="cb511-72"><a href="Swagger.html#cb511-72" tabindex="-1"></a><span class="co"> *         value:</span></span>
<span id="cb511-73"><a href="Swagger.html#cb511-73" tabindex="-1"></a><span class="co"> *          message: Location with id &#39;735a62f5dc5d7968e6846914&#39; not found.</span></span>
<span id="cb511-74"><a href="Swagger.html#cb511-74" tabindex="-1"></a><span class="co"> *        comment not found:</span></span>
<span id="cb511-75"><a href="Swagger.html#cb511-75" tabindex="-1"></a><span class="co"> *         value:</span></span>
<span id="cb511-76"><a href="Swagger.html#cb511-76" tabindex="-1"></a><span class="co"> *          message: Comment with id &#39;736346e7171e084ff4e4bbf9&#39; not found.</span></span>
<span id="cb511-77"><a href="Swagger.html#cb511-77" tabindex="-1"></a><span class="co"> *    &#39;500&#39;:</span></span>
<span id="cb511-78"><a href="Swagger.html#cb511-78" tabindex="-1"></a><span class="co"> *     description: </span><span class="kw">&lt;b&gt;</span><span class="co">Internal Server Error</span><span class="kw">&lt;/b&gt;</span><span class="co">, with error message.</span></span>
<span id="cb511-79"><a href="Swagger.html#cb511-79" tabindex="-1"></a><span class="co"> *     content:</span></span>
<span id="cb511-80"><a href="Swagger.html#cb511-80" tabindex="-1"></a><span class="co"> *      application/json:</span></span>
<span id="cb511-81"><a href="Swagger.html#cb511-81" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb511-82"><a href="Swagger.html#cb511-82" tabindex="-1"></a><span class="co"> *        $ref: &#39;#/components/schemas/ErrorMessage&#39;</span></span>
<span id="cb511-83"><a href="Swagger.html#cb511-83" tabindex="-1"></a><span class="co"> *       example:</span></span>
<span id="cb511-84"><a href="Swagger.html#cb511-84" tabindex="-1"></a><span class="co"> *        message: Database not available.</span></span>
<span id="cb511-85"><a href="Swagger.html#cb511-85" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb511-86"><a href="Swagger.html#cb511-86" tabindex="-1"></a><span class="kw">const</span> commentsUpdateOne <span class="op">=</span> <span class="kw">async</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb511-87"><a href="Swagger.html#cb511-87" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span>req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">locationId</span> <span class="op">||</span> <span class="op">!</span>req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">commentId</span>)</span>
<span id="cb511-88"><a href="Swagger.html#cb511-88" tabindex="-1"></a>    res<span class="op">.</span><span class="fu">status</span>(<span class="dv">400</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb511-89"><a href="Swagger.html#cb511-89" tabindex="-1"></a>      <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;Path parameters &#39;locationId&#39; and &#39;commentId&#39; are required.&quot;</span><span class="op">,</span></span>
<span id="cb511-90"><a href="Swagger.html#cb511-90" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb511-91"><a href="Swagger.html#cb511-91" tabindex="-1"></a>  <span class="cf">else</span> {</span>
<span id="cb511-92"><a href="Swagger.html#cb511-92" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb511-93"><a href="Swagger.html#cb511-93" tabindex="-1"></a>      <span class="kw">let</span> location <span class="op">=</span> <span class="cf">await</span> <span class="bu">Location</span><span class="op">.</span><span class="fu">findById</span>(req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">locationId</span>)</span>
<span id="cb511-94"><a href="Swagger.html#cb511-94" tabindex="-1"></a>        <span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;comments&quot;</span>)</span>
<span id="cb511-95"><a href="Swagger.html#cb511-95" tabindex="-1"></a>        <span class="op">.</span><span class="fu">exec</span>()<span class="op">;</span></span>
<span id="cb511-96"><a href="Swagger.html#cb511-96" tabindex="-1"></a>      <span class="cf">if</span> (<span class="op">!</span>location)</span>
<span id="cb511-97"><a href="Swagger.html#cb511-97" tabindex="-1"></a>        res<span class="op">.</span><span class="fu">status</span>(<span class="dv">404</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb511-98"><a href="Swagger.html#cb511-98" tabindex="-1"></a>          <span class="dt">message</span><span class="op">:</span> <span class="vs">`Location with id &#39;</span><span class="sc">${</span>req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">locationId</span><span class="sc">}</span><span class="vs">&#39; not found.`</span><span class="op">,</span></span>
<span id="cb511-99"><a href="Swagger.html#cb511-99" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb511-100"><a href="Swagger.html#cb511-100" tabindex="-1"></a>      <span class="cf">else</span> {</span>
<span id="cb511-101"><a href="Swagger.html#cb511-101" tabindex="-1"></a>        <span class="kw">const</span> comment <span class="op">=</span> location<span class="op">.</span><span class="at">comments</span><span class="op">.</span><span class="fu">id</span>(req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">commentId</span>)<span class="op">;</span></span>
<span id="cb511-102"><a href="Swagger.html#cb511-102" tabindex="-1"></a>        <span class="cf">if</span> (<span class="op">!</span>comment)</span>
<span id="cb511-103"><a href="Swagger.html#cb511-103" tabindex="-1"></a>          res<span class="op">.</span><span class="fu">status</span>(<span class="dv">404</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb511-104"><a href="Swagger.html#cb511-104" tabindex="-1"></a>            <span class="dt">message</span><span class="op">:</span></span>
<span id="cb511-105"><a href="Swagger.html#cb511-105" tabindex="-1"></a>              <span class="st">&quot;Comment with id &#39;&quot;</span> <span class="op">+</span> req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">commentId</span> <span class="op">+</span> <span class="st">&quot;&#39; not found.&quot;</span><span class="op">,</span></span>
<span id="cb511-106"><a href="Swagger.html#cb511-106" tabindex="-1"></a>          })<span class="op">;</span></span>
<span id="cb511-107"><a href="Swagger.html#cb511-107" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> (<span class="op">!</span>req<span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">rating</span> <span class="op">&amp;&amp;</span> <span class="op">!</span>req<span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">comment</span>) {</span>
<span id="cb511-108"><a href="Swagger.html#cb511-108" tabindex="-1"></a>          res<span class="op">.</span><span class="fu">status</span>(<span class="dv">400</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb511-109"><a href="Swagger.html#cb511-109" tabindex="-1"></a>            <span class="dt">message</span><span class="op">:</span></span>
<span id="cb511-110"><a href="Swagger.html#cb511-110" tabindex="-1"></a>              <span class="st">&quot;At least on of body parameters &#39;rating&#39; or &#39;comment&#39; is required.&quot;</span><span class="op">,</span></span>
<span id="cb511-111"><a href="Swagger.html#cb511-111" tabindex="-1"></a>          })<span class="op">;</span></span>
<span id="cb511-112"><a href="Swagger.html#cb511-112" tabindex="-1"></a>        } <span class="cf">else</span> {</span>
<span id="cb511-113"><a href="Swagger.html#cb511-113" tabindex="-1"></a>          <span class="cf">if</span> (req<span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">rating</span>) comment<span class="op">.</span><span class="at">rating</span> <span class="op">=</span> req<span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">rating</span><span class="op">;</span></span>
<span id="cb511-114"><a href="Swagger.html#cb511-114" tabindex="-1"></a>          <span class="cf">if</span> (req<span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">comment</span>) comment<span class="op">.</span><span class="at">comment</span> <span class="op">=</span> req<span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">comment</span><span class="op">;</span></span>
<span id="cb511-115"><a href="Swagger.html#cb511-115" tabindex="-1"></a>          <span class="cf">await</span> location<span class="op">.</span><span class="fu">save</span>()<span class="op">;</span></span>
<span id="cb511-116"><a href="Swagger.html#cb511-116" tabindex="-1"></a>          <span class="cf">await</span> <span class="fu">updateAverageRating</span>(location<span class="op">.</span><span class="at">_id</span>)<span class="op">;</span></span>
<span id="cb511-117"><a href="Swagger.html#cb511-117" tabindex="-1"></a>          res<span class="op">.</span><span class="fu">status</span>(<span class="dv">200</span>)<span class="op">.</span><span class="fu">json</span>(comment)<span class="op">;</span></span>
<span id="cb511-118"><a href="Swagger.html#cb511-118" tabindex="-1"></a>        }</span>
<span id="cb511-119"><a href="Swagger.html#cb511-119" tabindex="-1"></a>      }</span>
<span id="cb511-120"><a href="Swagger.html#cb511-120" tabindex="-1"></a>    } <span class="cf">catch</span> (err) {</span>
<span id="cb511-121"><a href="Swagger.html#cb511-121" tabindex="-1"></a>      res<span class="op">.</span><span class="fu">status</span>(<span class="dv">500</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">message</span><span class="op">:</span> err<span class="op">.</span><span class="at">message</span> })<span class="op">;</span></span>
<span id="cb511-122"><a href="Swagger.html#cb511-122" tabindex="-1"></a>    }</span>
<span id="cb511-123"><a href="Swagger.html#cb511-123" tabindex="-1"></a>  }</span>
<span id="cb511-124"><a href="Swagger.html#cb511-124" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#PUT-OpenAPI code.javascript:eq(0)").markRegExp(/\/\*\*[\s\S]+?\*\//, options_dodaj);
  });
</script>
</div>
<div id="testiranje-ažuriranja-obstoječega-komentarja" class="section level4 hasAnchor" number="7.3.2.2">
<h4><span class="header-section-number">7.3.2.2</span> Testiranje ažuriranja obstoječega komentarja<a href="Swagger.html#testiranje-ažuriranja-obstoječega-komentarja" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Poleg <code>LOCATION_ID</code> sedaj potrebujemo še <code>COMMENT_ID</code>, ki ga pridobimo s poizvedbo v podatkovno bazo MongoDB.</p>
<div class="sourceCode" id="cb512"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb512-1"><a href="Swagger.html#cb512-1" tabindex="-1"></a><span class="ex">$</span> COMMENT_ID=<span class="va">$(</span><span class="ex">docker</span> exec <span class="at">-it</span> sp-mongo-db bash <span class="at">-c</span> <span class="st">&quot;mongosh Demo --eval </span><span class="dt">\</span></span>
<span id="cb512-2"><a href="Swagger.html#cb512-2" tabindex="-1"></a><span class="st">    &#39;db.Locations.findOne(</span><span class="dt">\</span></span>
<span id="cb512-3"><a href="Swagger.html#cb512-3" tabindex="-1"></a><span class="st">      {</span><span class="dt">\&quot;</span><span class="st">name</span><span class="dt">\&quot;</span><span class="st">: </span><span class="dt">\&quot;</span><span class="st">Ljubljana - Viško pokopališče</span><span class="dt">\&quot;</span><span class="st"> }, </span><span class="dt">\</span></span>
<span id="cb512-4"><a href="Swagger.html#cb512-4" tabindex="-1"></a><span class="st">      { _id: 0, comments: { </span><span class="dt">\$</span><span class="st">elemMatch: { </span><span class="dt">\&quot;</span><span class="st">author</span><span class="dt">\&quot;</span><span class="st">: </span><span class="dt">\&quot;</span><span class="st">Jack the Ripper</span><span class="dt">\&quot;</span><span class="st"> }} })&#39;&quot;</span> <span class="dt">\</span></span>
<span id="cb512-5"><a href="Swagger.html#cb512-5" tabindex="-1"></a>    <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;ObjectId&#39;</span> <span class="dt">\</span></span>
<span id="cb512-6"><a href="Swagger.html#cb512-6" tabindex="-1"></a>    <span class="kw">|</span> <span class="fu">sed</span> <span class="st">&#39;s/.*&quot;\(.*\)&quot;.*/\1/&#39;</span><span class="va">)</span></span>
<span id="cb512-7"><a href="Swagger.html#cb512-7" tabindex="-1"></a><span class="ex">$</span> echo <span class="va">$COMMENT_ID</span></span>
<span id="cb512-8"><a href="Swagger.html#cb512-8" tabindex="-1"></a><span class="ex">635a62f5dc5d7968e6846914</span></span></code></pre></div>
<p>Primer posodobitve obstoječega komentarja avtorja Jack the Ripper je na spodnjem primeru, kjer spremenimo vrednost ocene s <span class="math inline">\(5\)</span> na <span class="math inline">\(1\)</span>.</p>
<p><code>Odjemalec</code></p>
<div class="sourceCode" id="cb513"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb513-1"><a href="Swagger.html#cb513-1" tabindex="-1"></a><span class="ex">$</span> curl <span class="at">-X</span> PUT <span class="dt">\</span></span>
<span id="cb513-2"><a href="Swagger.html#cb513-2" tabindex="-1"></a>       <span class="st">&quot;http://localhost:3000/api/locations/</span><span class="va">${LOCATION_ID}</span><span class="st">/comments/</span><span class="va">${COMMENT_ID}</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb513-3"><a href="Swagger.html#cb513-3" tabindex="-1"></a>       <span class="at">-H</span> <span class="st">&#39;Content-Type: application/x-www-form-urlencoded&#39;</span> <span class="dt">\</span></span>
<span id="cb513-4"><a href="Swagger.html#cb513-4" tabindex="-1"></a>       <span class="at">-d</span> <span class="st">&quot;rating=1&quot;</span></span>
<span id="cb513-5"><a href="Swagger.html#cb513-5" tabindex="-1"></a><span class="kw">{</span></span>
<span id="cb513-6"><a href="Swagger.html#cb513-6" tabindex="-1"></a>  <span class="st">&quot;author&quot;</span><span class="ex">:</span> <span class="st">&quot;Jack the Ripper&quot;</span>,</span>
<span id="cb513-7"><a href="Swagger.html#cb513-7" tabindex="-1"></a>  <span class="st">&quot;rating&quot;</span><span class="ex">:</span> 1,</span>
<span id="cb513-8"><a href="Swagger.html#cb513-8" tabindex="-1"></a>  <span class="st">&quot;comment&quot;</span><span class="ex">:</span> <span class="st">&quot;My kind of place.&quot;</span>,</span>
<span id="cb513-9"><a href="Swagger.html#cb513-9" tabindex="-1"></a>  <span class="st">&quot;_id&quot;</span><span class="ex">:</span> <span class="st">&quot;636346ff171e084ff4e4bc00&quot;</span>,</span>
<span id="cb513-10"><a href="Swagger.html#cb513-10" tabindex="-1"></a>  <span class="st">&quot;createdOn&quot;</span><span class="ex">:</span> <span class="st">&quot;2022-11-03T04:43:43.625Z&quot;</span></span>
<span id="cb513-11"><a href="Swagger.html#cb513-11" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<p>Ta sprememba povzroči tudi posodobitev povprečne ocene lokacije, kar je prikazano v konzoli strežnika.</p>
<p><code>Strežnik</code></p>
<div class="sourceCode" id="cb514"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb514-1"><a href="Swagger.html#cb514-1" tabindex="-1"></a><span class="ex">Average</span> rating updated to 2.</span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#testiranje-ažuriranja-obstoječega-komentarja code.bash:eq(0)").markRegExp(/COMMENT_ID=[\s\S]+?'\)/, options_dodaj);
    $("#testiranje-ažuriranja-obstoječega-komentarja code.bash:eq(0)").markRegExp(/635a62f5dc5d7968e6846914/, options_dodaj);
    $("#testiranje-ažuriranja-obstoječega-komentarja code.bash:eq(1)").markRegExp(/curl -X[\s\S]+?rating=1"/, options_dodaj);
  });
</script>
</div>
</div>
</div>
<div id="delete-metode-za-brisanje-podatkov-iz-mongodb" class="section level2 hasAnchor" number="7.4">
<h2><span class="header-section-number">7.4</span> DELETE metode za brisanje podatkov iz MongoDB<a href="Swagger.html#delete-metode-za-brisanje-podatkov-iz-mongodb" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Za brisanje podatkov iz MongoDB podatkovne baze bomo uporabljali <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/DELETE"><i class="fa-solid fa-earth-europe"></i><strong>DELETE</strong> metode</a>. V našem usmerjevalniku za REST API imamo opredeljeni 2 metodi, ki sta podrobneje povzeti v tabeli <a href="Swagger.html#tab:tabela-REST-DELETE-metode">7.3</a>.</p>
<p>Ker v okviru naše aplikacije senzma lokacij vedno uvozimo iz registra kulturne dediščine, brisanja obstoječih lokacij preko REST API-ja ne bomo podprli, zato omenjene reference odstranimo, obdržimo zgolj <strong>metodo za brisanje komentarjev</strong>:</p>
<p><code>api/routes/api.js</code></p>
<div class="sourceCode" id="cb515"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb515-1"><a href="Swagger.html#cb515-1" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb515-2"><a href="Swagger.html#cb515-2" tabindex="-1"></a><span class="co"> * Locations</span></span>
<span id="cb515-3"><a href="Swagger.html#cb515-3" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb515-4"><a href="Swagger.html#cb515-4" tabindex="-1"></a>router<span class="op">.</span><span class="fu">get</span>(<span class="st">&quot;/locations/distance&quot;</span><span class="op">,</span> ctrlLocations<span class="op">.</span><span class="at">locationsListByDistance</span>)<span class="op">;</span></span>
<span id="cb515-5"><a href="Swagger.html#cb515-5" tabindex="-1"></a>router<span class="op">.</span><span class="fu">get</span>(<span class="st">&quot;/locations/search&quot;</span><span class="op">,</span> ctrlLocations<span class="op">.</span><span class="at">locationsListByMultiFilter</span>)<span class="op">;</span></span>
<span id="cb515-6"><a href="Swagger.html#cb515-6" tabindex="-1"></a>router<span class="op">.</span><span class="fu">get</span>(</span>
<span id="cb515-7"><a href="Swagger.html#cb515-7" tabindex="-1"></a>  <span class="st">&quot;/locations/codelist/:codelist&quot;</span><span class="op">,</span></span>
<span id="cb515-8"><a href="Swagger.html#cb515-8" tabindex="-1"></a>  ctrlLocations<span class="op">.</span><span class="at">locationsListCodelist</span></span>
<span id="cb515-9"><a href="Swagger.html#cb515-9" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb515-10"><a href="Swagger.html#cb515-10" tabindex="-1"></a>router<span class="op">.</span><span class="fu">get</span>(<span class="st">&quot;/locations/:locationId&quot;</span><span class="op">,</span> ctrlLocations<span class="op">.</span><span class="at">locationsReadOne</span>)<span class="op">;</span></span>
<span id="cb515-11"><a href="Swagger.html#cb515-11" tabindex="-1"></a>router<span class="op">.</span><span class="fu">delete</span>(<span class="st">&quot;/locations/:locationId&quot;</span><span class="op">,</span> ctrlLocations<span class="op">.</span><span class="at">locationsDeleteOne</span>)<span class="op">;</span></span>
<span id="cb515-12"><a href="Swagger.html#cb515-12" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb515-13"><a href="Swagger.html#cb515-13" tabindex="-1"></a><span class="co"> * Comments</span></span>
<span id="cb515-14"><a href="Swagger.html#cb515-14" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb515-15"><a href="Swagger.html#cb515-15" tabindex="-1"></a>router<span class="op">.</span><span class="fu">post</span>(<span class="st">&quot;/locations/:locationId/comments&quot;</span><span class="op">,</span> ctrlComments<span class="op">.</span><span class="at">commentsCreate</span>)<span class="op">;</span></span>
<span id="cb515-16"><a href="Swagger.html#cb515-16" tabindex="-1"></a>router<span class="op">.</span><span class="fu">get</span>(</span>
<span id="cb515-17"><a href="Swagger.html#cb515-17" tabindex="-1"></a>  <span class="st">&quot;/locations/:locationId/comments/:commentId&quot;</span><span class="op">,</span></span>
<span id="cb515-18"><a href="Swagger.html#cb515-18" tabindex="-1"></a>  ctrlComments<span class="op">.</span><span class="at">commentsReadOne</span></span>
<span id="cb515-19"><a href="Swagger.html#cb515-19" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb515-20"><a href="Swagger.html#cb515-20" tabindex="-1"></a>router<span class="op">.</span><span class="fu">put</span>(</span>
<span id="cb515-21"><a href="Swagger.html#cb515-21" tabindex="-1"></a>  <span class="st">&quot;/locations/:locationId/comments/:commentId&quot;</span><span class="op">,</span></span>
<span id="cb515-22"><a href="Swagger.html#cb515-22" tabindex="-1"></a>  ctrlComments<span class="op">.</span><span class="at">commentsUpdateOne</span></span>
<span id="cb515-23"><a href="Swagger.html#cb515-23" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb515-24"><a href="Swagger.html#cb515-24" tabindex="-1"></a>router<span class="op">.</span><span class="fu">delete</span>(</span>
<span id="cb515-25"><a href="Swagger.html#cb515-25" tabindex="-1"></a>  <span class="st">&quot;/locations/:locationId/comments/:commentId&quot;</span><span class="op">,</span></span>
<span id="cb515-26"><a href="Swagger.html#cb515-26" tabindex="-1"></a>  ctrlComments<span class="op">.</span><span class="at">commentsDeleteOne</span></span>
<span id="cb515-27"><a href="Swagger.html#cb515-27" tabindex="-1"></a>)<span class="op">;</span></span></code></pre></div>
<p><code>api/controllers/locations.js</code></p>
<div class="sourceCode" id="cb516"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb516-1"><a href="Swagger.html#cb516-1" tabindex="-1"></a><span class="kw">const</span> locationsListByDistance <span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb516-2"><a href="Swagger.html#cb516-2" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb516-3"><a href="Swagger.html#cb516-3" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb516-4"><a href="Swagger.html#cb516-4" tabindex="-1"></a><span class="op">...</span></span>
<span id="cb516-5"><a href="Swagger.html#cb516-5" tabindex="-1"></a><span class="kw">const</span> locationsListByMultiFilter <span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb516-6"><a href="Swagger.html#cb516-6" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb516-7"><a href="Swagger.html#cb516-7" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb516-8"><a href="Swagger.html#cb516-8" tabindex="-1"></a><span class="op">...</span></span>
<span id="cb516-9"><a href="Swagger.html#cb516-9" tabindex="-1"></a><span class="kw">const</span> locationsListCodelist <span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb516-10"><a href="Swagger.html#cb516-10" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb516-11"><a href="Swagger.html#cb516-11" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb516-12"><a href="Swagger.html#cb516-12" tabindex="-1"></a><span class="op">...</span></span>
<span id="cb516-13"><a href="Swagger.html#cb516-13" tabindex="-1"></a><span class="kw">const</span> locationsReadOne <span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb516-14"><a href="Swagger.html#cb516-14" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb516-15"><a href="Swagger.html#cb516-15" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb516-16"><a href="Swagger.html#cb516-16" tabindex="-1"></a><span class="kw">const</span> locationsDeleteOne <span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb516-17"><a href="Swagger.html#cb516-17" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">status</span>(<span class="dv">204</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">status</span><span class="op">:</span> <span class="st">&quot;OK&quot;</span> })<span class="op">;</span></span>
<span id="cb516-18"><a href="Swagger.html#cb516-18" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb516-19"><a href="Swagger.html#cb516-19" tabindex="-1"></a>module<span class="op">.</span><span class="at">exports</span> <span class="op">=</span> {</span>
<span id="cb516-20"><a href="Swagger.html#cb516-20" tabindex="-1"></a>  locationsListByDistance<span class="op">,</span></span>
<span id="cb516-21"><a href="Swagger.html#cb516-21" tabindex="-1"></a>  locationsListByMultiFilter<span class="op">,</span></span>
<span id="cb516-22"><a href="Swagger.html#cb516-22" tabindex="-1"></a>  locationsListCodelist<span class="op">,</span></span>
<span id="cb516-23"><a href="Swagger.html#cb516-23" tabindex="-1"></a>  locationsReadOne<span class="op">,</span></span>
<span id="cb516-24"><a href="Swagger.html#cb516-24" tabindex="-1"></a>  locationsDeleteOne<span class="op">,</span></span>
<span id="cb516-25"><a href="Swagger.html#cb516-25" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<table class="tabela-manjsa">
<caption>
<span id="tab:tabela-REST-DELETE-metode">Tabela 7.3: </span><strong>DELETE metode</strong> v okviru demo aplikacije
</caption>
<thead>
<tr>
<th style="text-align:left;">
Akcija
</th>
<th style="text-align:left;">
Metoda
</th>
<th style="text-align:left;">
URL naslov
</th>
<th style="text-align:left;">
Parametri
</th>
<th style="text-align:left;">
Primer
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<izbrisi>Brisanje določene lokacije</izbrisi>
</td>
<td style="text-align:left;">
<izbrisi><code>DELETE</code></izbrisi>
</td>
<td style="text-align:left;">
<izbrisi><code>/locations/:locationId</code></izbrisi>
</td>
<td style="text-align:left;">
<izbrisi><code>locationId</code></izbrisi>
</td>
<td style="text-align:left;">
<izbrisi><code>http://&lt;server&gt;/api/</code><br><code>locations/123</code></izbrisi>
</td>
</tr>
<tr>
<td style="text-align:left;">
<b>Brisanje določenega komentarja</b><br>(glej poglavje <a href="Swagger.html#DELETE-comment">7.4.1</a>)
</td>
<td style="text-align:left;">
<code>DELETE</code>
</td>
<td style="text-align:left;">
<code>/location/:locationId/</code><br><code>comments/:commentId</code>
</td>
<td style="text-align:left;">
<code>locationId</code>, <code>commentId</code>
</td>
<td style="text-align:left;">
<code>http://&lt;server&gt;/api/</code><br><code>locations/123/comments/abc</code>
</td>
</tr>
</tbody>
</table>
<script>
  $(document).ready(function() {
    $("#delete-metode-za-brisanje-podatkov-iz-mongodb code.javascript:eq(0)").markRegExp(/.+?locationsDeleteOne\);/, options_izbrisi);
    $("#delete-metode-za-brisanje-podatkov-iz-mongodb code.javascript:eq(0)").markRegExp(/router\.delete[^\)]+?commentsDeleteOne[^\)]+?\);/, options_dodaj);
    $("#delete-metode-za-brisanje-podatkov-iz-mongodb code.javascript:eq(1)").markRegExp(/.+?locationsDeleteOne,/, options_izbrisi);
    $("#delete-metode-za-brisanje-podatkov-iz-mongodb code.javascript:eq(1)").markRegExp(/const locationsDeleteOne[\s\S]+?};/, options_izbrisi);
  });
</script>
<div id="DELETE-comment" class="section level3 hasAnchor" number="7.4.1">
<h3><span class="header-section-number">7.4.1</span> Brisanje obstoječega komentarja<a href="Swagger.html#DELETE-comment" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Pri brisanju odvisnega dokumenta je postopek nekoliko drugačen kot pri brisanju samostojnega dokumenta, saj vse operacije izvajamo z vidika nadrejenega dokumenta, tj. lokacije. Najprej poiščemo ustrezen nadrejeni element lokacije, nato poiščemo izbrani odvisni dokument komentarja in ga hkrati izbrišemo. Na koncu je potrebno še posodobiti nadrejeni element lokacije, tako da jo shranimo, kjer je potrebno poskrbeti tudi za posodobitev povprečne ocene lokacije.</p>
<p><code>api/controllers/comments.js</code></p>
<div class="sourceCode" id="cb517"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb517-1"><a href="Swagger.html#cb517-1" tabindex="-1"></a><span class="kw">const</span> commentsDeleteOne <span class="op">=</span> <span class="kw">async</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb517-2"><a href="Swagger.html#cb517-2" tabindex="-1"></a>  <span class="kw">const</span> { locationId<span class="op">,</span> commentId } <span class="op">=</span> req<span class="op">.</span><span class="at">params</span><span class="op">;</span></span>
<span id="cb517-3"><a href="Swagger.html#cb517-3" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span>locationId <span class="op">||</span> <span class="op">!</span>commentId)</span>
<span id="cb517-4"><a href="Swagger.html#cb517-4" tabindex="-1"></a>    res<span class="op">.</span><span class="fu">status</span>(<span class="dv">400</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb517-5"><a href="Swagger.html#cb517-5" tabindex="-1"></a>      <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;Path parameters &#39;locationId&#39; and &#39;commentId&#39; are required.&quot;</span><span class="op">,</span></span>
<span id="cb517-6"><a href="Swagger.html#cb517-6" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb517-7"><a href="Swagger.html#cb517-7" tabindex="-1"></a>  <span class="cf">else</span> {</span>
<span id="cb517-8"><a href="Swagger.html#cb517-8" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb517-9"><a href="Swagger.html#cb517-9" tabindex="-1"></a>      <span class="kw">let</span> location <span class="op">=</span> <span class="cf">await</span> <span class="bu">Location</span><span class="op">.</span><span class="fu">findById</span>(locationId)</span>
<span id="cb517-10"><a href="Swagger.html#cb517-10" tabindex="-1"></a>        <span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;comments&quot;</span>)</span>
<span id="cb517-11"><a href="Swagger.html#cb517-11" tabindex="-1"></a>        <span class="op">.</span><span class="fu">exec</span>()<span class="op">;</span></span>
<span id="cb517-12"><a href="Swagger.html#cb517-12" tabindex="-1"></a>      <span class="cf">if</span> (<span class="op">!</span>location)</span>
<span id="cb517-13"><a href="Swagger.html#cb517-13" tabindex="-1"></a>        res<span class="op">.</span><span class="fu">status</span>(<span class="dv">404</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb517-14"><a href="Swagger.html#cb517-14" tabindex="-1"></a>          <span class="dt">message</span><span class="op">:</span> <span class="vs">`Location with id &#39;</span><span class="sc">${</span>locationId<span class="sc">}</span><span class="vs">&#39; not found.`</span><span class="op">,</span></span>
<span id="cb517-15"><a href="Swagger.html#cb517-15" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb517-16"><a href="Swagger.html#cb517-16" tabindex="-1"></a>      <span class="cf">else</span> <span class="cf">if</span> (location<span class="op">.</span><span class="at">comments</span> <span class="op">&amp;&amp;</span> location<span class="op">.</span><span class="at">comments</span><span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb517-17"><a href="Swagger.html#cb517-17" tabindex="-1"></a>        <span class="kw">const</span> comment <span class="op">=</span> location<span class="op">.</span><span class="at">comments</span><span class="op">.</span><span class="fu">id</span>(commentId)<span class="op">;</span></span>
<span id="cb517-18"><a href="Swagger.html#cb517-18" tabindex="-1"></a>        <span class="cf">if</span> (<span class="op">!</span>comment)</span>
<span id="cb517-19"><a href="Swagger.html#cb517-19" tabindex="-1"></a>          res<span class="op">.</span><span class="fu">status</span>(<span class="dv">404</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb517-20"><a href="Swagger.html#cb517-20" tabindex="-1"></a>            <span class="dt">message</span><span class="op">:</span> <span class="vs">`Comment with id &#39;</span><span class="sc">${</span>commentId<span class="sc">}</span><span class="vs">&#39; not found.`</span><span class="op">,</span></span>
<span id="cb517-21"><a href="Swagger.html#cb517-21" tabindex="-1"></a>          })<span class="op">;</span></span>
<span id="cb517-22"><a href="Swagger.html#cb517-22" tabindex="-1"></a>        <span class="cf">else</span> {</span>
<span id="cb517-23"><a href="Swagger.html#cb517-23" tabindex="-1"></a>          comment<span class="op">.</span><span class="fu">deleteOne</span>()<span class="op">;</span></span>
<span id="cb517-24"><a href="Swagger.html#cb517-24" tabindex="-1"></a>          <span class="cf">await</span> location<span class="op">.</span><span class="fu">save</span>()<span class="op">;</span></span>
<span id="cb517-25"><a href="Swagger.html#cb517-25" tabindex="-1"></a>          <span class="cf">await</span> <span class="fu">updateAverageRating</span>(location<span class="op">.</span><span class="at">_id</span>)<span class="op">;</span></span>
<span id="cb517-26"><a href="Swagger.html#cb517-26" tabindex="-1"></a>          res<span class="op">.</span><span class="fu">status</span>(<span class="dv">204</span>)<span class="op">.</span><span class="fu">send</span>()<span class="op">.</span><span class="fu">json</span>({ <span class="dt">status</span><span class="op">:</span> <span class="st">&quot;OK&quot;</span> })<span class="op">;</span></span>
<span id="cb517-27"><a href="Swagger.html#cb517-27" tabindex="-1"></a>        }</span>
<span id="cb517-28"><a href="Swagger.html#cb517-28" tabindex="-1"></a>      } <span class="cf">else</span> res<span class="op">.</span><span class="fu">status</span>(<span class="dv">404</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;No comments found.&quot;</span> })<span class="op">;</span></span>
<span id="cb517-29"><a href="Swagger.html#cb517-29" tabindex="-1"></a>    } <span class="cf">catch</span> (err) {</span>
<span id="cb517-30"><a href="Swagger.html#cb517-30" tabindex="-1"></a>      res<span class="op">.</span><span class="fu">status</span>(<span class="dv">500</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">message</span><span class="op">:</span> err<span class="op">.</span><span class="at">message</span> })<span class="op">;</span></span>
<span id="cb517-31"><a href="Swagger.html#cb517-31" tabindex="-1"></a>    }</span>
<span id="cb517-32"><a href="Swagger.html#cb517-32" tabindex="-1"></a>  }</span>
<span id="cb517-33"><a href="Swagger.html#cb517-33" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#DELETE-comment code.javascript:eq(0)").markRegExp(/async /, options_dodaj);
    $("#DELETE-comment code.javascript:eq(0)").markRegExp(/\s+?const { *locationId[\s\S]+?\._id\);/, options_dodaj);
    $("#DELETE-comment code.javascript:eq(0)").markRegExp(/\.send\(\)/, options_dodaj);
    $("#DELETE-comment code.javascript:eq(0)").markRegExp(/\.json\({ status: "OK" }\)/, options_izbrisi);
    $("#DELETE-comment code.javascript:eq(0)").markRegExp(/^\s+?}$/m, options_dodaj);
    $("#DELETE-comment code.javascript:eq(0)").markRegExp(/\s+?} else res\.status[\s\S]+?\.message }.+/, options_dodaj);
  });
</script>
<div id="DELETE-OpenAPI" class="section level4 hasAnchor" number="7.4.1.1">
<h4><span class="header-section-number">7.4.1.1</span> OpenAPI dokumentacija<a href="Swagger.html#DELETE-OpenAPI" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Podobno, kot smo dodali OpenAPI dokumentacijo pri GET, POST in PUT metodah, jo bomo tudi pri tej DELETE metodi.</p>
<p><code>api/controllers/comments.js</code></p>
<div class="sourceCode" id="cb518"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb518-1"><a href="Swagger.html#cb518-1" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb518-2"><a href="Swagger.html#cb518-2" tabindex="-1"></a><span class="co"> * </span><span class="an">@openapi</span></span>
<span id="cb518-3"><a href="Swagger.html#cb518-3" tabindex="-1"></a><span class="co"> * /locations/{locationId}/comments/{commentId}:</span></span>
<span id="cb518-4"><a href="Swagger.html#cb518-4" tabindex="-1"></a><span class="co"> *  delete:</span></span>
<span id="cb518-5"><a href="Swagger.html#cb518-5" tabindex="-1"></a><span class="co"> *   summary: Delete existing comment from a given location.</span></span>
<span id="cb518-6"><a href="Swagger.html#cb518-6" tabindex="-1"></a><span class="co"> *   description: Delete existing **comment** with a given unique identifier from a location with given unique identifier.</span></span>
<span id="cb518-7"><a href="Swagger.html#cb518-7" tabindex="-1"></a><span class="co"> *   tags: [Comments]</span></span>
<span id="cb518-8"><a href="Swagger.html#cb518-8" tabindex="-1"></a><span class="co"> *   parameters:</span></span>
<span id="cb518-9"><a href="Swagger.html#cb518-9" tabindex="-1"></a><span class="co"> *    - name: locationId</span></span>
<span id="cb518-10"><a href="Swagger.html#cb518-10" tabindex="-1"></a><span class="co"> *      in: path</span></span>
<span id="cb518-11"><a href="Swagger.html#cb518-11" tabindex="-1"></a><span class="co"> *      schema:</span></span>
<span id="cb518-12"><a href="Swagger.html#cb518-12" tabindex="-1"></a><span class="co"> *       type: string</span></span>
<span id="cb518-13"><a href="Swagger.html#cb518-13" tabindex="-1"></a><span class="co"> *       pattern: &#39;^[a-fA-F</span><span class="an">\d]{24}$&#39;</span></span>
<span id="cb518-14"><a href="Swagger.html#cb518-14" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">unique identifier</span><span class="kw">&lt;/b&gt;</span><span class="co"> of location</span></span>
<span id="cb518-15"><a href="Swagger.html#cb518-15" tabindex="-1"></a><span class="co"> *      required: true</span></span>
<span id="cb518-16"><a href="Swagger.html#cb518-16" tabindex="-1"></a><span class="co"> *      example: 635a62f5dc5d7968e6846914</span></span>
<span id="cb518-17"><a href="Swagger.html#cb518-17" tabindex="-1"></a><span class="co"> *    - name: commentId</span></span>
<span id="cb518-18"><a href="Swagger.html#cb518-18" tabindex="-1"></a><span class="co"> *      in: path</span></span>
<span id="cb518-19"><a href="Swagger.html#cb518-19" tabindex="-1"></a><span class="co"> *      schema:</span></span>
<span id="cb518-20"><a href="Swagger.html#cb518-20" tabindex="-1"></a><span class="co"> *       type: string</span></span>
<span id="cb518-21"><a href="Swagger.html#cb518-21" tabindex="-1"></a><span class="co"> *       pattern: &#39;^[a-fA-F</span><span class="an">\d]{24}$&#39;</span></span>
<span id="cb518-22"><a href="Swagger.html#cb518-22" tabindex="-1"></a><span class="co"> *      description: </span><span class="kw">&lt;b&gt;</span><span class="co">unique identifier</span><span class="kw">&lt;/b&gt;</span><span class="co"> of comment</span></span>
<span id="cb518-23"><a href="Swagger.html#cb518-23" tabindex="-1"></a><span class="co"> *      required: true</span></span>
<span id="cb518-24"><a href="Swagger.html#cb518-24" tabindex="-1"></a><span class="co"> *      example: 636346e7171e084ff4e4bbf9</span></span>
<span id="cb518-25"><a href="Swagger.html#cb518-25" tabindex="-1"></a><span class="co"> *   responses:</span></span>
<span id="cb518-26"><a href="Swagger.html#cb518-26" tabindex="-1"></a><span class="co"> *    &#39;204&#39;:</span></span>
<span id="cb518-27"><a href="Swagger.html#cb518-27" tabindex="-1"></a><span class="co"> *     description: </span><span class="kw">&lt;b&gt;</span><span class="co">No Content</span><span class="kw">&lt;/b&gt;</span><span class="co">, with no content.</span></span>
<span id="cb518-28"><a href="Swagger.html#cb518-28" tabindex="-1"></a><span class="co"> *    &#39;400&#39;:</span></span>
<span id="cb518-29"><a href="Swagger.html#cb518-29" tabindex="-1"></a><span class="co"> *     description: </span><span class="kw">&lt;b&gt;</span><span class="co">Bad Request</span><span class="kw">&lt;/b&gt;</span><span class="co">, with error message.</span></span>
<span id="cb518-30"><a href="Swagger.html#cb518-30" tabindex="-1"></a><span class="co"> *     content:</span></span>
<span id="cb518-31"><a href="Swagger.html#cb518-31" tabindex="-1"></a><span class="co"> *      application/json:</span></span>
<span id="cb518-32"><a href="Swagger.html#cb518-32" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb518-33"><a href="Swagger.html#cb518-33" tabindex="-1"></a><span class="co"> *        $ref: &#39;#/components/schemas/ErrorMessage&#39;</span></span>
<span id="cb518-34"><a href="Swagger.html#cb518-34" tabindex="-1"></a><span class="co"> *       example:</span></span>
<span id="cb518-35"><a href="Swagger.html#cb518-35" tabindex="-1"></a><span class="co"> *        message: Path parameters &#39;locationId&#39; and &#39;commentId&#39; are required.</span></span>
<span id="cb518-36"><a href="Swagger.html#cb518-36" tabindex="-1"></a><span class="co"> *    &#39;404&#39;:</span></span>
<span id="cb518-37"><a href="Swagger.html#cb518-37" tabindex="-1"></a><span class="co"> *     description: </span><span class="kw">&lt;b&gt;</span><span class="co">Not Found</span><span class="kw">&lt;/b&gt;</span><span class="co">, with error message.</span></span>
<span id="cb518-38"><a href="Swagger.html#cb518-38" tabindex="-1"></a><span class="co"> *     content:</span></span>
<span id="cb518-39"><a href="Swagger.html#cb518-39" tabindex="-1"></a><span class="co"> *      application/json:</span></span>
<span id="cb518-40"><a href="Swagger.html#cb518-40" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb518-41"><a href="Swagger.html#cb518-41" tabindex="-1"></a><span class="co"> *        $ref: &#39;#/components/schemas/ErrorMessage&#39;</span></span>
<span id="cb518-42"><a href="Swagger.html#cb518-42" tabindex="-1"></a><span class="co"> *       examples:</span></span>
<span id="cb518-43"><a href="Swagger.html#cb518-43" tabindex="-1"></a><span class="co"> *        location not found:</span></span>
<span id="cb518-44"><a href="Swagger.html#cb518-44" tabindex="-1"></a><span class="co"> *         value:</span></span>
<span id="cb518-45"><a href="Swagger.html#cb518-45" tabindex="-1"></a><span class="co"> *          message: Location with id &#39;735a62f5dc5d7968e6846914&#39; not found.</span></span>
<span id="cb518-46"><a href="Swagger.html#cb518-46" tabindex="-1"></a><span class="co"> *        comment not found:</span></span>
<span id="cb518-47"><a href="Swagger.html#cb518-47" tabindex="-1"></a><span class="co"> *         value:</span></span>
<span id="cb518-48"><a href="Swagger.html#cb518-48" tabindex="-1"></a><span class="co"> *          message: Comment with id &#39;736346e7171e084ff4e4bbf9&#39; not found.</span></span>
<span id="cb518-49"><a href="Swagger.html#cb518-49" tabindex="-1"></a><span class="co"> *        no comments found:</span></span>
<span id="cb518-50"><a href="Swagger.html#cb518-50" tabindex="-1"></a><span class="co"> *         value:</span></span>
<span id="cb518-51"><a href="Swagger.html#cb518-51" tabindex="-1"></a><span class="co"> *          message: No comments found.</span></span>
<span id="cb518-52"><a href="Swagger.html#cb518-52" tabindex="-1"></a><span class="co"> *    &#39;500&#39;:</span></span>
<span id="cb518-53"><a href="Swagger.html#cb518-53" tabindex="-1"></a><span class="co"> *     description: </span><span class="kw">&lt;b&gt;</span><span class="co">Internal Server Error</span><span class="kw">&lt;/b&gt;</span><span class="co">, with error message.</span></span>
<span id="cb518-54"><a href="Swagger.html#cb518-54" tabindex="-1"></a><span class="co"> *     content:</span></span>
<span id="cb518-55"><a href="Swagger.html#cb518-55" tabindex="-1"></a><span class="co"> *      application/json:</span></span>
<span id="cb518-56"><a href="Swagger.html#cb518-56" tabindex="-1"></a><span class="co"> *       schema:</span></span>
<span id="cb518-57"><a href="Swagger.html#cb518-57" tabindex="-1"></a><span class="co"> *        $ref: &#39;#/components/schemas/ErrorMessage&#39;</span></span>
<span id="cb518-58"><a href="Swagger.html#cb518-58" tabindex="-1"></a><span class="co"> *       example:</span></span>
<span id="cb518-59"><a href="Swagger.html#cb518-59" tabindex="-1"></a><span class="co"> *        message: Database not available.</span></span>
<span id="cb518-60"><a href="Swagger.html#cb518-60" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb518-61"><a href="Swagger.html#cb518-61" tabindex="-1"></a><span class="kw">const</span> commentsDeleteOne <span class="op">=</span> <span class="kw">async</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb518-62"><a href="Swagger.html#cb518-62" tabindex="-1"></a>  <span class="kw">const</span> { locationId<span class="op">,</span> commentId } <span class="op">=</span> req<span class="op">.</span><span class="at">params</span><span class="op">;</span></span>
<span id="cb518-63"><a href="Swagger.html#cb518-63" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span>locationId <span class="op">||</span> <span class="op">!</span>commentId)</span>
<span id="cb518-64"><a href="Swagger.html#cb518-64" tabindex="-1"></a>    res<span class="op">.</span><span class="fu">status</span>(<span class="dv">400</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb518-65"><a href="Swagger.html#cb518-65" tabindex="-1"></a>      <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;Path parameters &#39;locationId&#39; and &#39;commentId&#39; are required.&quot;</span><span class="op">,</span></span>
<span id="cb518-66"><a href="Swagger.html#cb518-66" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb518-67"><a href="Swagger.html#cb518-67" tabindex="-1"></a>  <span class="cf">else</span> {</span>
<span id="cb518-68"><a href="Swagger.html#cb518-68" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb518-69"><a href="Swagger.html#cb518-69" tabindex="-1"></a>      <span class="kw">let</span> location <span class="op">=</span> <span class="cf">await</span> <span class="bu">Location</span><span class="op">.</span><span class="fu">findById</span>(locationId)</span>
<span id="cb518-70"><a href="Swagger.html#cb518-70" tabindex="-1"></a>        <span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;comments&quot;</span>)</span>
<span id="cb518-71"><a href="Swagger.html#cb518-71" tabindex="-1"></a>        <span class="op">.</span><span class="fu">exec</span>()<span class="op">;</span></span>
<span id="cb518-72"><a href="Swagger.html#cb518-72" tabindex="-1"></a>      <span class="cf">if</span> (<span class="op">!</span>location)</span>
<span id="cb518-73"><a href="Swagger.html#cb518-73" tabindex="-1"></a>        res<span class="op">.</span><span class="fu">status</span>(<span class="dv">404</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb518-74"><a href="Swagger.html#cb518-74" tabindex="-1"></a>          <span class="dt">message</span><span class="op">:</span> <span class="vs">`Location with id &#39;</span><span class="sc">${</span>locationId<span class="sc">}</span><span class="vs">&#39; not found.`</span><span class="op">,</span></span>
<span id="cb518-75"><a href="Swagger.html#cb518-75" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb518-76"><a href="Swagger.html#cb518-76" tabindex="-1"></a>      <span class="cf">else</span> <span class="cf">if</span> (location<span class="op">.</span><span class="at">comments</span> <span class="op">&amp;&amp;</span> location<span class="op">.</span><span class="at">comments</span><span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb518-77"><a href="Swagger.html#cb518-77" tabindex="-1"></a>        <span class="kw">const</span> comment <span class="op">=</span> location<span class="op">.</span><span class="at">comments</span><span class="op">.</span><span class="fu">id</span>(commentId)<span class="op">;</span></span>
<span id="cb518-78"><a href="Swagger.html#cb518-78" tabindex="-1"></a>        <span class="cf">if</span> (<span class="op">!</span>comment)</span>
<span id="cb518-79"><a href="Swagger.html#cb518-79" tabindex="-1"></a>          res<span class="op">.</span><span class="fu">status</span>(<span class="dv">404</span>)<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb518-80"><a href="Swagger.html#cb518-80" tabindex="-1"></a>            <span class="dt">message</span><span class="op">:</span> <span class="vs">`Comment with id &#39;</span><span class="sc">${</span>commentId<span class="sc">}</span><span class="vs">&#39; not found.`</span><span class="op">,</span></span>
<span id="cb518-81"><a href="Swagger.html#cb518-81" tabindex="-1"></a>          })<span class="op">;</span></span>
<span id="cb518-82"><a href="Swagger.html#cb518-82" tabindex="-1"></a>        <span class="cf">else</span> {</span>
<span id="cb518-83"><a href="Swagger.html#cb518-83" tabindex="-1"></a>          comment<span class="op">.</span><span class="fu">deleteOne</span>()<span class="op">;</span></span>
<span id="cb518-84"><a href="Swagger.html#cb518-84" tabindex="-1"></a>          <span class="cf">await</span> location<span class="op">.</span><span class="fu">save</span>()<span class="op">;</span></span>
<span id="cb518-85"><a href="Swagger.html#cb518-85" tabindex="-1"></a>          <span class="cf">await</span> <span class="fu">updateAverageRating</span>(location<span class="op">.</span><span class="at">_id</span>)<span class="op">;</span></span>
<span id="cb518-86"><a href="Swagger.html#cb518-86" tabindex="-1"></a>          res<span class="op">.</span><span class="fu">status</span>(<span class="dv">204</span>)<span class="op">.</span><span class="fu">send</span>() <span class="co">/*.json({ status: &quot;OK&quot; })*/</span><span class="op">;</span></span>
<span id="cb518-87"><a href="Swagger.html#cb518-87" tabindex="-1"></a>        }</span>
<span id="cb518-88"><a href="Swagger.html#cb518-88" tabindex="-1"></a>      } <span class="cf">else</span> res<span class="op">.</span><span class="fu">status</span>(<span class="dv">404</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">message</span><span class="op">:</span> <span class="st">&quot;No comments found.&quot;</span> })<span class="op">;</span></span>
<span id="cb518-89"><a href="Swagger.html#cb518-89" tabindex="-1"></a>    } <span class="cf">catch</span> (err) {</span>
<span id="cb518-90"><a href="Swagger.html#cb518-90" tabindex="-1"></a>      res<span class="op">.</span><span class="fu">status</span>(<span class="dv">500</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">message</span><span class="op">:</span> err<span class="op">.</span><span class="at">message</span> })<span class="op">;</span></span>
<span id="cb518-91"><a href="Swagger.html#cb518-91" tabindex="-1"></a>    }</span>
<span id="cb518-92"><a href="Swagger.html#cb518-92" tabindex="-1"></a>  }</span>
<span id="cb518-93"><a href="Swagger.html#cb518-93" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#DELETE-OpenAPI code.javascript:eq(0)").markRegExp(/\/\*\*[\s\S]+?\*\//, options_dodaj);
  });
</script>
</div>
<div id="testiranje-brisanja-obstoječega-komentarja" class="section level4 hasAnchor" number="7.4.1.2">
<h4><span class="header-section-number">7.4.1.2</span> Testiranje brisanja obstoječega komentarja<a href="Swagger.html#testiranje-brisanja-obstoječega-komentarja" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>V nadaljevanju je prikazano brisanje obstoječega komentarja avtorja Jack the Riper.</p>
<p><code>Odjemalec</code></p>
<div class="sourceCode" id="cb519"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb519-1"><a href="Swagger.html#cb519-1" tabindex="-1"></a><span class="ex">$</span> curl <span class="at">-X</span> DELETE <span class="dt">\</span></span>
<span id="cb519-2"><a href="Swagger.html#cb519-2" tabindex="-1"></a>       <span class="st">&quot;http://localhost:3000/api/locations/</span><span class="va">${LOCATION_ID}</span><span class="st">/comments/</span><span class="va">${COMMENT_ID}</span><span class="st">&quot;</span></span></code></pre></div>
<p>Ta sprememba povzroči tudi spremembo povprečne ocene lokacije, kar je prikazano v konzoli strežnika.</p>
<p><code>Strežnik</code></p>
<div class="sourceCode" id="cb520"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb520-1"><a href="Swagger.html#cb520-1" tabindex="-1"></a><span class="ex">Average</span> rating updated to 3.</span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#testiranje-brisanja-obstoječega-komentarja code.bash:eq(0)").markRegExp(/curl[\s\S]+/, options_dodaj);
  });
</script>
</div>
</div>
<div id="brisanje-dokumentov" class="section level3 hasAnchor" number="7.4.2">
<h3><span class="header-section-number">7.4.2</span> Brisanje dokumentov<a href="Swagger.html#brisanje-dokumentov" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Zaradi načina delovanje naše aplikacije brisanja lokacij ne bomo podprli. V okviru MongoDB podatkovne baze imamo za to funkcionalnost na voljo metodo <a href="https://mongoosejs.com/docs/api/model.html#model_Model-findByIdAndRemove"><i class="fa-solid fa-database"></i><strong><code>findByIdAndRemove</code></strong></a>, ki najprej poišče dokument s podanim enoličnim identifikatorjem in ga nato izbriše.</p>
</div>
</div>
<div id="uporaba-rest-api-ja-v-express-aplikaciji" class="section level2 hasAnchor" number="7.5">
<h2><span class="header-section-number">7.5</span> Uporaba REST API-ja v Express aplikaciji<a href="Swagger.html#uporaba-rest-api-ja-v-express-aplikaciji" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Do podatkovne baze imamo pripravljen REST API vmesnik, ki ga sedaj lahko vključimo v našo aplikacijo, kot to prikazuje slika <a href="Swagger.html#fig:slika-Express-dostop-do-API">7.3</a>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-Express-dostop-do-API"></span>
<img src="assets/img/Express_dostop_do_API.png" alt="V nadaljevanju bomo s pomočjo Express in Node.js dostopali do REST API za dostop do MongoDB podatkovne baze" width="550" />
<p class="caption">
Slika 7.3: V nadaljevanju bomo s pomočjo Express in Node.js dostopali do REST API za dostop do MongoDB podatkovne baze
</p>
</div>
<p>Aplikacije na strani strežnika s pomočjo predlog Handlebars ne bomo gradili, saj bomo v nadaljevanju začeli z izdelavo aplikacije <i class="fa-brands fa-angular"></i><strong>Angular na strani odjemalca</strong>. Na tem mestu bomo zgolj demonstrirali <strong>omejeno funkcionalnost prikaza lokacij</strong>, kjer bomo na strani strežnika dostopali do podatkov razvitih REST API metod.</p>
<div id="priprava-na-api-klic-iz-express-aplikacije" class="section level3 hasAnchor" number="7.5.1">
<h3><span class="header-section-number">7.5.1</span> Priprava na API klic iz Express aplikacije<a href="Swagger.html#priprava-na-api-klic-iz-express-aplikacije" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Pri dostopu do REST storitve si bomo pomagali s knjižnico <a href="https://www.npmjs.com/package/axios"><i class="fa-brands fa-node-js"></i><strong><code>axios</code></strong></a>, ki jo namestimo in njeno odvisnost vključimo v <code>package.json</code>.</p>
<div class="sourceCode" id="cb521"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb521-1"><a href="Swagger.html#cb521-1" tabindex="-1"></a><span class="ex">$</span> npm install <span class="at">--save</span> axios</span></code></pre></div>
<p>Nato bomo implementirali spremembe v krmilniku <code>locations.js</code> na strani Express strežnika. Najprej poskrbimo za ustrezen naslov REST API strežnika, kjer upoštevamo razvojno oz. produkcijsko okolje. V nadaljevanju pa nastavimo še privzeti URL naslov knjižnici <code>axios</code> ter nastavimo privzeti časovni potek zahteve, ki je v našem primeru 5s.</p>
<p><code>hbs/controllers/locations.js</code></p>
<div class="sourceCode" id="cb522"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb522-1"><a href="Swagger.html#cb522-1" tabindex="-1"></a><span class="kw">const</span> apiServer <span class="op">=</span></span>
<span id="cb522-2"><a href="Swagger.html#cb522-2" tabindex="-1"></a>  <span class="bu">process</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">NODE_ENV</span> <span class="op">===</span> <span class="st">&quot;production&quot;</span></span>
<span id="cb522-3"><a href="Swagger.html#cb522-3" tabindex="-1"></a>    <span class="op">?</span> <span class="st">&quot;https://sp-2023-2024.fly.dev&quot;</span></span>
<span id="cb522-4"><a href="Swagger.html#cb522-4" tabindex="-1"></a>    <span class="op">:</span> <span class="st">&quot;http://localhost:&quot;</span> <span class="op">+</span> (<span class="bu">process</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">PORT</span> <span class="op">||</span> <span class="dv">3000</span>)<span class="op">;</span></span>
<span id="cb522-5"><a href="Swagger.html#cb522-5" tabindex="-1"></a><span class="kw">const</span> axios <span class="op">=</span> <span class="pp">require</span>(<span class="st">&quot;axios&quot;</span>)<span class="op">.</span><span class="fu">create</span>({ <span class="dt">baseURL</span><span class="op">:</span> apiServer<span class="op">,</span> <span class="dt">timeout</span><span class="op">:</span> <span class="dv">5000</span> })<span class="op">;</span></span>
<span id="cb522-6"><a href="Swagger.html#cb522-6" tabindex="-1"></a><span class="kw">const</span> list <span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb522-7"><a href="Swagger.html#cb522-7" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">render</span>(<span class="st">&quot;index&quot;</span><span class="op">,</span> { <span class="dt">title</span><span class="op">:</span> <span class="st">&quot;List of cultural heritages!&quot;</span> })<span class="op">;</span></span>
<span id="cb522-8"><a href="Swagger.html#cb522-8" tabindex="-1"></a>}</span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#priprava-na-api-klic-iz-express-aplikacije code.bash:eq(0)").markRegExp(/npm install.+/, options_dodaj);
    $("#priprava-na-api-klic-iz-express-aplikacije code.javascript:eq(0)").markRegExp(/const apiServer[\s\S]+?5000 \}\);/, options_dodaj);    
  });
</script>
</div>
<div id="pridobitev-seznama-lokacij-preko-api-ja" class="section level3 hasAnchor" number="7.5.2">
<h3><span class="header-section-number">7.5.2</span> Pridobitev seznama lokacij preko API-ja<a href="Swagger.html#pridobitev-seznama-lokacij-preko-api-ja" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Naš trenutni cilj je, da podatke pridobimo s klicem API-ja, ki dostopa do podatkovne baze in nam jih podatke vrne. Uporabimo lahko REST API metodo <code>/locations/distance</code>, ki nam vrne najbližje lokacije glede na podano izhodišče, ki ga podamo v obliki parametrov GPS koordinat.</p>
<p><code>hbs/controllers/locations.js</code></p>
<div class="sourceCode" id="cb523"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb523-1"><a href="Swagger.html#cb523-1" tabindex="-1"></a><span class="kw">const</span> list <span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb523-2"><a href="Swagger.html#cb523-2" tabindex="-1"></a>  <span class="kw">let</span> location <span class="op">=</span> { <span class="dt">lng</span><span class="op">:</span> <span class="fl">14.469027</span><span class="op">,</span> <span class="dt">lat</span><span class="op">:</span> <span class="fl">46.050129</span> }<span class="op">;</span> <span class="co">// Ljubljana</span></span>
<span id="cb523-3"><a href="Swagger.html#cb523-3" tabindex="-1"></a>  <span class="kw">let</span> data <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb523-4"><a href="Swagger.html#cb523-4" tabindex="-1"></a>  axios</span>
<span id="cb523-5"><a href="Swagger.html#cb523-5" tabindex="-1"></a>    <span class="op">.</span><span class="fu">get</span>(<span class="st">&quot;/api/locations/distance&quot;</span><span class="op">,</span> {</span>
<span id="cb523-6"><a href="Swagger.html#cb523-6" tabindex="-1"></a>      <span class="dt">params</span><span class="op">:</span> { <span class="dt">lng</span><span class="op">:</span> location<span class="op">.</span><span class="at">lng</span><span class="op">,</span> <span class="dt">lat</span><span class="op">:</span> location<span class="op">.</span><span class="at">lat</span><span class="op">,</span> <span class="dt">nResults</span><span class="op">:</span> <span class="dv">5</span> }<span class="op">,</span></span>
<span id="cb523-7"><a href="Swagger.html#cb523-7" tabindex="-1"></a>    })</span>
<span id="cb523-8"><a href="Swagger.html#cb523-8" tabindex="-1"></a>    <span class="op">.</span><span class="fu">then</span>((apiRes) <span class="kw">=&gt;</span> (data <span class="op">=</span> apiRes<span class="op">.</span><span class="at">data</span>))</span>
<span id="cb523-9"><a href="Swagger.html#cb523-9" tabindex="-1"></a>    <span class="op">.</span><span class="fu">catch</span>((err) <span class="kw">=&gt;</span> (title <span class="op">=</span> err<span class="op">.</span><span class="at">message</span> <span class="op">+</span> <span class="st">&quot;!&quot;</span>))</span>
<span id="cb523-10"><a href="Swagger.html#cb523-10" tabindex="-1"></a>    <span class="op">.</span><span class="fu">finally</span>(() <span class="kw">=&gt;</span> res<span class="op">.</span><span class="fu">render</span>(<span class="st">&quot;index&quot;</span><span class="op">,</span> { <span class="dt">title</span><span class="op">:</span> <span class="st">&quot;List of cultoral heritages&quot;</span> }))<span class="op">;</span></span>
<span id="cb523-11"><a href="Swagger.html#cb523-11" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<script>
  $(document).ready(function() {
    $("#pridobitev-seznama-lokacij-preko-api-ja code.javascript:eq(0)").markRegExp(/\s+?let location[\s\S]+?finally\(\(\) => /, options_dodaj);
    $("#pridobitev-seznama-lokacij-preko-api-ja code.javascript:eq(0)").markRegExp(/\);/, options_dodaj);
  });
</script>
</div>
<div id="priprava-novega-pogleda-seznama" class="section level3 hasAnchor" number="7.5.3">
<h3><span class="header-section-number">7.5.3</span> Priprava novega pogleda seznama<a href="Swagger.html#priprava-novega-pogleda-seznama" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Podatki so preneseni iz modela v krmilnik in so na voljo v spremenljivki <code>data</code>, vendar jih pri generiranju pogleda še ne uporabimo. V nadaljevanju bomo tako pripravili nov pogled <code>list.hbs</code>, ki bo pogleg parametra <i class="fa-solid fa-tag"></i><code>title</code>, pričakoval še vhodni parameter <i class="fa-solid fa-tag"></i><code>locations</code>, kjer bodo v obliki tabele shranjene pridobljene lokacije iz podatkovne baze.</p>
<p>Pogled je <i class="fa-brands fa-html5"></i>HTML predloga, ki s pomočjo <i class="fa-brands fa-bootstrap"></i>Bootstrap elementov prikaže lokacije v obliki seznama z določenimi izbranimi podatki, ki jih pridobimo v vhodnem parametru <i class="fa-solid fa-tag"></i><code>locations</code>.</p>
<p><code>hbs/views/list.hbs</code></p>
<div class="sourceCode" id="cb524"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb524-1"><a href="Swagger.html#cb524-1" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>{{title}}<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb524-2"><a href="Swagger.html#cb524-2" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;row&quot;</span><span class="dt">&gt;</span></span>
<span id="cb524-3"><a href="Swagger.html#cb524-3" tabindex="-1"></a>  {{#each locations as |location|}}</span>
<span id="cb524-4"><a href="Swagger.html#cb524-4" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;col-12 col-xxl-6&quot;</span><span class="dt">&gt;</span></span>
<span id="cb524-5"><a href="Swagger.html#cb524-5" tabindex="-1"></a>      <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;card mt-4&quot;</span><span class="dt">&gt;</span></span>
<span id="cb524-6"><a href="Swagger.html#cb524-6" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;card-header&quot;</span><span class="dt">&gt;</span></span>
<span id="cb524-7"><a href="Swagger.html#cb524-7" tabindex="-1"></a>          <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;d-flex justify-content-between align-items-center&quot;</span><span class="dt">&gt;</span></span>
<span id="cb524-8"><a href="Swagger.html#cb524-8" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb524-9"><a href="Swagger.html#cb524-9" tabindex="-1"></a>              <span class="dt">&lt;</span><span class="kw">h3</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;card-title mt-1 mb-1&quot;</span><span class="dt">&gt;</span>{{location.name}}<span class="dt">&lt;/</span><span class="kw">h3</span><span class="dt">&gt;</span></span>
<span id="cb524-10"><a href="Swagger.html#cb524-10" tabindex="-1"></a>              {{#each synonyms as |synonym|}}</span>
<span id="cb524-11"><a href="Swagger.html#cb524-11" tabindex="-1"></a>                {{synonym}}{{#unless @last}},{{/unless}}</span>
<span id="cb524-12"><a href="Swagger.html#cb524-12" tabindex="-1"></a>              {{/each}}</span>
<span id="cb524-13"><a href="Swagger.html#cb524-13" tabindex="-1"></a>            <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb524-14"><a href="Swagger.html#cb524-14" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;text-nowrap ps-3&quot;</span><span class="dt">&gt;</span>{{location.rating}}<span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb524-15"><a href="Swagger.html#cb524-15" tabindex="-1"></a>          <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb524-16"><a href="Swagger.html#cb524-16" tabindex="-1"></a>        <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb524-17"><a href="Swagger.html#cb524-17" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;card-body&quot;</span><span class="dt">&gt;</span></span>
<span id="cb524-18"><a href="Swagger.html#cb524-18" tabindex="-1"></a>          <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;d-flex justify-content-between align-items-center&quot;</span><span class="dt">&gt;</span></span>
<span id="cb524-19"><a href="Swagger.html#cb524-19" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">div</span><span class="dt">&gt;&lt;</span><span class="kw">h6</span></span>
<span id="cb524-20"><a href="Swagger.html#cb524-20" tabindex="-1"></a><span class="ot">                class</span><span class="op">=</span><span class="st">&quot;card-subtitle mb-1 text-muted&quot;</span></span>
<span id="cb524-21"><a href="Swagger.html#cb524-21" tabindex="-1"></a><span class="ot">              </span><span class="dt">&gt;</span>{{location.type}}<span class="dt">&lt;/</span><span class="kw">h6</span><span class="dt">&gt;</span></span>
<span id="cb524-22"><a href="Swagger.html#cb524-22" tabindex="-1"></a>              <span class="dt">&lt;</span><span class="kw">p</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;card-text&quot;</span><span class="dt">&gt;</span>{{location.description}}<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb524-23"><a href="Swagger.html#cb524-23" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;text-nowrap ps-3&quot;</span><span class="dt">&gt;&lt;</span><span class="kw">span</span></span>
<span id="cb524-24"><a href="Swagger.html#cb524-24" tabindex="-1"></a><span class="ot">                class</span><span class="op">=</span><span class="st">&quot;badge rounded-pill text-bg-dark&quot;</span></span>
<span id="cb524-25"><a href="Swagger.html#cb524-25" tabindex="-1"></a><span class="ot">              </span><span class="dt">&gt;</span>{{location.distance}}<span class="dt">&lt;/</span><span class="kw">span</span><span class="dt">&gt;&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb524-26"><a href="Swagger.html#cb524-26" tabindex="-1"></a>          <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb524-27"><a href="Swagger.html#cb524-27" tabindex="-1"></a>        <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb524-28"><a href="Swagger.html#cb524-28" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;card-footer text-muted&quot;</span><span class="dt">&gt;</span></span>
<span id="cb524-29"><a href="Swagger.html#cb524-29" tabindex="-1"></a>          {{#each fields as |field|}}</span>
<span id="cb524-30"><a href="Swagger.html#cb524-30" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">span</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;badge text-bg-secondary&quot;</span><span class="dt">&gt;</span>{{field}}<span class="dt">&lt;/</span><span class="kw">span</span><span class="dt">&gt;</span></span>
<span id="cb524-31"><a href="Swagger.html#cb524-31" tabindex="-1"></a>          {{/each}}</span>
<span id="cb524-32"><a href="Swagger.html#cb524-32" tabindex="-1"></a>          {{#each keywords as |keyword|}}</span>
<span id="cb524-33"><a href="Swagger.html#cb524-33" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">span</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;badge text-bg-dark&quot;</span><span class="dt">&gt;</span>{{keyword}}<span class="dt">&lt;/</span><span class="kw">span</span><span class="dt">&gt;</span></span>
<span id="cb524-34"><a href="Swagger.html#cb524-34" tabindex="-1"></a>          {{/each}}</span>
<span id="cb524-35"><a href="Swagger.html#cb524-35" tabindex="-1"></a>        <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb524-36"><a href="Swagger.html#cb524-36" tabindex="-1"></a>      <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb524-37"><a href="Swagger.html#cb524-37" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb524-38"><a href="Swagger.html#cb524-38" tabindex="-1"></a>  {{/each}}</span>
<span id="cb524-39"><a href="Swagger.html#cb524-39" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span></code></pre></div>
<p>Sedaj mora metoda krmilnika omenjen pogled poklicati in mu posredovati pridobljene podatke iz podatkovne baze.</p>
<p><code>hbs/controllers/location.js</code></p>
<div class="sourceCode" id="cb525"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb525-1"><a href="Swagger.html#cb525-1" tabindex="-1"></a><span class="kw">const</span> list<span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb525-2"><a href="Swagger.html#cb525-2" tabindex="-1"></a>  <span class="kw">let</span> location <span class="op">=</span> { <span class="dt">lng</span><span class="op">:</span> <span class="fl">14.469027</span><span class="op">,</span> <span class="dt">lat</span><span class="op">:</span> <span class="fl">46.050129</span> }<span class="op">;</span> <span class="co">// Ljubljana</span></span>
<span id="cb525-3"><a href="Swagger.html#cb525-3" tabindex="-1"></a>  <span class="kw">let</span> data <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb525-4"><a href="Swagger.html#cb525-4" tabindex="-1"></a>  <span class="kw">let</span> title <span class="op">=</span> <span class="st">&quot;List of cultural heritages&quot;</span><span class="op">;</span></span>
<span id="cb525-5"><a href="Swagger.html#cb525-5" tabindex="-1"></a>  axios</span>
<span id="cb525-6"><a href="Swagger.html#cb525-6" tabindex="-1"></a>    <span class="op">.</span><span class="fu">get</span>(<span class="st">&quot;/api/locations/distance&quot;</span><span class="op">,</span> {</span>
<span id="cb525-7"><a href="Swagger.html#cb525-7" tabindex="-1"></a>      <span class="dt">params</span><span class="op">:</span> { <span class="dt">lng</span><span class="op">:</span> location<span class="op">.</span><span class="at">lng</span><span class="op">,</span> <span class="dt">lat</span><span class="op">:</span> location<span class="op">.</span><span class="at">lat</span><span class="op">,</span> <span class="dt">nResults</span><span class="op">:</span> <span class="dv">5</span> }<span class="op">,</span></span>
<span id="cb525-8"><a href="Swagger.html#cb525-8" tabindex="-1"></a>    })</span>
<span id="cb525-9"><a href="Swagger.html#cb525-9" tabindex="-1"></a>    <span class="op">.</span><span class="fu">then</span>((apiRes) <span class="kw">=&gt;</span> (data <span class="op">=</span> apiRes<span class="op">.</span><span class="at">data</span>))</span>
<span id="cb525-10"><a href="Swagger.html#cb525-10" tabindex="-1"></a>    <span class="op">.</span><span class="fu">catch</span>((err) <span class="kw">=&gt;</span> (title <span class="op">=</span> err<span class="op">.</span><span class="at">message</span> <span class="op">+</span> <span class="st">&quot;!&quot;</span>))</span>
<span id="cb525-11"><a href="Swagger.html#cb525-11" tabindex="-1"></a>    <span class="op">.</span><span class="fu">finally</span>(() <span class="kw">=&gt;</span> res<span class="op">.</span><span class="fu">render</span>(<span class="st">&quot;list index&quot;</span><span class="op">,</span> { <span class="dt">title</span><span class="op">:</span> <span class="st">&quot;List of cultural heritages&quot;</span><span class="op">,</span> <span class="dt">locations</span><span class="op">:</span> data }))<span class="op">;</span></span>
<span id="cb525-12"><a href="Swagger.html#cb525-12" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<p>Slika <a href="Swagger.html#fig:slika-Seznam-lokacij-zacetni">7.4</a> prikazuje začetni seznam lokacij, ki vsebuje vse željene podatke:</p>
<ul>
<li><strong>naslov</strong>, <strong>sinonimi</strong> in <strong>povprečna ocena</strong> lokacije (če je na voljo),</li>
<li><strong>tip</strong> in <strong>opis</strong> lokacije,</li>
<li><strong>področja</strong> in <strong>ključne besede</strong>, povezane z lokacijo.</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-Seznam-lokacij-zacetni"></span>
<img src="assets/img/Seznam_lokacij_zacetni.png" alt="Začetni seznam lokacij" width="700" />
<p class="caption">
Slika 7.4: Začetni seznam lokacij
</p>
</div>
<p>Z izgledom nismo v celoti zadovoljni, saj bi <strong>želeli bolj uporabniško prijazen prikaz</strong> razdalje in povprečne ocene.</p>
<p>Spletna stran deluje z <strong>manjšo težavo pri prikazu razdalje</strong> od trenutne lokacije (glej sliko <a href="Swagger.html#fig:slika-Seznam-lokacij-zacetni">7.4</a>), kar bomo v nadaljevanju popravili. Najprej se sprehodimo čez vse lokacije in za vsako razdaljo pokličemo funkcijo <code>formatDistance</code>, ki bo poskrbela za <strong>pretvorbo v ustrezne enote in zaokroževanje vrednosti</strong>. Privzeto so vhodni podatki v metrih in se prikažejo v preveliki natančnosti, kar bomo spremenili in v primeru večjih razdalj poskrbeli za pretvorbo v kilometre.</p>
<p><code>hbs/controllers/location.js</code></p>
<div class="sourceCode" id="cb526"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb526-1"><a href="Swagger.html#cb526-1" tabindex="-1"></a><span class="kw">const</span> apiServer <span class="op">=</span></span>
<span id="cb526-2"><a href="Swagger.html#cb526-2" tabindex="-1"></a>  <span class="bu">process</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">NODE_ENV</span> <span class="op">===</span> <span class="st">&quot;production&quot;</span></span>
<span id="cb526-3"><a href="Swagger.html#cb526-3" tabindex="-1"></a>    <span class="op">?</span> <span class="st">&quot;https://sp-2023-2024.fly.dev&quot;</span></span>
<span id="cb526-4"><a href="Swagger.html#cb526-4" tabindex="-1"></a>    <span class="op">:</span> <span class="st">&quot;http://localhost:&quot;</span> <span class="op">+</span> (<span class="bu">process</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">PORT</span> <span class="op">||</span> <span class="dv">3000</span>)<span class="op">;</span></span>
<span id="cb526-5"><a href="Swagger.html#cb526-5" tabindex="-1"></a><span class="kw">const</span> axios <span class="op">=</span> <span class="pp">require</span>(<span class="st">&quot;axios&quot;</span>)<span class="op">.</span><span class="fu">create</span>({ <span class="dt">baseURL</span><span class="op">:</span> apiServer<span class="op">,</span> <span class="dt">timeout</span><span class="op">:</span> <span class="dv">5000</span> })<span class="op">;</span></span>
<span id="cb526-6"><a href="Swagger.html#cb526-6" tabindex="-1"></a><span class="kw">const</span> formatDistance <span class="op">=</span> (distance) <span class="kw">=&gt;</span> {</span>
<span id="cb526-7"><a href="Swagger.html#cb526-7" tabindex="-1"></a>  <span class="kw">let</span> unit <span class="op">=</span> <span class="st">&quot;m&quot;</span><span class="op">;</span></span>
<span id="cb526-8"><a href="Swagger.html#cb526-8" tabindex="-1"></a>  <span class="kw">let</span> nDigits <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb526-9"><a href="Swagger.html#cb526-9" tabindex="-1"></a>  <span class="cf">if</span> (distance <span class="op">&gt;</span> <span class="dv">1000</span>) {</span>
<span id="cb526-10"><a href="Swagger.html#cb526-10" tabindex="-1"></a>    distance <span class="op">=</span> distance <span class="op">/</span> <span class="dv">1000</span><span class="op">;</span></span>
<span id="cb526-11"><a href="Swagger.html#cb526-11" tabindex="-1"></a>    unit <span class="op">=</span> <span class="st">&quot;km&quot;</span><span class="op">;</span></span>
<span id="cb526-12"><a href="Swagger.html#cb526-12" tabindex="-1"></a>    nDigits <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb526-13"><a href="Swagger.html#cb526-13" tabindex="-1"></a>  }</span>
<span id="cb526-14"><a href="Swagger.html#cb526-14" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb526-15"><a href="Swagger.html#cb526-15" tabindex="-1"></a>    distance<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">&quot;sl-SI&quot;</span><span class="op">,</span> { <span class="dt">maximumFractionDigits</span><span class="op">:</span> nDigits }) <span class="op">+</span></span>
<span id="cb526-16"><a href="Swagger.html#cb526-16" tabindex="-1"></a>    <span class="st">&quot; &quot;</span> <span class="op">+</span></span>
<span id="cb526-17"><a href="Swagger.html#cb526-17" tabindex="-1"></a>    unit</span>
<span id="cb526-18"><a href="Swagger.html#cb526-18" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb526-19"><a href="Swagger.html#cb526-19" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb526-20"><a href="Swagger.html#cb526-20" tabindex="-1"></a><span class="kw">const</span> list <span class="op">=</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb526-21"><a href="Swagger.html#cb526-21" tabindex="-1"></a>  <span class="kw">let</span> location <span class="op">=</span> { <span class="dt">lng</span><span class="op">:</span> <span class="fl">14.469027</span><span class="op">,</span> <span class="dt">lat</span><span class="op">:</span> <span class="fl">46.050129</span> }<span class="op">;</span> <span class="co">// Ljubljana</span></span>
<span id="cb526-22"><a href="Swagger.html#cb526-22" tabindex="-1"></a>  <span class="kw">let</span> data <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb526-23"><a href="Swagger.html#cb526-23" tabindex="-1"></a>  <span class="kw">let</span> title <span class="op">=</span> <span class="st">&quot;List of cultural heritages&quot;</span><span class="op">;</span></span>
<span id="cb526-24"><a href="Swagger.html#cb526-24" tabindex="-1"></a>  axios</span>
<span id="cb526-25"><a href="Swagger.html#cb526-25" tabindex="-1"></a>    <span class="op">.</span><span class="fu">get</span>(<span class="st">&quot;/api/locations/distance&quot;</span><span class="op">,</span> {</span>
<span id="cb526-26"><a href="Swagger.html#cb526-26" tabindex="-1"></a>      <span class="dt">params</span><span class="op">:</span> { <span class="dt">lng</span><span class="op">:</span> location<span class="op">.</span><span class="at">lng</span><span class="op">,</span> <span class="dt">lat</span><span class="op">:</span> location<span class="op">.</span><span class="at">lat</span><span class="op">,</span> <span class="dt">nResults</span><span class="op">:</span> <span class="dv">5</span> }<span class="op">,</span></span>
<span id="cb526-27"><a href="Swagger.html#cb526-27" tabindex="-1"></a>    })</span>
<span id="cb526-28"><a href="Swagger.html#cb526-28" tabindex="-1"></a>    <span class="op">.</span><span class="fu">then</span>(</span>
<span id="cb526-29"><a href="Swagger.html#cb526-29" tabindex="-1"></a>      (apiRes) <span class="kw">=&gt;</span></span>
<span id="cb526-30"><a href="Swagger.html#cb526-30" tabindex="-1"></a>        (data <span class="op">=</span> apiRes<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">map</span>((loc) <span class="kw">=&gt;</span> {</span>
<span id="cb526-31"><a href="Swagger.html#cb526-31" tabindex="-1"></a>          loc<span class="op">.</span><span class="at">distance</span> <span class="op">=</span> <span class="fu">formatDistance</span>(loc<span class="op">.</span><span class="at">distance</span>)<span class="op">;</span></span>
<span id="cb526-32"><a href="Swagger.html#cb526-32" tabindex="-1"></a>          <span class="cf">return</span> loc<span class="op">;</span></span>
<span id="cb526-33"><a href="Swagger.html#cb526-33" tabindex="-1"></a>        }))</span>
<span id="cb526-34"><a href="Swagger.html#cb526-34" tabindex="-1"></a>    )</span>
<span id="cb526-35"><a href="Swagger.html#cb526-35" tabindex="-1"></a>    <span class="op">.</span><span class="fu">catch</span>((err) <span class="kw">=&gt;</span> (title <span class="op">=</span> err<span class="op">.</span><span class="at">message</span> <span class="op">+</span> <span class="st">&quot;!&quot;</span>))</span>
<span id="cb526-36"><a href="Swagger.html#cb526-36" tabindex="-1"></a>    <span class="op">.</span><span class="fu">finally</span>(() <span class="kw">=&gt;</span> res<span class="op">.</span><span class="fu">render</span>(<span class="st">&quot;list&quot;</span><span class="op">,</span> { title<span class="op">,</span> <span class="dt">locations</span><span class="op">:</span> data }))<span class="op">;</span></span>
<span id="cb526-37"><a href="Swagger.html#cb526-37" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<p>Prav tako bomo številčno vrednost <strong>povprečne ocene lokacije prikazali z zvezdicami</strong>. To najlažje dosežemo s pomočjo <a href="https://handlebarsjs.com/guide/expressions.html#helpers"><i class="fa-brands fa-node-js"></i>Handlebars <strong>helper funkcije</strong></a>, ki jo opredelimo enkrat na enem mestu in uporabimo večkrat. Če se npr. v prihodnje odločimo, da bomo oceno komentarja prikazovali na drugačen način (ne z zvezdicami), bomo to lahko spremenili na enem mestu. Kodo za prikaz ocene shranimo v novo datoteko <code>hbsh.js</code>.</p>
<p><code>hbs/views/helpers/hbsh.js</code></p>
<div class="sourceCode" id="cb527"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb527-1"><a href="Swagger.html#cb527-1" tabindex="-1"></a><span class="kw">const</span> hbs <span class="op">=</span> <span class="pp">require</span>(<span class="st">&quot;hbs&quot;</span>)<span class="op">;</span></span>
<span id="cb527-2"><a href="Swagger.html#cb527-2" tabindex="-1"></a></span>
<span id="cb527-3"><a href="Swagger.html#cb527-3" tabindex="-1"></a>hbs<span class="op">.</span><span class="fu">registerHelper</span>(<span class="st">&quot;stars&quot;</span><span class="op">,</span> (rating) <span class="kw">=&gt;</span> {</span>
<span id="cb527-4"><a href="Swagger.html#cb527-4" tabindex="-1"></a>  <span class="kw">let</span> stars <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span></span>
<span id="cb527-5"><a href="Swagger.html#cb527-5" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++</span>)</span>
<span id="cb527-6"><a href="Swagger.html#cb527-6" tabindex="-1"></a>    stars <span class="op">+=</span></span>
<span id="cb527-7"><a href="Swagger.html#cb527-7" tabindex="-1"></a>      <span class="st">&#39;&lt;i class=&quot;fa-&#39;</span> <span class="op">+</span> (rating <span class="op">&gt;=</span> i <span class="op">?</span> <span class="st">&quot;solid&quot;</span> <span class="op">:</span> <span class="st">&quot;regular&quot;</span>) <span class="op">+</span> <span class="st">&#39; fa-star&quot;&gt;&lt;/i&gt;&#39;</span><span class="op">;</span></span>
<span id="cb527-8"><a href="Swagger.html#cb527-8" tabindex="-1"></a>  <span class="cf">return</span> stars<span class="op">;</span></span>
<span id="cb527-9"><a href="Swagger.html#cb527-9" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>Novo opredeljeno helper funkcijo moramo v aplikaciji tudi registrirati, zato jo vključimo v začetno datoteko naše aplikacije <code>server.js</code>.</p>
<p><code>server.js</code></p>
<div class="sourceCode" id="cb528"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb528-1"><a href="Swagger.html#cb528-1" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb528-2"><a href="Swagger.html#cb528-2" tabindex="-1"></a><span class="co"> * View engine (HBS) setup</span></span>
<span id="cb528-3"><a href="Swagger.html#cb528-3" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb528-4"><a href="Swagger.html#cb528-4" tabindex="-1"></a>app<span class="op">.</span><span class="fu">set</span>(<span class="st">&quot;views&quot;</span><span class="op">,</span> path<span class="op">.</span><span class="fu">join</span>(<span class="bu">__dirname</span><span class="op">,</span> <span class="st">&quot;hbs&quot;</span><span class="op">,</span> <span class="st">&quot;views&quot;</span>))<span class="op">;</span></span>
<span id="cb528-5"><a href="Swagger.html#cb528-5" tabindex="-1"></a>app<span class="op">.</span><span class="fu">set</span>(<span class="st">&quot;view engine&quot;</span><span class="op">,</span> <span class="st">&quot;hbs&quot;</span>)<span class="op">;</span></span>
<span id="cb528-6"><a href="Swagger.html#cb528-6" tabindex="-1"></a><span class="pp">require</span>(<span class="st">&quot;./hbs/views/helpers/hbsh.js&quot;</span>)<span class="op">;</span></span></code></pre></div>
<p>V obstoječem pogledu <code>list.hbs</code> pa dodamo klic helper funkcije. Pomembno je, da sedaj uporabimo trojne oklepaje <code>{{{...}}}</code>, namesto dvojnih <code>{{..}}</code>, kar pomeni, da v pogled neposredno vstavljamo HTML kodo (zvezdice s pomočjo Font Awesome ikon v okviru helper funkcije <code>stars</code>).</p>
<p><code>hbs/views/list.hbs</code></p>
<div class="sourceCode" id="cb529"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb529-1"><a href="Swagger.html#cb529-1" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;row&quot;</span><span class="dt">&gt;</span></span>
<span id="cb529-2"><a href="Swagger.html#cb529-2" tabindex="-1"></a>  {{#each locations as |location|}}</span>
<span id="cb529-3"><a href="Swagger.html#cb529-3" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;col-12 col-xxl-6&quot;</span><span class="dt">&gt;</span></span>
<span id="cb529-4"><a href="Swagger.html#cb529-4" tabindex="-1"></a>      <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;card mt-4&quot;</span><span class="dt">&gt;</span></span>
<span id="cb529-5"><a href="Swagger.html#cb529-5" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;card-header&quot;</span><span class="dt">&gt;</span></span>
<span id="cb529-6"><a href="Swagger.html#cb529-6" tabindex="-1"></a>          <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;d-flex justify-content-between align-items-center&quot;</span><span class="dt">&gt;</span></span>
<span id="cb529-7"><a href="Swagger.html#cb529-7" tabindex="-1"></a>            ...</span>
<span id="cb529-8"><a href="Swagger.html#cb529-8" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;text-nowrap ps-3&quot;</span><span class="dt">&gt;</span>{{{ stars location.rating }}}<span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb529-9"><a href="Swagger.html#cb529-9" tabindex="-1"></a>          <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb529-10"><a href="Swagger.html#cb529-10" tabindex="-1"></a>        <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb529-11"><a href="Swagger.html#cb529-11" tabindex="-1"></a>        ...</span>
<span id="cb529-12"><a href="Swagger.html#cb529-12" tabindex="-1"></a>      <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb529-13"><a href="Swagger.html#cb529-13" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb529-14"><a href="Swagger.html#cb529-14" tabindex="-1"></a>  {{/each}}</span>
<span id="cb529-15"><a href="Swagger.html#cb529-15" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span></code></pre></div>
<p>Posodobljen prikaz razdalje in povprečne ocene v obliki zvezdic prikazuje slika <a href="Swagger.html#fig:slika-Seznam-lokacij-koncni">7.5</a>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-Seznam-lokacij-koncni"></span>
<img src="assets/img/Seznam_lokacij_koncni.png" alt="Končni seznam lokacij" width="700" />
<p class="caption">
Slika 7.5: Končni seznam lokacij
</p>
</div>
<script>
  $(document).ready(function() {
    $("#priprava-novega-pogleda-seznama code:eq(5)").markRegExp(/list\.hbs/, options_dodaj);
    $("#priprava-novega-pogleda-seznama code.html:eq(0)").markRegExp(/.+/, options_dodaj);
    $("#priprava-novega-pogleda-seznama code.javascript:eq(0)").markRegExp(/list /, options_dodaj);
    $("#priprava-novega-pogleda-seznama code.javascript:eq(0)").markRegExp(/\s+?let title.+/, options_dodaj);
    $("#priprava-novega-pogleda-seznama code.javascript:eq(0)").markRegExp(/index/, options_izbrisi);
    $("#priprava-novega-pogleda-seznama code.javascript:eq(0)").markRegExp(/: "List of cultural heritages"/, options_izbrisi);
    $("#priprava-novega-pogleda-seznama code.javascript:eq(0)").markRegExp(/, locations: data }/, options_dodaj);
    $("#priprava-novega-pogleda-seznama code.javascript:eq(1)").markRegExp(/const formatDistance[\s\S]+?};/, options_dodaj);
    $("#priprava-novega-pogleda-seznama code.javascript:eq(1)").markRegExp(/\.map[\s\S]+?}\)/, options_dodaj);
    $("#priprava-novega-pogleda-seznama code:eq(13)").markRegExp(/(helpers|hbsh\.js)/, options_dodaj);
    $("#priprava-novega-pogleda-seznama code.javascript:eq(2)").markRegExp(/.+/, options_dodaj);
    $("#priprava-novega-pogleda-seznama code.javascript:eq(3)").markRegExp(/require.+/, options_dodaj);
    $("#priprava-novega-pogleda-seznama code.html:eq(1)").markRegExp(/({ stars | })/, options_dodaj);
  });
</script>
</div>
<div id="axios-zunanji-viri" class="section level3 hasAnchor" number="7.5.4">
<h3><span class="header-section-number">7.5.4</span> Vključitev ostalih podatkov iz zunanjih virov<a href="Swagger.html#axios-zunanji-viri" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Poleg podatkov našega lastnega REST API strežnika lahko v aplikacijo vključimo tudi ostale podatke iz zunanjih virov. V našem primeru bomo uporabili storitev <a href="https://teaching.lavbic.net/api/docs/#/Kraji/get_nominatim_reverse_lat__lat__lon__lon__format_geojson_addressdetails_1_zoom__zoom_"><i class="fa-solid fa-tag"></i><code>/nominatim/reverse</code></a>, ki je na voljo na strežniku <a href="https://teaching.lavbic.net/api/docs"><i class="fa-solid fa-earth-europe"></i>Teaching API</a>. Omenjena storitev izvede proces <a href="https://en.wikipedia.org/wiki/Reverse_geocoding"><i class="fa-brands fa-wikipedia-w"></i>obratnega geokodiranja</a>, ki na podlagi vhodnih GPS koordinat vrne najbližji naslov. To funkcionalnost bomo uporabili za naslov strani s seznamom lokacij, kjer bomo v naslov dodali kratek opis lokacije.</p>
<p><code>hbs/controllers/locations.js</code></p>
<div class="sourceCode" id="cb530"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb530-1"><a href="Swagger.html#cb530-1" tabindex="-1"></a><span class="kw">const</span> list <span class="op">=</span> <span class="kw">async</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb530-2"><a href="Swagger.html#cb530-2" tabindex="-1"></a>  <span class="kw">let</span> location <span class="op">=</span> { <span class="dt">lng</span><span class="op">:</span> <span class="fl">14.469027</span><span class="op">,</span> <span class="dt">lat</span><span class="op">:</span> <span class="fl">46.050129</span> }<span class="op">;</span> <span class="co">// Ljubljana</span></span>
<span id="cb530-3"><a href="Swagger.html#cb530-3" tabindex="-1"></a>  <span class="co">//let location = { lng: 15.260505, lat: 46.231193 }; // Celje</span></span>
<span id="cb530-4"><a href="Swagger.html#cb530-4" tabindex="-1"></a>  <span class="kw">let</span> data <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb530-5"><a href="Swagger.html#cb530-5" tabindex="-1"></a>  <span class="kw">let</span> title <span class="op">=</span> <span class="st">&quot;List of cultural heritages near &quot;</span><span class="op">;</span></span>
<span id="cb530-6"><a href="Swagger.html#cb530-6" tabindex="-1"></a>  <span class="kw">let</span> address<span class="op">;</span></span>
<span id="cb530-7"><a href="Swagger.html#cb530-7" tabindex="-1"></a>  <span class="cf">try</span> {</span>
<span id="cb530-8"><a href="Swagger.html#cb530-8" tabindex="-1"></a>    address <span class="op">=</span> (</span>
<span id="cb530-9"><a href="Swagger.html#cb530-9" tabindex="-1"></a>      <span class="cf">await</span> axios<span class="op">.</span><span class="fu">get</span>(</span>
<span id="cb530-10"><a href="Swagger.html#cb530-10" tabindex="-1"></a>        <span class="st">&quot;https://teaching.lavbic.net/api/nominatim/reverse?lat=&quot;</span> <span class="op">+</span></span>
<span id="cb530-11"><a href="Swagger.html#cb530-11" tabindex="-1"></a>          location<span class="op">.</span><span class="at">lat</span> <span class="op">+</span></span>
<span id="cb530-12"><a href="Swagger.html#cb530-12" tabindex="-1"></a>          <span class="st">&quot;&amp;lon=&quot;</span> <span class="op">+</span></span>
<span id="cb530-13"><a href="Swagger.html#cb530-13" tabindex="-1"></a>          location<span class="op">.</span><span class="at">lng</span> <span class="op">+</span></span>
<span id="cb530-14"><a href="Swagger.html#cb530-14" tabindex="-1"></a>          <span class="st">&quot;&amp;format=geojson&amp;addressdetails=1&amp;zoom=16&quot;</span></span>
<span id="cb530-15"><a href="Swagger.html#cb530-15" tabindex="-1"></a>      )</span>
<span id="cb530-16"><a href="Swagger.html#cb530-16" tabindex="-1"></a>    )<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="at">features</span>[<span class="dv">0</span>]<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">address</span><span class="op">;</span></span>
<span id="cb530-17"><a href="Swagger.html#cb530-17" tabindex="-1"></a>    <span class="cf">if</span> (address<span class="op">.</span><span class="at">road</span> <span class="op">&amp;&amp;</span> address<span class="op">.</span><span class="at">city</span>)</span>
<span id="cb530-18"><a href="Swagger.html#cb530-18" tabindex="-1"></a>      title <span class="op">+=</span> address<span class="op">.</span><span class="at">road</span> <span class="op">+</span> <span class="st">&quot;, &quot;</span> <span class="op">+</span> address<span class="op">.</span><span class="at">city</span><span class="op">;</span></span>
<span id="cb530-19"><a href="Swagger.html#cb530-19" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> (address<span class="op">.</span><span class="at">city</span>) title <span class="op">+=</span> address<span class="op">.</span><span class="at">city</span><span class="op">;</span></span>
<span id="cb530-20"><a href="Swagger.html#cb530-20" tabindex="-1"></a>    <span class="cf">else</span> title <span class="op">+=</span> <span class="st">&quot;unknown location&quot;</span><span class="op">;</span></span>
<span id="cb530-21"><a href="Swagger.html#cb530-21" tabindex="-1"></a>  } <span class="cf">catch</span> (err) {}</span>
<span id="cb530-22"><a href="Swagger.html#cb530-22" tabindex="-1"></a>  axios</span>
<span id="cb530-23"><a href="Swagger.html#cb530-23" tabindex="-1"></a>    <span class="op">.</span><span class="fu">get</span>(<span class="st">&quot;/api/locations/distance&quot;</span><span class="op">,</span> {</span>
<span id="cb530-24"><a href="Swagger.html#cb530-24" tabindex="-1"></a>      <span class="dt">params</span><span class="op">:</span> { <span class="dt">lng</span><span class="op">:</span> location<span class="op">.</span><span class="at">lng</span><span class="op">,</span> <span class="dt">lat</span><span class="op">:</span> location<span class="op">.</span><span class="at">lat</span><span class="op">,</span> <span class="dt">nResults</span><span class="op">:</span> <span class="dv">5</span> }<span class="op">,</span></span>
<span id="cb530-25"><a href="Swagger.html#cb530-25" tabindex="-1"></a>    })</span>
<span id="cb530-26"><a href="Swagger.html#cb530-26" tabindex="-1"></a>    <span class="op">.</span><span class="fu">then</span>(</span>
<span id="cb530-27"><a href="Swagger.html#cb530-27" tabindex="-1"></a>      (apiRes) <span class="kw">=&gt;</span></span>
<span id="cb530-28"><a href="Swagger.html#cb530-28" tabindex="-1"></a>        (data <span class="op">=</span> apiRes<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">map</span>((loc) <span class="kw">=&gt;</span> {</span>
<span id="cb530-29"><a href="Swagger.html#cb530-29" tabindex="-1"></a>          loc<span class="op">.</span><span class="at">distance</span> <span class="op">=</span> <span class="fu">formatDistance</span>(loc<span class="op">.</span><span class="at">distance</span>)<span class="op">;</span></span>
<span id="cb530-30"><a href="Swagger.html#cb530-30" tabindex="-1"></a>          <span class="cf">return</span> loc<span class="op">;</span></span>
<span id="cb530-31"><a href="Swagger.html#cb530-31" tabindex="-1"></a>        }))</span>
<span id="cb530-32"><a href="Swagger.html#cb530-32" tabindex="-1"></a>    )</span>
<span id="cb530-33"><a href="Swagger.html#cb530-33" tabindex="-1"></a>    <span class="op">.</span><span class="fu">catch</span>((err) <span class="kw">=&gt;</span> (title <span class="op">=</span> err<span class="op">.</span><span class="at">message</span> <span class="op">+</span> <span class="st">&quot;!&quot;</span>))</span>
<span id="cb530-34"><a href="Swagger.html#cb530-34" tabindex="-1"></a>    <span class="op">.</span><span class="fu">finally</span>(() <span class="kw">=&gt;</span> res<span class="op">.</span><span class="fu">render</span>(<span class="st">&quot;list&quot;</span><span class="op">,</span> { title<span class="op">,</span> <span class="dt">locations</span><span class="op">:</span> data }))<span class="op">;</span></span>
<span id="cb530-35"><a href="Swagger.html#cb530-35" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<p>Sliki <a href="Swagger.html#fig:slika-Naslov-seznama-lokacij-Ljubljana">7.6</a> in <a href="Swagger.html#fig:slika-Naslov-seznama-lokacij-Celje">7.7</a> prikazuje rezultat obratnega geokodiranja, kjer se na podlagi podanih vhodnih GPS koordinat prilagodi naslov spletne strani s seznamom kulturnih dediščin z opisom trenutne lokacije na ravni ulice in kraja.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-Naslov-seznama-lokacij-Ljubljana"></span>
<img src="assets/img/Naslov_seznama_lokacij_Ljubljana.png" alt="Naslov seznama lokacij **v Ljubljani** s pomočjo obratnega geokodiranja" width="700" />
<p class="caption">
Slika 7.6: Naslov seznama lokacij <strong>v Ljubljani</strong> s pomočjo obratnega geokodiranja
</p>
</div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-Naslov-seznama-lokacij-Celje"></span>
<img src="assets/img/Naslov_seznama_lokacij_Celje.png" alt="Naslov seznama lokacij **v Celju** s pomočjo obratnega geokodiranja" width="700" />
<p class="caption">
Slika 7.7: Naslov seznama lokacij <strong>v Celju</strong> s pomočjo obratnega geokodiranja
</p>
</div>
<script>
  $(document).ready(function() {
    $("#axios-zunanji-viri code.javascript:eq(0)").markRegExp(/async /, options_dodaj);
    $("#axios-zunanji-viri code.javascript:eq(0)").markRegExp(/\s+?\/\/let.+/, options_dodaj);
    $("#axios-zunanji-viri code.javascript:eq(0)").markRegExp(/ near /, options_dodaj);
    $("#axios-zunanji-viri code.javascript:eq(0)").markRegExp(/\s+?let address[\s\S]+?{}/, options_dodaj);
  });
</script>
</div>
</div>
<div id="izboljšanje-zmogljivosti-api-ja" class="section level2 hasAnchor" number="7.6">
<h2><span class="header-section-number">7.6</span> Izboljšanje zmogljivosti API-ja<a href="Swagger.html#izboljšanje-zmogljivosti-api-ja" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="porazdelitev-po-straneh" class="section level3 hasAnchor" number="7.6.1">
<h3><span class="header-section-number">7.6.1</span> Porazdelitev po straneh<a href="Swagger.html#porazdelitev-po-straneh" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Porazdelitev po straneh</strong> <em>(angl. pagination)</em>, kot ga prikazuje slika <a href="Swagger.html#fig:slika-API-porazdelitev-po-straneh">7.8</a>, je običajen postopek optimizacije pri večjih rezultatih, ki se prenašajo nazaj odjemalcu in na ta način izboljšamo odzivnost storitve.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-API-porazdelitev-po-straneh"></span>
<img src="assets/img/API_porazdelitev_po_straneh.png" alt="Porazdelitev po straneh" width="354" />
<p class="caption">
Slika 7.8: Porazdelitev po straneh
</p>
</div>
<p>Vplivi ukrepa:</p>
<ul>
<li>zaporedno številčenje strani,</li>
<li>obravnava večjega števila rezultatov.</li>
</ul>
<p>V okviru razvojnega okolja Node.js lahko nadgradimo obstoječo ORM knjižnico <a href="https://www.npmjs.com/package/mongoose"><i class="fa-brands fa-node-js"></i><code>mongoose</code></a> s knjižnico <a href="https://www.npmjs.com/package/mongoose-paginate-v2"><span class="skupaj"><i class="fa-brands fa-node-js"></i><code>mongoose-paginate-v2</code></span></a>, ki nam omogoča poenostavljeno porazdelitev po straneh pri dostopu do MongoDB podatkovne baze.</p>
</div>
<div id="asinhrono-beleženje" class="section level3 hasAnchor" number="7.6.2">
<h3><span class="header-section-number">7.6.2</span> Asinhrono beleženje<a href="Swagger.html#asinhrono-beleženje" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Pri sinhronem beleženju disk obravnava vsak klic in lahko upočasni sistem. Pri <strong>asinhronem beleženju</strong>, kot ga prikazuje slika <a href="Swagger.html#fig:slika-API-asinhrono-belezenje">7.9</a>, se dnevniški zapisi najprej brez zaklepanja pošljejo v medpomnilnik <em>(angl. buffer)</em>. Dnevniški zapisi se nato občasno zapišejo na disk, kar znatno zmanjša stroške V/I.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-API-asinhrono-belezenje"></span>
<img src="assets/img/API_asinhrono_belezenje.png" alt="Asinhrono beleženje" width="342" />
<p class="caption">
Slika 7.9: Asinhrono beleženje
</p>
</div>
<p>Vplivi ukrepa:</p>
<ul>
<li>posredovanje dnevniških zapisov v medpomnilnik brez zaklepanja,</li>
<li>občasno zapisovanje na disk,</li>
<li>večja prepustnost in manjša zakasnitev.</li>
</ul>
<p>V okviru razvojnega okolja Node.js imamo na voljo številne knjižnice za beleženje dnevniških zapisov, in sicer: <a href="https://www.npmjs.com/package/pino"><span class="skupaj"><i class="fa-brands fa-node-js"></i><code>pino</code></span></a>, <a href="https://www.npmjs.com/package/winston"><i class="fa-brands fa-node-js"></i><code>winston</code></a>, <a href="https://www.npmjs.com/package/morgan"><i class="fa-brands fa-node-js"></i><code>morgan</code></a>, <a href="https://www.npmjs.com/package/bunyan"><i class="fa-brands fa-node-js"></i><code>bunyan</code></a>, <a href="https://www.npmjs.com/package/roarr"><i class="fa-brands fa-node-js"></i><code>roarr</code></a>, <a href="https://www.npmjs.com/package/signale"><i class="fa-brands fa-node-js"></i><code>signale</code></a>, <a href="https://www.npmjs.com/package/tracer"><i class="fa-brands fa-node-js"></i><code>tracer</code></a>.</p>
</div>
<div id="predpomnjenje" class="section level3 hasAnchor" number="7.6.3">
<h3><span class="header-section-number">7.6.3</span> Predpomnjenje<a href="Swagger.html#predpomnjenje" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Podatke, do katerih pogosto dostopamo, lahko shranimo v predpomnilnik <em>(angl. cache)</em>. Odjemalec lahko najprej izvede poizvedbo v <strong>predpomnilniku</strong> <em>(angl. cache)</em>, če pa pride do zgrešenega zadetka v predpomnilniku, odjemalec šele takrat dostopa do podatkovne baze (glej sliko <a href="Swagger.html#fig:slika-API-predpomnjenje">7.10</a>). Predpomnilniki, kot je npr. <a href="https://redis.io/"><i class="fa-solid fa-layer-group"></i>Redis</a>, shranjuje podatke v pomnilnik, zato je dostop do podatkov veliko hitrejši kot do podatkovne baze.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-API-predpomnjenje"></span>
<img src="assets/img/API_predpomnjenje.png" alt="Predpomnjenje" width="342" />
<p class="caption">
Slika 7.10: Predpomnjenje
</p>
</div>
<p>Vplivi ukrepa:</p>
<ul>
<li>shranjevanje pogosto uporabljenih podatkov v predpomnilnik, namesto v podatkovno bazo,</li>
<li>poizvoedovanje po podatkovni baze le ob zgrešenem zadetku v predpomnilniku.</li>
</ul>
<p>V okviru razvojnega okolja Node.js imamo na voljo številne knjižnice za predpomnjenje, in sicer <a href="https://www.npmjs.com/package/node-cache"><i class="fa-brands fa-node-js"></i><code>node-cache</code></a>, <a href="https://www.npmjs.com/package/memcached"><span class="skupaj"><i class="fa-brands fa-node-js"></i><code>memcached</code></span></a>, <a href="https://www.npmjs.com/package/memory-cache"><i class="fa-brands fa-node-js"></i><code>memory-cache</code></a>, <a href="https://www.npmjs.com/package/redis"><i class="fa-brands fa-node-js"></i><code>redis</code></a>.</p>
</div>
<div id="stiskanje-koristne-vsebine" class="section level3 hasAnchor" number="7.6.4">
<h3><span class="header-section-number">7.6.4</span> Stiskanje koristne vsebine<a href="Swagger.html#stiskanje-koristne-vsebine" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Zahteve in odgovore lahko <strong>stisnemo</strong> z npr. uporabo <code>gzip</code> (glej sliko <a href="Swagger.html#fig:slika-API-stiskanje-koristne-vsebine">7.11</a>), kar posledično zmanjša količino prenesenih podatkov in pospeši branje in nalaganje podatkov.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-API-stiskanje-koristne-vsebine"></span>
<img src="assets/img/API_stiskanje_koristne_vsebine.png" alt="Stiskanje koristne vsebine" width="328" />
<p class="caption">
Slika 7.11: Stiskanje koristne vsebine
</p>
</div>
<p>Vpliv ukrepa:</p>
<ul>
<li>zmanjšanje velikosti podatkov in pospešitev prenosa ter nalaganja.</li>
</ul>
<p>V okviru razvojnega okolja Node.js in uporabljenega strežnika <a href="https://www.npmjs.com/package/express"><i class="fa-solid fa-layer-group"></i><code>express</code></a> lahko uporabimo knjižnico <a href="https://www.npmjs.com/package/compression"><span class="skupaj"><i class="fa-solid fa-layer-group"></i><code>compression</code></span></a> in jo enostavno vključimo, kot prikazuje spodnji izsek kode:</p>
<div class="sourceCode" id="cb531"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb531-1"><a href="Swagger.html#cb531-1" tabindex="-1"></a><span class="kw">const</span> compression <span class="op">=</span> <span class="pp">require</span>(<span class="st">&quot;compression&quot;</span>)<span class="op">;</span></span>
<span id="cb531-2"><a href="Swagger.html#cb531-2" tabindex="-1"></a><span class="op">...</span></span>
<span id="cb531-3"><a href="Swagger.html#cb531-3" tabindex="-1"></a><span class="kw">const</span> app <span class="op">=</span> <span class="fu">express</span>()<span class="op">;</span></span>
<span id="cb531-4"><a href="Swagger.html#cb531-4" tabindex="-1"></a>app<span class="op">.</span><span class="fu">use</span>(<span class="fu">compression</span>())<span class="op">;</span></span>
<span id="cb531-5"><a href="Swagger.html#cb531-5" tabindex="-1"></a><span class="op">...</span></span></code></pre></div>
</div>
<div id="bazen-povezav" class="section level3 hasAnchor" number="7.6.5">
<h3><span class="header-section-number">7.6.5</span> Bazen povezav<a href="Swagger.html#bazen-povezav" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Pri dostopu do virov moramo pogosto naložiti podatke iz podatkovne baze. Odpiranje in zapiranje povezav traja veliko časa, zato je smiselno pri dostopu do podatkovne baze uporabiti že odprte povezave v <strong>bazenu povezav</strong> <em>(angl. connection pool)</em> (glej sliko <a href="Swagger.html#fig:slika-API-bazen-povezav">7.12</a>), ki je odgovoren za upravljanje življenjskega cikla povezave.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slika-API-bazen-povezav"></span>
<img src="assets/img/API_bazen_povezav.png" alt="Bazen povezav" width="341" />
<p class="caption">
Slika 7.12: Bazen povezav
</p>
</div>
<p>Vplivi ukrepa:</p>
<ul>
<li>odpiranje in zapiranje povezav do podatkovne baze povroča nepotrebne stroške,</li>
<li>bazen povezav vzdržuje odprtih več povezav, ki jih lahko aplikacija ponovno uporabi.</li>
</ul>
<p>V okviru razvojnega okolja Node.js in uporabljeno ORM knjižnico <a href="https://teaching.lavbic.net/SP/2023-2024/mongoose"><i class="fa-solid fa-layer-group"></i><code>mongoose</code></a> je ta funkcionalnost že <a href="https://mongoosejs.com/docs/connections.html#connection_pools"><i class="fa-solid fa-earth-europe"></i>privzeto na voljo</a>.</p>
<h3>
Dodatno gradivo
</h3>
<table class="dodatnoGradivo">
<tr>
<td>
<p><img src="assets/img/Holmes_2019.jpg" width="200" style="display: block; margin: auto;" /></p>
</td>
<td>
<ul>
<li><strong>Getting MEAN with Mongo, Express, Angular, and Node</strong>, 2<sup>nd</sup> edition <span class="citation">(<a href="literatura.html#ref-holmes2019">Holmes and Herber 2019</a>)</span>
<ul>
<li><strong>Part 2</strong>: Building a Node web application
<ul>
<li><strong>Chapter 6</strong>: Writing a REST API: Exposing the MongoDB database to the application</li>
<li><strong>Chapter 7</strong>: Consuming a REST API: Using an API from inside Express</li>
</ul></li>
</ul></li>
</ul>
</td>
</tr>
</table>

</div>
</div>
</div>



<script type="text/javascript">
  $(document).ready(function() {
    
    $("a").click(function(e) {
      if (
        $(this).has(".fa-solid").length == 1 || 
        $(this).has(".fa-brands").length == 1 || 
        $(this).has(".fa-regular").length == 1 || 
        $(this).has("img.git").length == 1
      ) {
        e.preventDefault();
        window.open($(this).attr("href"), '_blank');
      }
    });
  });
</script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Q6109Y2092"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Q6109Y2092');
</script>
<h3><i class="fas fa-globe-europe" style="padding-right:5px"></i>Choose your language</h3>

<p>Students whose mother tongue is not Slovene can choose to <a onclick="loadGoogleTranslate()" class="google-translate-povezava"><i class="fas fa-sync-alt" style="padding-right:3px"></i>translate the contents of the script</a> into the selected language.</p>

<div id="google_translate_element"></div>

<script type="text/javascript">
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'sl', 
      includedLanguages: 'en,mk', 
      layout: google.translate.TranslateElement.InlineLayout.SIMPLE, 
      multilanguagePage: true
    }, 'google_translate_element');
  }
  
  function loadGoogleTranslate() {
    if ($("script[src='//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit']").length == 0) {
      var googleTranslateScript = document.createElement('script');
      googleTranslateScript.type = 'text/javascript';
      googleTranslateScript.async = true;
      googleTranslateScript.src = '//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0] ).appendChild(googleTranslateScript);    
    }
  }
  
  $(document).ready(function() {
    // Če gre za administrativno stran, potem skrij obrazec za komentarje
    $("h1:contains('Administracija'),h1:contains('Komentarji'),h1:contains('Analiza začetnega vprašalnika'),h1:contains('Lastni projekt'),h1:contains('pisni izpit'),h1:contains('Pisni izpiti')").filter(function() {
      $("h3:contains('Choose your language')").next().hide();
      $("h3:contains('Choose your language')").hide();
    });
  });
</script>
            </section>

          </div>
        </div>
      </div>
<a href="PB-REST-API.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="Angular.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="assets/lib/gitbook-2.6.7/js/app.min.js"></script>
<script src="assets/lib/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="assets/lib/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="assets/lib/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="assets/lib/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="assets/lib/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="assets/lib/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="assets/lib/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 1
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
